/*! For license information please see main.1b2c282f.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),s=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var N=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function j(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case b:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case _:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}var L=Array.isArray,R=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],z=-1;function F(e){return{current:e}}function $(e){0>z||(e.current=M[z],M[z]=null,z--)}function V(e,t){z++,M[z]=e.current,e.current=t}var U=F(null),q=F(null),B=F(null),H=F(null);function W(e,t){switch(V(B,t),V(q,e),V(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=sd(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}$(U),V(U,e)}function G(){$(U),$(q),$(B)}function K(e){null!==e.memoizedState&&V(H,e);var t=U.current,n=sd(t,e.type);t!==n&&(V(q,e),V(U,n))}function Q(e){q.current===e&&($(U),$(q)),H.current===e&&($(H),Kd._currentValue=O)}var X=Object.prototype.hasOwnProperty,Y=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ie=r.unstable_UserBlockingPriority,se=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function be(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var i=0,s=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~s)?i=be(r):0!==(o&=a)?i=be(o):n||0!==(n=a&~e)&&(i=be(n)):0!==(a=r&~s)?i=be(a):0!==o?i=be(o):n||0!==(n=r&~e)&&(i=be(n)),0===i?0:0!==t&&t!==i&&0===(t&s)&&((s=i&-i)>=(n=t&-t)||32===s&&0!==(4194048&n))?t:i}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function _e(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ee(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}function Ne(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Pe=Math.random().toString(36).slice(2),je="__reactFiber$"+Pe,Le="__reactProps$"+Pe,Re="__reactContainer$"+Pe,De="__reactEvents$"+Pe,Oe="__reactListeners$"+Pe,Me="__reactHandles$"+Pe,ze="__reactResources$"+Pe,Fe="__reactMarker$"+Pe;function $e(e){delete e[je],delete e[Le],delete e[De],delete e[Oe],delete e[Me]}function Ve(e){var t=e[je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[je]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=vd(e);null!==e;){if(n=e[je])return n;e=vd(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[je]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function qe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function Be(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Fe]=!0}var We=new Set,Ge={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Xe,Ye,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(i=t,X.call(et,i)||!X.call(Ze,i)&&(Je.test(i)?et[i]=!0:(Ze[i]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var i}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function it(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ye=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ye}var st=!1;function ot(e,t){if(!e||st)return"";st=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(i){var r=i}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var i=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");i&&i.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),o=s[0],a=s[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(i=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;i<c.length&&!c[i].includes("DetermineComponentFrameRoot");)i++;if(r===l.length||i===c.length)for(r=l.length-1,i=c.length-1;1<=r&&0<=i&&l[r]!==c[i];)i--;for(;1<=r&&0<=i;r--,i--)if(l[r]!==c[i]){if(1!==r||1!==i)do{if(r--,0>--i||l[r]!==c[i]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=i);break}}}finally{st=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?it(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return it(e.type);case 16:return it("Lazy");case 13:return it("Suspense");case 19:return it("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return it("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,i,s,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?bt(e,o,ct(t)):null!=n?bt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==i&&null!=s&&(e.defaultChecked=!!s),null!=i&&(e.checked=i&&"function"!==typeof i&&"symbol"!==typeof i),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,i,s,o,a){if(null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s&&(e.type=s),null!=t||null!=n){if(!("submit"!==s&&"reset"!==s||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:i)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function bt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function vt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(L(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Et(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var i in t)r=t[i],t.hasOwnProperty(i)&&n[i]!==r&&_t(e,i,r)}else for(var s in t)t.hasOwnProperty(s)&&_t(e,s,t[s])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Nt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Nt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Lt=null;function Rt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=r[Le]||null;if(!i)throw Error(o(90));gt(r,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&vt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Ot(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==jt||null!==Lt)&&(Vc(),jt&&(t=jt,e=Lt,Lt=jt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Le]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(zt)try{var $t={};Object.defineProperty($t,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",$t,$t),window.removeEventListener("test",$t,$t)}catch(Lh){Ft=!1}var Vt=null,Ut=null,qt=null;function Bt(){if(qt)return qt;var e,t,n=Ut,r=n.length,i="value"in Vt?Vt.value:Vt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return qt=i.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Gt(){return!1}function Kt(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Wt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Xt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Kt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Qt=e.screenX-Yt.screenX,Xt=e.screenY-Yt.screenY):Xt=Qt=0,Yt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Kt(nn),sn=Kt(h({},nn,{dataTransfer:0})),on=Kt(h({},en,{relatedTarget:0})),an=Kt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Kt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Kt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),bn=Kt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Kt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Kt(h({},Jt,{newState:0,oldState:0})),xn=[9,13,27,32],kn=zt&&"CompositionEvent"in window,Sn=null;zt&&"documentMode"in document&&(Sn=document.documentMode);var _n=zt&&"TextEvent"in window&&!Sn,En=zt&&(!kn||Sn&&8<Sn&&11>=Sn),Cn=String.fromCharCode(32),Tn=!1;function Nn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Ln(e,t,n,r){jt?Lt?Lt.push(r):Lt=[r]:jt=r,0<(t=Bu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Dn=null;function On(e){Ou(e,0)}function Mn(e){if(ht(qe(e)))return e}function zn(e,t){if("change"===e)return t}var Fn=!1;if(zt){var $n;if(zt){var Vn="oninput"in document;if(!Vn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),Vn="function"===typeof Un.oninput}$n=Vn}else $n=!1;Fn=$n&&(!document.documentMode||9<document.documentMode)}function qn(){Rn&&(Rn.detachEvent("onpropertychange",Bn),Dn=Rn=null)}function Bn(e){if("value"===e.propertyName&&Mn(Dn)){var t=[];Ln(t,Dn,e,Pt(e)),Ot(On,t)}}function Hn(e,t,n){"focusin"===e?(qn(),Dn=n,(Rn=t).attachEvent("onpropertychange",Bn)):"focusout"===e&&qn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Dn)}function Gn(e,t){if("click"===e)return Mn(t)}function Kn(e,t){if("input"===e||"change"===e)return Mn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!X.call(t,i)||!Qn(e[i],t[i]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=zt&&"documentMode"in document&&11>=document.documentMode,rr=null,ir=null,sr=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},sr&&Xn(sr,r)||(sr=r,0<(r=Bu(ir,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}zt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),br=hr("transitioncancel"),vr=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),Ke(t,[e])}xr.push("scrollEnd");var Sr=new WeakMap;function _r(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Er=[],Cr=0,Tr=0;function Nr(){for(var e=Cr,t=Tr=Cr=0;t<e;){var n=Er[t];Er[t++]=null;var r=Er[t];Er[t++]=null;var i=Er[t];Er[t++]=null;var s=Er[t];if(Er[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==s&&jr(n,i,s)}}function Ir(e,t,n,r){Er[Cr++]=e,Er[Cr++]=t,Er[Cr++]=n,Er[Cr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Ir(e,t,n,r),Lr(e)}function Pr(e,t){return Ir(e,null,null,t),Lr(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,s=e.return;null!==s;)s.childLanes|=n,null!==(r=s.alternate)&&(r.childLanes|=n),22===s.tag&&(null===(e=s.stateNode)||1&e._visibility||(i=!0)),e=s,s=s.return;return 3===e.tag?(s=e.stateNode,i&&null!==t&&(i=31-fe(n),null===(r=(e=s.hiddenUpdates)[i])?e[i]=[t]:r.push(t),t.lane=536870912|n),s):null}function Lr(e){if(50<jc)throw jc=0,Lc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new Dr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function $r(e,t,n,r,i,s){var a=0;if(r=e,"function"===typeof e)Mr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Or(31,n,t,i)).elementType=T,e.lanes=s,e;case g:return Vr(n.children,i,s,t);case y:a=8,i|=24;break;case b:return(e=Or(12,n,t,2|i)).elementType=b,e.lanes=s,e;case S:return(e=Or(13,n,t,i)).elementType=S,e.lanes=s,e;case _:return(e=Or(19,n,t,i)).elementType=_,e.lanes=s,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:case x:a=10;break e;case w:a=9;break e;case k:a=11;break e;case E:a=14;break e;case C:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Or(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Vr(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function qr(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Br=[],Hr=0,Wr=null,Gr=0,Kr=[],Qr=0,Xr=null,Yr=1,Jr="";function Zr(e,t){Br[Hr++]=Gr,Br[Hr++]=Wr,Wr=e,Gr=t}function ei(e,t,n){Kr[Qr++]=Yr,Kr[Qr++]=Jr,Kr[Qr++]=Xr,Xr=e;var r=Yr;e=Jr;var i=32-fe(r)-1;r&=~(1<<i),n+=1;var s=32-fe(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yr=1<<32-fe(t)+i|n<<i|r,Jr=s+e}else Yr=1<<s|n<<i|r,Jr=e}function ti(e){null!==e.return&&(Zr(e,1),ei(e,1,0))}function ni(e){for(;e===Wr;)Wr=Br[--Hr],Br[Hr]=null,Gr=Br[--Hr],Br[Hr]=null;for(;e===Xr;)Xr=Kr[--Qr],Kr[Qr]=null,Jr=Kr[--Qr],Kr[Qr]=null,Yr=Kr[--Qr],Kr[Qr]=null}var ri=null,ii=null,si=!1,oi=null,ai=!1,li=Error(o(519));function ci(e){throw mi(_r(Error(o(418,"")),e)),li}function ui(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[je]=e,t[Le]=r,n){case"dialog":Mu("cancel",t),Mu("close",t);break;case"iframe":case"object":case"embed":Mu("load",t);break;case"video":case"audio":for(n=0;n<Ru.length;n++)Mu(Ru[n],t);break;case"source":Mu("error",t);break;case"img":case"image":case"link":Mu("error",t),Mu("load",t);break;case"details":Mu("toggle",t);break;case"input":Mu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Mu("invalid",t);break;case"textarea":Mu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Mu("beforetoggle",t),Mu("toggle",t)),null!=r.onScroll&&Mu("scroll",t),null!=r.onScrollEnd&&Mu("scrollend",t),null!=r.onClick&&(t.onclick=Yu),t=!0):t=!1,t||ci(e)}function di(e){for(ri=e.return;ri;)switch(ri.tag){case 5:case 13:return void(ai=!1);case 27:case 3:return void(ai=!0);default:ri=ri.return}}function hi(e){if(e!==ri)return!1;if(!si)return di(e),si=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ii&&ci(e),di(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ii=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ii=null}}else 27===n?(n=ii,fd(e.type)?(e=bd,bd=null,ii=e):ii=n):ii=ri?yd(e.stateNode.nextSibling):null;return!0}function fi(){ii=ri=null,si=!1}function pi(){var e=oi;return null!==e&&(null===vc?vc=e:vc.push.apply(vc,e),oi=null),e}function mi(e){null===oi?oi=[e]:oi.push(e)}var gi=F(null),yi=null,bi=null;function vi(e,t,n){V(gi,t._currentValue),t._currentValue=n}function wi(e){e._currentValue=gi.current,$(gi)}function xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ki(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){var s=i.dependencies;if(null!==s){var a=i.child;s=s.firstContext;e:for(;null!==s;){var l=s;s=i;for(var c=0;c<t.length;c++)if(l.context===t[c]){s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),xi(s.return,n,e),r||(a=null);break e}s=l.next}}else if(18===i.tag){if(null===(a=i.return))throw Error(o(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),xi(a,n,e),a=null}else a=i.child;if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){i.return=a.return,a=i;break}a=a.return}i=a}}function Si(e,t,n,r){e=null;for(var i=t,s=!1;null!==i;){if(!s)if(0!==(524288&i.flags))s=!0;else if(0!==(262144&i.flags))break;if(10===i.tag){var a=i.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=i.type;Qn(i.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(i===H.current){if(null===(a=i.alternate))throw Error(o(387));a.memoizedState.memoizedState!==i.memoizedState.memoizedState&&(null!==e?e.push(Kd):e=[Kd])}i=i.return}null!==e&&ki(t,e,n,r),t.flags|=262144}function _i(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ei(e){yi=e,bi=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ci(e){return Ni(yi,e)}function Ti(e,t){return null===yi&&Ei(e),Ni(e,t)}function Ni(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===bi){if(null===e)throw Error(o(308));bi=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else bi=bi.next=t;return n}var Ii="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ai=r.unstable_scheduleCallback,Pi=r.unstable_NormalPriority,ji={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Li(){return{controller:new Ii,data:new Map,refCount:0}}function Ri(e){e.refCount--,0===e.refCount&&Ai(Pi,function(){e.controller.abort()})}var Di=null,Oi=0,Mi=0,zi=null;function Fi(){if(0===--Oi&&null!==Di){null!==zi&&(zi.status="fulfilled");var e=Di;Di=null,Mi=0,zi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var $i=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Di){var n=Di=[];Oi=0,Mi=Iu(),zi={status:"pending",value:void 0,then:function(e){n.push(e)}}}Oi++,t.then(Fi,Fi)}(0,t),null!==$i&&$i(e,t)};var Vi=F(null);function Ui(){var e=Vi.current;return null!==e?e:rc.pooledCache}function qi(e,t){V(Vi,null===t?Vi.current:t.pool)}function Bi(){var e=Ui();return null===e?null:{parent:ji._currentValue,pool:e}}var Hi=Error(o(460)),Wi=Error(o(474)),Gi=Error(o(542)),Ki={then:function(){}};function Qi(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xi(){}function Yi(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xi,Xi),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xi,Xi);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw es(e=t.reason),e}throw Ji=t,Hi}}var Ji=null;function Zi(){if(null===Ji)throw Error(o(459));var e=Ji;return Ji=null,e}function es(e){if(e===Hi||e===Gi)throw Error(o(483))}var ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function is(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ss(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Lr(e),jr(e,null,n),t}return Ir(e,r,t,n),Lr(e)}function os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function as(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var ls=!1;function cs(){if(ls){if(null!==zi)throw zi}}function us(e,t,n,r){ls=!1;var i=e.updateQueue;ts=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(sc&f)===f:(r&f)===f){0!==f&&f===Mi&&(ls=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(y,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ts=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=i.callbacks)?i.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(p=a).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null===s&&(i.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=d}}function ds(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)ds(n[e],t)}var fs=F(null),ps=F(0);function ms(e,t){V(ps,e=dc),V(fs,t),dc=e|t.baseLanes}function gs(){V(ps,dc),V(fs,fs.current)}function ys(){dc=ps.current,$(fs),$(ps)}var bs=0,vs=null,ws=null,xs=null,ks=!1,Ss=!1,_s=!1,Es=0,Cs=0,Ts=null,Ns=0;function Is(){throw Error(o(321))}function As(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Ps(e,t,n,r,i,s){return bs=s,vs=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Wo:Go,_s=!1,s=n(r,i),_s=!1,Ss&&(s=Ls(t,n,r,i)),js(e),s}function js(e){R.H=Ho;var t=null!==ws&&null!==ws.next;if(bs=0,xs=ws=vs=null,ks=!1,Cs=0,Ts=null,t)throw Error(o(300));null===e||Ta||null!==(e=e.dependencies)&&_i(e)&&(Ta=!0)}function Ls(e,t,n,r){vs=e;var i=0;do{if(Ss&&(Ts=null),Cs=0,Ss=!1,25<=i)throw Error(o(301));if(i+=1,xs=ws=null,null!=e.updateQueue){var s=e.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,null!=s.memoCache&&(s.memoCache.index=0)}R.H=Ko,s=t(n,r)}while(Ss);return s}function Rs(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?$s(t):t,e=e.useState()[0],(null!==ws?ws.memoizedState:null)!==e&&(vs.flags|=1024),t}function Ds(){var e=0!==Es;return Es=0,e}function Os(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Ms(e){if(ks){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ks=!1}bs=0,xs=ws=vs=null,Ss=!1,Cs=Es=0,Ts=null}function zs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xs?vs.memoizedState=xs=e:xs=xs.next=e,xs}function Fs(){if(null===ws){var e=vs.alternate;e=null!==e?e.memoizedState:null}else e=ws.next;var t=null===xs?vs.memoizedState:xs.next;if(null!==t)xs=t,ws=e;else{if(null===e){if(null===vs.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(ws=e).memoizedState,baseState:ws.baseState,baseQueue:ws.baseQueue,queue:ws.queue,next:null},null===xs?vs.memoizedState=xs=e:xs=xs.next=e}return xs}function $s(e){var t=Cs;return Cs+=1,null===Ts&&(Ts=[]),e=Yi(Ts,e,t),t=vs,null===(null===xs?t.memoizedState:xs.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Wo:Go),e}function Vs(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return $s(e);if(e.$$typeof===x)return Ci(e)}throw Error(o(438,String(e)))}function Us(e){var t=null,n=vs.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=vs.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},vs.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=N;return t.index++,n}function qs(e,t){return"function"===typeof t?t(e):t}function Bs(e){return Hs(Fs(),ws,e)}function Hs(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var i=e.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}t.baseQueue=i=s,r.pending=null}if(s=e.baseState,null===i)e.memoizedState=s;else{var l=a=null,c=null,u=t=i.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(sc&h)===h:(bs&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Mi&&(d=!0);else{if((bs&f)===f){u=u.next,f===Mi&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=s):c=c.next=h,vs.lanes|=f,fc|=f}h=u.action,_s&&n(s,h),s=u.hasEagerState?u.eagerState:n(s,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=s):c=c.next=f,vs.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=s:c.next=l,!Qn(s,e.memoizedState)&&(Ta=!0,d&&null!==(n=zi)))throw n;e.memoizedState=s,e.baseState=a,e.baseQueue=c,r.lastRenderedState=s}return null===i&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ws(e){var t=Fs(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);Qn(s,t.memoizedState)||(Ta=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Gs(e,t,n){var r=vs,i=Fs(),s=si;if(s){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Qn((ws||i).memoizedState,n);if(a&&(i.memoizedState=n,Ta=!0),i=i.queue,yo(2048,8,Xs.bind(null,r,i,e),[e]),i.getSnapshot!==t||a||null!==xs&&1&xs.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,i,n,t),null),null===rc)throw Error(o(349));s||0!==(124&bs)||Ks(r,t,n)}return n}function Ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vs.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},vs.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qs(e,t,n,r){t.value=n,t.getSnapshot=r,Ys(t)&&Js(e)}function Xs(e,t,n){return n(function(){Ys(t)&&Js(e)})}function Ys(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Js(e){var t=Pr(e,2);null!==t&&Oc(t,e,2)}function Zs(e){var t=zs();if("function"===typeof e){var n=e;if(e=n(),_s){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Hs(e,ws,"function"===typeof r?r:qs)}function to(e,t,n,r,i){if(Uo(e))throw Error(o(485));if(null!==(e=t.action)){var s={payload:i,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){s.listeners.push(e)}};null!==R.T?n(!0):s.isTransition=!1,r(s),null===(n=t.pending)?(s.next=t.pending=s,no(t,s)):(s.next=n.next,t.pending=n.next=s)}}function no(e,t){var n=t.action,r=t.payload,i=e.state;if(t.isTransition){var s=R.T,o={};R.T=o;try{var a=n(i,r),l=R.S;null!==l&&l(o,a),ro(e,t,a)}catch(c){so(e,t,c)}finally{R.T=s}}else try{ro(e,t,s=n(i,r))}catch(u){so(e,t,u)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){io(e,t,n)},function(n){return so(e,t,n)}):io(e,t,n)}function io(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function so(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(si){var n=rc.formState;if(null!==n){e:{var r=vs;if(si){if(ii){t:{for(var i=ii,s=ai;8!==i.nodeType;){if(!s){i=null;break t}if(null===(i=yd(i.nextSibling))){i=null;break t}}i="F!"===(s=i.data)||"F"===s?i:null}if(i){ii=yd(i.nextSibling),r="F!"===i.data;break e}}ci(r)}r=!1}r&&(t=n[0])}}return(n=zs()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=Fo.bind(null,vs,r),r.dispatch=n,r=Zs(!1),s=Vo.bind(null,vs,!1,r.queue),i={state:t,dispatch:null,action:e,pending:null},(r=zs()).queue=i,n=to.bind(null,vs,i,s,n),i.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(Fs(),ws,e)}function uo(e,t,n){if(t=Hs(e,t,ao)[0],e=Bs(qs)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=$s(t)}catch(o){if(o===Hi)throw Gi;throw o}else r=t;var i=(t=Fs()).queue,s=i.dispatch;return n!==t.memoizedState&&(vs.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,i,n),null)),[r,s,e]}function ho(e,t){e.action=t}function fo(e){var t=Fs(),n=ws;if(null!==n)return uo(t,n,e);Fs(),t=t.memoizedState;var r=(n=Fs()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=vs.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},vs.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mo(){return Fs().memoizedState}function go(e,t,n,r){var i=zs();r=void 0===r?null:r,vs.flags|=e,i.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var i=Fs();r=void 0===r?null:r;var s=i.memoizedState.inst;null!==ws&&null!==r&&As(r,ws.memoizedState.deps)?i.memoizedState=po(t,s,n,r):(vs.flags|=e,i.memoizedState=po(1|t,s,n,r))}function bo(e,t){go(8390656,8,e,t)}function vo(e,t){yo(2048,8,e,t)}function wo(e,t){return yo(4,2,e,t)}function xo(e,t){return yo(4,4,e,t)}function ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function So(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,ko.bind(null,t,e),n)}function _o(){}function Eo(e,t){var n=Fs();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&As(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Fs();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&As(t,r[1]))return r[0];if(r=e(),_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function To(e,t,n){return void 0===n||0!==(1073741824&bs)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),vs.lanes|=e,fc|=e,n)}function No(e,t,n,r){return Qn(n,t)?n:null!==fs.current?(e=To(e,n,r),Qn(e,t)||(Ta=!0),e):0===(42&bs)?(Ta=!0,e.memoizedState=n):(e=Dc(),vs.lanes|=e,fc|=e,t)}function Io(e,t,n,r,i){var s=D.p;D.p=0!==s&&8>s?s:8;var o=R.T,a={};R.T=a,Vo(e,!1,t,n);try{var l=i(),c=R.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)$o(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Rc());else $o(e,t,r,Rc())}catch(u){$o(e,t,{then:function(){},status:"rejected",reason:u},Rc())}finally{D.p=s,R.T=o}}function Ao(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var i=jo(e).queue;Io(e,i,t,O,null===n?Ao:function(){return Lo(e),n(r)})}function jo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Lo(e){$o(e,jo(e).next.queue,{},Rc())}function Ro(){return Ci(Kd)}function Do(){return Fs().memoizedState}function Oo(){return Fs().memoizedState}function Mo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Rc(),r=ss(t,e=is(n),n);return null!==r&&(Oc(r,t,n),os(r,t,n)),t={cache:Li()},void(e.payload=t)}t=t.return}}function zo(e,t,n){var r=Rc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Uo(e)?qo(t,n):null!==(n=Ar(e,t,n,r))&&(Oc(n,e,r),Bo(n,t,r))}function Fo(e,t,n){$o(e,t,n,Rc())}function $o(e,t,n,r){var i={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uo(e))qo(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Qn(a,o))return Ir(e,t,i,0),null===rc&&Nr(),!1}catch(l){}if(null!==(n=Ar(e,t,i,r)))return Oc(n,e,r),Bo(n,t,r),!0}return!1}function Vo(e,t,n,r){if(r={lane:2,revertLane:Iu(),action:r,hasEagerState:!1,eagerState:null,next:null},Uo(e)){if(t)throw Error(o(479))}else null!==(t=Ar(e,n,r,2))&&Oc(t,e,2)}function Uo(e){var t=e.alternate;return e===vs||null!==t&&t===vs}function qo(e,t){Ss=ks=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bo(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Ho={readContext:Ci,use:Vs,useCallback:Is,useContext:Is,useEffect:Is,useImperativeHandle:Is,useLayoutEffect:Is,useInsertionEffect:Is,useMemo:Is,useReducer:Is,useRef:Is,useState:Is,useDebugValue:Is,useDeferredValue:Is,useTransition:Is,useSyncExternalStore:Is,useId:Is,useHostTransitionStatus:Is,useFormState:Is,useActionState:Is,useOptimistic:Is,useMemoCache:Is,useCacheRefresh:Is},Wo={readContext:Ci,use:Vs,useCallback:function(e,t){return zs().memoizedState=[e,void 0===t?null:t],e},useContext:Ci,useEffect:bo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=zs();t=void 0===t?null:t;var r=e();if(_s){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zs();if(void 0!==n){var i=n(t);if(_s){he(!0);try{n(t)}finally{he(!1)}}}else i=t;return r.memoizedState=r.baseState=i,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:i},r.queue=e,e=e.dispatch=zo.bind(null,vs,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zs().memoizedState=e},useState:function(e){var t=(e=Zs(e)).queue,n=Fo.bind(null,vs,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:_o,useDeferredValue:function(e,t){return To(zs(),e,t)},useTransition:function(){var e=Zs(!1);return e=Io.bind(null,vs,e.queue,!0,!1),zs().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=vs,i=zs();if(si){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&sc)||Ks(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,bo(Xs.bind(null,r,s,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qs.bind(null,r,s,n,t),null),n},useId:function(){var e=zs(),t=rc.identifierPrefix;if(si){var n=Jr;t="\xab"+t+"R"+(n=(Yr&~(1<<32-fe(Yr)-1)).toString(32)+n),0<(n=Es++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ns++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ro,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=zs();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vo.bind(null,vs,!0,n),n.dispatch=t,[e,t]},useMemoCache:Us,useCacheRefresh:function(){return zs().memoizedState=Mo.bind(null,vs)}},Go={readContext:Ci,use:Vs,useCallback:Eo,useContext:Ci,useEffect:vo,useImperativeHandle:So,useInsertionEffect:wo,useLayoutEffect:xo,useMemo:Co,useReducer:Bs,useRef:mo,useState:function(){return Bs(qs)},useDebugValue:_o,useDeferredValue:function(e,t){return No(Fs(),ws.memoizedState,e,t)},useTransition:function(){var e=Bs(qs)[0],t=Fs().memoizedState;return["boolean"===typeof e?e:$s(e),t]},useSyncExternalStore:Gs,useId:Do,useHostTransitionStatus:Ro,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Fs(),0,e,t)},useMemoCache:Us,useCacheRefresh:Oo},Ko={readContext:Ci,use:Vs,useCallback:Eo,useContext:Ci,useEffect:vo,useImperativeHandle:So,useInsertionEffect:wo,useLayoutEffect:xo,useMemo:Co,useReducer:Ws,useRef:mo,useState:function(){return Ws(qs)},useDebugValue:_o,useDeferredValue:function(e,t){var n=Fs();return null===ws?To(n,e,t):No(n,ws.memoizedState,e,t)},useTransition:function(){var e=Ws(qs)[0],t=Fs().memoizedState;return["boolean"===typeof e?e:$s(e),t]},useSyncExternalStore:Gs,useId:Do,useHostTransitionStatus:Ro,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=Fs();return null!==ws?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Us,useCacheRefresh:Oo},Qo=null,Xo=0;function Yo(e){var t=Xo;return Xo+=1,null===Qo&&(Qo=[]),Yi(Qo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===C&&ea(s)===t.type)?(Jo(t=i(t,n.props),n),t.return=e,t):(Jo(t=$r(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=qr(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jo(n=$r(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=qr(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(L(t)||A(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Yo(t),n);if(t.$$typeof===x)return h(e,Ti(e,t),n);Zo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===i?c(e,t,n,r):null;case m:return n.key===i?u(e,t,n,r):null;case C:return f(e,t,n=(i=n._init)(n._payload),r)}if(L(n)||A(n))return null!==i?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Yo(n),r);if(n.$$typeof===x)return f(e,t,Ti(e,n),r);Zo(e,n)}return null}function y(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return y(e,t,n,r=(0,r._init)(r._payload),i)}if(L(r)||A(r))return d(t,e=e.get(n)||null,r,i,null);if("function"===typeof r.then)return y(e,t,n,Yo(r),i);if(r.$$typeof===x)return y(e,t,n,Ti(t,r),i);Zo(t,r)}return null}function b(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var v=u.key;null!==c;){if(c.key===v){if((v=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=i(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===C&&ea(v)===c.type){n(l,c.sibling),Jo(d=i(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Jo(d=$r(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case m:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=i(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=qr(u,l.mode,d)).return=l,l=d}return a(l);case C:return b(l,c,u=(v=u._init)(u._payload),d)}if(L(u))return function(i,o,a,l){for(var c=null,u=null,d=o,p=o=0,m=null;null!==d&&p<a.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(i,d,a[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(i,d),o=s(g,o,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===a.length)return n(i,d),si&&Zr(i,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(i,a[p],l))&&(o=s(d,o,p),null===u?c=d:u.sibling=d,u=d);return si&&Zr(i,p),c}for(d=r(d);p<a.length;p++)null!==(m=y(d,i,p,a[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),o=s(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(i,e)}),si&&Zr(i,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(v=A(u)))throw Error(o(150));return function(i,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,p=a,m=a=0,g=null,b=l.next();null!==p&&!b.done;m++,b=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=f(i,p,b.value,c);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=s(v,a,m),null===d?u=v:d.sibling=v,d=v,p=g}if(b.done)return n(i,p),si&&Zr(i,m),u;if(null===p){for(;!b.done;m++,b=l.next())null!==(b=h(i,b.value,c))&&(a=s(b,a,m),null===d?u=b:d.sibling=b,d=b);return si&&Zr(i,m),u}for(p=r(p);!b.done;m++,b=l.next())null!==(b=y(p,i,m,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?m:b.key),a=s(b,a,m),null===d?u=b:d.sibling=b,d=b);return e&&p.forEach(function(e){return t(i,e)}),si&&Zr(i,m),u}(l,c,u=v.call(u),d)}if("function"===typeof u.then)return b(l,c,Yo(u),d);if(u.$$typeof===x)return b(l,c,Ti(l,u),d);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=i(c,u)).return=l,l=d):(n(l,c),(d=Ur(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Xo=0;var i=b(e,t,n,r);return Qo=null,i}catch(o){if(o===Hi||o===Gi)throw o;var s=Or(29,o,null,e.mode);return s.lanes=r,s.return=e,s}}}var na=ta(!0),ra=ta(!1),ia=F(null),sa=null;function oa(e){var t=e.alternate;V(ua,1&ua.current),V(ia,e),null===sa&&(null===t||null!==fs.current||null!==t.memoizedState)&&(sa=e)}function aa(e){if(22===e.tag){if(V(ua,ua.current),V(ia,e),null===sa){var t=e.alternate;null!==t&&null!==t.memoizedState&&(sa=e)}}else la()}function la(){V(ua,ua.current),V(ia,ia.current)}function ca(e){$(ia),sa===e&&(sa=null),$(ua)}var ua=F(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rc(),i=is(r);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Oc(t,e,r),os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rc(),i=is(r);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=ss(e,i,r))&&(Oc(t,e,r),os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rc(),r=is(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ss(e,r,n))&&(Oc(t,e,n),os(t,e,n))}};function pa(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(i,s))}function ma(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var i in n===t&&(n=h({},n)),e)void 0===n[i]&&(n[i]=e[i]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function ba(e){ya(e)}function va(e){console.error(e)}function wa(e){ya(e)}function xa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Sa(e,t,n){return(n=is(n)).tag=3,n.payload={element:null},n.callback=function(){xa(e,t)},n}function _a(e){return(e=is(e)).tag=3,e}function Ea(e,t,n,r){var i=n.type.getDerivedStateFromError;if("function"===typeof i){var s=r.value;e.payload=function(){return i(s)},e.callback=function(){ka(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,r),"function"!==typeof i&&(null===_c?_c=new Set([this]):_c.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Ta=!1;function Na(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var s=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Ei(t),r=Ps(e,t,n,o,s,i),a=Ds(),null===e||Ta?(si&&a&&ti(t),t.flags|=1,Na(e,t,r,i),t.child):(Os(e,t,i),Qa(e,t,i))}function Aa(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mr(s)||void 0!==s.defaultProps||null!==n.compare?((e=$r(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Pa(e,t,s,r,i))}if(s=e.child,!Xa(e,i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,r)&&e.ref===t.ref)return Qa(e,t,i)}return t.flags|=1,(e=zr(s,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(Xn(s,r)&&e.ref===t.ref){if(Ta=!1,t.pendingProps=r=s,!Xa(e,i))return t.lanes=e.lanes,Qa(e,t,i);0!==(131072&e.flags)&&(Ta=!0)}}return Da(e,t,n,r,i)}function ja(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==s?s.baseLanes|n:n,null!==e){for(i=t.child=e.child,s=0;null!==i;)s=s|i.lanes|i.childLanes,i=i.sibling;t.childLanes=s&~r}else t.childLanes=0,t.child=null;return La(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,La(e,t,null!==s?s.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&qi(0,null!==s?s.cachePool:null),null!==s?ms(t,s):gs(),aa(t)}else null!==s?(qi(0,s.cachePool),ms(t,s),la(),t.memoizedState=null):(null!==e&&qi(0,null),gs(),la());return Na(e,t,i,n),t.child}function La(e,t,n,r){var i=Ui();return i=null===i?null:{parent:ji._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&qi(0,null),gs(),aa(t),null!==e&&Si(e,t,r,!0),null}function Ra(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Da(e,t,n,r,i){return Ei(t),n=Ps(e,t,n,r,void 0,i),r=Ds(),null===e||Ta?(si&&r&&ti(t),t.flags|=1,Na(e,t,n,i),t.child):(Os(e,t,i),Qa(e,t,i))}function Oa(e,t,n,r,i,s){return Ei(t),t.updateQueue=null,n=Ls(t,r,n,i),js(e),r=Ds(),null===e||Ta?(si&&r&&ti(t),t.flags|=1,Na(e,t,n,s),t.child):(Os(e,t,s),Qa(e,t,s))}function Ma(e,t,n,r,i){if(Ei(t),null===t.stateNode){var s=Rr,o=n.contextType;"object"===typeof o&&null!==o&&(s=Ci(o)),s=new n(r,s),t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=fa,t.stateNode=s,s._reactInternals=t,(s=t.stateNode).props=r,s.state=t.memoizedState,s.refs={},ns(t),o=n.contextType,s.context="object"===typeof o&&null!==o?Ci(o):Rr,s.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ha(t,n,o,r),s.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(o=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),o!==s.state&&fa.enqueueReplaceState(s,s.state,null),us(t,r,s,i),cs(),s.state=t.memoizedState),"function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){s=t.stateNode;var a=t.memoizedProps,l=ga(n,a);s.props=l;var c=s.context,u=n.contextType;o=Rr,"object"===typeof u&&null!==u&&(o=Ci(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a||c!==o)&&ma(t,s,r,o),ts=!1;var h=t.memoizedState;s.state=h,us(t,r,s,i),cs(),c=t.memoizedState,a||h!==c||ts?("function"===typeof d&&(ha(t,n,d,r),c=t.memoizedState),(l=ts||pa(t,n,l,r,h,c,o))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),s.props=r,s.state=c,s.context=o,r=l):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,rs(e,t),u=ga(n,o=t.memoizedProps),s.props=u,d=t.pendingProps,h=s.context,c=n.contextType,l=Rr,"object"===typeof c&&null!==c&&(l=Ci(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&ma(t,s,r,l),ts=!1,h=t.memoizedState,s.state=h,us(t,r,s,i),cs();var f=t.memoizedState;o!==d||h!==f||ts||null!==e&&null!==e.dependencies&&_i(e.dependencies)?("function"===typeof a&&(ha(t,n,a,r),f=t.memoizedState),(u=ts||pa(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&_i(e.dependencies))?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return s=r,Ra(e,t),r=0!==(128&t.flags),s||r?(s=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:s.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,i),t.child=na(t,null,n,i)):Na(e,t,n,i),t.memoizedState=s.state,e=t.child):e=Qa(e,t,i),e}function za(e,t,n,r){return fi(),t.flags|=256,Na(e,t,n,r),t.child}var Fa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $a(e){return{baseLanes:e,cachePool:Bi()}}function Va(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ua(e,t,n){var r,i=t.pendingProps,s=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(s=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(si){if(s?oa(t):la(),si){var l,c=ii;if(l=c){e:{for(l=c,c=ai;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,ri=t,ii=null,l=!0):l=!1}l||ci(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=i.children,i=i.fallback,s?(la(),c=Ba({mode:"hidden",children:c},s=t.mode),i=Vr(i,s,n,null),c.return=t,i.return=t,c.sibling=i,t.child=c,(s=t.child).memoizedState=$a(n),s.childLanes=Va(e,r,n),t.memoizedState=Fa,i):(oa(t),qa(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),s=i.fallback,c=t.mode,i=Ba({mode:"visible",children:i.children},c),(s=Vr(s,c,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,na(t,e.child,null,n),(i=t.child).memoizedState=$a(n),i.childLanes=Va(e,r,n),t.memoizedState=Fa,t=s);else if(oa(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(i=Error(o(419))).stack="",i.digest=r,mi({value:i,source:null,stack:null}),t=Ha(e,t,n)}else if(Ta||Si(e,t,n,!1),r=0!==(n&e.childLanes),Ta||r){if(null!==(r=rc)&&(0!==(i=0!==((i=0!==(42&(i=n&-n))?1:Ne(i))&(r.suspendedLanes|n))?0:i)&&i!==l.retryLane))throw l.retryLane=i,Pr(e,i),Oc(r,e,i),Ca;"$?"===c.data||Gc(),t=Ha(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ii=yd(c.nextSibling),ri=t,si=!0,oi=null,ai=!1,null!==e&&(Kr[Qr++]=Yr,Kr[Qr++]=Jr,Kr[Qr++]=Xr,Yr=e.id,Jr=e.overflow,Xr=t),(t=qa(t,i.children)).flags|=4096);return t}return s?(la(),s=i.fallback,c=t.mode,u=(l=e.child).sibling,(i=zr(l,{mode:"hidden",children:i.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?s=zr(u,s):(s=Vr(s,c,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,null===(c=e.child.memoizedState)?c=$a(n):(null!==(l=c.cachePool)?(u=ji._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Bi(),c={baseLanes:c.baseLanes|n,cachePool:l}),s.memoizedState=c,s.childLanes=Va(e,r,n),t.memoizedState=Fa,i):(oa(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:i.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function qa(e,t){return(t=Ba({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ba(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return na(t,e.child,null,n),(e=qa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xi(e.return,t,n)}function Ga(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ka(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Na(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(ua,r),i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ga(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===da(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ga(t,!0,n,null,s);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Si(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!_i(e))}function Ya(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ta=!0;else{if(!Xa(e,n)&&0===(128&t.flags))return Ta=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),vi(0,ji,e.memoizedState.cache),fi();break;case 27:case 5:K(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:vi(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(oa(t),null!==(e=Qa(e,t,n))?e.sibling:null);oa(t);break;case 19:var i=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Si(e,t,n,!1),r=0!==(n&t.childLanes)),i){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),V(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,ja(e,t,n);case 24:vi(0,ji,e.memoizedState.cache)}return Qa(e,t,n)}(e,t,n);Ta=0!==(131072&e.flags)}else Ta=!1,si&&0!==(1048576&t.flags)&&ei(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,i=r._init;if(r=i(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((i=r.$$typeof)===k){t.tag=11,t=Ia(null,t,r,e,n);break e}if(i===E){t.tag=14,t=Aa(null,t,r,e,n);break e}}throw t=j(r)||r,Error(o(306,t,""))}Mr(r)?(e=ga(r,e),t.tag=1,t=Ma(null,t,r,e,n)):(t.tag=0,t=Da(null,t,r,e,n))}return t;case 0:return Da(e,t,t.type,t.pendingProps,n);case 1:return Ma(e,t,r=t.type,i=ga(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var s=t.memoizedState;i=s.element,rs(e,t),us(t,r,null,n);var a=t.memoizedState;if(r=a.cache,vi(0,ji,r),r!==s.cache&&ki(t,[ji],n,!0),cs(),r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=za(e,t,r,n);break e}if(r!==i){mi(i=_r(Error(o(424)),t)),t=za(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ii=yd(e.firstChild),ri=t,si=!0,oi=null,ai=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===i){t=Qa(e,t,n);break e}Na(e,t,r,n)}t=t.child}return t;case 26:return Ra(e,t),null===e?(n=Nd(t.type,null,t.pendingProps,null))?t.memoizedState=n:si||(n=t.type,e=t.pendingProps,(r=rd(B.current).createElement(n))[je]=t,r[Le]=e,ed(r,n,e),He(r),t.stateNode=r):t.memoizedState=Nd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&si&&(r=t.stateNode=wd(t.type,t.pendingProps,B.current),ri=t,ai=!0,i=ii,fd(t.type)?(bd=i,ii=yd(r.firstChild)):ii=i),Na(e,t,t.pendingProps.children,n),Ra(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&si&&((i=r=ii)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var i=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(s=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(s!==i.rel||e.getAttribute("href")!==(null==i.href||""===i.href?null:i.href)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin)||e.getAttribute("title")!==(null==i.title?null:i.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((s=e.getAttribute("src"))!==(null==i.src?null:i.src)||e.getAttribute("type")!==(null==i.type?null:i.type)||e.getAttribute("crossorigin")!==(null==i.crossOrigin?null:i.crossOrigin))&&s&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var s=null==i.name?null:""+i.name;if("hidden"===i.type&&e.getAttribute("name")===s)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ai))?(t.stateNode=r,ri=t,ii=yd(r.firstChild),ai=!1,i=!0):i=!1),i||ci(t)),K(t),i=t.type,s=t.pendingProps,a=null!==e?e.memoizedProps:null,r=s.children,od(i,s)?r=null:null!==a&&od(i,a)&&(t.flags|=32),null!==t.memoizedState&&(i=Ps(e,t,Rs,null,null,n),Kd._currentValue=i),Ra(e,t),Na(e,t,r,n),t.child;case 6:return null===e&&si&&((e=n=ii)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,ai))?(t.stateNode=n,ri=t,ii=null,e=!0):e=!1),e||ci(t)),null;case 13:return Ua(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):Na(e,t,r,n),t.child;case 11:return Ia(e,t,t.type,t.pendingProps,n);case 7:return Na(e,t,t.pendingProps,n),t.child;case 8:case 12:return Na(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,vi(0,t.type,r.value),Na(e,t,r.children,n),t.child;case 9:return i=t.type._context,r=t.pendingProps.children,Ei(t),r=r(i=Ci(i)),t.flags|=1,Na(e,t,r,n),t.child;case 14:return Aa(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ka(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ba(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ja(e,t,n);case 24:return Ei(t),r=Ci(ji),null===e?(null===(i=Ui())&&(i=rc,s=Li(),i.pooledCache=s,s.refCount++,null!==s&&(i.pooledCacheLanes|=n),i=s),t.memoizedState={parent:r,cache:i},ns(t),vi(0,ji,i)):(0!==(e.lanes&n)&&(rs(e,t),us(t,null,null,n),cs()),i=e.memoizedState,s=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),vi(0,ji,r)):(r=s.cache,vi(0,ji,r),r!==i.cache&&ki(t,[ji],n,!0))),Na(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Vd(t)){if(null!==(t=ia.current)&&((4194048&sc)===sc?null!==sa:(62914560&sc)!==sc&&0===(536870912&sc)||t!==sa))throw Ji=Ki,Wi;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=65011712&i.subtreeFlags,r|=65011712&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),wi(ji),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hi(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,pi())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=B.current;var i=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=U.current,hi(t)?ui(t):(e=wd(i,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=U.current,hi(t))ui(t);else{switch(i=rd(B.current),e){case 1:e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=i.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=i.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?i.createElement(n,{is:r.is}):i.createElement(n)}}e[je]=t,e[Le]=r;e:for(i=t.child;null!==i;){if(5===i.tag||6===i.tag)e.appendChild(i.stateNode);else if(4!==i.tag&&27!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;null===i.sibling;){if(null===i.return||i.return===t)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=B.current,hi(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(i=ri))switch(i.tag){case 27:case 5:r=i.memoizedProps}e[je]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||ci(t)}else(e=rd(e).createTextNode(r))[je]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(i=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[je]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),i=!1}else i=pi(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=i),i=!0;if(!i)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){i=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(i=r.alternate.memoizedState.cachePool.pool);var s=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(s=r.memoizedState.cachePool.pool),s!==i&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&$u(t.stateNode.containerInfo),nl(t),null;case 10:return wi(t.type),nl(t),null;case 19:if($(ua),null===(i=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(s=i.rendering))if(r)tl(i,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=da(e))){for(t.flags|=128,tl(i,!1),e=s.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return V(ua,1&ua.current|2),t.child}e=e.sibling}null!==i.tail&&te()>kc&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(s))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!s.alternate&&!si)return nl(t),null}else 2*te()-i.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,tl(i,!1),t.lanes=4194304);i.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=i.last)?e.sibling=s:t.child=s,i.last=s)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=te(),t.sibling=null,e=ua.current,V(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),ys(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&$(Vi),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),wi(ji),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function il(e,t){switch(ni(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return wi(ji),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return $(ua),null;case 4:return G(),null;case 10:return wi(t.type),null;case 22:case 23:return ca(t),ys(),null!==e&&$(Vi),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return wi(ji),null;default:return null}}function sl(e,t){switch(ni(t),t.tag){case 3:wi(ji),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:ca(t);break;case 19:$(ua);break;case 10:wi(t.type);break;case 22:case 23:ca(t),ys(),null!==e&&$(Vi);break;case 24:wi(ji)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var i=r.next;n=i;do{if((n.tag&e)===e){r=void 0;var s=n.create,o=n.inst;r=s(),o.destroy=r}n=n.next}while(n!==i)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,i=null!==r?r.lastEffect:null;if(null!==i){var s=i.next;r=s;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,i=t;var l=n,c=a;try{c()}catch(u){uu(i,l,u)}}}r=r.next}while(r!==s)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hs(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(i){uu(e,t,i)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(i){uu(e,t,i)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(s){uu(e,t,s)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(i){uu(e,e.return,i)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var i=null,s=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Ju(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":s=p;break;case"name":i=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Ju(e,t,f,p,r,h)}}return void gt(e,a,l,c,u,d,s,i);case"select":for(s in p=a=l=f=null,n)if(c=n[s],n.hasOwnProperty(s)&&null!=c)switch(s){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(s)||Ju(e,t,s,null,r,c)}for(i in r)if(s=r[i],c=n[i],r.hasOwnProperty(i)&&(null!=s||null!=c))switch(i){case"value":f=s;break;case"defaultValue":l=s;break;case"multiple":a=s;default:s!==c&&Ju(e,t,i,s,r,c)}return t=l,n=a,r=p,void(null!=f?vt(e,!!n,f,!1):!!r!==!!n&&(null!=t?vt(e,!!n,t,!0):vt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(i=n[l],n.hasOwnProperty(l)&&null!=i&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,i)}for(a in r)if(i=r[a],s=n[a],r.hasOwnProperty(a)&&(null!=i||null!=s))switch(a){case"value":f=i;break;case"defaultValue":p=i;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=i)throw Error(o(91));break;default:i!==s&&Ju(e,t,a,i,r,s)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ju(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ju(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Ju(e,t,u,f,r,p)}return;default:if(Ct(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zu(e,t,d,f,r,p);return}}for(var b in n)f=n[b],n.hasOwnProperty(b)&&null!=f&&!r.hasOwnProperty(b)&&Ju(e,t,b,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Ju(e,t,h,f,r,p)}(r,e.type,n,t),r[Le]=t}catch(i){uu(e,e.return,i)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yu));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ed(t,r,n),t[je]=e,t[Le]=n}catch(s){uu(e,e.return,s)}}var vl=!1,wl=!1,xl=!1,kl="function"===typeof WeakSet?WeakSet:Set,Sl=null;function _l(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ml(e,n),4&r&&ol(5,n);break;case 1:if(Ml(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var i=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ml(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hs(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Ml(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ml(e,n);break;case 13:Ml(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||vl)){t=null!==t&&null!==t.memoizedState||wl,i=vl;var s=wl;vl=r,(wl=t)&&!s?Fl(e,n,0!==(8772&n.subtreeFlags)):Ml(e,n),vl=i,wl=s}break;case 30:break;default:Ml(e,n)}}function El(e){var t=e.alternate;null!==t&&(e.alternate=null,El(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&$e(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Tl=!1;function Nl(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(s){}switch(n.tag){case 26:wl||dl(n,t),Nl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Cl,i=Tl;fd(n.type)&&(Cl=n.stateNode,Tl=!1),Nl(e,t,n),xd(n.stateNode),Cl=r,Tl=i;break;case 5:wl||dl(n,t);case 6:if(r=Cl,i=Tl,Cl=null,Nl(e,t,n),Tl=i,null!==(Cl=r))if(Tl)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Cl&&(Tl?(pd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Th(e)):pd(Cl,n.stateNode));break;case 4:r=Cl,i=Tl,Cl=n.stateNode.containerInfo,Tl=!0,Nl(e,t,n),Cl=r,Tl=i;break;case 0:case 11:case 14:case 15:wl||al(2,n,t),wl||al(4,n,t),Nl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Nl(e,t,n);break;case 21:Nl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Nl(e,t,n),wl=r;break;default:Nl(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Th(e)}catch(n){uu(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function jl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r],s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Cl=l.stateNode,Tl=!1;break e}break;case 5:Cl=l.stateNode,Tl=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Tl=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Il(s,a,i),Cl=null,Tl=!1,null!==(s=i.alternate)&&(s.return=null),i.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Ll=null;function Rl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jl(t,e),Dl(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&vl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var i=Ll;if(jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var s=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,i=i.ownerDocument||i;t:switch(r){case"title":(!(s=i.getElementsByTagName("title")[0])||s[Fe]||s[je]||"http://www.w3.org/2000/svg"===s.namespaceURI||s.hasAttribute("itemprop"))&&(s=i.createElement(r),i.head.insertBefore(s,i.querySelector("head > title"))),ed(s,r,n),s[je]=e,He(s),r=s;break e;case"link":var a=Fd("link","href",i).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((s=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&s.getAttribute("rel")===(null==n.rel?null:n.rel)&&s.getAttribute("title")===(null==n.title?null:n.title)&&s.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;case"meta":if(a=Fd("meta","content",i).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((s=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&s.getAttribute("name")===(null==n.name?null:n.name)&&s.getAttribute("property")===(null==n.property?null:n.property)&&s.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&s.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}ed(s=i.createElement(r),r,n),i.head.appendChild(s);break;default:throw Error(o(468,r))}s[je]=e,He(s),r=s}e.stateNode=r}else $d(i,e.type,e.stateNode);else e.stateNode=Rd(i,r,e.memoizedProps);else s!==r?(null===s?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):s.count--,null===r?$d(i,e.type,e.stateNode):Rd(i,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){i=e.stateNode;try{kt(i,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,i=e.memoizedProps,null!==n?n.memoizedProps:i),1024&r&&(xl=!0);break;case 6:if(jl(t,e),Dl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(zd=null,i=Ll,Ll=_d(t.containerInfo),jl(t,e),Ll=i,Dl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Th(t.containerInfo)}catch(p){uu(e,e.return,p)}xl&&(xl=!1,Ol(e));break;case 4:r=Ll,Ll=_d(e.stateNode.containerInfo),jl(t,e),Dl(e),Ll=r;break;case 12:default:jl(t,e),Dl(e);break;case 13:jl(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:i=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=vl,d=wl;if(vl=u||i,wl=d||c,jl(t,e),wl=d,vl=u,Dl(e),8192&r)e:for(t=e.stateNode,t._visibility=i?-2&t._visibility:1|t._visibility,i&&(null===n||c||vl||wl||zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(s=c.stateNode,i)"function"===typeof(a=s.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=i?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:jl(t,e),Dl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var i=n.stateNode;yl(e,ml(e),i);break;case 5:var s=n.stateNode;32&n.flags&&(kt(s,""),n.flags&=-33),yl(e,ml(e),s);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,ml(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ol(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ol(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)_l(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),zl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),zl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),zl(t);break;case 22:null===t.memoizedState&&zl(t);break;default:zl(t)}e=e.sibling}}function Fl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,s=t,o=s.flags;switch(s.tag){case 0:case 11:case 15:Fl(i,s,n),ol(4,s);break;case 1:if(Fl(i,s,n),"function"===typeof(i=(r=s).stateNode).componentDidMount)try{i.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(i=(r=s).updateQueue)){var a=r.stateNode;try{var l=i.shared.hiddenCallbacks;if(null!==l)for(i.shared.hiddenCallbacks=null,i=0;i<l.length;i++)ds(l[i],a)}catch(c){uu(r,r.return,c)}}n&&64&o&&ll(s),ul(s,s.return);break;case 27:bl(s);case 26:case 5:Fl(i,s,n),n&&null===r&&4&o&&hl(s),ul(s,s.return);break;case 12:Fl(i,s,n);break;case 13:Fl(i,s,n),n&&4&o&&Al(i,s);break;case 22:null===s.memoizedState&&Fl(i,s,n),ul(s,s.return);break;case 30:break;default:Fl(i,s,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ri(n))}function Vl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ri(e))}function Ul(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)ql(e,t,n,r),t=t.sibling}function ql(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,n,r),2048&i&&ol(9,t);break;case 1:case 13:default:Ul(e,t,n,r);break;case 3:Ul(e,t,n,r),2048&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ri(e)));break;case 12:if(2048&i){Ul(e,t,n,r),e=t.stateNode;try{var s=t.memoizedProps,o=s.id,a=s.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Ul(e,t,n,r);break;case 23:break;case 22:s=t.stateNode,o=t.alternate,null!==t.memoizedState?2&s._visibility?Ul(e,t,n,r):Hl(e,t):2&s._visibility?Ul(e,t,n,r):(s._visibility|=2,Bl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&i&&$l(o,t);break;case 24:Ul(e,t,n,r),2048&i&&Vl(t.alternate,t)}}function Bl(e,t,n,r,i){for(i=i&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var s=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Bl(s,o,a,l,i),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Bl(s,o,a,l,i):Hl(s,o):(u._visibility|=2,Bl(s,o,a,l,i)),i&&2048&c&&$l(o.alternate,o);break;case 24:Bl(s,o,a,l,i),i&&2048&c&&Vl(o.alternate,o);break;default:Bl(s,o,a,l,i)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Hl(n,r),2048&i&&$l(r.alternate,r);break;case 24:Hl(n,r),2048&i&&Vl(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var Wl=8192;function Gl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Gl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===Ud)throw Error(o(475));var r=Ud;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var i=Id(n.href),s=e.querySelector(Ad(i));if(s)return null!==(e=s._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Bd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=s,void He(s);s=e.ownerDocument||e,n=Pd(n),(i=kd.get(i))&&Od(n,i),He(s=s.createElement("link"));var a=s;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ed(s,"link",n),t.instance=s}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Bd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Ll;Ll=_d(e.stateNode.containerInfo),Gl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Gl(e),Wl=t):Gl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Xl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ri(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var i=(r=Sl).sibling,s=r.return;if(El(r),r===n){Sl=null;break e}if(null!==i){i.return=s,Sl=i;break e}Sl=s}}}var ec={getCacheForType:function(e){var t=Ci(ji),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,ic=null,sc=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,pc=0,mc=0,gc=0,yc=0,bc=null,vc=null,wc=!1,xc=0,kc=1/0,Sc=null,_c=null,Ec=0,Cc=null,Tc=null,Nc=0,Ic=0,Ac=null,Pc=null,jc=0,Lc=null;function Rc(){if(0!==(2&nc)&&0!==sc)return sc&-sc;if(null!==R.T){return 0!==Mi?Mi:Iu()}return Ae()}function Dc(){0===gc&&(gc=0===(536870912&sc)||si?ke():536870912);var e=ia.current;return null!==e&&(e.flags|=32),gc}function Oc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(qc(e,0),$c(e,sc,gc,!1)),Ee(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===hc&&$c(e,sc,gc,!1)),ku(e))}function Mc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),i=r?function(e,t){var n=nc;nc|=2;var r=Hc(),i=Wc();rc!==e||sc!==t?(Sc=null,kc=te()+500,qc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var s=ac;t:switch(oc){case 1:oc=0,ac=null,Zc(e,t,s,1);break;case 2:case 9:if(Qi(s)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),ku(e)},s.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Qi(s)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,Zc(e,t,s,7));break;case 5:var a=null;switch(ic.tag){case 26:a=ic.memoizedState;case 5:case 27:var l=ic;if(!a||Vd(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,eu(u)):ic=null}break t}}oc=0,ac=null,Zc(e,t,s,5);break;case 6:oc=0,ac=null,Zc(e,t,s,6);break;case 8:Uc(),hc=6;break e;default:throw Error(o(462))}}Xc();break}catch(d){Bc(e,d)}return bi=yi=null,R.H=r,R.A=i,nc=n,null!==ic?0:(rc=null,sc=0,Nr(),hc)}(e,t):Kc(e,t,!0),s=r;;){if(0===i){cc&&!r&&$c(e,t,0,!1);break}if(n=e.current.alternate,!s||Fc(n)){if(2===i){if(s=t,e.errorRecoveryDisabledLanes&s)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;i=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(qc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=s,pc|=s,i=4;break e}s=vc,vc=i,null!==s&&(null===vc?vc=s:vc.push.apply(vc,s))}i=a}if(s=!1,2!==i)continue}}if(1===i){qc(e,0),$c(e,t,0,!0);break}e:{switch(r=e,s=i){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:$c(r,t,gc,!lc);break e;case 2:vc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(i=xc+300-te())){if($c(r,t,gc,!lc),0!==ve(r,0,!0))break e;r.timeoutHandle=ld(zc.bind(null,r,n,vc,Sc,wc,t,gc,pc,yc,lc,s,2,-0,0),i)}else zc(r,n,vc,Sc,wc,t,gc,pc,yc,lc,s,0,-0,0)}break}i=Kc(e,t,!1),s=!1}ku(e)}function zc(e,t,n,r,i,s,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Ud={stylesheets:null,count:0,unsuspend:qd},Kl(t),null!==(h=function(){if(null===Ud)throw Error(o(475));var e=Ud;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,s,n,r,i,a,l,c,d,1,f,p)),void $c(e,s,a,!u);nu(e,t,s,n,r,i,a,l,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Qn(s(),i))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $c(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var i=t;0<i;){var s=31-fe(i),o=1<<s;r[s]=-1,i&=~o}0!==n&&Ce(e,n,t)}function Vc(){return 0!==(6&nc)||(Su(0,!1),!1)}function Uc(){if(null!==ic){if(0===oc)var e=ic.return;else bi=yi=null,Ms(e=ic),Qo=null,Xo=0,e=ic;for(;null!==e;)sl(e.alternate,e),e=e.return;ic=null}}function qc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc(),rc=e,ic=n=zr(e.current,null),sc=t,oc=0,ac=null,lc=!1,cc=we(e,t),uc=!1,yc=gc=mc=pc=fc=hc=0,vc=bc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var i=31-fe(r),s=1<<i;t|=e[i],r&=~s}return dc=t,Nr(),n}function Bc(e,t){vs=null,R.H=Ho,t===Hi||t===Gi?(t=Zi(),oc=3):t===Wi?(t=Zi(),oc=4):oc=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===ic&&(hc=1,xa(e,_r(t,e.current)))}function Hc(){var e=R.H;return R.H=Ho,null===e?Ho:e}function Wc(){var e=R.A;return R.A=ec,e}function Gc(){hc=4,lc||(4194048&sc)!==sc&&null!==ia.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||$c(rc,sc,gc,!1)}function Kc(e,t,n){var r=nc;nc|=2;var i=Hc(),s=Wc();rc===e&&sc===t||(Sc=null,qc(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==oc&&null!==ic){var a=ic,l=ac;switch(oc){case 8:Uc(),o=6;break e;case 3:case 2:case 9:case 6:null===ia.current&&(t=!0);var c=oc;if(oc=0,ac=null,Zc(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,Zc(e,a,l,c)}}Qc(),o=hc;break}catch(u){Bc(e,u)}return t&&e.shellSuspendCounter++,bi=yi=null,nc=r,R.H=i,R.A=s,null===ic&&(rc=null,sc=0,Nr()),o}function Qc(){for(;null!==ic;)Yc(ic)}function Xc(){for(;null!==ic&&!Z();)Yc(ic)}function Yc(e){var t=Ya(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Oa(n,t,t.pendingProps,t.type,void 0,sc);break;case 11:t=Oa(n,t,t.pendingProps,t.type.render,t.ref,sc);break;case 5:Ms(t);default:sl(n,t),t=Ya(n,t=ic=Fr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):ic=t}function Zc(e,t,n,r){bi=yi=null,Ms(t),Qo=null,Xo=0;var i=t.return;try{if(function(e,t,n,r,i){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Si(t,n,i,!0),null!==(n=ia.current)){switch(n.tag){case 13:return null===sa?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=i,r===Ki?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,i)),!1;case 22:return n.flags|=65536,r===Ki?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,i)),!1}throw Error(o(435,n.tag))}return du(e,r,i),Gc(),!1}if(si)return null!==(t=ia.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=i,r!==li&&mi(_r(e=Error(o(422),{cause:r}),n))):(r!==li&&mi(_r(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,i&=-i,e.lanes|=i,r=_r(r,n),as(e,i=Sa(e.stateNode,r,i)),4!==hc&&(hc=2)),!1;var s=Error(o(520),{cause:r});if(s=_r(s,n),null===bc?bc=[s]:bc.push(s),4!==hc&&(hc=2),null===t)return!0;r=_r(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=i&-i,n.lanes|=e,as(n,e=Sa(n.stateNode,r,e)),!1;case 1:if(t=n.type,s=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==s&&"function"===typeof s.componentDidCatch&&(null===_c||!_c.has(s))))return n.flags|=65536,i&=-i,n.lanes|=i,Ea(i=_a(i),e,n,r),as(n,i),!1}n=n.return}while(null!==n);return!1}(e,i,t,n,sc))return hc=1,xa(e,_r(n,e.current)),void(ic=null)}catch(s){if(null!==i)throw ic=i,s;return hc=1,xa(e,_r(n,e.current)),void(ic=null)}32768&t.flags?(si||1===r?e=!0:cc||0!==(536870912&sc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ia.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);hc=6,ic=null}function nu(e,t,n,r,i,s,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Ec);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(s=t.lanes|t.childLanes,function(e,t,n,r,i,s){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==s&&0===i&&0!==e.tag&&(e.suspendedLanes|=s&~(o&~t))}(e,n,s|=Tr,a,l,c),e===rc&&(ic=rc=null,sc=0),Tc=t,Cc=e,Nc=n,Ic=s,Ac=i,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Y(se,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,i=D.p,D.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===s&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(s=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==s){e=void 0,n=t,i=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var m=ga(n.type,i,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,s),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nc=a,D.p=i,R.T=r}}Ec=1,ru(),iu(),su()}}function ru(){if(1===Ec){Ec=0;var e=Cc,t=Tc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=D.p;D.p=2;var i=nc;nc|=4;try{Rl(t,e);var s=nd,o=er(e.containerInfo),a=s.focusedElem,l=s.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=Jn(a,m),b=Jn(a,g);if(y&&b&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==b.node||f.focusOffset!==b.offset)){var v=d.createRange();v.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(v),f.extend(b.node,b.offset)):(v.setEnd(b.node,b.offset),f.addRange(v))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=i,D.p=r,R.T=n}}e.current=t,Ec=2}}function iu(){if(2===Ec){Ec=0;var e=Cc,t=Tc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=D.p;D.p=2;var i=nc;nc|=4;try{_l(e,t.alternate,t)}finally{nc=i,D.p=r,R.T=n}}Ec=3}}function su(){if(4===Ec||3===Ec){Ec=0,ee();var e=Cc,t=Tc,n=Nc,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Ec=5:(Ec=0,Tc=Cc=null,ou(e,e.pendingLanes));var i=e.pendingLanes;if(0===i&&(_c=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,i=D.p,D.p=2,R.T=null;try{for(var s=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];s(a.value,{componentStack:a.stack})}}finally{R.T=t,D.p=i}}0!==(3&Nc)&&au(),ku(e),i=e.pendingLanes,0!==(4194090&n)&&0!==(42&i)?e===Lc?jc++:(jc=0,Lc=e):jc=0,Su(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ri(t)))}function au(e){return ru(),iu(),su(),lu()}function lu(){if(5!==Ec)return!1;var e=Cc,t=Ic;Ic=0;var n=Ie(Nc),r=R.T,i=D.p;try{D.p=32>n?32:n,R.T=null,n=Ac,Ac=null;var s=Cc,a=Nc;if(Ec=0,Tc=Cc=null,Nc=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Yl(s.current),ql(s,s.current,a,n),nc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,s)}catch(c){}return!0}finally{D.p=i,R.T=r,ou(e,t)}}function cu(e,t,n){t=_r(n,t),null!==(e=ss(e,t=Sa(e.stateNode,t,2),2))&&(Ee(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===_c||!_c.has(r))){e=_r(n,e),null!==(r=ss(t,n=_a(2),2))&&(Ea(n,r,t,e),Ee(r,2),ku(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(uc=!0,i.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(sc&n)===n&&(4===hc||3===hc&&(62914560&sc)===sc&&300>te()-xc?0===(2&nc)&&qc(e,0):mc|=n,yc===sc&&(yc=0)),ku(e)}function fu(e,t){0===t&&(t=Se()),null!==(e=Pr(e,t))&&(Ee(e,t),ku(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,yu=null,bu=!1,vu=!1,wu=!1,xu=0;function ku(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),vu=!0,bu||(bu=!0,dd(function(){0!==(6&nc)?Y(re,_u):Eu()}))}function Su(e,t){if(!wu&&vu){wu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var i=r.pendingLanes;if(0===i)var s=0;else{var o=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-fe(42|e)+1)-1,s=201326741&(s&=i&~(o&~a))?201326741&s|1:s?2|s:0}0!==s&&(n=!0,Nu(r,s))}else s=sc,0===(3&(s=ve(r,r===rc?s:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,s)||(n=!0,Nu(r,s));r=r.next}}while(n);wu=!1}}function _u(){Eu()}function Eu(){vu=bu=!1;var e=0;0!==xu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=xu),xu=0);for(var t=te(),n=null,r=gu;null!==r;){var i=r.next,s=Cu(r,t);0===s?(r.next=null,null===n?gu=i:n.next=i,null===i&&(yu=n)):(n=r,(0!==e||0!==(3&s))&&(vu=!0)),r=i}Su(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=-62914561&e.pendingLanes;0<s;){var o=31-fe(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}if(n=sc,n=ve(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ie(n)){case 2:case 8:n=ie;break;case 32:default:n=se;break;case 268435456:n=ae}return r=Tu.bind(null,e),n=Y(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Tu(e,t){if(0!==Ec&&5!==Ec)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=sc;return 0===(r=ve(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Tu.bind(null,e):null)}function Nu(e,t){if(au())return null;Mc(e,t,!0)}function Iu(){return 0===xu&&(xu=ke()),xu}function Au(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var ju=0;ju<xr.length;ju++){var Lu=xr[ju];kr(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}kr(fr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(br,"onTransitionCancel"),kr(vr,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function Ou(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ya(u)}i.currentTarget=null,s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;s=a,i.currentTarget=c;try{s(i)}catch(u){ya(u)}i.currentTarget=null,s=l}}}}function Mu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Vu(t,e,2,!1),n.add(r))}function zu(e,t,n){var r=0;t&&(r|=4),Vu(n,e,r,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function $u(e){if(!e[Fu]){e[Fu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Du.has(t)||zu(t,!1,e),zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fu]||(t[Fu]=!0,zu("selectionchange",!1,t))}}function Vu(e,t,n,r){switch(ch(t)){case 2:var i=rh;break;case 8:i=ih;break;default:i=sh}n=i.bind(null,t,n,e),i=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uu(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===i)return;o=o.return}for(;null!==a;){if(null===(o=Ve(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=s=o;continue e}a=a.parentNode}}r=r.return}Ot(function(){var r=s,i=Pt(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case mr:c=an;break;case vr:c=bn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=vn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&d.push(qu(m,g,p)),h)break;m=m.return}0<d.length&&(a=new c(a,u,null,n,i),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Re])&&(c||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?a:qe(c),p=null==u?a:qe(u),(a=new d(g,m+"leave",c,n,i)).target=h,a.relatedTarget=p,g=null,Ve(i)===r&&((d=new d(f,m+"enter",u,n,i)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=Hu(p))m++;for(p=0,g=f;g;g=Hu(g))p++;for(;0<m-p;)d=Hu(d),m--;for(;0<p-m;)f=Hu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=Hu(d),f=Hu(f)}d=null}else d=null;null!==c&&Wu(o,a,c,d,!1),null!==u&&null!==h&&Wu(o,h,u,d,!0)}if("select"===(c=(a=r?qe(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=zn;else if(jn(a))if(Fn)y=Kn;else{y=Wn;var b=Hn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Ct(r.elementType)&&(y=zn):y=Gn;switch(y&&(y=y(e,r))?Ln(o,y,n,i):(b&&b(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&bt(a,"number",a.value)),b=r?qe(r):window,e){case"focusin":(jn(b)||"true"===b.contentEditable)&&(rr=b,ir=r,sr=null);break;case"focusout":sr=ir=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,i);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,i)}var v;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?Nn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(En&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(v=Bt()):(Ut="value"in(Vt=i)?Vt.value:Vt.textContent,An=!0)),0<(b=Bu(r,w)).length&&(w=new cn(w,e,null,n,i),o.push({event:w,listeners:b}),v?w.data=v:null!==(v=In(n))&&(w.data=v))),(v=_n?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Tn=!0,Cn);case"textInput":return(e=t.data)===Cn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!kn&&Nn(e,t)?(e=Bt(),qt=Ut=Vt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return En&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Bu(r,"onBeforeInput")).length&&(b=new cn("onBeforeInput","beforeinput",null,n,i),o.push({event:b,listeners:w}),b.data=v)),function(e,t,n,r,i){if("submit"===t&&n&&n.stateNode===i){var s=Au((i[Le]||null).action),o=r.submitter;o&&null!==(t=(t=o[Le]||null)?Au(t.formAction):o.getAttribute("formAction"))&&(s=t,o=null);var a=new Zt("action","action",null,r,i);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=o?Pu(i,o):new FormData(i);Po(n,{pending:!0,data:e,method:i.method,action:s},null,e)}}else"function"===typeof s&&(a.preventDefault(),e=o?Pu(i,o):new FormData(i),Po(n,{pending:!0,data:e,method:i.method,action:s},s,e))},currentTarget:i}]})}}(o,e,r,n,i)}Ou(o,t)})}function qu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;if(5!==(i=i.tag)&&26!==i&&27!==i||null===s||(null!=(i=Mt(e,n))&&r.unshift(qu(e,i,s)),null!=(i=Mt(e,t))&&r.push(qu(e,i,s))),3===e.tag)return r;e=e.return}return[]}function Hu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wu(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,i?null!=(c=Mt(n,s))&&o.unshift(qu(n,c,l)):i||null!=(c=Mt(n,s))&&o.push(qu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Ku,"")}function Xu(e,t){return t=Qu(t),Qu(e)===t}function Yu(){}function Ju(e,t,n,r,i,s){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Et(e,r,s);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof s&&("formAction"===n?("input"!==t&&Ju(e,t,"name",i.name,i,null),Ju(e,t,"formEncType",i.formEncType,i,null),Ju(e,t,"formMethod",i.formMethod,i,null),Ju(e,t,"formTarget",i.formTarget,i,null)):(Ju(e,t,"encType",i.encType,i,null),Ju(e,t,"method",i.method,i,null),Ju(e,t,"target",i.target,i,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Yu);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Mu("beforetoggle",e),Mu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function Zu(e,t,n,r,i,s){switch(n){case"style":Et(e,r,s);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=i.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(i=n.endsWith("Capture"),t=n.slice(2,i?n.length-7:void 0),"function"===typeof(s=null!=(s=e[Le]||null)?s[n]:null)&&e.removeEventListener(t,s,i),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof s&&null!==s&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,i)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mu("error",e),Mu("load",e);var r,i=!1,s=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,r,a,n,null)}}return s&&Ju(e,t,"srcSet",n.srcSet,n,null),void(i&&Ju(e,t,"src",n.src,n,null));case"input":Mu("invalid",e);var l=r=a=s=null,c=null,u=null;for(i in n)if(n.hasOwnProperty(i)){var d=n[i];if(null!=d)switch(i){case"name":s=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Ju(e,t,i,d,n,null)}}return yt(e,r,l,c,u,a,s,!1),void dt(e);case"select":for(s in Mu("invalid",e),i=a=r=null,n)if(n.hasOwnProperty(s)&&null!=(l=n[s]))switch(s){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":i=l;default:Ju(e,t,s,l,n,null)}return t=r,n=a,e.multiple=!!i,void(null!=t?vt(e,!!i,t,!1):null!=n&&vt(e,!!i,n,!0));case"textarea":for(a in Mu("invalid",e),r=s=i=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":i=l;break;case"defaultValue":s=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return xt(e,i,s,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(i=n[c]))if("selected"===c)e.selected=i&&"function"!==typeof i&&"symbol"!==typeof i;else Ju(e,t,c,i,n,null);return;case"dialog":Mu("beforetoggle",e),Mu("toggle",e),Mu("cancel",e),Mu("close",e);break;case"iframe":case"object":Mu("load",e);break;case"video":case"audio":for(i=0;i<Ru.length;i++)Mu(Ru[i],e);break;case"image":Mu("error",e),Mu("load",e);break;case"details":Mu("toggle",e);break;case"embed":case"source":case"link":Mu("error",e),Mu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(i=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,i,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(i=n[d])&&Zu(e,t,d,i,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(i=n[l])&&Ju(e,t,l,i,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,i=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&xd(o.documentElement),2&n&&xd(o.body),4&n)for(xd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===i)return e.removeChild(s),void Th(t);i--}else"$"===n||"$?"===n||"$!"===n?i++:r=n.charCodeAt(0)-48;else r=0;n=s}while(n);Th(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),$e(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function vd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);$e(e)}var kd=new Map,Sd=new Set;function _d(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Ed=D.d;D.d={f:function(){var e=Ed.f(),t=Vc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Lo(t):Ed.r(e)},D:function(e){Ed.D(e),Td("dns-prefetch",e,null)},C:function(e,t){Ed.C(e,t),Td("preconnect",e,t)},L:function(e,t,n){Ed.L(e,t,n);var r=Cd;if(r&&e&&t){var i='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(i+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(i+='[imagesizes="'+mt(n.imageSizes)+'"]')):i+='[href="'+mt(e)+'"]';var s=i;switch(t){case"style":s=Id(e);break;case"script":s=jd(e)}kd.has(s)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(s,e),null!==r.querySelector(i)||"style"===t&&r.querySelector(Ad(s))||"script"===t&&r.querySelector(Ld(s))||(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}},m:function(e,t){Ed.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",i='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',s=i;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=jd(e)}if(!kd.has(s)&&(e=h({rel:"modulepreload",href:e},t),kd.set(s,e),null===n.querySelector(i))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(s)))return}ed(r=n.createElement("link"),"link",e),He(r),n.head.appendChild(r)}}},X:function(e,t){Ed.X(e,t);var n=Cd;if(n&&e){var r=Be(n).hoistableScripts,i=jd(e),s=r.get(i);s||((s=n.querySelector(Ld(i)))||(e=h({src:e,async:!0},t),(t=kd.get(i))&&Md(e,t),He(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}},S:function(e,t,n){Ed.S(e,t,n);var r=Cd;if(r&&e){var i=Be(r).hoistableStyles,s=Id(e);t=t||"default";var o=i.get(s);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Ad(s)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(s))&&Od(e,n);var l=o=r.createElement("link");He(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Dd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},i.set(s,o)}}},M:function(e,t){Ed.M(e,t);var n=Cd;if(n&&e){var r=Be(n).hoistableScripts,i=jd(e),s=r.get(i);s||((s=n.querySelector(Ld(i)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(i))&&Md(e,t),He(s=n.createElement("script")),ed(s,"link",e),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(i,s))}}};var Cd="undefined"===typeof document?null:document;function Td(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var i=mt(t);i='link[rel="'+e+'"][href="'+i+'"]',"string"===typeof n&&(i+='[crossorigin="'+n+'"]'),Sd.has(i)||(Sd.add(i),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(i)&&(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}}function Nd(e,t,n,r){var i,s,a,l,c=(c=B.current)?_d(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Id(n.href),(r=(n=Be(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Id(n.href);var u=Be(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Ad(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(i=c,s=e,a=n,l=d.state,i.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=i.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),ed(s,"link",a),He(s),i.head.appendChild(s))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=jd(n),(r=(n=Be(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Id(e){return'href="'+mt(e)+'"'}function Ad(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function jd(e){return'[src="'+mt(e)+'"]'}function Ld(e){return"script[async]"+e}function Rd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,He(r),r;var i=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",i),Dd(r,n.precedence,e),t.instance=r;case"stylesheet":i=Id(n.href);var s=e.querySelector(Ad(i));if(s)return t.state.loading|=4,t.instance=s,He(s),s;r=Pd(n),(i=kd.get(i))&&Od(r,i),He(s=(e.ownerDocument||e).createElement("link"));var a=s;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ed(s,"link",r),t.state.loading|=4,Dd(s,n.precedence,e),t.instance=s;case"script":return s=jd(n.src),(i=e.querySelector(Ld(s)))?(t.instance=i,He(i),i):(r=n,(i=kd.get(s))&&Md(r=h({},n),i),He(i=(e=e.ownerDocument||e).createElement("script")),ed(i,"link",r),e.head.appendChild(i),t.instance=i);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Dd(r,n.precedence,e));return t.instance}function Dd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),i=r.length?r[r.length-1]:null,s=i,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)s=a;else if(s!==i)break}s?s.parentNode.insertBefore(e,s.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Od(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zd=null;function Fd(e,t,n){if(null===zd){var r=new Map,i=zd=new Map;i.set(n,r)}else(r=(i=zd).get(n))||(r=new Map,i.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),i=0;i<n.length;i++){var s=n[i];if(!(s[Fe]||s[je]||"link"===e&&"stylesheet"===s.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==s.namespaceURI){var o=s.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(s):r.set(o,[s])}}return r}function $d(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Ud=null;function qd(){}function Bd(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hd=new Map,t.forEach(Gd,e),Hd=null,Bd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=Hd.get(e);if(n)var r=n.get(null);else{n=new Map,Hd.set(e,n);for(var i=e.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<i.length;s++){var o=i[s];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(i=t.instance).getAttribute("data-precedence"),(s=n.get(o)||r)===r&&n.set(null,i),n.set(o,i),this.count++,r=Bd.bind(this),i.addEventListener("load",r),i.addEventListener("error",r),s?s.parentNode.insertBefore(i,s.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(i,e.firstChild),t.state.loading|=4}}var Kd={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Qd(e,t,n,r,i,s,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_e(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_e(0),this.hiddenUpdates=_e(null),this.identifierPrefix=r,this.onUncaughtError=i,this.onCaughtError=s,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Xd(e,t,n,r,i,s,o,a,l,c,u,d){return e=new Qd(e,t,n,o,a,l,c,d),t=1,!0===s&&(t|=24),s=Or(3,null,null,t),e.current=s,s.stateNode=e,(t=Li()).refCount++,e.pooledCache=t,t.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:t},ns(s),e}function Yd(e){return e?e=Rr:Rr}function Jd(e,t,n,r,i,s){i=Yd(i),null===r.context?r.context=i:r.pendingContext=i,(r=is(t)).payload={element:n},null!==(s=void 0===s?null:s)&&(r.callback=s),null!==(n=ss(e,r,t))&&(Oc(n,0,t),os(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Oc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var i=R.T;R.T=null;var s=D.p;try{D.p=2,sh(e,t,n,r)}finally{D.p=s,R.T=i}}function ih(e,t,n,r){var i=R.T;R.T=null;var s=D.p;try{D.p=8,sh(e,t,n,r)}finally{D.p=s,R.T=i}}function sh(e,t,n,r){if(nh){var i=oh(r);if(null===i)Uu(e,t,r,ah,n),bh(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return dh=vh(dh,e,t,n,r,i),!0;case"dragenter":return hh=vh(hh,e,t,n,r,i),!0;case"mouseover":return fh=vh(fh,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return ph.set(s,vh(ph.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,mh.set(s,vh(mh.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==i;){var s=Ue(i);if(null!==s)switch(s.tag){case 3:if((s=s.stateNode).current.memoizedState.isDehydrated){var o=be(s.pendingLanes);if(0!==o){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}ku(s),0===(6&nc)&&(kc=te()+500,Su(0,!1))}}break;case 13:null!==(a=Pr(s,2))&&Oc(a,0,2),Vc(),eh(s,2)}if(null===(s=oh(r))&&Uu(e,t,r,ah,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Uu(e,t,r,null,n)}}function oh(e){return lh(e=Pt(e))}var ah=null;function lh(e){if(ah=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ah=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case ie:return 8;case se:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,mh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function vh(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=Ue(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function wh(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Rc();e=Ne(e);var t=Pr(n,e);null!==t&&Oc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function kh(e,t,n){xh(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==fh&&xh(fh)&&(fh=null),ph.forEach(kh),mh.forEach(kh)}function _h(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var Eh=null;function Ch(e){Eh!==e&&(Eh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Eh===e&&(Eh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],i=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var s=Ue(n);null!==s&&(e.splice(t,3),t-=3,Po(s,{pending:!0,data:i,method:n.method,action:r},r,i))}}))}function Th(e){function t(t){return _h(t,e)}null!==dh&&_h(dh,e),null!==hh&&_h(hh,e),null!==fh&&_h(fh,e),ph.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var i=n[r],s=n[r+1],o=i[Le]||null;if("function"===typeof s)o||Ch(n);else if(o){var a=null;if(s&&s.hasAttribute("formAction")){if(i=s,o=s[Le]||null)a=o.formAction;else if(null!==lh(i))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function Nh(e){this._internalRoot=e}function Ih(e){this._internalRoot=e}Ih.prototype.render=Nh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jd(t.current,Rc(),e,t,null,null)},Ih.prototype.unmount=Nh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Vc(),t[Re]=null}},Ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Ah=i.version;if("19.1.1"!==Ah)throw Error(o(527,Ah,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return u(i),e;if(s===r)return u(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a){for(c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{ue=jh.inject(Ph),de=jh}catch(Rh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",i=ba,s=va,l=wa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(s=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,i,s,l,0,null),e[Re]=t.current,$u(e),new Nh(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,i="",s=ba,l=va,c=wa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onUncaughtError&&(s=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,i,s,l,c,0,u)).context=Yd(null),n=t.current,(i=is(r=Ne(r=Rc()))).callback=null,ss(n,i,r),n=r,t.current.lanes=n,Ee(t,n),ku(t),e[Re]=t.current,$u(e),new Ih(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},232:(e,t,n)=>{n.d(t,{MF:()=>ue,j6:()=>se,xZ:()=>oe,om:()=>ie,Sx:()=>he,Wp:()=>de,KO:()=>fe});var r=n(606),i=n(965),s=n(776);let o,a;const l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),g(l.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(y(this),t,...r);return u.set(s,t.sort?t.sort():[t]),g(s)}}function m(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});c.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,f):e);var t}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(g(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&l.set(t,e)}).catch(()=>{}),h.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=m(e);return t!==e&&(d.set(e,t),h.set(t,e)),t}const y=e=>h.get(e);const b=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=v.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!b.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return w.set(t,s),s}f=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(f);class k{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const S="@firebase/app",_="0.14.0",E=new i.Vy("@firebase/app"),C="@firebase/app-compat",T="@firebase/analytics-compat",N="@firebase/analytics",I="@firebase/app-check-compat",A="@firebase/app-check",P="@firebase/auth",j="@firebase/auth-compat",L="@firebase/database",R="@firebase/data-connect",D="@firebase/database-compat",O="@firebase/functions",M="@firebase/functions-compat",z="@firebase/installations",F="@firebase/installations-compat",$="@firebase/messaging",V="@firebase/messaging-compat",U="@firebase/performance",q="@firebase/performance-compat",B="@firebase/remote-config",H="@firebase/remote-config-compat",W="@firebase/storage",G="@firebase/storage-compat",K="@firebase/firestore",Q="@firebase/ai",X="@firebase/firestore-compat",Y="firebase",J="[DEFAULT]",Z={[S]:"fire-core",[C]:"fire-core-compat",[N]:"fire-analytics",[T]:"fire-analytics-compat",[A]:"fire-app-check",[I]:"fire-app-check-compat",[P]:"fire-auth",[j]:"fire-auth-compat",[L]:"fire-rtdb",[R]:"fire-data-connect",[D]:"fire-rtdb-compat",[O]:"fire-fn",[M]:"fire-fn-compat",[z]:"fire-iid",[F]:"fire-iid-compat",[$]:"fire-fcm",[V]:"fire-fcm-compat",[U]:"fire-perf",[q]:"fire-perf-compat",[B]:"fire-rc",[H]:"fire-rc-compat",[W]:"fire-gcs",[G]:"fire-gcs-compat",[K]:"fire-fst",[X]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[Y]:"fire-js-all"},ee=new Map,te=new Map,ne=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){E.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ie(e){const t=e.name;if(ne.has(t))return E.debug(`There were multiple attempts to register component ${t}.`),!1;ne.set(t,e);for(const n of ee.values())re(n,e);for(const n of te.values())re(n,e);return!0}function se(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},le=new s.FA("app","Firebase",ae);class ce{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw le.create("app-deleted",{appName:this._name})}}const ue="12.0.0";function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i={name:J,automaticDataCollectionEnabled:!0,...t},o=i.name;if("string"!==typeof o||!o)throw le.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw le.create("no-options");const a=ee.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(i,a.config))return a;throw le.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of ne.values())l.addComponent(r);const c=new ce(n,i,l);return ee.set(o,c),c}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;const t=ee.get(e);if(!t&&e===J&&(0,s.T9)())return de();if(!t)throw le.create("no-app",{appName:e});return t}function fe(e,t,n){let i=Z[e]??e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=[`Unable to register library "${i}" with version "${t}":`];return s&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void E.warn(e.join(" "))}ie(new r.uA(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}const pe="firebase-heartbeat-store";let me=null;function ge(){return me||(me=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=g(o);return r&&o.addEventListener("upgradeneeded",e=>{r(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pe)}catch(n){console.warn(n)}}}).catch(e=>{throw le.create("idb-open",{originalErrorMessage:e.message})})),me}async function ye(e,t){try{const n=(await ge()).transaction(pe,"readwrite"),r=n.objectStore(pe);await r.put(t,be(e)),await n.done}catch(n){if(n instanceof s.g)E.warn(n.message);else{const e=le.create("idb-set",{originalErrorMessage:n?.message});E.warn(e.message)}}}function be(e){return`${e.name}!${e.options.appId}`}class ve{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=we();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){E.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=we(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ke(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ke(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,s.Uj)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return E.warn(e),""}}}function we(){return(new Date).toISOString().substring(0,10)}class xe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ge()).transaction(pe),n=await t.objectStore(pe).get(be(e));return await t.done,n}catch(t){if(t instanceof s.g)E.warn(t.message);else{const e=le.create("idb-get",{originalErrorMessage:t?.message});E.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ye(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ye(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function ke(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",ie(new r.uA("platform-logger",e=>new k(e),"PRIVATE")),ie(new r.uA("heartbeat",e=>new ve(e),"PRIVATE")),fe(S,_,Se),fe(S,_,"esm2020"),fe("fire-js","")},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function _(e,t,r,i,s,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function N(){}function I(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,i,s,o)}}if(u)return o=o(e),u=""===s?"."+T(e,0):s,x(o)?(i="",null!=u&&(i=u.replace(C,"$&/")+"/"),I(o,t,i,"",function(e){return e})):null!=o&&(E(o)&&(l=o,c=i+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=_(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,p=""===s?".":s+":";if(x(e))for(var m=0;m<e.length;m++)u+=I(s=e[m],t,i,a=p+T(s,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(s=e.next()).done;)u+=I(s=s.value,t,i,a=p+T(s,m++),o);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(N,N):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,i,s,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=v,t.StrictMode=s,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),i=e.key;if(null!=t)for(s in void 0!==t.ref&&void 0,void 0!==t.key&&(i=""+t.key),t)!S.call(t,s)||"key"===s||"__self"===s||"__source"===s||"ref"===s&&void 0===t.ref||(r[s]=t[s]);var s=arguments.length-2;if(1===s)r.children=n;else if(1<s){for(var o=Array(s),a=0;a<s;a++)o[a]=arguments[a+2];r.children=o}return _(e.type,i,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,i={},s=null;if(null!=t)for(r in void 0!==t.key&&(s=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(i[r]=t[r]);var o=arguments.length-2;if(1===o)i.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];i.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===i[r]&&(i[r]=o[r]);return _(e,s,void 0,0,0,i)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),i=k.S;null!==i&&i(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(L,j)}catch(s){j(s)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},606:(e,t,n)=>{n.d(t,{h1:()=>a,uA:()=>i});var r=n(776);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const i=this.instances.get(n);return i&&e(i,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{rJ:()=>Za,H9:()=>el,x7:()=>tc,GG:()=>rc,aU:()=>sl,My:()=>Bl,P:()=>$l,BN:()=>ic,mZ:()=>sc});var r,i,s=n(232),o=n(606),a=n(965),l=n(776),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(i[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,i),s=0;break}}else for(;o<t;)if(i[s++]=e[o++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],0>e?-1:0)}):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=a(0),d=a(1),h=a(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(d)}function g(e,t){return e.add(m(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function b(e,t){this.g=e,this.h=t}function v(e,t){if(f(t))throw Error("division by zero");if(f(e))return new b(c,c);if(p(e))return t=v(m(e),t),new b(m(t.g),m(t.h));if(p(t))return t=v(e,m(t)),new b(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var o=s.add(r);0>=o.l(e)&&(i=i.add(n),s=o),r=x(r,1),n=x(n,1)}return t=g(e,i.j(t)),new b(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=l(n)).j(t);p(o)||0<o.l(e);)o=(s=l(n-=r)).j(t);f(s)&&(s=d),i=i.add(s),e=g(e,o)}return new b(i,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=v(n,t).g,s=((0<(n=g(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.i(i))+(65535&e.i(i)),a=(o>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.i(r)>>>16,a=65535&this.i(r),u=e.i(i)>>>16,d=65535&e.i(i);n[2*r+2*i]+=a*d,y(n,2*r+2*i),n[2*r+2*i+1]+=o*d,y(n,2*r+2*i+1),n[2*r+2*i+1]+=a*u,y(n,2*r+2*i+1),n[2*r+2*i+2]+=o*u,y(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return v(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=u.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=l(Math.pow(n,o)),i=i.j(o).add(l(a))):i=(i=i.j(r)).add(l(a))}return i},r=u.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,p,m,g,y,b,v="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof v&&v];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in i))break e;i=i[o]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function _(e){return/^[\s\xa0]*$/.test(e)}function E(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function C(e){return C[" "](e),e}C[" "]=function(){};var T=-1!=E().indexOf("Gecko")&&!(-1!=E().toLowerCase().indexOf("webkit")&&-1==E().indexOf("Edge"))&&!(-1!=E().indexOf("Trident")||-1!=E().indexOf("MSIE"))&&-1==E().indexOf("Edge");function N(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function I(e){const t={};for(const n in e)t[n]=e[n];return t}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<A.length;t++)n=A[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function L(e){i.setTimeout(()=>{throw e},0)}function R(){var e=F;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var D=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new O,e=>e.reset());class O{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let M,z=!1,F=new class{constructor(){this.h=this.g=null}add(e,t){const n=D.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},$=()=>{const e=i.Promise.resolve(void 0);M=()=>{e.then(V)}};var V=()=>{for(var e;e=R();){try{e.h.call(e.g)}catch(n){L(n)}var t=D;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}z=!1};function U(){this.s=this.s,this.C=this.C}function q(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},q.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function H(e,t){if(q.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(T){e:{try{C(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.aa.h.call(this)}}x(H,q);var W={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Q(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++K,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Y(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}Y.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Z(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,i){if(r&&r.once)return ie(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ne(e,t[s],n,r,i);return null}return n=de(n),e&&e[G]?e.K(t,n,o(r)?!!r.capture:!!r,i):re(e,t,n,!1,r,i)}function re(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var a=o(i)?!!i.capture:!!i,l=ce(e);if(l||(e[ee]=l=new Y(e)),(n=l.add(t,n,r,a,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)B||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ie(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=de(n),e&&e[G]?e.L(t,n,o(r)?!!r.capture:!!r,i):re(e,t,n,!0,r,i)}function se(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)se(e,t[s],n,r,i);else r=o(r)?!!r.capture:!!r,n=de(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(s=e.g[t],n,r,i))&&(X(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,i)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])J(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):X(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new H(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof Y?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){U.call(this),this.i=new Y(this),this.M=this,this.F=null}function fe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new q(t,e);else if(t instanceof q)t.target=t.target||e;else{var i=t;P(t=new q(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=pe(o,r,!0,t)&&i}if(i=pe(o=t.g=e,r,!0,t)&&i,i=pe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=pe(o=t.g=n[s],r,!1,t)&&i}function pe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&J(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}function me(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ge(e){e.g=me(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(he,U),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,r){se(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ye extends U{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(e){U.call(this),this.h=e,this.g={}}x(be,U);var ve=[];function we(e){N(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}be.prototype.N=function(){be.aa.N.call(this),we(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=i.JSON.stringify,ke=i.JSON.parse,Se=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function _e(){}function Ee(e){return e.h||(e.h=e.i())}function Ce(){}_e.prototype.h=null;var Te={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ne(){q.call(this,"d")}function Ie(){q.call(this,"c")}x(Ne,q),x(Ie,q);var Ae={},Pe=null;function je(){return Pe=Pe||new he}function Le(e){q.call(this,Ae.La,e)}function Re(e){const t=je();fe(t,new Le(t))}function De(e,t){q.call(this,Ae.STAT_EVENT,e),this.stat=t}function Oe(e){const t=je();fe(t,new De(t,e))}function Me(e,t){q.call(this,Ae.Ma,e),this.size=t}function ze(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Fe(){this.g=!0}function $e(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return xe(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ae.La="serverreachability",x(Le,q),Ae.STAT_EVENT="statevent",x(De,q),Ae.Ma="timingevent",x(Me,q),Fe.prototype.xa=function(){this.g=!1},Fe.prototype.info=function(){};var Ve,Ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Be(){}function He(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}x(Be,_e),Be.prototype.g=function(){return new XMLHttpRequest},Be.prototype.i=function(){return{}},Ve=new Be;var Ge={},Ke={};function Qe(e,t,n){e.L=1,e.v=xt(gt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new We,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ye(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(ve[0]=i.toString()),i=ve);for(var s=0;s<i.length;s++){var o=ne(n,i[s],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Re(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ye(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ke:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Ke:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ze(c(e.ba,e),t)}function tt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||bn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,we(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function it(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),an(n)}pn(n),Oe(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=ze(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&yn(n),!_(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(ut(s,s.h),s.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){dt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(tt(a),Ze(a)),r.g=o}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Re()}catch(u){}}He.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},He.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Re(),tt(this);var n=this.g.Z();this.X=n;t:if(Ye(this)){var r=nn(this.g);e="";var s=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var a="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Oe(12),rt(this),nt(this);break e}$e(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Je(this,a),e==Ke){4==h&&(this.s=4,Oe(14),n=!1),$e(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Oe(15),$e(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}$e(this.i,this.l,e,null),it(this,e)}if(Ye(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Oe(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(d),d.M=!0,Oe(11))}}else $e(this.i,this.l,a,"[Invalid Chunked Response]"),rt(this),nt(this)}else $e(this.i,this.l,a,null),it(this,a);4==h&&rt(this),this.o&&!this.J&&(4==h?bn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(_(e[r]))continue;var n=j(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),rt(this),nt(this)}}}catch(h){}},He.prototype.cancel=function(){this.J=!0,rt(this)},He.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Re(),Oe(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var st=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return k(e.i)}function ft(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}ot.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var pt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,yt(this,e.j),this.o=e.o,this.g=e.g,bt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),vt(this,n),this.m=e.m}else e&&(t=String(e).match(pt))?(this.h=!1,yt(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),bt(this,t[4]),this.l=kt(t[5]||"",!0),vt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function gt(e){return new mt(e)}function yt(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function bt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function vt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Lt(this,t),Dt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,It)),e.i=new Pt(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,_t),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function _t(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,Ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,Ct,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?Nt:Tt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,At)),e.join("")};var Et,Ct=/[#\/\?@]/g,Tt=/[#\?:]/g,Nt=/[#\?]/g,It=/[#\?@]/g,At=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Lt(e,t){jt(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return jt(e),t=Ot(e,t),e.g.has(t)}function Dt(e,t,n){Lt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),k(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function zt(){this.g=new Se}function Ft(e,t,n){const r=n||"";try{ft(e,function(e,n){let i=e;o(e)&&(i=xe(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function $t(e){this.l=e.Ub||null,this.j=e.eb||!1}function Vt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ut(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function qt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Bt(e)}function Bt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return N(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Gt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){jt(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){jt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){jt(this);let t=[];if("string"===typeof e)Rt(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return jt(this),this.i=null,Rt(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")},x($t,_e),$t.prototype.g=function(){return new Vt(this.l,this.j)},$t.prototype.i=(Et={},function(){return Et}),x(Vt,he),(e=Vt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Bt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,qt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bt(this)),this.g&&(this.readyState=3,Bt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ut(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?qt(this):Bt(this),3==this.readyState&&Ut(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,qt(this))},e.Qa=function(e){this.g&&(this.response=e,qt(this))},e.ga=function(){this.g&&qt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Gt,he);var Kt=/^https?$/i,Qt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Yt(e),Zt(e)}function Yt(e){e.A||(e.A=!0,fe(e,"complete"),fe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))me(e.Ea,0,e);else if(fe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var o=String(e.D).match(pt)[1]||null;!o&&i.self&&i.self.location&&(o=i.self.location.protocol.slice(0,-1)),s=!Kt.test(o?o.toLowerCase():"")}n=s}if(n)fe(e,"complete"),fe(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Yt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||fe(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function en(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new zt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),dn(e,n),(t=new He(e,e.j,t)).L=2,t.v=xt(gt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function an(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(i.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function cn(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;M||$(),z||(M(),z=!0),F.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new He(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Qe(n,r,t)}function dn(e,t){e.H&&N(e.H,function(e,n){wt(t,n,e)}),e.l&&ft({},function(e,n){wt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{Ft(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;M||$(),z||(M(),z=!0),F.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ze(c(e.Fa,e),vn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new He(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(gt(t)),n.m=null,n.P=!0,Xe(n,e)}function yn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function bn(e,t){var n=null;if(e.g==t){yn(e),mn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;fe(r=je(),new Me(r,n)),cn(e)}else fn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=ze(c(e.Ga,e,t),vn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function vn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||yt(r,"https"),xt(r),t?function(e,t){const n=new Fe;if(i.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Fe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else Oe(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,k(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof mt?gt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),bt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new mt(null);r&&yt(o,r),t&&(o.g=t),s&&bt(o,s),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),dn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new $t({eb:n})):new Gt(e.pa)).Ha(e.J),t}function _n(){}function En(){}function Cn(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!_(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Tn(e){Ne.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Nn(){Ie.call(this),this.status=1}function In(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ve.g(),this.v=this.o?Ee(this.o):Ee(Ve),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Xt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Xt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,fe(this,"complete"),fe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Et){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Et){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ke(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Oe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new He(this,this.j,e);let s=this.o;if(this.S&&(s?(s=I(s),P(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,i,t),wt(n=gt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),dn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ht(s)))+"&"+t:this.m&&Wt(n,this.m,s)),ut(this.h,i),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),i.T=!0,Qe(i,n,null)):Qe(i,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||at(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ze(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),pn(this),Oe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=_n.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},En.prototype.g=function(e,t){return new Cn(e,t)},x(Cn,he),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){on(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new st(t.Ya++,e)),3==t.G&&cn(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Cn.aa.N.call(this)},x(Tn,Ne),x(Nn,Ie),x(In,_n),In.prototype.ua=function(){fe(this.g,"a")},In.prototype.ta=function(e){fe(this.g,new Tn(e))},In.prototype.sa=function(e){fe(this.g,new Nn)},In.prototype.ra=function(){fe(this.g,"b")},En.prototype.createWebChannel=En.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,b=w.createWebChannelTransport=function(){return new En},y=w.getStatEventTarget=function(){return je()},g=w.Event=Ae,m=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ue.NO_ERROR=0,Ue.TIMEOUT=8,Ue.HTTP_ERROR=6,p=w.ErrorCode=Ue,qe.COMPLETE="complete",f=w.EventType=qe,Ce.EventType=Te,Te.OPEN="a",Te.CLOSE="b",Te.ERROR="c",Te.MESSAGE="d",he.prototype.listen=he.prototype.K,h=w.WebChannel=Ce,w.FetchXmlHttpFactory=$t,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,d=w.XhrIo=Gt}).apply("undefined"!==typeof v?v:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",k="4.9.0";class S{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}S.UNAUTHENTICATED=new S(null),S.GOOGLE_CREDENTIALS=new S("google-credentials-uid"),S.FIRST_PARTY=new S("first-party-uid"),S.MOCK_USER=new S("mock-user");let _="12.0.0";const E=new a.Vy("@firebase/firestore");function C(){return E.logLevel}function T(e){if(E.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(A);E.debug(`Firestore (${_}): ${e}`,...i)}}function N(e){if(E.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(A);E.error(`Firestore (${_}): ${e}`,...i)}}function I(e){if(E.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(A);E.warn(`Firestore (${_}): ${e}`,...i)}}function A(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,j(e,r,n)}function j(e,t,n){let r=`FIRESTORE (${_}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw N(r),new Error(r)}function L(e,t,n,r){let i="Unexpected state";"string"==typeof n?i=n:r=n,e||j(t,i,r)}function R(e,t){return e}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class M{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class z{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(S.UNAUTHENTICATED))}shutdown(){}}class ${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class V{constructor(e){this.t=e,this.currentUser=S.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){L(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new M;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new M,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{T("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(T("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new M)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(T("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(L("string"==typeof t.accessToken,31837,{l:t}),new z(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return L(null===e||"string"==typeof e,2055,{h:e}),new S(e)}}class U{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=S.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class q{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new U(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(S.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class B{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,s.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){L(void 0===this.o,3512);const n=e=>{null!=e.error&&T("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,T("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{T("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):T("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new B(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(L("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new B(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=W(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function K(e,t){return e<t?-1:e>t?1:0}function Q(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),i=t.charAt(r);if(n!==i)return J(n)===J(i)?K(n,i):J(n)?1:-1}return K(e.length,t.length)}const X=55296,Y=57343;function J(e){const t=e.charCodeAt(0);return t>=X&&t<=Y}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return K(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):Q(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new O(D.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ie extends te{construct(e,t,n){return new ie(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new ie([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new O(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new O(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new O(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new O(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ie(t)}static emptyPath(){return new ie([])}}class se{constructor(e){this.path=e}static fromPath(e){return new se(ne.fromString(e))}static fromName(e){return new se(ne.fromString(e).popFirst(5))}static empty(){return new se(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new ne(e.slice()))}}function oe(e,t,n){if(!n)throw new O(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ae(e){if(!se.isDocumentKey(e))throw new O(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function le(e){if(se.isDocumentKey(e))throw new O(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ue(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":P(12329,{type:typeof e})}function de(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ue(e);throw new O(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function he(e,t){const n={typeString:e};return t&&(n.value=t),n}function fe(e,t){if(!ce(e))throw new O(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const i=t[r].typeString,s="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(void 0!==s&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new O(D.INVALID_ARGUMENT,n);return!0}const pe=-62135596800,me=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*me);return new ge(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pe)throw new O(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/me}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fe(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:he("string",ge._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ge(0,0))}static max(){return new ye(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const be=-1;class ve{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ve.UNKNOWN_ID=-1;function we(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(1e9===r?new ge(n+1,0):new ge(n,r));return new ke(i,se.empty(),t)}function xe(e){return new ke(e.readTime,e.key,be)}class ke{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ke(ye.min(),se.empty(),be)}static max(){return new ke(ye.max(),se.empty(),be)}}function Se(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=se.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const _e="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ee{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ce(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==_e)throw e;T("LocalStore","Unexpectedly lost primary lease")}class Te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Te((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Te?t:Te.resolve(t)}catch(e){return Te.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Te.reject(t)}static resolve(e){return new Te((t,n)=>{t(e)})}static reject(e){return new Te((t,n)=>{n(e)})}static waitFor(e){return new Te((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Te.resolve(!1);for(const n of e)t=t.next(e=>e?Te.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Te((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new Te((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}function Ne(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ie(e){return"IndexedDbTransactionError"===e.name}class Ae{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ae.ce=-1;const Pe=-1;function je(e){return null==e}function Le(e){return 0===e&&1/e==-1/0}function Re(e){return"number"==typeof e&&Number.isInteger(e)&&!Le(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const De="\x01";function Oe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ze(t)),t=Me(e.get(n),t);return ze(t)}function Me(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case De:n+="\x01\x11";break;default:n+=t}}return n}function ze(e){return e+De+"\x01"}const Fe="remoteDocuments",$e="owner",Ve="mutationQueues",Ue="mutations";const qe="documentMutations",Be="remoteDocumentsV14",He="remoteDocumentGlobal",We="targets",Ge="targetDocuments",Ke="targetGlobal",Qe="collectionParents",Xe="clientMetadata",Ye="bundles",Je="namedQueries",Ze="indexConfiguration",et="indexState",tt="indexEntries",nt="documentOverlays",rt="globals",it=[Ve,Ue,qe,Fe,We,$e,Ke,Ge,Xe,He,Qe,Ye,Je],st=[Ve,Ue,qe,Be,We,$e,Ke,Ge,Xe,He,Qe,Ye,Je,nt],ot=st,at=[...ot,Ze,et,tt];function lt(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ct(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ut(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ht(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ht(this.root,e,this.comparator,!1)}getReverseIterator(){return new ht(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ht(this.root,e,this.comparator,!0)}}class ht{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=i?i:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,i){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mt(this.data.getIterator())}getIteratorFrom(e){return new mt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof pt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class mt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gt{constructor(e){this.fields=e,e.sort(ie.comparator)}static empty(){return new gt([])}unionWith(e){let t=new pt(ie.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new bt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bt.EMPTY_BYTE_STRING=new bt("");const vt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wt(e){if(L(!!e,39018),"string"==typeof e){let t=0;const n=vt.exec(e);if(L(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xt(e.seconds),nanos:xt(e.nanos)}}function xt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kt(e){return"string"==typeof e?bt.fromBase64String(e):bt.fromUint8Array(e)}const St="server_timestamp",_t="__type__",Et="__previous_value__",Ct="__local_write_time__";function Tt(e){const t=(e?.mapValue?.fields||{})[_t]?.stringValue;return t===St}function Nt(e){const t=e.mapValue.fields[Et];return Tt(t)?Nt(t):t}function It(e){const t=wt(e.mapValue.fields[Ct].timestampValue);return new ge(t.seconds,t.nanos)}class At{constructor(e,t,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Pt="(default)";class jt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new jt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof jt&&e.projectId===this.projectId&&e.database===this.database}}const Lt="__type__",Rt="__max__",Dt={mapValue:{fields:{__type__:{stringValue:Rt}}}},Ot="__vector__",Mt="value";function zt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tt(e)?4:tn(e)?9007199254740991:Zt(e)?10:11:P(28295,{value:e})}function Ft(e,t){if(e===t)return!0;const n=zt(e);if(n!==zt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return It(e).isEqual(It(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wt(e.timestampValue),r=wt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kt(e.bytesValue).isEqual(kt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xt(e.geoPointValue.latitude)===xt(t.geoPointValue.latitude)&&xt(e.geoPointValue.longitude)===xt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xt(e.integerValue)===xt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xt(e.doubleValue),r=xt(t.doubleValue);return n===r?Le(n)===Le(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Ft);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lt(n)!==lt(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ft(n[i],r[i])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function $t(e,t){return void 0!==(e.values||[]).find(e=>Ft(e,t))}function Vt(e,t){if(e===t)return 0;const n=zt(e),r=zt(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xt(e.integerValue||e.doubleValue),r=xt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ut(e.timestampValue,t.timestampValue);case 4:return Ut(It(e),It(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){const n=kt(e),r=kt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=K(n[i],r[i]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(xt(e.latitude),xt(t.latitude));return 0!==n?n:K(xt(e.longitude),xt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return qt(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},i=n[Mt]?.arrayValue,s=r[Mt]?.arrayValue,o=K(i?.values?.length||0,s?.values?.length||0);return 0!==o?o:qt(i,s)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Dt.mapValue&&t===Dt.mapValue)return 0;if(e===Dt.mapValue)return 1;if(t===Dt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Q(r[o],s[o]);if(0!==e)return e;const t=Vt(n[r[o]],i[s[o]]);if(0!==t)return t}return K(r.length,s.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function Ut(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=wt(e),r=wt(t),i=K(n.seconds,r.seconds);return 0!==i?i:K(n.nanos,r.nanos)}function qt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Vt(n[i],r[i]);if(e)return e}return K(n.length,r.length)}function Bt(e){return Ht(e)}function Ht(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wt(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return kt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return se.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ht(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${Ht(e.fields[i])}`;return n+"}"}(e.mapValue):P(61005,{value:e})}function Wt(e){switch(zt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nt(e);return t?16+Wt(t):16;case 5:return 2*e.stringValue.length;case 6:return kt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Wt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ct(e.fields,(e,n)=>{t+=e.length+Wt(n)}),t}(e.mapValue);default:throw P(13486,{value:e})}}function Gt(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Kt(e){return!!e&&"integerValue"in e}function Qt(e){return!!e&&"arrayValue"in e}function Xt(e){return!!e&&"nullValue"in e}function Yt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jt(e){return!!e&&"mapValue"in e}function Zt(e){const t=(e?.mapValue?.fields||{})[Lt]?.stringValue;return t===Ot}function en(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ct(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=en(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=en(e.arrayValue.values[n]);return t}return{...e}}function tn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rt}class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=en(t)}setAll(e){let t=ie.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=en(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Jt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ft(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ct(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new nn(en(this.value))}}function rn(e){const t=[];return ct(e.fields,(e,n)=>{const r=new ie([e]);if(Jt(n)){const e=rn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new gt(t)}class sn{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new sn(e,0,ye.min(),ye.min(),ye.min(),nn.empty(),0)}static newFoundDocument(e,t,n,r){return new sn(e,1,t,ye.min(),n,r,0)}static newNoDocument(e,t){return new sn(e,2,t,ye.min(),ye.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,ye.min(),ye.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class on{constructor(e,t){this.position=e,this.inclusive=t}}function an(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?se.comparator(se.fromName(o.referenceValue),n.key):Vt(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ln(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ft(e.position[n],t.position[n]))return!1;return!0}class cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function un(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dn{}class hn extends dn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wn(e,t,n):"array-contains"===t?new _n(e,n):"in"===t?new En(e,n):"not-in"===t?new Cn(e,n):"array-contains-any"===t?new Tn(e,n):new hn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xn(e,n):new kn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Vt(t,this.value)):null!==t&&zt(this.value)===zt(t)&&this.matchesComparison(Vt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends dn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fn(e,t)}matches(e){return pn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pn(e){return"and"===e.op}function mn(e){return gn(e)&&pn(e)}function gn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function yn(e){if(e instanceof hn)return e.field.canonicalString()+e.op.toString()+Bt(e.value);if(mn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return`${e.op}(${t})`}}function bn(e,t){return e instanceof hn?function(e,t){return t instanceof hn&&e.op===t.op&&e.field.isEqual(t.field)&&Ft(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&bn(n,t.filters[r]),!0)}(e,t):void P(19439)}function vn(e){return e instanceof hn?function(e){return`${e.field.canonicalString()} ${e.op} ${Bt(e.value)}`}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(vn).join(" ,")+"}"}(e):"Filter"}class wn extends hn{constructor(e,t,n){super(e,t,n),this.key=se.fromName(n.referenceValue)}matches(e){const t=se.comparator(e.key,this.key);return this.matchesComparison(t)}}class xn extends hn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kn extends hn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){return(t.arrayValue?.values||[]).map(e=>se.fromName(e.referenceValue))}class _n extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qt(t)&&$t(t.arrayValue,this.value)}}class En extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$t(this.value.arrayValue,t)}}class Cn extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if($t(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!$t(this.value.arrayValue,t)}}class Tn extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>$t(this.value.arrayValue,e))}}class Nn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.Te=null}}function In(e){return new Nn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function An(e){const t=R(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),je(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Bt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Bt(e)).join(",")),t.Te=e}return t.Te}function Pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!un(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ln(e.startAt,t.startAt)&&ln(e.endAt,t.endAt)}function jn(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ln{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rn(e,t,n,r,i,s,o,a){return new Ln(e,t,n,r,i,s,o,a)}function Dn(e){return new Ln(e)}function On(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mn(e){return null!==e.collectionGroup}function zn(e){const t=R(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new pt(ie.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new cn(r,n))}),e.has(ie.keyField().canonicalString())||t.Ie.push(new cn(ie.keyField(),n))}return t.Ie}function Fn(e){const t=R(e);return t.Ee||(t.Ee=$n(t,zn(e))),t.Ee}function $n(e,t){if("F"===e.limitType)return In(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new cn(e.field,t)});const n=e.endAt?new on(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new on(e.startAt.position,e.startAt.inclusive):null;return In(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vn(e,t){const n=e.filters.concat([t]);return new Ln(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Un(e,t,n){return new Ln(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qn(e,t){return Pn(Fn(e),Fn(t))&&e.limitType===t.limitType}function Bn(e){return`${An(Fn(e))}|lt:${e.limitType}`}function Hn(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>vn(e)).join(", ")}]`),je(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Bt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Bt(e)).join(",")),`Target(${t})`}(Fn(e))}; limitType=${e.limitType})`}function Wn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):se.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=an(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zn(e),t))&&!(e.endAt&&!function(e,t,n){const r=an(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zn(e),t))}(e,t)}function Gn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kn(e){return(t,n)=>{let r=!1;for(const i of zn(e)){const e=Qn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qn(e,t,n){const r=e.field.isKeyField()?se.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vt(r,i):P(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P(19790,{direction:e.dir})}}class Xn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ct(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ut(this.inner)}size(){return this.innerSize}}const Yn=new dt(se.comparator);function Jn(){return Yn}const Zn=new dt(se.comparator);function er(){let e=Zn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function tr(e){let t=Zn;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function nr(){return ir()}function rr(){return ir()}function ir(){return new Xn(e=>e.toString(),(e,t)=>e.isEqual(t))}const sr=new dt(se.comparator),or=new pt(se.comparator);function ar(){let e=or;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const lr=new pt(K);function cr(){return lr}function ur(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Le(t)?"-0":t}}function dr(e){return{integerValue:""+e}}function hr(e,t){return Re(t)?dr(t):ur(e,t)}class fr{constructor(){this._=void 0}}function pr(e,t,n){return e instanceof yr?function(e,t){const n={fields:{[_t]:{stringValue:St},[Ct]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tt(t)&&(t=Nt(t)),t&&(n.fields[Et]=t),{mapValue:n}}(n,t):e instanceof br?vr(e,t):e instanceof wr?xr(e,t):function(e,t){const n=gr(e,t),r=Sr(n)+Sr(e.Ae);return Kt(n)&&Kt(e.Ae)?dr(r):ur(e.serializer,r)}(e,t)}function mr(e,t,n){return e instanceof br?vr(e,t):e instanceof wr?xr(e,t):n}function gr(e,t){return e instanceof kr?function(e){return Kt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yr extends fr{}class br extends fr{constructor(e){super(),this.elements=e}}function vr(e,t){const n=_r(t);for(const r of e.elements)n.some(e=>Ft(e,r))||n.push(r);return{arrayValue:{values:n}}}class wr extends fr{constructor(e){super(),this.elements=e}}function xr(e,t){let n=_r(t);for(const r of e.elements)n=n.filter(e=>!Ft(e,r));return{arrayValue:{values:n}}}class kr extends fr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sr(e){return xt(e.integerValue||e.doubleValue)}function _r(e){return Qt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Er{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Nr{}function Ir(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fr(e.key,Cr.none()):new Rr(e.key,e.data,Cr.none());{const n=e.data,r=nn.empty();let i=new pt(ie.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Dr(e.key,r,new gt(i.toArray()),Cr.none())}}function Ar(e,t,n){e instanceof Rr?function(e,t,n){const r=e.value.clone(),i=Mr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dr?function(e,t,n){if(!Tr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Mr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Or(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pr(e,t,n,r){return e instanceof Rr?function(e,t,n,r){if(!Tr(e.precondition,t))return n;const i=e.value.clone(),s=zr(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dr?function(e,t,n,r){if(!Tr(e.precondition,t))return n;const i=zr(e.fieldTransforms,r,t),s=t.data;return s.setAll(Or(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Tr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=gr(r.transform,e||null);null!=i&&(null===n&&(n=nn.empty()),n.set(r.field,i))}return n||null}function Lr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof br&&t instanceof br||e instanceof wr&&t instanceof wr?Z(e.elements,t.elements,Ft):e instanceof kr&&t instanceof kr?Ft(e.Ae,t.Ae):e instanceof yr&&t instanceof yr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rr extends Nr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dr extends Nr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Or(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Mr(e,t,n){const r=new Map;L(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,mr(o,a,n[i]))}return r}function zr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,pr(e,s,t))}return r}class Fr extends Nr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $r extends Nr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ar(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rr();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Ir(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ar())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>Lr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>Lr(e,t))}}class Ur{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){L(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=sr;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ur(e,t,n,r)}}class qr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Br{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hr,Wr;function Gr(e){switch(e){case D.OK:return P(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function Kr(e){if(void 0===e)return N("GRPC error has no .code"),D.UNKNOWN;switch(e){case Hr.OK:return D.OK;case Hr.CANCELLED:return D.CANCELLED;case Hr.UNKNOWN:return D.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return D.INTERNAL;case Hr.UNAVAILABLE:return D.UNAVAILABLE;case Hr.UNAUTHENTICATED:return D.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case Hr.NOT_FOUND:return D.NOT_FOUND;case Hr.ALREADY_EXISTS:return D.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return D.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case Hr.ABORTED:return D.ABORTED;case Hr.OUT_OF_RANGE:return D.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return D.UNIMPLEMENTED;case Hr.DATA_LOSS:return D.DATA_LOSS;default:return P(39323,{code:e})}}(Wr=Hr||(Hr={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";let Qr=null;function Xr(){return new TextEncoder}const Yr=new r([4294967295,4294967295],0);function Jr(e){const t=Xr().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function Zr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,i],0),new r([s,o],0)]}class ei{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ti(`Invalid padding: ${t}`);if(n<0)throw new ti(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ti(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ti(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(Yr)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Jr(e),[n,r]=Zr(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new ei(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.ge)return;const t=Jr(e),[n,r]=Zr(t);for(let i=0;i<this.hashCount;i++){const e=this.ye(n,r,i);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ti extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ni{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,ri.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ni(ye.min(),r,new dt(K),Jn(),ar())}}class ri{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new ri(n,t,ar(),ar(),ar())}}class ii{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class si{constructor(e,t){this.targetId=e,this.Ce=t}}class oi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ai{constructor(){this.ve=0,this.Fe=ui(),this.Me=bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ar(),t=ar(),n=ar();return this.Fe.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:i})}}),new ri(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=ui()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,L(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class li{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=ci(),this.He=ci(),this.Ye=new dt(K)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(jn(i))if(0===n){const e=new se(i.path);this.et(t,e,sn.newNoDocument(e,ye.min()))}else L(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}Qr?.lt(function(e,t,n,r,i){const s={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(s.bloomFilter={applied:0===i,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),s}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=kt(n).toUint8Array()}catch(e){if(e instanceof yt)return I("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ei(s,r,i)}catch(e){return I(e instanceof ti?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Ge.ht(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(s)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const i=this.ot(r);if(i){if(n.current&&jn(i.target)){const t=new se(i.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ar();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ni(e,t,this.Ye,this.je,n);return this.je=Jn(),this.Je=ci(),this.He=ci(),this.Ye=new dt(K),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ai,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pt(K),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pt(K),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||T("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ai),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ci(){return new dt(se.comparator)}function ui(){return new dt(se.comparator)}const di={asc:"ASCENDING",desc:"DESCENDING"},hi={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fi={and:"AND",or:"OR"};class pi{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mi(e,t){return e.useProto3Json||je(t)?t:{value:t}}function gi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function yi(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bi(e,t){return gi(e,t.toTimestamp())}function vi(e){return L(!!e,49232),ye.fromTimestamp(function(e){const t=wt(e);return new ge(t.seconds,t.nanos)}(e))}function wi(e,t){return xi(e,t).canonicalString()}function xi(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ki(e){const t=ne.fromString(e);return L(Ui(t),10190,{key:t.toString()}),t}function Si(e,t){return wi(e.databaseId,t.path)}function _i(e,t){const n=ki(t);if(n.get(1)!==e.databaseId.projectId)throw new O(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new O(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new se(Ni(n))}function Ei(e,t){return wi(e.databaseId,t)}function Ci(e){const t=ki(e);return 4===t.length?ne.emptyPath():Ni(t)}function Ti(e){return new ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ni(e){return L(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ii(e,t,n){return{name:Si(e,t),fields:n.value.mapValue.fields}}function Ai(e,t){let n;if(t instanceof Rr)n={update:Ii(e,t.key,t.value)};else if(t instanceof Fr)n={delete:Si(e,t.key)};else if(t instanceof Dr)n={update:Ii(e,t.key,t.data),updateMask:Vi(t.fieldMask)};else{if(!(t instanceof $r))return P(16599,{Vt:t.type});n={verify:Si(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof br)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kr)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P(27497)}(e,t.precondition)),n}function Pi(e,t){return{documents:[Ei(e,t.path)]}}function ji(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ei(e,i);const s=function(e){if(0!==e.length)return $i(fn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:zi(e.field),direction:Di(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=mi(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:i}}function Li(e){let t=Ci(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){L(1===r,65062);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ri(e);return t instanceof fn&&mn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new cn(Fi(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,je(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new on(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new on(n,t)}(n.endAt)),Rn(t,i,o,s,a,"F",l,c)}function Ri(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fi(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fi(e.unaryFilter.field);return hn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fi(e.unaryFilter.field);return hn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Fi(e.unaryFilter.field);return hn.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P(61313);default:return P(60726)}}(e):void 0!==e.fieldFilter?function(e){return hn.create(Fi(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Ri(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P(1026)}}(e.compositeFilter.op))}(e):P(30097,{filter:e})}function Di(e){return di[e]}function Oi(e){return hi[e]}function Mi(e){return fi[e]}function zi(e){return{fieldPath:e.canonicalString()}}function Fi(e){return ie.fromServerFormat(e.fieldPath)}function $i(e){return e instanceof hn?function(e){if("=="===e.op){if(Yt(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NAN"}};if(Xt(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yt(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NOT_NAN"}};if(Xt(e.value))return{unaryFilter:{field:zi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zi(e.field),op:Oi(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>$i(e));return 1===t.length?t[0]:{compositeFilter:{op:Mi(e.op),filters:t}}}(e):P(54877,{filter:e})}function Vi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ui(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qi{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Bi{constructor(e){this.yt=e}}function Hi(e){const t=Li({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Un(t,t.limit,"L"):t}class Wi{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xt(e.integerValue));else if("doubleValue"in e){const n=xt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Le(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=wt(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(kt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?tn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zt(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Mt,i=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xt(i)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),se.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Wi.Kt=new Wi;class Gi{constructor(){this.Cn=new Ki}addToCollectionParentIndex(e,t){return this.Cn.add(t),Te.resolve()}getCollectionParents(e,t){return Te.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Te.resolve()}deleteFieldIndex(e,t){return Te.resolve()}deleteAllFieldIndexes(e){return Te.resolve()}createTargetIndexes(e,t){return Te.resolve()}getDocumentsMatchingTarget(e,t){return Te.resolve(null)}getIndexType(e,t){return Te.resolve(0)}getFieldIndexes(e,t){return Te.resolve([])}getNextCollectionGroupToUpdate(e){return Te.resolve(null)}getMinOffset(e,t){return Te.resolve(ke.min())}getMinOffsetFromCollectionGroup(e,t){return Te.resolve(ke.min())}updateCollectionGroup(e,t,n){return Te.resolve()}updateIndexEntries(e,t){return Te.resolve()}}class Ki{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pt(ne.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new pt(ne.comparator)).toArray()}}new Uint8Array(0);const Qi={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xi=41943040;class Yi{static withCacheSize(e){return new Yi(e,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Yi.DEFAULT_COLLECTION_PERCENTILE=10,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yi.DEFAULT=new Yi(Xi,Yi.DEFAULT_COLLECTION_PERCENTILE,Yi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yi.DISABLED=new Yi(-1,0,0);class Ji{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ji(0)}static cr(){return new Ji(-1)}}const Zi="LruGarbageCollector",es=1048576;function ts(e,t){let[n,r]=e,[i,s]=t;const o=K(n,i);return 0===o?K(r,s):o}class ns{constructor(e){this.Ir=e,this.buffer=new pt(ts),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ts(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rs{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){T(Zi,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ie(e)?T(Zi,"Ignoring IndexedDB error during garbage collection: ",e):await Ce(e)}await this.Vr(3e5)})}}class is{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Te.resolve(Ae.ce);const n=new ns(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector","Garbage collection skipped; disabled"),Te.resolve(Qi)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(T("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qi):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,i,s,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(T("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),C()<=a.$b.DEBUG&&T("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+"ms\n"+`\tRemoved ${i} targets in `+(l-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),Te.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ss(e,t){return new is(e,t)}class os{constructor(){this.changes=new Xn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Te.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class as{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ls{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Pr(n.mutation,e,gt.empty(),ge.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ar()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar();const r=nr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=er();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=nr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ar()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Jn();const s=ir(),o=ir();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Dr)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Pr(o.mutation,t,o.mutation.getFieldMask(),ge.now())):s.set(t.key,gt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>o.set(e,new as(t,s.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=ir();let r=new dt((e,t)=>e-t),i=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||gt.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ar()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=rr();l.forEach(e=>{if(!i.has(e)){const r=Ir(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Te.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return se.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):Te.resolve(nr());let o=be,a=i;return s.next(t=>Te.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?Te.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,ar())).next(e=>({batchId:o,changes:tr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new se(t)).next(e=>{let t=er();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=er();return this.indexManager.getCollectionParents(e,i).next(o=>Te.forEach(o,o=>{const a=function(e,t){return new Ln(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sn.newInvalidDocument(r)))});let n=er();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Pr(s.mutation,r,gt.empty(),ge.now()),Wn(t,r)&&(n=n.insert(e,r))}),n})}}class cs{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Te.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vi(e.createTime)}}(t)),Te.resolve()}getNamedQuery(e,t){return Te.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Hi(e.bundledQuery),readTime:vi(e.readTime)}}(t)),Te.resolve()}}class us{constructor(){this.overlays=new dt(se.comparator),this.qr=new Map}getOverlay(e,t){return Te.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nr();return Te.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Te.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Te.resolve()}getOverlaysForCollection(e,t,n){const r=nr(),i=t.length+1,s=new se(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Te.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new dt((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=nr(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nr(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Te.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qr(t,n));let i=this.qr.get(t);void 0===i&&(i=ar(),this.qr.set(t,i)),this.qr.set(t,i.add(n.key))}}class ds{constructor(){this.sessionToken=bt.EMPTY_BYTE_STRING}getSessionToken(e){return Te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Te.resolve()}}class hs{constructor(){this.Qr=new pt(fs.$r),this.Ur=new pt(fs.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new fs(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new fs(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new se(new ne([])),n=new fs(t,e),r=new fs(t,e+1),i=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),i.push(e.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new se(new ne([])),n=new fs(t,e),r=new fs(t,e+1);let i=ar();return this.Ur.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new fs(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fs{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return se.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||se.comparator(e.key,t.key)}}class ps{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pt(fs.$r)}checkEmpty(e){return Te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Vr(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.Zr=this.Zr.add(new fs(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Te.resolve(s)}lookupMutationBatch(e,t){return Te.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),i=r<0?0:r;return Te.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Te.resolve(0===this.mutationQueue.length?Pe:this.tr-1)}getAllMutationBatches(e){return Te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fs(t,0),r=new fs(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);i.push(t)}),Te.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pt(K);return t.forEach(e=>{const t=new fs(e,0),r=new fs(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Te.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;se.isDocumentKey(i)||(i=i.child(""));const s=new fs(new se(i),0);let o=new pt(K);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},s),Te.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){L(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Te.forEach(t.mutations,r=>{const i=new fs(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new fs(t,0),r=this.Zr.firstAfterOrEqual(n);return Te.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Te.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ms{constructor(e){this.ri=e,this.docs=new dt(se.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Te.resolve(n?n.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let n=Jn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sn.newInvalidDocument(e))}),Te.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Jn();const s=t.path,o=new se(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||Se(xe(o),n)<=0||(r.has(o.key)||Wn(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return Te.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return Te.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new gs(this)}getSize(e){return Te.resolve(this.size)}}class gs extends os{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Te.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class ys{constructor(e){this.persistence=e,this.si=new Xn(e=>An(e),Pn),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new hs,this.targetCount=0,this.ai=Ji.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Te.resolve()}getLastRemoteSnapshotVersion(e){return Te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Te.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ji(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Te.resolve()}updateTargetData(e,t){return this.Pr(t),Te.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Te.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.si.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Te.waitFor(i).next(()=>r)}getTargetCount(e){return Te.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Te.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Te.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Te.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Te.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Te.resolve(n)}containsKey(e,t){return Te.resolve(this._i.containsKey(t))}}class bs{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ae(0),this.li=!1,this.li=!0,this.hi=new ds,this.referenceDelegate=e(this),this.Pi=new ys(this),this.indexManager=new Gi,this.remoteDocumentCache=function(e){return new ms(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Bi(t),this.Ii=new cs(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new us,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new ps(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){T("MemoryPersistence","Starting transaction:",e);const r=new vs(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Te.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class vs extends Ee{constructor(e){super(),this.currentSequenceNumber=e}}class ws{constructor(e){this.persistence=e,this.Ri=new hs,this.Vi=null}static mi(e){return new ws(e)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Te.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Te.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Te.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Te.forEach(this.fi,n=>{const r=se.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ye.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Te.or([()=>Te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xs{constructor(e,t){this.persistence=e,this.pi=new Xn(e=>Oe(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ss(this,t)}static mi(e,t){return new xs(e,t)}Ei(){}di(e){return Te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Te.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Te.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,i.removeEntry(r,ye.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Te.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Te.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Te.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wt(e.data.value)),t}br(e,t,n){return Te.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Te.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ks{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ar(),r=ar();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ks(e,t.fromCache,n,r)}}class Ss{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class _s{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,l.nr)()?8:Ne((0,l.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ys(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ws(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ss;return this.Ss(e,t,n).next(r=>{if(i.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>i.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(C()<=a.$b.DEBUG&&T("QueryEngine","SDK will not create cache indexes for query:",Hn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Te.resolve()):(C()<=a.$b.DEBUG&&T("QueryEngine","Query:",Hn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(C()<=a.$b.DEBUG&&T("QueryEngine","The SDK decides to create cache indexes for query:",Hn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):Te.resolve())}ys(e,t){if(On(t))return Te.resolve(null);let n=Fn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Un(t,null,"F"),n=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=ar(...r);return this.ps.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.Ds(t,r);return this.Cs(t,s,i,n.readTime)?this.ys(e,Un(t,null,"F")):this.vs(e,s,t,n)}))})))}ws(e,t,n,r){return On(t)||r.isEqual(ye.min())?Te.resolve(null):this.ps.getDocuments(e,n).next(i=>{const s=this.Ds(t,i);return this.Cs(t,s,n,r)?Te.resolve(null):(C()<=a.$b.DEBUG&&T("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hn(t)),this.vs(e,s,t,we(r,be)).next(e=>e))})}Ds(e,t){let n=new pt(Kn(e));return t.forEach((t,r)=>{Wn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ss(e,t,n){return C()<=a.$b.DEBUG&&T("QueryEngine","Using full collection scan to execute query:",Hn(t)),this.ps.getDocumentsMatchingQuery(e,t,ke.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Es="LocalStore",Cs=3e8;class Ts{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new dt(K),this.xs=new Xn(e=>An(e),Pn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ls(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Ns(e,t,n,r){return new Ts(e,t,n,r)}async function Is(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=ar();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:i,addedBatchIds:s}))})})}function As(e){const t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Ps(e,t,n){let r=ar(),i=ar();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Jn();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(ye.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):T(Es,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{ks:r,qs:i}})}function js(e,t){const n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ls(e,t){const n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(i=>i?(r=i,Te.resolve(r)):n.Pi.allocateTargetId(e).next(i=>(r=new qi(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Rs(e,t,n){const r=R(e),i=r.Ms.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ie(e))throw e;T(Es,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(i.target)}function Ds(e,t,n){const r=R(e);let i=ye.min(),s=ar();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=R(e),i=r.xs.get(n);return void 0!==i?Te.resolve(r.Ms.get(i)):r.Pi.getTargetData(t,n)}(r,e,Fn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?i:ye.min(),n?s:ar())).next(e=>(Os(r,Gn(t),e),{documents:e,Qs:s})))}function Os(e,t,n){let r=e.Os.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Ms{constructor(){this.activeTargetIds=cr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zs{constructor(){this.Mo=new Ms,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ms,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fs{Oo(e){}shutdown(){}}const $s="ConnectivityMonitor";class Vs{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){T($s,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){T($s,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Us=null;function qs(){return null===Us?Us=268435456+Math.round(2147483648*Math.random()):Us++,"0x"+Us.toString(16)}const Bs="RestConnection",Hs={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ws{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Pt?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,i){const s=qs(),o=this.zo(e,t.toUriEncodedString());T(Bs,`Sending RPC '${e}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,i);const{host:c}=new URL(o),u=(0,l.zJ)(c);return this.Jo(e,o,a,n,u).then(t=>(T(Bs,`Received RPC '${e}' ${s}: `,t),t),t=>{throw I(Bs,`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,i,s){return this.Go(e,t,n,r,i)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Hs[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Gs{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ks="WebChannelConnection";class Qs extends Ws{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,i){const s=qs();return new Promise((i,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(f.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:const t=a.getResponseJson();T(Ks,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case p.TIMEOUT:T(Ks,`RPC '${e}' ${s} timed out`),o(new O(D.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=a.getStatus();if(T(Ks,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(t)>=0?t:D.UNKNOWN}(t.status);o(new O(e,t.message))}else o(new O(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(D.UNAVAILABLE,"Connection failed."));break;default:P(9055,{l_:e,streamId:s,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{T(Ks,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);T(Ks,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=qs(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=b(),o=y(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");T(Ks,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=s.createWebChannel(c,a);this.I_(u);let d=!1,f=!1;const p=new Gs({Yo:t=>{f?T(Ks,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(T(Ks,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),T(Ks,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),v=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return v(u,h.EventType.OPEN,()=>{f||(T(Ks,`RPC '${e}' stream ${r} transport opened.`),p.o_())}),v(u,h.EventType.CLOSE,()=>{f||(f=!0,T(Ks,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))}),v(u,h.EventType.ERROR,t=>{f||(f=!0,I(Ks,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.a_(new O(D.UNAVAILABLE,"The operation could not be completed")))}),v(u,h.EventType.MESSAGE,t=>{if(!f){const n=t.data[0];L(!!n,16349);const i=n,s=i?.error||i[0]?.error;if(s){T(Ks,`RPC '${e}' stream ${r} received error:`,s);const t=s.status;let n=function(e){const t=Hr[e];if(void 0!==t)return Kr(t)}(t),i=s.message;void 0===n&&(n=D.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),f=!0,p.a_(new O(n,i)),u.close()}else T(Ks,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}}),v(o,g.STAT_EVENT,t=>{t.stat===m.PROXY?T(Ks,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===m.NOPROXY&&T(Ks,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Xs(){return"undefined"!=typeof document?document:null}function Ys(e){return new pi(e,!0)}class Js{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&T("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Zs="PersistentStream";class eo{constructor(e,t,n,r,i,s,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Js(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(N(t.toString()),N("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===D.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new O(D.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return T(Zs,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(T(Zs,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class to extends eo{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(L(void 0===t||"string"==typeof t,58123),bt.fromBase64String(t||"")):(L(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),bt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?D.UNKNOWN:Kr(e.code);return new O(t,e.message||"")}(o);n=new oi(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=_i(e,r.document.name),s=vi(r.document.updateTime),o=r.document.createTime?vi(r.document.createTime):ye.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ii(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=_i(e,r.document),s=r.readTime?vi(r.readTime):ye.min(),o=sn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ii([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=_i(e,r.document),s=r.removedTargetIds||[];n=new ii([],s,i,null)}else{if(!("filter"in t))return P(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Br(r,i),o=e.targetId;n=new si(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?vi(t.readTime):ye.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ti(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=jn(r)?{documents:Pi(e,r)}:{query:ji(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=yi(e,t.resumeToken);const r=mi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=gi(e,t.snapshotVersion.toTimestamp());const r=mi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ti(this.serializer),t.removeTarget=e,this.q_(t)}}class no extends eo{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return L(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,L(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){L(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(L(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?vi(e.updateTime):vi(t);return n.isEqual(ye.min())&&(n=vi(t)),new Er(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=vi(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ti(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ai(this.serializer,e))};this.q_(t)}}class ro{}class io extends ro{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new O(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Go(e,xi(t,n),r,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(D.UNKNOWN,e.toString())})}Ho(e,t,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Ho(e,xi(t,n),r,o,a,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(D.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class so{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(N(t),this.aa=!1):T("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oo="RemoteStore";class ao{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{yo(this)&&(T(oo,"Restarting streams for network reachability change."),await async function(e){const t=R(e);t.Ea.add(4),await co(t),t.Ra.set("Unknown"),t.Ea.delete(4),await lo(t)}(this))})}),this.Ra=new so(n,r)}}async function lo(e){if(yo(e))for(const t of e.da)await t(!0)}async function co(e){for(const t of e.da)await t(!1)}function uo(e,t){const n=R(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),go(n)?mo(n):Oo(n).O_()&&fo(n,t))}function ho(e,t){const n=R(e),r=Oo(n);n.Ia.delete(t),r.O_()&&po(n,t),0===n.Ia.size&&(r.O_()?r.L_():yo(n)&&n.Ra.set("Unknown"))}function fo(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Oo(e).Y_(t)}function po(e,t){e.Va.Ue(t),Oo(e).Z_(t)}function mo(e){e.Va=new li({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Oo(e).start(),e.Ra.ua()}function go(e){return yo(e)&&!Oo(e).x_()&&e.Ia.size>0}function yo(e){return 0===R(e).Ea.size}function bo(e){e.Va=void 0}async function vo(e){e.Ra.set("Online")}async function wo(e){e.Ia.forEach((t,n)=>{fo(e,t)})}async function xo(e,t){bo(e),go(e)?(e.Ra.ha(t),mo(e)):e.Ra.set("Unknown")}async function ko(e,t,n){if(e.Ra.set("Online"),t instanceof oi&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){T(oo,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await So(e,n)}else if(t instanceof ii?e.Va.Ze(t):t instanceof si?e.Va.st(t):e.Va.tt(t),!n.isEqual(ye.min()))try{const t=await As(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Ia.get(r);i&&e.Ia.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(bt.EMPTY_BYTE_STRING,r.snapshotVersion)),po(e,t);const i=new qi(r.target,t,n,r.sequenceNumber);fo(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){T(oo,"Failed to raise snapshot:",t),await So(e,t)}}async function So(e,t,n){if(!Ie(t))throw t;e.Ea.add(1),await co(e),e.Ra.set("Offline"),n||(n=()=>As(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{T(oo,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await lo(e)})}function _o(e,t){return t().catch(n=>So(e,n,t))}async function Eo(e){const t=R(e),n=Mo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Co(t);)try{const e=await js(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,To(t,e)}catch(e){await So(t,e)}No(t)&&Io(t)}function Co(e){return yo(e)&&e.Ta.length<10}function To(e,t){e.Ta.push(t);const n=Mo(e);n.O_()&&n.X_&&n.ea(t.mutations)}function No(e){return yo(e)&&!Mo(e).x_()&&e.Ta.length>0}function Io(e){Mo(e).start()}async function Ao(e){Mo(e).ra()}async function Po(e){const t=Mo(e);for(const n of e.Ta)t.ea(n.mutations)}async function jo(e,t,n){const r=e.Ta.shift(),i=Ur.from(r,t,n);await _o(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Eo(e)}async function Lo(e,t){t&&Mo(e).X_&&await async function(e,t){if(function(e){return Gr(e)&&e!==D.ABORTED}(t.code)){const n=e.Ta.shift();Mo(e).B_(),await _o(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Eo(e)}}(e,t),No(e)&&Io(e)}async function Ro(e,t){const n=R(e);n.asyncQueue.verifyOperationInProgress(),T(oo,"RemoteStore received new credentials");const r=yo(n);n.Ea.add(3),await co(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await lo(n)}async function Do(e,t){const n=R(e);t?(n.Ea.delete(2),await lo(n)):t||(n.Ea.add(2),await co(n),n.Ra.set("Unknown"))}function Oo(e){return e.ma||(e.ma=function(e,t,n){const r=R(e);return r.sa(),new to(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:vo.bind(null,e),t_:wo.bind(null,e),r_:xo.bind(null,e),H_:ko.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),go(e)?mo(e):e.Ra.set("Unknown")):(await e.ma.stop(),bo(e))})),e.ma}function Mo(e){return e.fa||(e.fa=function(e,t,n){const r=R(e);return r.sa(),new no(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ao.bind(null,e),r_:Lo.bind(null,e),ta:Po.bind(null,e),na:jo.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Eo(e)):(await e.fa.stop(),e.Ta.length>0&&(T(oo,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class zo{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new zo(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fo(e,t){if(N("AsyncQueue",`${t}: ${e}`),Ie(e))return new O(D.UNAVAILABLE,`${t}: ${e}`);throw e}class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||se.comparator(t.key,n.key):(e,t)=>se.comparator(e.key,t.key),this.keyedMap=er(),this.sortedSet=new dt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $o))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new $o;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vo{constructor(){this.ga=new dt(se.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Uo{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new Uo(e,t,$o.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class qo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Bo{constructor(){this.queries=Ho(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=Ho(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new O(D.ABORTED,"Firestore shutting down"))}}function Ho(){return new Xn(e=>Bn(e),qn)}async function Wo(e,t){const n=R(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.ba()&&t.Da()&&(r=2):(s=new qo,r=t.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Fo(e,`Initialization of query '${Hn(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,s),s.Sa.push(t),t.va(n.onlineState),s.wa&&t.Fa(s.wa)&&Xo(n)}async function Go(e,t){const n=R(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.Sa.indexOf(t);e>=0&&(s.Sa.splice(e,1),0===s.Sa.length?i=t.Da()?0:1:!s.ba()&&t.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ko(e,t){const n=R(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(i)&&(r=!0);t.wa=i}}r&&Xo(n)}function Qo(e,t,n){const r=R(e),i=r.queries.get(t);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(t)}function Xo(e){e.Ca.forEach(e=>{e.next()})}var Yo,Jo;(Jo=Yo||(Yo={})).Ma="default",Jo.Cache="cache";class Zo{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Uo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yo.Cache}}class ea{constructor(e){this.key=e}}class ta{constructor(e){this.key=e}}class na{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ar(),this.mutatedKeys=ar(),this.eu=Kn(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Vo,r=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Wn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{tu:s,iu:n,Cs:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const s=e.iu.ya();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==s.length||l?{snapshot:new Uo(this.query,e.tu,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vo,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ar(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ta(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ea(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ar();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ra="SyncEngine";class ia{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class sa{constructor(e){this.key=e,this.hu=!1}}class oa{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Xn(e=>Bn(e),qn),this.Iu=new Map,this.Eu=new Set,this.du=new dt(se.comparator),this.Au=new Map,this.Ru=new hs,this.Vu={},this.mu=new Map,this.fu=Ji.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function aa(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Na(e);let i;const s=r.Tu.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await ca(r,t,n,!0),i}async function la(e,t){const n=Na(e);await ca(n,t,!0,!1)}async function ca(e,t,n,r){const i=await Ls(e.localStore,Fn(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await ua(e,t,s,"current"===o,i.resumeToken)),e.isPrimaryClient&&n&&uo(e.remoteStore,i),a}async function ua(e,t,n,r,i){e.pu=(t,n,r)=>async function(e,t,n,r){let i=t.view.ru(n);i.Cs&&(i=await Ds(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,i)}));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return ka(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const s=await Ds(e.localStore,t,!0),o=new na(t,s.Qs),a=o.ru(s.documents),l=ri.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);ka(e,n,c.au);const u=new ia(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function da(e,t,n){const r=R(e),i=r.Tu.get(t),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(e=>!qn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rs(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&ho(r.remoteStore,i.targetId),wa(r,i.targetId)}).catch(Ce)):(wa(r,i.targetId),await Rs(r.localStore,i.targetId,!0))}async function ha(e,t){const n=R(e),r=n.Tu.get(t),i=n.Iu.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ho(n.remoteStore,r.targetId))}async function fa(e,t){const n=R(e);try{const e=await function(e,t){const n=R(e),r=t.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const o=[];t.targetChanges.forEach((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,s.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(bt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Cs||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Pi.updateTargetData(e,c))});let a=Jn(),l=ar();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Ps(e,s,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ye.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Te.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(L(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?L(r.hu,14607):e.removedDocuments.size>0&&(L(r.hu,42227),r.hu=!1))}),await Ea(n,e,t)}catch(e){await Ce(e)}}function pa(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const i=r.view.va(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.Sa)i.va(t)&&(r=!0)}),r&&Xo(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ma(e,t,n){const r=R(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Au.get(t),s=i&&i.key;if(s){let e=new dt(se.comparator);e=e.insert(s,sn.newNoDocument(s,ye.min()));const n=ar().add(s),i=new ni(ye.min(),new Map,new dt(K),e,n);await fa(r,i),r.du=r.du.remove(s),r.Au.delete(t),_a(r)}else await Rs(r.localStore,t,!1).then(()=>wa(r,t,n)).catch(Ce)}async function ga(e,t){const n=R(e),r=t.batch.batchId;try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Te.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);L(null!==s,48541),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ar();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);va(n,r,null),ba(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ea(n,e)}catch(e){await Ce(e)}}async function ya(e,t,n){const r=R(e);try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(L(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);va(r,t,n),ba(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ea(r,e)}catch(n){await Ce(n)}}function ba(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function va(e,t,n){const r=R(e);let i=r.Vu[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Vu[r.currentUser.toKey()]=i}}function wa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||xa(e,t)})}function xa(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ho(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),_a(e))}function ka(e,t,n){for(const r of n)r instanceof ea?(e.Ru.addReference(r.key,t),Sa(e,r)):r instanceof ta?(T(ra,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||xa(e,r.key)):P(19791,{wu:r})}function Sa(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(T(ra,"New document in limbo: "+n),e.Eu.add(r),_a(e))}function _a(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new se(ne.fromString(t)),r=e.fu.next();e.Au.set(r,new sa(n)),e.du=e.du.insert(n,r),uo(e.remoteStore,new qi(Fn(Dn(n.path)),r,"TargetPurposeLimboResolution",Ae.ce))}}async function Ea(e,t,n){const r=R(e),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){i.push(e);const t=ks.As(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Te.forEach(t,t=>Te.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Te.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ie(e))throw e;T(Es,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,i)}}}(r.localStore,s))}async function Ca(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){T(ra,"User change. New user:",t.toKey());const e=await Is(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new O(D.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ea(n,e.Ls)}}function Ta(e,t){const n=R(e),r=n.Au.get(t);if(r&&r.hu)return ar().add(r.key);{let e=ar();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Na(e){const t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fa.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ta.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ma.bind(null,t),t.Pu.H_=Ko.bind(null,t.eventManager),t.Pu.yu=Qo.bind(null,t.eventManager),t}function Ia(e){const t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ga.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ya.bind(null,t),t}class Aa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ys(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ns(this.persistence,new _s,e.initialUser,this.serializer)}Cu(e){return new bs(ws.mi,this.serializer)}Du(e){return new zs}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Aa.provider={build:()=>new Aa};class Pa extends Aa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){L(this.persistence.referenceDelegate instanceof xs,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new rs(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Yi.withCacheSize(this.cacheSizeBytes):Yi.DEFAULT;return new bs(e=>xs.mi(e,t),this.serializer)}}class ja{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pa(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ca.bind(null,this.syncEngine),await Do(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Bo}createDatastore(e){const t=Ys(e.databaseInfo.databaseId),n=function(e){return new Qs(e)}(e.databaseInfo);return function(e,t,n,r){return new io(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ao(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>pa(this.syncEngine,e,0),Vs.v()?new Vs:new Fs)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new oa(e,t,n,r,i,s);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=R(e);T(oo,"RemoteStore shutting down."),t.Ea.add(5),await co(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ja.provider={build:()=>new ja};class La{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):N("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Ra="FirestoreClient";class Da{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=S.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{T(Ra,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(T(Ra,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Oa(e,t){e.asyncQueue.verifyOperationInProgress(),T(Ra,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Is(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ma(e,t){e.asyncQueue.verifyOperationInProgress();const n=await za(e);T(Ra,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ro(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ro(t.remoteStore,n)),e._onlineComponents=t}async function za(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){T(Ra,"Using user provided OfflineComponentProvider");try{await Oa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===D.FAILED_PRECONDITION||e.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;I("Error using user provided cache. Falling back to memory cache: "+n),await Oa(e,new Aa)}}else T(Ra,"Using default OfflineComponentProvider"),await Oa(e,new Pa(void 0));return e._offlineComponents}async function Fa(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(T(Ra,"Using user provided OnlineComponentProvider"),await Ma(e,e._uninitializedComponentsProvider._online)):(T(Ra,"Using default OnlineComponentProvider"),await Ma(e,new ja))),e._onlineComponents}function $a(e){return Fa(e).then(e=>e.syncEngine)}async function Va(e){const t=await Fa(e),n=t.eventManager;return n.onListen=aa.bind(null,t.syncEngine),n.onUnlisten=da.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=la.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ha.bind(null,t.syncEngine),n}function Ua(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new La({next:a=>{s.Nu(),t.enqueueAndForget(()=>Go(e,o));const l=a.docs.has(n);!l&&a.fromCache?i.reject(new O(D.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?i.reject(new O(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:e=>i.reject(e)}),o=new Zo(Dn(n.path),s,{includeMetadataChanges:!0,qa:!0});return Wo(e,o)}(await Va(e),e.asyncQueue,t,n,r)),r.promise}function qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new La({next:n=>{s.Nu(),t.enqueueAndForget(()=>Go(e,o)),n.fromCache&&"server"===r.source?i.reject(new O(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Zo(n,s,{includeMetadataChanges:!0,qa:!0});return Wo(e,o)}(await Va(e),e.asyncQueue,t,n,r)),r.promise}function Ba(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ha=new Map,Wa="firestore.googleapis.com",Ga=!0;class Ka{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new O(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wa,this.ssl=Ga}else this.host=e.host,this.ssl=e.ssl??Ga;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xi;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<es)throw new O(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new O(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ba(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new O(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new O(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qa{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ka({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ka(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new F;switch(e.type){case"firstParty":return new q(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ha.get(e);t&&(T("ComponentProvider","Removing Datastore"),Ha.delete(e),t.terminate())}(this),Promise.resolve()}}class Xa{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xa(this.firestore,e,this._query)}}class Ya{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ya(this.firestore,e,this._key)}toJSON(){return{type:Ya._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fe(t,Ya._jsonSchema))return new Ya(e,n||null,new se(ne.fromString(t.referencePath)))}}Ya._jsonSchemaVersion="firestore/documentReference/1.0",Ya._jsonSchema={type:he("string",Ya._jsonSchemaVersion),referencePath:he("string")};class Ja extends Xa{constructor(e,t,n){super(e,t,Dn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ya(this.firestore,null,new se(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function Za(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),oe("collection","path",t),e instanceof Qa){const n=ne.fromString(t,...r);return le(n),new Ja(e,null,n)}{if(!(e instanceof Ya||e instanceof Ja))throw new O(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return le(n),new Ja(e.firestore,null,n)}}function el(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),1===arguments.length&&(t=G.newId()),oe("doc","path",t),e instanceof Qa){const n=ne.fromString(t,...r);return ae(n),new Ya(e,null,new se(n))}{if(!(e instanceof Ya||e instanceof Ja))throw new O(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return ae(n),new Ya(e.firestore,e instanceof Ja?e.converter:null,new se(n))}}const tl="AsyncQueue";class nl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Js(this,"async_queue_retry"),this._c=()=>{const e=Xs();e&&T(tl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Xs();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Xs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new M;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ie(e))throw e;T(tl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,N("INTERNAL UNHANDLED ERROR: ",rl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=zo.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:rl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class il extends Qa{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new nl,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nl(e),this._firestoreClient=void 0,await e}}}function sl(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||Pt,i=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=de(e,Qa);const i=(0,l.zJ)(t),s=e._getSettings(),o={...s,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;i&&((0,l.gE)(`https://${a}`),(0,l.P1)("Firestore",!0)),s.host!==Wa&&s.host!==a&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:a,ssl:i,emulatorOptions:r};if(!(0,l.bD)(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=S.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,e._app?.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new O(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new S(i)}e._authCredentials=new $(new z(t,n))}}(i,...e)}return i}function ol(e){if(e._terminated)throw new O(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||al(e),e._firestoreClient}function al(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new At(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ba(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Da(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(bt.fromBase64String(e))}catch(e){throw new O(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ll(bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ll._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fe(e,ll._jsonSchema))return ll.fromBase64String(e.bytes)}}ll._jsonSchemaVersion="firestore/bytes/1.0",ll._jsonSchema={type:he("string",ll._jsonSchemaVersion),bytes:he("string")};class cl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new O(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ie(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._methodName=e}}class dl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dl._jsonSchemaVersion}}static fromJSON(e){if(fe(e,dl._jsonSchema))return new dl(e.latitude,e.longitude)}}dl._jsonSchemaVersion="firestore/geoPoint/1.0",dl._jsonSchema={type:he("string",dl._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};class hl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fe(e,hl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new hl(e.vectorValues);throw new O(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hl._jsonSchemaVersion="firestore/vectorValue/1.0",hl._jsonSchema={type:he("string",hl._jsonSchemaVersion),vectorValues:he("object")};const fl=/^__.*__$/;class pl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rr(e,this.data,t,this.fieldTransforms)}}class ml{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}class yl{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(gl(this.Ac)&&fl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ys(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yl({Ac:e,methodName:t,Dc:n,path:ie.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vl(e){const t=e._freezeSettings(),n=Ys(e._databaseId);return new bl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wl(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(s.merge||s.mergeFields?2:0,t,n,i);Nl("Data must be an object, but it was:",o,r);const a=Cl(r,o);let l,c;if(s.merge)l=new gt(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Il(t,r,n);if(!o.contains(i))throw new O(D.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Ll(e,i)||e.push(i)}l=new gt(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new pl(new nn(a),l,c)}class xl extends ul{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xl}}function kl(e,t,n,r){const i=e.Cc(1,t,n);Nl("Data must be an object, but it was:",i,r);const s=[],o=nn.empty();ct(r,(e,r)=>{const a=Pl(t,e,n);r=(0,l.Ku)(r);const c=i.yc(a);if(r instanceof xl)s.push(a);else{const e=El(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new gt(s);return new ml(o,a,i.fieldTransforms)}function Sl(e,t,n,r,i,s){const o=e.Cc(1,t,n),a=[Il(t,r,n)],c=[i];if(s.length%2!=0)throw new O(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<s.length;l+=2)a.push(Il(t,s[l])),c.push(s[l+1]);const u=[],d=nn.empty();for(let f=a.length-1;f>=0;--f)if(!Ll(u,a[f])){const e=a[f];let t=c[f];t=(0,l.Ku)(t);const n=o.yc(e);if(t instanceof xl)u.push(e);else{const r=El(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new gt(u);return new ml(d,h,o.fieldTransforms)}function _l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return El(n,e.Cc(r?4:3,t))}function El(e,t){if(Tl(e=(0,l.Ku)(e)))return Nl("Unsupported field value:",t,e),Cl(e,t);if(e instanceof ul)return function(e,t){if(!gl(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=El(i,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ge.fromDate(e);return{timestampValue:gi(t.serializer,n)}}if(e instanceof ge){const n=new ge(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gi(t.serializer,n)}}if(e instanceof dl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ll)return{bytesValue:yi(t.serializer,e._byteString)};if(e instanceof Ya){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:wi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof hl)return function(e,t){return{mapValue:{fields:{[Lt]:{stringValue:Ot},[Mt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ur(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${ue(e)}`)}(e,t)}function Cl(e,t){const n={};return ut(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ct(e,(e,r)=>{const i=El(r,t.mc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Tl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ge||e instanceof dl||e instanceof ll||e instanceof Ya||e instanceof ul||e instanceof hl)}function Nl(e,t,n){if(!Tl(n)||!ce(n)){const r=ue(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Il(e,t,n){if((t=(0,l.Ku)(t))instanceof cl)return t._internalPath;if("string"==typeof t)return Pl(e,t);throw jl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Al=new RegExp("[~\\*/\\[\\]]");function Pl(e,t,n){if(t.search(Al)>=0)throw jl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cl(...t.split("."))._internalPath}catch(r){throw jl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function jl(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new O(D.INVALID_ARGUMENT,a+e+l)}function Ll(e,t){return e.some(e=>e.isEqual(t))}class Rl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ya(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ol("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dl extends Rl{data(){return super.data()}}function Ol(e,t){return"string"==typeof t?Pl(e,t):t instanceof cl?t._internalPath:t._delegate._internalPath}function Ml(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new O(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zl{}class Fl extends zl{}function $l(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof zl&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof Ul).length,n=e.filter(e=>e instanceof Vl).length;if(t>1||t>0&&n>0)throw new O(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Vl extends Fl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vl(e,t,n)}_apply(e){const t=this._parse(e);return Gl(e._query,t),new Xa(e.firestore,e.converter,Vn(e._query,t))}_parse(e){const t=vl(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new O(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Wl(o,s);const t=[];for(const n of o)t.push(Hl(r,e,n));a={arrayValue:{values:t}}}else a=Hl(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Wl(o,s),a=_l(n,t,o,"in"===s||"not-in"===s);return hn.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ul extends zl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ul(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Gl(n,i),n=Vn(n,i)}(e._query,t),new Xa(e.firestore,e.converter,Vn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class ql extends Fl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ql(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new O(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new O(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cn(t,n)}(e._query,this._field,this._direction);return new Xa(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ln(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Bl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ol("orderBy",e);return ql._create(n,t)}function Hl(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new O(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mn(t)&&-1!==n.indexOf("/"))throw new O(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ne.fromString(n));if(!se.isDocumentKey(r))throw new O(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gt(e,new se(r))}if(n instanceof Ya)return Gt(e,n._key);throw new O(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ue(n)}.`)}function Wl(e,t){if(!Array.isArray(e)||0===e.length)throw new O(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Gl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new O(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new O(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Kl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ct(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[Mt].arrayValue?.values?.map(e=>xt(e.doubleValue));return new hl(t)}convertGeoPoint(e){return new dl(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Nt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(It(e));default:return null}}convertTimestamp(e){const t=wt(e);return new ge(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ne.fromString(e);L(Ui(n),9688,{name:e});const r=new jt(n.get(1),n.get(3)),i=new se(n.popFirst(5));return r.isEqual(t)||N(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function Ql(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Xl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yl extends Rl{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yl._jsonSchema={type:he("string",Yl._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};class Jl extends Yl{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Zl{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Jl(this._firestore,this._userDataWriter,n.key,n,new Xl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Jl(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Xl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Jl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ec(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ec(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P(61501,{type:e})}}function tc(e){e=de(e,Ya);const t=de(e.firestore,il);return Ua(ol(t),e._key).then(n=>ac(t,e,n))}Zl._jsonSchemaVersion="firestore/querySnapshot/1.0",Zl._jsonSchema={type:he("string",Zl._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};class nc extends Kl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ya(this.firestore,null,t)}}function rc(e){e=de(e,Xa);const t=de(e.firestore,il),n=ol(t),r=new nc(t);return Ml(e._query),qa(n,e._query).then(n=>new Zl(t,r,e,n))}function ic(e,t,n){e=de(e,Ya);const r=de(e.firestore,il),i=Ql(e.converter,t,n);return oc(r,[wl(vl(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Cr.none())])}function sc(e,t,n){e=de(e,Ya);const r=de(e.firestore,il),i=vl(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof cl?Sl(i,"updateDoc",e._key,t,n,a):kl(i,"updateDoc",e._key,t),oc(r,[s.toMutation(e._key,Cr.exists(!0))])}function oc(e,t){return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ia(e);try{const e=await function(e,t){const n=R(e),r=ge.now(),i=t.reduce((e,t)=>e.add(t.key),ar());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Jn(),l=ar();return n.Ns.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=jr(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Dr(e.key,t,rn(t.value.mapValue),Cr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:tr(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new dt(K)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ea(r,e.changes),await Eo(r.remoteStore)}catch(e){const t=Fo(e,"Failed to persist write");n.reject(t)}}(await $a(e),t,n)),n.promise}(ol(e),t)}function ac(e,t,n){const r=n.docs.get(t._key),i=new nc(e);return new Yl(e,i,t._key,r,new Xl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){_=e}(s.MF),(0,s.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new il(new V(e.getProvider("auth-internal")),new H(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(e.options.projectId,t)}(s,r),s);return i={useFetchStreams:t,...i},o._setSettings(i),o},"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(x,k,e),(0,s.KO)(x,k,"esm2020")}()},672:(e,t,n)=>{var r=n(43);function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(i(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(i(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),i="string"===typeof t.integrity?t.integrity:void 0,s="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:i,fetchPriority:s}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:i,fetchPriority:s,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},719:(e,t,n)=>{n.d(t,{Yk:()=>u,as:()=>o,bZ:()=>a,logout:()=>c,nS:()=>l});var r=n(823),i=n(667),s=n(791);const o=async(e,t)=>{try{console.log("\ud83d\udd10 Trying to login teacher...");const n=(await(0,r.x9)(s.j,e,t)).user,o=await(0,i.x7)((0,i.H9)(s.db,"teachers",n.uid));if(o.exists())return console.log("\u2705 Teacher login successful!"),{success:!0,user:{uid:n.uid,email:n.email,role:"teacher",...o.data()}};{console.log("\ud83d\udcdd Creating teacher profile automatically...");const e={email:n.email,displayName:"Teacher Alex",role:"teacher",createdAt:new Date};return await(0,i.BN)((0,i.H9)(s.db,"teachers",n.uid),e),console.log("\u2705 Teacher profile created and login successful!"),{success:!0,user:{uid:n.uid,email:n.email,role:"teacher",...e}}}}catch(n){return console.log("\u274c Teacher login failed:",n.message),{success:!1,error:n.message}}},a=async(e,t)=>{try{console.log("\ud83c\udf93 Trying to login student...");const n=`${e}@teacher-alex.com`,o=(await(0,r.x9)(s.j,n,t)).user,a=await(0,i.x7)((0,i.H9)(s.db,"students",e));if(a.exists())return console.log("\u2705 Student login successful!"),{success:!0,user:{uid:o.uid,username:e,role:"student",...a.data()}};throw new Error("Student account not found.")}catch(n){return console.log("\u274c Student login failed:",n.message),{success:!1,error:n.message}}},l=async e=>{try{const{username:t,password:n,name:o,series:a}=e;console.log("\ud83d\udc68\u200d\ud83c\udf93 Creating student account for:",o);const l=`${t}@teacher-alex.com`,c=(await(0,r.eJ)(s.j,l,n)).user;return await(0,i.BN)((0,i.H9)(s.db,"students",t),{name:o,username:t,email:l,uid:c.uid,series:a,createdAt:new Date,progress:{},lastActive:new Date}),await(0,r.CI)(s.j),console.log("\u2705 Student account created successfully!"),{success:!0,message:`Student ${o} created successfully!`}}catch(t){return console.log("\u274c Failed to create student:",t.message),{success:!1,error:t.message}}},c=async()=>{try{return await(0,r.CI)(s.j),console.log("\ud83d\udc4b User logged out successfully"),{success:!0}}catch(e){return console.log("\u274c Logout failed:",e.message),{success:!1,error:e.message}}},u=e=>(0,r.hg)(s.j,e)},776:(e,t,n)=>{n.d(t,{cY:()=>p,FA:()=>L,g:()=>j,u:()=>a,Uj:()=>o,Fy:()=>y,tD:()=>V,bD:()=>O,hp:()=>$,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>f,mS:()=>l,Ku:()=>B,ZQ:()=>x,sr:()=>E,zJ:()=>m,c1:()=>_,Im:()=>D,lT:()=>T,zW:()=>A,jZ:()=>k,lV:()=>C,nr:()=>N,Ov:()=>I,gE:()=>g,Am:()=>z,I9:()=>F,P1:()=>w,eX:()=>P});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==l)throw new s;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/teacher-alex-academy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>c()?.emulatorHosts?.[e],d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>c()?.config,f=e=>c()?.[`_${e}`];class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function m(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(s)),""].join(".")}const b={};let v=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!m(window.location.host)||b[e]===t||b[e]||v)return;function n(e){return`__firebase__banner__${e}`}b[e]=t;const r="__firebase__banner",i=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{v=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}i?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function S(){const e=c()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function _(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function E(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function T(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function N(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return!S()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function A(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(n){t(n)}})}class j extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],i=r?function(e,t){return e.replace(R,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",s=`${this.serviceName}: ${i} (${n}).`;return new j(n,s,t)}}const R=/\{\$([^}]+)}/g;function D(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(M(n)&&M(s)){if(!O(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function z(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function F(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function $(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function V(e,t){const n=new U(e,t);return n.subscribe.bind(n)}class U{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=q),void 0===r.error&&(r.error=q),void 0===r.complete&&(r.complete=q);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q(){}function B(e){return e&&e._delegate?e._delegate:e}},791:(e,t,n)=>{n.d(t,{j:()=>a,db:()=>l});var r=n(232);(0,r.KO)("firebase","12.0.0","app");var i=n(823),s=n(667);const o=(0,r.Wp)({apiKey:"AIzaSyA27IBxS3B0HC2jECzyQPt-CvflxRzfIW0",authDomain:"teacher-alex-v3.firebaseapp.com",projectId:"teacher-alex-v3",storageBucket:"teacher-alex-v3.firebasestorage.app",messagingSenderId:"38393935707",appId:"1:38393935707:web:6b9a5f1f5a2e282d09cc7e"}),a=(0,i.xI)(o),l=(0,s.aU)(o)},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function i(e,t,r){var i=null;if(void 0!==r&&(i=""+r),void 0!==t.key&&(i=""+t.key),"key"in t)for(var s in r={},t)"key"!==s&&(r[s]=t[s]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:i,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=i,t.jsxs=i},823:(e,t,n)=>{n.d(t,{eJ:()=>at,xI:()=>Ln,hg:()=>ct,x9:()=>lt,CI:()=>ut});var r=n(232),i=n(776),s=n(965),o=n(606);function a(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=a,c=new i.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new s.Vy("@firebase/auth");function d(e){if(u.logLevel<=s.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];u.error(`Auth (${r.MF}): ${e}`,...n)}}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw g(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g(e,...n)}function p(e,t,n){const r={...l(),[t]:n};return new i.FA("auth","Firebase",r).create(t,{appName:e.name})}function m(e){return p(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return c.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw g(t,...r)}}function b(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function v(e,t){e||b(t)}function w(){return"undefined"!==typeof self&&self.location?.href||""}function x(){return"http:"===k()||"https:"===k()}function k(){return"undefined"!==typeof self&&self.location?.protocol||null}class S{constructor(e,t){this.shortDelay=e,this.longDelay=t,v(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(x()||(0,i.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _(e,t){v(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class E{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void b("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void b("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void b("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},T=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],N=new S(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function A(e,t,n,r){return P(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},o={};r&&("GET"===t?o=r:s={body:JSON.stringify(r)});const a=(0,i.Am)({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...s};return(0,i.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),E.fetch()(await L(e,e.config.apiHost,n,a),c)})}async function P(e,t,n){e._canInitEmulator=!1;const r={...C,...t};try{const t=new D(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw O(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw O(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw O(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw O(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw p(e,a,o);h(e,a)}}catch(s){if(s instanceof i.g)throw s;h(e,"network-request-failed",{message:String(s)})}}async function j(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await A(e,t,n,r,i);return"mfaPendingCredential"in s&&h(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function L(e,t,n,r){const i=`${t}${n}?${r}`,s=e,o=s.config.emulator?_(e.config,i):`${e.config.apiScheme}://${i}`;if(T.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function R(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(f(this.auth,"network-request-failed")),N.get())})}}function O(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=f(e,t,r);return i.customData._tokenResponse=n,i}function M(e){return void 0!==e&&void 0!==e.enterprise}class z{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return R(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F(e,t){return A(e,"GET","/v2/recaptchaConfig",I(e,t))}async function $(e,t){return A(e,"POST","/v1/accounts:lookup",t)}function V(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function U(e){return 1e3*Number(e)}function q(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return d("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.u)(n);return e?JSON.parse(e):(d("Failed to decode base64 JWT payload"),null)}catch(s){return d("Caught error parsing JWT payload as JSON",s?.toString()),null}}function B(e){const t=q(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function H(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof i.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=V(this.lastLoginAt),this.creationTime=V(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function K(e){const t=e.auth,n=await e.getIdToken(),r=await H(e,$(t,{idToken:n}));y(r?.users.length,t,"internal-error");const i=r.users[0];e._notifyReloadListener(i);const s=i.providerUserInfo?.length?Q(i.providerUserInfo):[],o=(a=e.providerData,l=s,[...a.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var a,l;const c=e.isAnonymous,u=!(e.email&&i.passwordHash)&&!o?.length,d=!!c&&u,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new G(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function Q(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):B(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=B(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await P(e,{},async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=await L(e,r,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,i.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),E.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new X;return n&&(y("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(y("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return b("not implemented")}}function Y(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class J{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...i}=e;this.providerId="firebase",this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await H(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,i.Ku)(e),r=await n.getIdToken(t),s=q(r);y(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=o?.sign_in_provider;return{claims:s,token:r,authTime:V(U(s.auth_time)),issuedAtTime:V(U(s.iat)),expirationTime:V(U(s.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=(0,i.Ku)(e);await K(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new J({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await K(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(m(this.auth));const e=await this.getIdToken();return await H(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,i=t.phoneNumber??void 0,s=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:f,stsTokenManager:p}=t;y(u&&p,e,"internal-error");const m=X.fromJSON(this.name,p);y("string"===typeof u,e,"internal-error"),Y(n,e.name),Y(r,e.name),y("boolean"===typeof d,e,"internal-error"),y("boolean"===typeof h,e,"internal-error"),Y(i,e.name),Y(s,e.name),Y(o,e.name),Y(a,e.name),Y(l,e.name),Y(c,e.name);const g=new J({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:s,phoneNumber:i,tenantId:o,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new X;r.updateFromServerResponse(t);const i=new J({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await K(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?Q(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!i?.length,o=new X;o.updateFromIdToken(n);const a=new J({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new G(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!i?.length};return Object.assign(a,l),a}}const Z=new Map;function ee(e){v(e instanceof Function,"Expected a class definition");let t=Z.get(e);return t?(v(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Z.set(e,t),t)}class te{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}te.type="NONE";const ne=te;function re(e,t,n){return`firebase:${e}:${t}:${n}`}class ie{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=re(this.userKey,r.apiKey,i),this.fullPersistenceKey=re("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await $(this.auth,{idToken:e}).catch(()=>{});return t?J._fromGetAccountInfoResponse(this.auth,t,e):null}return J._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ie(ee(ne),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||ee(ne);const s=re(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){let n;if("string"===typeof t){const r=await $(e,{idToken:t}).catch(()=>{});if(!r)break;n=await J._fromGetAccountInfoResponse(e,r,t)}else n=J._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch{}})),new ie(i,e,n)):new ie(i,e,n)}}function se(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ce(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(de(t))return"Blackberry";if(he(t))return"Webos";if(ae(t))return"Safari";if((t.includes("chrome/")||le(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/firefox\//i.test(e)}function ae(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/crios\//i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/android/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/blackberry/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/webos/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)();return fe(e)||ue(e)||he(e)||de(e)||/windows phone/i.test(e)||ce(e)}function me(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=se((0,i.ZQ)());break;case"Worker":t=`${se((0,i.ZQ)())}-${e}`;break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${s}`}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(i){r(i)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class ye{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class be{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ee(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await ie.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await $(this,{idToken:e}),n=await J._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,r=n?._redirectEventId,s=await this.tryRedirectSignIn(e);t&&t!==r||!s?.user||(n=s.user,i=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await K(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(m(this));const t=e?(0,i.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(m(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(m(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ee(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return A(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new i.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ee(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await ie.create(this,[ee(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(u.logLevel<=s.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];u.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ve(e){return(0,i.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.tD)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ke(e){return xe.loadJS(e)}function Se(e){return`__${e}${Math.floor(1e6*Math.random())}`}class _e{constructor(){this.enterprise=new Ee}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ee{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ce="NO_RECAPTCHA";class Te{constructor(e){this.type="recaptcha-enterprise",this.auth=ve(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;M(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ce)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new _e).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{F(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new z(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&M(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xe.recaptchaEnterpriseScript;0!==t.length&&(t+=i),ke(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Ne(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new Te(e);let o;if(i)o=Ce;else try{o=await s.verify(n)}catch(l){o=await s.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ie(e,t,n,r,i){if("EMAIL_PASSWORD_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ne(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await Ne(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const i=await Ne(e,t,n);return r(e,i).catch(async i=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===i.code||"auth/invalid-app-credential"===i.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const i=await Ne(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await Ne(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function Ae(e){const t=ve(e),n=await F(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new z(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Te(t).verify()}}function Pe(e,t,n){const r=ve(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!n?.disableWarnings,o=je(t),{host:a,port:l}=function(e){const t=je(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Le(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Le(t)}}}(t),c=null===l?"":`:${l}`,u={url:`${o}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,i.bD)(u,r.config.emulator)&&(0,i.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,i.zJ)(a)?((0,i.gE)(`${o}//${a}${c}`),(0,i.P1)("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function je(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Le(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Re{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return b("not implemented")}_getIdTokenResponse(e){return b("not implemented")}_linkToIdToken(e,t){return b("not implemented")}_getReauthenticationResolver(e){return b("not implemented")}}async function De(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function Oe(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}class Me extends Re{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Me(e,t,"password")}static _fromEmailAndCode(e,t){return new Me(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ie(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:h(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",De,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:h(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ze(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class Fe extends Re{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):h("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...i}=t;if(!n||!r)return null;const s=new Fe(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return ze(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ze(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ze(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.Am)(t)}return e}}async function $e(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}const Ve={USER_NOT_FOUND:"user-not-found"};class Ue extends Re{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ue({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ue({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw O(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,{...t,operation:"REAUTH"}),Ve)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ue({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qe{constructor(e){const t=(0,i.I9)((0,i.hp)(e)),n=t.apiKey??null,r=t.oobCode??null,s=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);y(n&&r&&s,"argument-error"),this.apiKey=n,this.operation=s,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=(0,i.I9)((0,i.hp)(e)).link,n=t?(0,i.I9)((0,i.hp)(t)).deep_link_id:null,r=(0,i.I9)((0,i.hp)(e)).deep_link_id;return(r?(0,i.I9)((0,i.hp)(r)).link:null)||r||n||t||e}(e);try{return new qe(t)}catch{return null}}}class Be{constructor(){this.providerId=Be.PROVIDER_ID}static credential(e,t){return Me._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qe.parseLink(t);return y(n,"argument-error"),Me._fromEmailAndCode(e,n.code,n.tenantId)}}Be.PROVIDER_ID="password",Be.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Be.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class He{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class We extends He{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ge extends We{constructor(){super("facebook.com")}static credential(e){return Fe._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ge.credential(t.oauthAccessToken)}catch{return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";class Ke extends We{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fe._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ke.credential(n,r)}catch{return null}}}Ke.GOOGLE_SIGN_IN_METHOD="google.com",Ke.PROVIDER_ID="google.com";class Qe extends We{constructor(){super("github.com")}static credential(e){return Fe._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qe.credential(t.oauthAccessToken)}catch{return null}}}Qe.GITHUB_SIGN_IN_METHOD="github.com",Qe.PROVIDER_ID="github.com";class Xe extends We{constructor(){super("twitter.com")}static credential(e,t){return Fe._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xe.credential(n,r)}catch{return null}}}async function Ye(e,t){return j(e,"POST","/v1/accounts:signUp",I(e,t))}Xe.TWITTER_SIGN_IN_METHOD="twitter.com",Xe.PROVIDER_ID="twitter.com";class Je{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await J._fromIdTokenResponse(e,n,r),s=Ze(n);return new Je({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ze(n);return new Je({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class et extends i.g{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw et._fromErrorAndOperation(e,n,t,r);throw n})}async function nt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await H(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Je._forOperation(e,"link",r)}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if((0,r.xZ)(i.app))return Promise.reject(m(i));const s="reauthenticate";try{const r=await H(e,tt(i,s,t,e),n);y(r.idToken,i,"internal-error");const o=q(r.idToken);y(o,i,"internal-error");const{sub:a}=o;return y(e.uid===a,i,"user-mismatch"),Je._forOperation(e,s,r)}catch(o){throw"auth/user-not-found"===o?.code&&h(i,"user-mismatch"),o}}async function it(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(m(e));const i="signIn",s=await tt(e,i,t),o=await Je._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(o.user),o}async function st(e,t){return it(ve(e),t)}async function ot(e){const t=ve(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function at(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(m(e));const i=ve(e),s=Ie(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ye,"EMAIL_PASSWORD_PROVIDER"),o=await s.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ot(e),t}),a=await Je._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function lt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(m(e)):st((0,i.Ku)(e),Be.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ot(e),t})}function ct(e,t,n,r){return(0,i.Ku)(e).onAuthStateChanged(t,n,r)}function ut(e){return(0,i.Ku)(e).signOut()}function dt(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}new WeakMap;const ht="__sak";class ft{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class pt extends ft{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pt.type="LOCAL";const mt=pt;function gt(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function yt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class bt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=yt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return gt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=yt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=yt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=gt(n);const i=setInterval(()=>{const e=gt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(i))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}bt.type="COOKIE";class vt extends ft{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vt.type="SESSION";const wt=vt;class xt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new xt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!s?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xt.receivers=[];class St{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const l=kt("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function _t(){return window}function Et(){return"undefined"!==typeof _t().WorkerGlobalScope&&"function"===typeof _t().importScripts}const Ct="firebaseLocalStorageDb",Tt="firebaseLocalStorage",Nt="fbase_key";class It{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function At(e,t){return e.transaction([Tt],t?"readwrite":"readonly").objectStore(Tt)}function Pt(){const e=indexedDB.open(Ct,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Tt,{keyPath:Nt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Tt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ct);return new It(e).toPromise()}(),t(await Pt()))})})}async function jt(e,t,n){const r=At(e,!0).put({[Nt]:t,value:n});return new It(r).toPromise()}function Lt(e,t){const n=At(e,!0).delete(t);return new It(n).toPromise()}class Rt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Pt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Et()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xt._getInstance(Et()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new St(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pt();return await jt(e,ht,"1"),await Lt(e,ht),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>jt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=At(e,!1).get(t),r=await new It(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=At(e,!1).getAll();return new It(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rt.type="LOCAL";const Dt=Rt;function Ot(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}Se("rcb"),new S(3e4,6e4);const Mt="recaptcha";async function zt(e,t,n){if(!e._getRecaptchaConfig())try{await Ae(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){y("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=Ie(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ce){y(n?.type===Mt,e,"argument-error");return dt(e,await Ft(e,t,n))}return dt(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const i=r.multiFactorHint?.uid||r.multiFactorUid;y(i,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ie(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ce){y(n?.type===Mt,e,"argument-error");return Ot(e,await Ft(e,t,n))}return Ot(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=Ie(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ce){y(n?.type===Mt,e,"argument-error");return $e(e,await Ft(e,t,n))}return $e(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Ft(e,t,n){y(n.type===Mt,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const i={...t};if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class $t{constructor(e){this.providerId=$t.PROVIDER_ID,this.auth=ve(e)}verifyPhoneNumber(e,t){return zt(this.auth,e,(0,i.Ku)(t))}static credential(e,t){return Ue._fromVerification(e,t)}static credentialFromResult(e){const t=e;return $t.credentialFromTaggedObject(t)}static credentialFromError(e){return $t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ue._fromTokenResponse(n,r):null}}function Vt(e,t){return t?ee(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}$t.PROVIDER_ID="phone",$t.PHONE_SIGN_IN_METHOD="phone";class Ut extends Re{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ze(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ze(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ze(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qt(e){return it(e.auth,new Ut(e),e.bypassAuthState)}function Bt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),rt(n,new Ut(e),e.bypassAuthState)}async function Ht(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),nt(n,new Ut(e),e.bypassAuthState)}class Wt{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qt;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return Bt;default:h(this.auth,"internal-error")}}resolve(e){v(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){v(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gt=new S(2e3,1e4);class Kt extends Wt{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Kt.currentPopupAction&&Kt.currentPopupAction.cancel(),Kt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){v(1===this.filter.length,"Popup operations only handle one event");const e=kt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kt.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Gt.get())};e()}}Kt.currentPopupAction=null;const Qt=new Map;class Xt extends Wt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Qt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Zt(t),r=Jt(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Qt.set(this.auth._key(),e)}return this.bypassAuthState||Qt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Yt(e,t){Qt.set(e._key(),t)}function Jt(e){return ee(e._redirectPersistence)}function Zt(e){return re("pendingRedirect",e.config.apiKey,e.name)}async function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(m(e));const i=ve(e),s=Vt(i,t),o=new Xt(i,s,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,t)),a}class tn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rn(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(f(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nn(e))}saveEventToCache(e){this.cachedEventUids.add(nn(e)),this.lastProcessedEventTime=Date.now()}}function nn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rn(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const sn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,on=/^https?/;async function an(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return A(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(ln(n))return}catch{}h(e,"unauthorized-domain")}function ln(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!on.test(n))return!1;if(sn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const cn=new S(3e4,6e4);function un(){const e=_t().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function dn(e){return new Promise((t,n)=>{function r(){un(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{un(),n(f(e,"network-request-failed"))},timeout:cn.get()})}if(_t().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!_t().gapi?.load){const t=Se("iframefcb");return _t()[t]=()=>{gapi.load?r():n(f(e,"network-request-failed"))},ke(`${xe.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw hn=null,e})}let hn=null;const fn=new S(5e3,15e3),pn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:r.MF},o=mn.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.Am)(s).slice(1)}`}async function yn(e){const t=await function(e){return hn=hn||dn(e),hn}(e),n=_t().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:gn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=f(e,"network-request-failed"),s=_t().setTimeout(()=>{r(i)},fn.get());function o(){_t().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}const bn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...bn,width:r.toString(),height:s.toString(),top:o,left:a},u=(0,i.ZQ)().toLowerCase();n&&(l=le(u)?"_blank":n),oe(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,i.ZQ)())&&!!window.navigator?.standalone}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new vn(null);const h=window.open(t||"",l,d);y(h,e,"popup-blocked");try{h.focus()}catch(f){}return new vn(h)}const xn="__/auth/handler",kn="emulator/auth/handler",Sn=encodeURIComponent("fac");async function _n(e,t,n,s,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:o};if(t instanceof He){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,i.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof We){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${Sn}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${xn}`;return _(t,kn)}(e)}?${(0,i.Am)(c).slice(1)}${d}`}const En="webStorageSupport";const Cn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wt,this._completeRedirectFn=en,this._overrideRedirectResult=Yt}async _openPopup(e,t,n,r){v(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return wn(e,await _n(e,t,n,w(),r),kt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){_t().location.href=e}(await _n(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(v(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await yn(e),n=new tn(e);return t.register("authEvent",t=>{y(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(En,{type:En},n=>{const r=n?.[0]?.[En];void 0!==r&&t(!!r),h(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=an(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pe()||ae()||fe()}};var Tn="@firebase/auth",Nn="1.11.0";class In{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const An=(0,i.XA)("authIdTokenMaxAge")||300;let Pn=null;const jn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>An)return;const i=n?.token;Pn!==i&&(Pn=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,t??{}))return e;h(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Cn,persistence:[Dt,mt,wt]}),s=(0,i.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=jn(e.toString());!function(e,t,n){(0,i.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,i.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const o=(0,i.Tj)("auth");return o&&Pe(n,`http://${o}`),n}var Rn;xe={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Rn="Browser",(0,r.om)(new o.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Rn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:me(Rn)},c=new be(r,i,s,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ee);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new o.uA("auth-internal",e=>(e=>new In(e))(ve(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Tn,Nn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Rn)),(0,r.KO)(Tn,Nn,"esm2020")},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,b="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,_||(_=!0,S());else{var t=r(u);null!==t&&j(k,t.startTime-e)}}var S,_=!1,E=-1,C=5,T=-1;function N(){return!!y||!(t.unstable_now()-T<C)}function I(){if(y=!1,_){var e=t.unstable_now();T=e;var n=!0;try{e:{m=!1,g&&(g=!1,v(E),E=-1),p=!0;var s=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&N());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&i(c),x(e)}else i(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&j(k,l.startTime-e),n=!1}}break e}finally{h=null,f=s,p=!1}n=void 0}}finally{n?S():_=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=I,S=function(){P.postMessage(null)}}else S=function(){b(I,0)};function j(e,n){E=b(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(v(E),E=-1):g=!0,j(k,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,_||(_=!0,S()))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...s)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{165:"177ae2e8",289:"07aeaaca",387:"7071ea57",429:"9a6e9735",483:"273f645b",558:"2bed2593",568:"774a2efc",767:"7ac3feff",852:"3f8cded0"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="teacher-alex-academy:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.p="/teacher-alex-academy/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkteacher_alex_academy=self.webpackChunkteacher_alex_academy||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),i=n(391),s=n(719),o=n(579);const a=(0,r.createContext)(),l=()=>{const e=(0,r.useContext)(a);if(!e)throw new Error("useDarkMode must be used within a DarkModeProvider");return e},c=e=>{let{children:t}=e;const[n,i]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=localStorage.getItem("darkMode");e&&i("true"===e)},[]),(0,r.useEffect)(()=>{localStorage.setItem("darkMode",n.toString()),n?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[n]);const s={isDark:n,toggleDarkMode:()=>{i(!n)},bg:{primary:n?"#0f172a":"#f8fafc",secondary:n?"#1e293b":"#ffffff",tertiary:n?"#334155":"#f1f5f9",gradient:n?"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},text:{primary:n?"#f8fafc":"#1c1917",secondary:n?"#cbd5e1":"#78716c",muted:n?"#94a3b8":"#9ca3af",inverse:n?"#1c1917":"#f8fafc"},border:{primary:n?"#334155":"#e7e5e4",secondary:n?"#475569":"#d6d3d1",focus:n?"#3b82f6":"#0082FF"},brand:{blue:"#0082FF",red:"#D32F2F",orange:"#F59E0B",green:"#10b981"},shadow:{sm:n?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.06)",md:n?"0 4px 16px rgba(0, 0, 0, 0.4)":"0 4px 16px rgba(0, 0, 0, 0.08)",lg:n?"0 8px 32px rgba(0, 0, 0, 0.5)":"0 8px 32px rgba(0, 0, 0, 0.12)"},input:{bg:n?"#334155":"#f5f5f4",border:n?"#475569":"#e7e5e4",placeholder:n?"#94a3b8":"#9ca3af",focus:{border:n?"#3b82f6":"#0082FF",shadow:n?"0 0 0 3px rgba(59, 130, 246, 0.1)":"0 0 0 3px rgba(0, 130, 255, 0.1)"}}};return(0,o.jsx)(a.Provider,{value:s,children:t})},u=()=>{const{isDark:e,toggleDarkMode:t}=l();return(0,o.jsxs)("button",{onClick:t,className:"relative inline-flex items-center justify-center w-12 h-6 rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:e?"#3b82f6":"#e5e7eb",focusRingColor:"#3b82f6"},"aria-label":`Switch to ${e?"light":"dark"} mode`,children:[(0,o.jsx)("span",{className:"inline-block w-4 h-4 bg-white rounded-full shadow transform transition-transform duration-300",style:{transform:e?"translateX(12px)":"translateX(-12px)"}}),(0,o.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between px-1 pointer-events-none",children:[(0,o.jsx)("svg",{className:"w-3 h-3 transition-opacity duration-300 "+(e?"opacity-100":"opacity-0"),style:{color:"#ffffff"},fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),(0,o.jsx)("svg",{className:"w-3 h-3 transition-opacity duration-300 "+(e?"opacity-0":"opacity-100"),style:{color:"#fbbf24"},fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zM2 13h2a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2zm18 0h2a1 1 0 0 0 0-2h-2a1 1 0 0 0 0 2zM11 2v2a1 1 0 0 0 2 0V2a1 1 0 0 0-2 0zm0 18v2a1 1 0 0 0 2 0v-2a1 1 0 0 0-2 0zM5.99 4.58a1 1 0 0 0-1.41 1.41l1.06 1.06a1 1 0 0 0 1.41-1.41L5.99 4.58zm12.37 12.37a1 1 0 0 0-1.41 1.41l1.06 1.06a1 1 0 0 0 1.41-1.41l-1.06-1.06zm1.06-10.96a1 1 0 0 0-1.41-1.41l-1.06 1.06a1 1 0 0 0 1.41 1.41l1.06-1.06zM7.05 18.36a1 1 0 0 0-1.41-1.41l-1.06 1.06a1 1 0 0 0 1.41 1.41l1.06-1.06z"})})]})]})},d=()=>(0,o.jsxs)("div",{className:"inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 mt-0 mb-4",children:[(0,o.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full mr-1"}),"BETA"]}),h=e=>{let{onLoginSuccess:t}=e;const[n,i]=(0,r.useState)("student"),[a,c]=(0,r.useState)({username:"",email:"",password:""}),[h,f]=(0,r.useState)(!1),[p,m]=(0,r.useState)(!1),[g,y]=(0,r.useState)(""),b=l(),v=e=>{c({...a,[e.target.name]:e.target.value}),g&&y("")},w=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6L23 9l-11-6z"})}),x=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L12 2L3 7V9C3 14.55 6.84 19.74 12 21C17.16 19.74 21 14.55 21 9Z"})}),k=()=>(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),S=()=>(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,o.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Password field container styles */\n        .password-container {\n          position: relative;\n        }\n\n        .password-toggle {\n          position: absolute;\n          right: 16px;\n          top: 50%;\n          transform: translateY(-50%);\n          background: transparent;\n          border: none;\n          cursor: pointer;\n          padding: 4px;\n          border-radius: 6px;\n          transition: all 0.2s ease;\n          color: ${b.text.secondary};\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .password-toggle:hover {\n          background: ${b.isDark?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"};\n          color: ${b.text.primary};\n        }\n\n        .password-toggle:active {\n          transform: translateY(-50%) scale(0.95);\n        }\n\n        /* Adjust padding for password input to make room for icon */\n        .password-input {\n          padding-right: 52px !important;\n        }\n      `}),(0,o.jsxs)("div",{className:"min-h-screen flex items-center justify-center px-4 relative",style:{background:b.bg.gradient},translate:"no",children:[(0,o.jsx)("div",{className:"absolute top-6 right-6 z-10",children:(0,o.jsx)(u,{})}),(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsxs)("div",{className:"text-center mb-12",children:[(0,o.jsx)("h1",{className:"text-4xl font-light mb-2",style:{color:b.text.primary,letterSpacing:"-0.02em"},translate:"no",children:"Teacher Alex's English Academy"}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(d,{})}),(0,o.jsx)("p",{className:"text-lg",style:{color:b.text.secondary},translate:"no",children:"Portal Exclusivo dos Alunos"})]}),(0,o.jsxs)("div",{className:"rounded-3xl p-8",style:{backgroundColor:b.bg.secondary,border:`1px solid ${b.border.primary}`,boxShadow:b.shadow.lg},translate:"no",children:[(0,o.jsxs)("div",{className:"flex gap-2 mb-8",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>i("student"),className:"flex-1 py-4 px-6 rounded-2xl font-medium transition-all flex items-center justify-center gap-2",style:"student"===n?{background:b.brand.blue,color:"white",boxShadow:`0 4px 16px ${b.brand.blue}33`}:{backgroundColor:b.bg.tertiary,color:b.text.secondary,border:`1px solid ${b.border.primary}`},onMouseEnter:e=>{"student"!==n&&(e.target.style.backgroundColor=b.border.secondary)},onMouseLeave:e=>{"student"!==n&&(e.target.style.backgroundColor=b.bg.tertiary)},translate:"no",children:[(0,o.jsx)(w,{}),"Student"]}),(0,o.jsxs)("button",{type:"button",onClick:()=>i("teacher"),className:"flex-1 py-4 px-6 rounded-2xl font-medium transition-all flex items-center justify-center gap-2",style:"teacher"===n?{background:b.brand.red,color:"white",boxShadow:`0 4px 16px ${b.brand.red}33`}:{backgroundColor:b.bg.tertiary,color:b.text.secondary,border:`1px solid ${b.border.primary}`},onMouseEnter:e=>{"teacher"!==n&&(e.target.style.backgroundColor=b.border.secondary)},onMouseLeave:e=>{"teacher"!==n&&(e.target.style.backgroundColor=b.bg.tertiary)},translate:"no",children:[(0,o.jsx)(x,{}),"Teacher"]})]}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0),y("");try{let e;e="student"===n?await(0,s.bZ)(a.username,a.password):await(0,s.as)(a.email,a.password),e.success?t(e.user):y(e.error)}catch(r){y("Something went wrong. Please try again.")}m(!1)},className:"space-y-6",translate:"no",children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"student"===n?"text":"email",name:"student"===n?"username":"email",value:"student"===n?a.username:a.email,onChange:v,className:"w-full px-5 py-4 rounded-xl transition-all focus:outline-none",style:{fontSize:"16px",backgroundColor:b.input.bg,border:`1px solid ${b.input.border}`,color:b.text.primary},onFocus:e=>{e.target.style.borderColor="student"===n?b.brand.blue:b.brand.red,e.target.style.boxShadow=`0 0 0 3px ${"student"===n?b.brand.blue:b.brand.red}1A`},onBlur:e=>{e.target.style.borderColor=b.input.border,e.target.style.boxShadow="none"},placeholder:"student"===n?"Username":"Email",translate:"no",autoComplete:"student"===n?"username":"email",required:!0})}),(0,o.jsxs)("div",{className:"password-container",children:[(0,o.jsx)("input",{type:h?"text":"password",name:"password",value:a.password,onChange:v,className:"password-input w-full px-5 py-4 rounded-xl transition-all focus:outline-none",style:{fontSize:"16px",backgroundColor:b.input.bg,border:`1px solid ${b.input.border}`,color:b.text.primary},onFocus:e=>{e.target.style.borderColor="student"===n?b.brand.blue:b.brand.red,e.target.style.boxShadow=`0 0 0 3px ${"student"===n?b.brand.blue:b.brand.red}1A`},onBlur:e=>{e.target.style.borderColor=b.input.border,e.target.style.boxShadow="none"},placeholder:"Password",translate:"no",autoComplete:"current-password",required:!0}),(0,o.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>{f(!h)},"aria-label":h?"Hide password":"Show password",tabIndex:-1,children:h?(0,o.jsx)(S,{}):(0,o.jsx)(k,{})})]}),g&&(0,o.jsxs)("div",{className:"rounded-xl p-4 text-sm",style:{backgroundColor:b.isDark?"#991b1b":"#fef2f2",border:"1px solid "+(b.isDark?"#dc2626":"#fecaca"),color:b.isDark?"#fca5a5":"#dc2626"},translate:"no",children:["\u274c ",g]}),(0,o.jsx)("button",{type:"submit",disabled:p,className:"w-full py-4 px-6 rounded-xl font-semibold text-white transition-all transform hover:scale-105 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none",style:{background:"student"===n?b.brand.blue:b.brand.red,boxShadow:`0 4px 16px ${"student"===n?b.brand.blue:b.brand.red}33`},translate:"no",children:p?(0,o.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,o.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,o.jsx)("span",{translate:"no",children:"Signing in..."})]}):(0,o.jsxs)("span",{translate:"no",children:["Sign in as ","student"===n?"Student":"Teacher"]})})]})]}),(0,o.jsx)("div",{className:"text-center mt-8",children:(0,o.jsx)("p",{style:{color:b.text.muted},className:"text-sm",translate:"no",children:"Made by Teacher Alex"})})]})]})]})};var f=n(667),p=n(791);const m=async()=>{try{console.log("\ud83d\udcda Getting all students...");const e=(0,f.P)((0,f.rJ)(p.db,"students"),(0,f.My)("name")),t=await(0,f.GG)(e),n=[];return t.forEach(e=>{n.push({id:e.id,...e.data()})}),console.log(`\u2705 Found ${n.length} students`),{success:!0,students:n}}catch(e){return console.log("\u274c Failed to get students:",e.message),{success:!1,error:e.message}}},g=async e=>{try{console.log("\ud83c\udf93 Getting student data for:",e);const t=await(0,f.x7)((0,f.H9)(p.db,"students",e));if(t.exists()){const e=t.data();return console.log("\u2705 Student data loaded"),{success:!0,student:{id:t.id,...e}}}throw new Error("Student not found")}catch(t){return console.log("\u274c Failed to get student data:",t.message),{success:!1,error:t.message}}},y=async(e,t,n)=>{try{console.log(`\ud83d\udcdd Updating progress for ${e}: lesson ${t}`),console.log("\ud83d\udcdd Progress data:",n);const r=`progress.${t}`;return await(0,f.mZ)((0,f.H9)(p.db,"students",e),{[r]:n,lastActive:new Date}),console.log("\u2705 Progress updated successfully"),{success:!0}}catch(r){return console.log("\u274c Failed to update progress:",r.message),{success:!1,error:r.message}}},b=async()=>{try{console.log("\ud83d\udcca Getting teacher stats...");const e=await m();if(!e.success)throw new Error(e.error);const t=e.students,n=t.length,r=new Date(Date.now()-6048e5),i=t.filter(e=>{var t;const n=null===(t=e.lastActive)||void 0===t?void 0:t.toDate();return n&&n>r}).length;let s=0;t.forEach(e=>{e.progress&&(s+=Object.keys(e.progress).length)});const o={totalStudents:n,activeStudents:i,totalCompletedLessons:s,totalSeries:8,totalLessons:80};return console.log("\u2705 Teacher stats calculated:",o),{success:!0,stats:o}}catch(e){return console.log("\u274c Failed to get teacher stats:",e.message),{success:!1,error:e.message}}},v=e=>{let{user:t,onLogout:n}=e;const[i,a]=(0,r.useState)("overview"),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)({}),[h,f]=(0,r.useState)(!0),[p,g]=(0,r.useState)(!1),[y,v]=(0,r.useState)({name:"",username:"",password:"",series:"basic-english"}),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)({type:"",text:""});(0,r.useEffect)(()=>{_()},[]);const _=async()=>{f(!0);try{const[e,t]=await Promise.all([m(),b()]);e.success&&c(e.students),t.success&&d(t.stats)}catch(e){console.error("Error loading dashboard data:",e),S({type:"error",text:"Failed to load dashboard data"})}f(!1)},E=e=>{v({...y,[e.target.name]:e.target.value})};return h?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#ecf0f1"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderBottomColor:"#196de3"}}),(0,o.jsx)("p",{style:{color:"#7f8c8d"},children:"Loading your dashboard..."})]})}):(0,o.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"#ecf0f1"},children:[(0,o.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,o.jsx)("h1",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:"\ud83c\udf93 Teacher Alex's English Academy"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm",style:{color:"#7f8c8d"},children:["Welcome, ",t.displayName,"!"]}),(0,o.jsx)("button",{onClick:n,className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Logout"})]})]})})}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsxs)("nav",{className:"flex space-x-8",children:[(0,o.jsx)("button",{onClick:()=>a("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderBottomColor:"overview"===i?"#196de3":"transparent",color:"overview"===i?"#196de3":"#7f8c8d"},onMouseEnter:e=>{"overview"!==i&&(e.target.style.color="#2c3e50")},onMouseLeave:e=>{"overview"!==i&&(e.target.style.color="#7f8c8d")},children:"\ud83d\udcca Overview"}),(0,o.jsxs)("button",{onClick:()=>a("students"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderBottomColor:"students"===i?"#196de3":"transparent",color:"students"===i?"#196de3":"#7f8c8d"},onMouseEnter:e=>{"students"!==i&&(e.target.style.color="#2c3e50")},onMouseLeave:e=>{"students"!==i&&(e.target.style.color="#7f8c8d")},children:["\ud83d\udc65 Students (",l.length,")"]}),(0,o.jsx)("button",{onClick:()=>a("create"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderBottomColor:"create"===i?"#196de3":"transparent",color:"create"===i?"#196de3":"#7f8c8d"},onMouseEnter:e=>{"create"!==i&&(e.target.style.color="#2c3e50")},onMouseLeave:e=>{"create"!==i&&(e.target.style.color="#7f8c8d")},children:"\u2795 Add Student"})]})}),k.text&&(0,o.jsxs)("div",{className:"mb-6 p-4 rounded-lg border",style:{backgroundColor:"success"===k.type?"#d4edda":"#f8d7da",borderColor:"success"===k.type?"#c3e6cb":"#f5c6cb",color:"success"===k.type?"#155724":"#721c24"},children:["success"===k.type?"\u2705":"\u274c"," ",k.text]}),"overview"===i&&(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4",style:{color:"#2c3e50"},children:"\ud83d\udcca Academy Overview"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(25, 109, 227, 0.1)",borderColor:"rgba(25, 109, 227, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#196de3"},children:u.totalStudents||0}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#2c3e50"},children:"Total Students"})]}),(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(191, 61, 48, 0.1)",borderColor:"rgba(191, 61, 48, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#bf3d30"},children:u.activeStudents||0}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#2c3e50"},children:"Active This Week"})]}),(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(127, 140, 141, 0.1)",borderColor:"rgba(127, 140, 141, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#7f8c8d"},children:u.totalCompletedLessons||0}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#2c3e50"},children:"Lessons Completed"})]}),(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(44, 62, 80, 0.1)",borderColor:"rgba(44, 62, 80, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#2c3e50"},children:u.totalSeries||8}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#7f8c8d"},children:"Lesson Series"})]})]}),(0,o.jsxs)("div",{className:"border-t pt-4",children:[(0,o.jsx)("h3",{className:"font-semibold mb-2",style:{color:"#2c3e50"},children:"\ud83d\ude80 Quick Actions"}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,o.jsx)("button",{onClick:()=>a("create"),className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#196de3"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\u2795 Add New Student"}),(0,o.jsx)("button",{onClick:()=>a("students"),className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\ud83d\udc65 View All Students"})]})]})]})}),"students"===i&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b",children:(0,o.jsx)("h2",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:"\ud83d\udc65 Your Students"})}),0===l.length?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udf93"}),(0,o.jsx)("h3",{className:"text-lg font-medium mb-2",style:{color:"#2c3e50"},children:"No students yet"}),(0,o.jsx)("p",{className:"mb-4",style:{color:"#7f8c8d"},children:"Start by creating your first student account!"}),(0,o.jsx)("button",{onClick:()=>a("create"),className:"text-white px-6 py-2 rounded-lg transition-colors",style:{backgroundColor:"#196de3"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\u2795 Create First Student"})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Student"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Series"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Progress"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Last Active"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"text-sm font-medium",style:{color:"#2c3e50"},children:e.name}),(0,o.jsxs)("div",{className:"text-sm ml-2",style:{color:"#7f8c8d"},children:["(@",e.username,")"]})]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"rgba(25, 109, 227, 0.1)",color:"#196de3"},children:e.series})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"text-sm",style:{color:"#2c3e50"},children:[e.progress?Object.keys(e.progress).length:0," lessons completed"]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"#7f8c8d"},children:e.lastActive?new Date(1e3*e.lastActive.seconds).toLocaleDateString():"Never"})]},e.id))})]})})]}),"create"===i&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-6",style:{color:"#2c3e50"},children:"\u2795 Create New Student Account"}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),S({type:"",text:""});try{const e=await(0,s.nS)(y);e.success?(S({type:"success",text:e.message}),v({name:"",username:"",password:"",series:"basic-english"}),g(!1),_()):S({type:"error",text:e.error})}catch(t){S({type:"error",text:"Failed to create student account"})}x(!1)},className:"space-y-4 max-w-md",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Student Name"}),(0,o.jsx)("input",{type:"text",name:"name",value:y.name,onChange:E,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#196de3"},placeholder:"e.g., Jo\xe3o Silva",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Username (for login)"}),(0,o.jsx)("input",{type:"text",name:"username",value:y.username,onChange:E,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",placeholder:"e.g., joao",required:!0}),(0,o.jsx)("p",{className:"text-xs mt-1",style:{color:"#7f8c8d"},children:"This will be used for student login (letters and numbers only)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Password"}),(0,o.jsx)("input",{type:"password",name:"password",value:y.password,onChange:E,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",placeholder:"Create a secure password",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Lesson Series"}),(0,o.jsx)("select",{name:"series",value:y.series,onChange:E,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",children:[{value:"basic-english",label:"\ud83d\udfe6 Basic English"},{value:"intermediate-english",label:"\ud83d\udfe6 Intermediate English"},{value:"business-english",label:"\ud83d\udfe6 Business English"},{value:"conversation-english",label:"\ud83d\udfe6 Conversation English"},{value:"travel-english",label:"\ud83d\udfe6 Travel English"},{value:"academic-english",label:"\ud83d\udfe6 Academic English"},{value:"pronunciation-english",label:"\ud83d\udfe6 Pronunciation English"},{value:"grammar-english",label:"\ud83d\udfe6 Grammar English"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("p",{className:"text-xs mt-1",style:{color:"#7f8c8d"},children:"Choose which lesson series this student will follow"})]}),(0,o.jsx)("button",{type:"submit",disabled:w,className:"w-full text-white py-3 px-4 rounded-lg transition-colors "+(w?"opacity-50 cursor-not-allowed":""),style:{backgroundColor:"#196de3"},onMouseEnter:e=>{w||(e.target.style.filter="brightness(0.9)")},onMouseLeave:e=>{w||(e.target.style.filter="brightness(1)")},children:w?(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"\u2728 Create Student Account"})]})]})]})]})},w=50,x=10,k=50,S=25,_=30,E=20,C=200,T=100,N=[0,50,100,150,200,300,450,650,900,1200,1600,2100,2700,3400,4200,5100,6100,7200,8400,9700,11200,13e3,15100,17500,20200,23200,26500,30100,34e3,38200,43e3,48500,54700,61600,69200,77500,86500,96200,106600,117700,129500,142e3,155200,169100,183700,199e3,215e3,231700,249100,267200],I=e=>{for(let t=N.length-1;t>=0;t--)if(e>=N[t])return t+1;return 1},A=e=>{const t=I(e);return t>=N.length?0:N[t]-e},P=e=>{const t=I(e);if(t>=N.length)return 100;const n=N[t-1],r=e-n,i=N[t]-n;return Math.round(r/i*100)},j=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{console.log(`\ud83c\udf1f Awarding XP: ${t} for ${e}`,n);let r=0;switch(t){case"LESSON_COMPLETE":r=w+n.correctAnswers*x,(n.perfectScore||n.correctAnswers===n.totalQuestions)&&(r+=k);break;case"DRAG_DROP_COMPLETE":r=S*(n.difficulty||1);break;case"SPEAKING_EXERCISE":r=_,n.accuracy>=90&&(r+=20);break;case"DAILY_STREAK":r=E*(n.streakDay||1);break;case"WEEKLY_PERFECT":r=C;break;case"ACHIEVEMENT_UNLOCK":r=T;break;default:return console.warn(`Unknown activity type: ${t}`),0}const i=(0,f.H9)(p.db,"students",e),s=await(0,f.x7)(i);if(!s.exists())throw new Error("Student not found");const o=s.data(),a=o.totalXP||0,l=a+r,c=I(a),u=I(l),d=u>c,h={type:t,xpEarned:r,timestamp:new Date,data:n},m={totalXP:l,level:u,lastActive:new Date},g=o.xpHistory||[];return g.push(h),g.length>100&&g.splice(0,g.length-100),m.xpHistory=g,m.monsterStage=L(u),await(0,f.mZ)(i,m),console.log("\u2705 XP awarded successfully!",{username:e,activityType:t,xpEarned:r,oldLevel:c,newLevel:u,leveledUp:d,totalXP:l}),{xpEarned:r,totalXP:l,level:u,leveledUp:d,monsterStage:m.monsterStage}}catch(r){throw console.error("\u274c Failed to award XP:",r),r}},L=e=>e>=40?"legend":e>=30?"master":e>=20?"adult":e>=10?"teen":e>=5?"child":"baby",R=[{id:"basic-1",title:"B\xe1sico 1",icon:"\ud83c\udf1f",words:[["Hello","Ol\xe1"],["Goodbye","Tchau"],["Thank you","Obrigado"],["Please","Por favor"],["Water","\xc1gua"]]},{id:"colors",title:"Cores",icon:"\ud83c\udfa8",words:[["Red","Vermelho"],["Blue","Azul"],["Green","Verde"],["Yellow","Amarelo"],["Black","Preto"]]},{id:"emotions",title:"Emo\xe7\xf5es",icon:"\ud83d\ude0a",words:[["Happy","Feliz"],["Sad","Triste"],["Angry","Bravo"],["Excited","Animado"],["Tired","Cansado"]]},{id:"family",title:"Fam\xedlia",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",words:[["Mother","M\xe3e"],["Father","Pai"],["Sister","Irm\xe3"],["Brother","Irm\xe3o"],["Baby","Beb\xea"]]},{id:"food",title:"Comida",icon:"\ud83c\udf55",words:[["Pizza","Pizza"],["Apple","Ma\xe7\xe3"],["Bread","P\xe3o"],["Coffee","Caf\xe9"],["Rice","Arroz"]]},{id:"animals",title:"Animais",icon:"\ud83d\udc36",words:[["Dog","Cachorro"],["Cat","Gato"],["Bird","P\xe1ssaro"],["Fish","Peixe"],["Horse","Cavalo"]]},{id:"numbers",title:"N\xfameros",icon:"\ud83d\udd22",words:[["One","Um"],["Two","Dois"],["Three","Tr\xeas"],["Four","Quatro"],["Five","Cinco"]]},{id:"body",title:"Corpo",icon:"\ud83d\udc64",words:[["Head","Cabe\xe7a"],["Hand","M\xe3o"],["Foot","P\xe9"],["Eye","Olho"],["Mouth","Boca"]]},{id:"house",title:"Casa",icon:"\ud83c\udfe0",words:[["Kitchen","Cozinha"],["Bedroom","Quarto"],["Door","Porta"],["Window","Janela"],["Table","Mesa"]]},{id:"weather",title:"Tempo",icon:"\ud83c\udf24\ufe0f",words:[["Sun","Sol"],["Rain","Chuva"],["Cloud","Nuvem"],["Wind","Vento"],["Snow","Neve"]]},{id:"clothes",title:"Roupas",icon:"\ud83d\udc55",words:[["Shirt","Camisa"],["Pants","Cal\xe7a"],["Shoes","Sapatos"],["Hat","Chap\xe9u"],["Jacket","Jaqueta"]]},{id:"transport",title:"Transporte",icon:"\ud83d\ude97",words:[["Car","Carro"],["Bus","\xd4nibus"],["Train","Trem"],["Bike","Bicicleta"],["Plane","Avi\xe3o"]]},{id:"time",title:"Tempo",icon:"\u23f0",words:[["Morning","Manh\xe3"],["Night","Noite"],["Today","Hoje"],["Tomorrow","Amanh\xe3"],["Week","Semana"]]},{id:"business",title:"Neg\xf3cios",icon:"\ud83d\udcbc",words:[["Meeting","Reuni\xe3o"],["Project","Projeto"],["Manager","Gerente"],["Success","Sucesso"],["Challenge","Desafio"]]},{id:"sports",title:"Esportes",icon:"\u26bd",words:[["Football","Futebol"],["Basketball","Basquete"],["Swimming","Nata\xe7\xe3o"],["Running","Corrida"],["Tennis","T\xeanis"]]}],D=[{id:"morning-routine",title:"Morning Routine",category:"Vida Di\xe1ria",difficulty:"F\xe1cil",icon:"\u2600\ufe0f",story:[{type:"text",content:"Every morning, Jo\xe3o wakes up at"},{type:"blank",id:0,options:["7 AM","11 PM","3 PM","midnight"],correct:0},{type:"text",content:". He goes to the"},{type:"blank",id:1,options:["garage","bathroom","garden","roof"],correct:1},{type:"text",content:"to brush his teeth. Then he drinks"},{type:"blank",id:2,options:["wine","beer","coffee","soda"],correct:2},{type:"text",content:"and eats breakfast before going to"},{type:"blank",id:3,options:["bed","work","party","cinema"],correct:1},{type:"text",content:"."}]},{id:"weekend-football",title:"Weekend Football",category:"Esportes",difficulty:"F\xe1cil",icon:"\u26bd",story:[{type:"text",content:"On Sunday, Maria goes to the"},{type:"blank",id:0,options:["library","stadium","hospital","bank"],correct:1},{type:"text",content:"to watch her favorite"},{type:"blank",id:1,options:["book","movie","team","song"],correct:2},{type:"text",content:"play football. She wears her"},{type:"blank",id:2,options:["jersey","pajamas","suit","apron"],correct:0},{type:"text",content:"and cheers very"},{type:"blank",id:3,options:["quietly","sadly","loudly","slowly"],correct:2},{type:"text",content:"!"}]},{id:"grocery-shopping",title:"Grocery Shopping",category:"Vida Di\xe1ria",difficulty:"F\xe1cil",icon:"\ud83d\uded2",story:[{type:"text",content:"Ana needs to buy food at the"},{type:"blank",id:0,options:["gym","supermarket","beach","office"],correct:1},{type:"text",content:". She puts"},{type:"blank",id:1,options:["cars","books","fruits","chairs"],correct:2},{type:"text",content:"and vegetables in her"},{type:"blank",id:2,options:["cart","pocket","hair","shoe"],correct:0},{type:"text",content:". At the cashier, she pays with her"},{type:"blank",id:3,options:["sandwich","hat","card","plant"],correct:2},{type:"text",content:"."}]},{id:"beach-day",title:"Beach Day",category:"Cultura",difficulty:"F\xe1cil",icon:"\ud83c\udfd6\ufe0f",story:[{type:"text",content:"Carlos loves going to the"},{type:"blank",id:0,options:["mountain","desert","beach","forest"],correct:2},{type:"text",content:"in Rio. He puts on"},{type:"blank",id:1,options:["makeup","sunscreen","perfume","shampoo"],correct:1},{type:"text",content:"to protect his skin. Then he"},{type:"blank",id:2,options:["sleeps","studies","swims","cooks"],correct:2},{type:"text",content:"in the ocean and feels very"},{type:"blank",id:3,options:["angry","happy","tired","sick"],correct:1},{type:"text",content:"."}]},{id:"restaurant-dinner",title:"Restaurant Dinner",category:"Comida",difficulty:"F\xe1cil",icon:"\ud83c\udf7d\ufe0f",story:[{type:"text",content:"Tonight, Paulo and Sofia go to a nice"},{type:"blank",id:0,options:["library","restaurant","hospital","school"],correct:1},{type:"text",content:". The"},{type:"blank",id:1,options:["doctor","waiter","teacher","pilot"],correct:1},{type:"text",content:"brings them the menu. Paulo orders"},{type:"blank",id:2,options:["books","steak","clothes","toys"],correct:1},{type:"text",content:"and Sofia chooses"},{type:"blank",id:3,options:["computer","fish","bicycle","phone"],correct:1},{type:"text",content:"."}]},{id:"first-airplane",title:"First Airplane Trip",category:"Viagem",difficulty:"M\xe9dio",icon:"\u2708\ufe0f",story:[{type:"text",content:"Isabella is very"},{type:"blank",id:0,options:["bored","excited","angry","sleepy"],correct:1},{type:"text",content:"because today is her first"},{type:"blank",id:1,options:["birthday","flight","job","school"],correct:1},{type:"text",content:"to the United States. At the"},{type:"blank",id:2,options:["beach","park","airport","mall"],correct:2},{type:"text",content:", she shows her"},{type:"blank",id:3,options:["sandwich","passport","magazine","umbrella"],correct:1},{type:"text",content:"and boards the airplane."}]},{id:"new-job",title:"First Day at Work",category:"Trabalho",difficulty:"M\xe9dio",icon:"\ud83d\udcbc",story:[{type:"text",content:"Today is Pedro's first day at his new"},{type:"blank",id:0,options:["vacation","job","school","party"],correct:1},{type:"text",content:". He wears his best"},{type:"blank",id:1,options:["pajamas","suit","swimsuit","shorts"],correct:1},{type:"text",content:"and arrives at the office early. His new"},{type:"blank",id:2,options:["boss","dog","car","sandwich"],correct:0},{type:"text",content:"shows him around and he feels"},{type:"blank",id:3,options:["sad","angry","nervous","sleepy"],correct:2},{type:"text",content:"but excited."}]},{id:"birthday-party",title:"Birthday Party",category:"Celebra\xe7\xe3o",difficulty:"F\xe1cil",icon:"\ud83c\udf82",story:[{type:"text",content:"Today is Lucia's"},{type:"blank",id:0,options:["funeral","birthday","exam","surgery"],correct:1},{type:"text",content:"party. She invites all her"},{type:"blank",id:1,options:["enemies","friends","doctors","teachers"],correct:1},{type:"text",content:"to celebrate. There is a big chocolate"},{type:"blank",id:2,options:["car","cake","book","computer"],correct:1},{type:"text",content:"with candles. Everyone sings and she feels very"},{type:"blank",id:3,options:["sad","angry","happy","sick"],correct:2},{type:"text",content:"!"}]},{id:"rainy-day",title:"Rainy Day",category:"Clima",difficulty:"F\xe1cil",icon:"\ud83c\udf27\ufe0f",story:[{type:"text",content:"It is raining outside, so Miguel stays"},{type:"blank",id:0,options:["outside","home","wet","flying"],correct:1},{type:"text",content:". He watches the rain through the"},{type:"blank",id:1,options:["floor","window","ceiling","door"],correct:1},{type:"text",content:"and decides to read a good"},{type:"blank",id:2,options:["sandwich","book","car","movie"],correct:1},{type:"text",content:". He makes hot chocolate and feels very"},{type:"blank",id:3,options:["cold","cozy","wet","angry"],correct:1},{type:"text",content:"."}]},{id:"pet-dog",title:"My Pet Dog",category:"Animais",difficulty:"F\xe1cil",icon:"\ud83d\udc15",story:[{type:"text",content:"Carmen has a small"},{type:"blank",id:0,options:["elephant","dog","whale","dinosaur"],correct:1},{type:"text",content:"named Rex. Every morning she takes him to the"},{type:"blank",id:1,options:["office","park","hospital","bank"],correct:1},{type:"text",content:"for a walk. Rex loves to play with his"},{type:"blank",id:2,options:["homework","ball","computer","sandwich"],correct:1},{type:"text",content:"and is always very"},{type:"blank",id:3,options:["sad","angry","playful","tired"],correct:2},{type:"text",content:"."}]},{id:"cooking-lesson",title:"Cooking Lesson",category:"Culin\xe1ria",difficulty:"M\xe9dio",icon:"\ud83d\udc69\u200d\ud83c\udf73",story:[{type:"text",content:"Sara wants to learn how to"},{type:"blank",id:0,options:["fly","cook","swim","dance"],correct:1},{type:"text",content:"pasta. She goes to the"},{type:"blank",id:1,options:["bathroom","kitchen","bedroom","garage"],correct:1},{type:"text",content:"and gets all the ingredients. She boils"},{type:"blank",id:2,options:["ice","water","sand","air"],correct:1},{type:"text",content:"in a pot and adds the pasta. It smells"},{type:"blank",id:3,options:["terrible","delicious","loud","green"],correct:1},{type:"text",content:"!"}]},{id:"library-visit",title:"Visit to the Library",category:"Educa\xe7\xe3o",difficulty:"F\xe1cil",icon:"\ud83d\udcda",story:[{type:"text",content:"Roberto goes to the"},{type:"blank",id:0,options:["gym","library","beach","restaurant"],correct:1},{type:"text",content:"to study for his exam. He finds a quiet"},{type:"blank",id:1,options:["party","table","concert","kitchen"],correct:1},{type:"text",content:"and opens his"},{type:"blank",id:2,options:["sandwich","books","car","phone"],correct:1},{type:"text",content:". He studies for two hours and feels"},{type:"blank",id:3,options:["confused","prepared","hungry","sleepy"],correct:1},{type:"text",content:" for the test."}]},{id:"weekend-market",title:"Weekend Market",category:"Compras",difficulty:"M\xe9dio",icon:"\ud83c\udf4e",story:[{type:"text",content:"On Saturday morning, Elena visits the local"},{type:"blank",id:0,options:["cinema","market","hospital","school"],correct:1},{type:"text",content:". She buys fresh"},{type:"blank",id:1,options:["cars","fruits","books","clothes"],correct:1},{type:"text",content:"and vegetables from local farmers. She talks to the friendly"},{type:"blank",id:2,options:["robots","sellers","animals","computers"],correct:1},{type:"text",content:"and learns about organic farming. She feels"},{type:"blank",id:3,options:["bored","interested","angry","sleepy"],correct:1},{type:"text",content:" in supporting local business."}]},{id:"music-concert",title:"Music Concert",category:"Entretenimento",difficulty:"M\xe9dio",icon:"\ud83c\udfb5",story:[{type:"text",content:"Tonight, Daniel goes to see his favorite"},{type:"blank",id:0,options:["doctor","band","teacher","dentist"],correct:1},{type:"text",content:"perform live. He arrives at the"},{type:"blank",id:1,options:["kitchen","venue","bathroom","office"],correct:1},{type:"text",content:"early to get a good spot. The music is very"},{type:"blank",id:2,options:["quiet","loud","invisible","cold"],correct:1},{type:"text",content:"and he dances all night. He feels"},{type:"blank",id:3,options:["bored","energetic","sad","sleepy"],correct:1},{type:"text",content:" and happy!"}]},{id:"gym-workout",title:"Gym Workout",category:"Sa\xfade",difficulty:"M\xe9dio",icon:"\ud83d\udcaa",story:[{type:"text",content:"Three times a week, Amanda goes to the"},{type:"blank",id:0,options:["library","gym","restaurant","cinema"],correct:1},{type:"text",content:"to exercise. She starts with light"},{type:"blank",id:1,options:["sleeping","stretching","eating","reading"],correct:1},{type:"text",content:"to warm up her muscles. Then she lifts"},{type:"blank",id:2,options:["books","weights","sandwiches","flowers"],correct:1},{type:"text",content:"for thirty minutes. After working out, she feels"},{type:"blank",id:3,options:["weak","strong","hungry","cold"],correct:1},{type:"text",content:" and healthy."}]}],O=[{id:"greetings-intro",title:"Cumprimentos & Apresenta\xe7\xf5es",description:"Como se apresentar e cumprimentar em ingl\xeas",category:"basics",icon:"\ud83d\udc4b",timeLimit:20,difficulty:1,questions:[{id:"greet-1",type:"multiple-choice",question:"How do you greet someone in the morning?",options:["Good morning","Good night","Good afternoon","Good evening"],correct:0,points:10},{id:"name-1",type:"multiple-choice",question:'Complete: "What\'s _____ name?"',options:["you","your","yours","mine"],correct:1,points:10},{id:"nice-1",type:"fill-blank",question:"Nice to _____ you!",answer:"meet",points:15},{id:"how-1",type:"multiple-choice",question:"How do you ask about someone's well-being?",options:["How are you?","What are you?","Where are you?","Who are you?"],correct:0,points:10},{id:"fine-1",type:"true-false",question:'"I\'m fine, thank you" is a good response to "How are you?"',correct:!0,points:10},{id:"bye-1",type:"multiple-choice",question:"How do you say goodbye?",options:["Hello","See you later","Good morning","Thank you"],correct:1,points:10},{id:"from-1",type:"fill-blank",question:"I am _____ Brazil.",answer:"from",points:15},{id:"please-1",type:"multiple-choice",question:"What do you say when you want something politely?",options:["Thank you","Please","Sorry","Excuse me"],correct:1,points:10},{id:"welcome-1",type:"true-false",question:'When someone says "Thank you", you can say "You\'re welcome"',correct:!0,points:10},{id:"spell-1",type:"multiple-choice",question:'Complete: "How do you _____ your name?"',options:["speak","spell","say","tell"],correct:1,points:15}]},{id:"family-people",title:"Fam\xedlia & Pessoas",description:"Vocabul\xe1rio sobre fam\xedlia e relacionamentos",category:"family",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",timeLimit:25,difficulty:1,questions:[{id:"family-1",type:"multiple-choice",question:"Your mother's sister is your...",options:["cousin","aunt","grandmother","sister"],correct:1,points:10},{id:"brother-1",type:"true-false",question:"Your father's son is your brother",correct:!0,points:10},{id:"children-1",type:"multiple-choice",question:"Sons and daughters are called...",options:["parents","children","cousins","siblings"],correct:1,points:10},{id:"married-1",type:"fill-blank",question:"My parents are _____.",answer:"married",points:15},{id:"old-1",type:"multiple-choice",question:"How do you ask about someone's age?",options:["How old are you?","What age do you have?","How many years are you?","What is your age?"],correct:0,points:15},{id:"years-1",type:"multiple-choice",question:'Complete: "I am 25 _____ old"',options:["year","years","age","time"],correct:1,points:10},{id:"single-1",type:"true-false",question:"If you don't have a husband or wife, you are single",correct:!0,points:10},{id:"baby-1",type:"multiple-choice",question:"A very young child is called a...",options:["baby","teenager","adult","elder"],correct:0,points:10},{id:"have-1",type:"fill-blank",question:"I _____ two sisters.",answer:"have",points:10},{id:"only-1",type:"true-false",question:'An "only child" has no brothers or sisters',correct:!0,points:10}]},{id:"numbers-time",title:"N\xfameros & Tempo",description:"N\xfameros, horas e express\xf5es de tempo",category:"time",icon:"\ud83d\udd50",timeLimit:30,difficulty:2,questions:[{id:"time-1",type:"multiple-choice",question:"What time is it? 3:00",options:["It's three o'clock","It's three hours","It's third time","It's three times"],correct:0,points:10},{id:"thirty-1",type:"multiple-choice",question:"What time is it? 2:30",options:["Two fifteen","Two thirty","Two forty-five","Two twenty"],correct:1,points:15},{id:"fifteen-1",type:"fill-blank",question:"3:15 = It's _____ past three",answer:"quarter",points:15},{id:"days-1",type:"multiple-choice",question:"How many days are in a week?",options:["Five","Six","Seven","Eight"],correct:2,points:10},{id:"monday-1",type:"true-false",question:"Monday is the first day of the week",correct:!0,points:10},{id:"weekend-1",type:"multiple-choice",question:"The weekend is...",options:["Monday and Tuesday","Saturday and Sunday","Friday and Saturday","Wednesday and Thursday"],correct:1,points:10},{id:"months-1",type:"multiple-choice",question:"How many months are in a year?",options:["Ten","Eleven","Twelve","Thirteen"],correct:2,points:10},{id:"january-1",type:"fill-blank",question:"The first month of the year is _____.",answer:"January",points:10},{id:"birthday-1",type:"true-false",question:"Your birthday happens once a year",correct:!0,points:10},{id:"age-1",type:"multiple-choice",question:'Complete: "When is _____ birthday?"',options:["you","your","yours","mine"],correct:1,points:15}]},{id:"colors-objects",title:"Cores & Objetos",description:"Cores b\xe1sicas e objetos do dia a dia",category:"vocabulary",icon:"\ud83c\udfa8",timeLimit:25,difficulty:1,questions:[{id:"red-1",type:"multiple-choice",question:"What color is blood?",options:["Blue","Red","Green","Yellow"],correct:1,points:10},{id:"sky-1",type:"multiple-choice",question:"What color is the sky on a clear day?",options:["Red","Green","Blue","Purple"],correct:2,points:10},{id:"grass-1",type:"fill-blank",question:"Grass is _____.",answer:"green",points:10},{id:"sun-1",type:"multiple-choice",question:"What color is the sun?",options:["White","Yellow","Orange","Red"],correct:1,points:10},{id:"black-1",type:"true-false",question:"At night, the sky is black",correct:!0,points:10},{id:"favorite-1",type:"multiple-choice",question:'Complete: "What\'s your _____ color?"',options:["like","love","favorite","best"],correct:2,points:15},{id:"pen-1",type:"multiple-choice",question:"What do you use to write?",options:["Book","Pen","Table","Chair"],correct:1,points:10},{id:"book-1",type:"fill-blank",question:"I read a _____.",answer:"book",points:10},{id:"phone-1",type:"true-false",question:"You can call people with a phone",correct:!0,points:10},{id:"colors-1",type:"multiple-choice",question:"Red + Blue = ?",options:["Green","Purple","Orange","Yellow"],correct:1,points:15}]},{id:"food-drinks",title:"Comida & Bebidas",description:"Vocabul\xe1rio b\xe1sico sobre comida e bebidas",category:"food",icon:"\ud83c\udf55",timeLimit:25,difficulty:2,questions:[{id:"hungry-1",type:"fill-blank",question:"I am _____. I want to eat.",answer:"hungry",points:10},{id:"thirsty-1",type:"fill-blank",question:"I am _____. I want to drink.",answer:"thirsty",points:10},{id:"breakfast-1",type:"multiple-choice",question:"What do you eat in the morning?",options:["Lunch","Dinner","Breakfast","Snack"],correct:2,points:10},{id:"water-1",type:"true-false",question:"Water is a drink",correct:!0,points:10},{id:"apple-1",type:"multiple-choice",question:"Which one is a fruit?",options:["Bread","Apple","Rice","Chicken"],correct:1,points:10},{id:"coffee-1",type:"multiple-choice",question:"What do many Brazilians drink in the morning?",options:["Beer","Wine","Coffee","Soda"],correct:2,points:10},{id:"lunch-1",type:"true-false",question:"Lunch is eaten in the middle of the day",correct:!0,points:10},{id:"like-1",type:"multiple-choice",question:'Complete: "I _____ pizza"',options:["am like","like","likes","liking"],correct:1,points:15},{id:"restaurant-1",type:"fill-blank",question:"We eat at a _____.",answer:"restaurant",points:15},{id:"delicious-1",type:"true-false",question:"Delicious food tastes very good",correct:!0,points:10}]},{id:"home-daily",title:"Casa & Vida Di\xe1ria",description:"Vocabul\xe1rio sobre casa e rotina",category:"daily",icon:"\ud83c\udfe0",timeLimit:25,difficulty:1,questions:[{id:"home-1",type:"multiple-choice",question:"Where do you sleep?",options:["Kitchen","Bedroom","Bathroom","Living room"],correct:1,points:10},{id:"wake-1",type:"fill-blank",question:"I _____ up at 7 AM.",answer:"wake",points:10},{id:"shower-1",type:"multiple-choice",question:"Where do you take a shower?",options:["Bedroom","Kitchen","Bathroom","Garden"],correct:2,points:10},{id:"clean-1",type:"true-false",question:"You wash dishes in the kitchen",correct:!0,points:10},{id:"bed-1",type:"multiple-choice",question:'Complete: "I go to _____ at night"',options:["sleep","bed","tired","dream"],correct:1,points:10},{id:"door-1",type:"fill-blank",question:"Please open the _____.",answer:"door",points:10},{id:"tv-1",type:"true-false",question:"You can watch TV in the living room",correct:!0,points:10},{id:"clothes-1",type:"multiple-choice",question:"What do you wear on your body?",options:["Food","Clothes","Books","Water"],correct:1,points:10},{id:"everyday-1",type:"fill-blank",question:"I brush my teeth _____ day.",answer:"every",points:15},{id:"house-1",type:"multiple-choice",question:'Complete: "Welcome to my _____"',options:["car","work","house","school"],correct:2,points:15}]},{id:"body-health",title:"Corpo & Sa\xfade",description:"Partes do corpo e express\xf5es de sa\xfade",category:"health",icon:"\ud83d\udcaa",timeLimit:30,difficulty:2,questions:[{id:"head-1",type:"multiple-choice",question:"What is at the top of your body?",options:["Foot","Hand","Head","Arm"],correct:2,points:10},{id:"eyes-1",type:"fill-blank",question:"I see with my _____.",answer:"eyes",points:10},{id:"sick-1",type:"true-false",question:"When you are sick, you feel bad",correct:!0,points:10},{id:"doctor-1",type:"multiple-choice",question:"Who helps you when you are sick?",options:["Teacher","Doctor","Cook","Driver"],correct:1,points:10},{id:"walk-1",type:"multiple-choice",question:"What do you use to walk?",options:["Hands","Eyes","Feet","Ears"],correct:2,points:10},{id:"hurt-1",type:"fill-blank",question:"My arm _____. I need help.",answer:"hurts",points:15},{id:"medicine-1",type:"true-false",question:"Medicine can help you feel better",correct:!0,points:10},{id:"tooth-1",type:"multiple-choice",question:"What do you use to eat?",options:["Nose","Ears","Teeth","Hair"],correct:2,points:10},{id:"healthy-1",type:"fill-blank",question:"Exercise keeps you _____.",answer:"healthy",points:15},{id:"heart-1",type:"multiple-choice",question:"What pumps blood in your body?",options:["Brain","Heart","Stomach","Lungs"],correct:1,points:15}]},{id:"weather-seasons",title:"Clima & Esta\xe7\xf5es",description:"Tempo, clima e esta\xe7\xf5es do ano",category:"weather",icon:"\ud83c\udf24\ufe0f",timeLimit:25,difficulty:2,questions:[{id:"sunny-1",type:"multiple-choice",question:"What's the weather like when the sun is shining?",options:["Rainy","Sunny","Snowy","Windy"],correct:1,points:10},{id:"rain-1",type:"fill-blank",question:"It's _____. Take an umbrella.",answer:"raining",points:10},{id:"hot-1",type:"true-false",question:"Summer is usually hot",correct:!0,points:10},{id:"seasons-1",type:"multiple-choice",question:"How many seasons are there in a year?",options:["Three","Four","Five","Six"],correct:1,points:10},{id:"winter-1",type:"multiple-choice",question:"Which season is coldest?",options:["Spring","Summer","Fall","Winter"],correct:3,points:10},{id:"cold-1",type:"fill-blank",question:"It's very _____. I need a jacket.",answer:"cold",points:10},{id:"umbrella-1",type:"true-false",question:"You use an umbrella when it rains",correct:!0,points:10},{id:"clouds-1",type:"multiple-choice",question:"What do you see in the sky before it rains?",options:["Stars","Clouds","Sun","Moon"],correct:1,points:10},{id:"spring-1",type:"fill-blank",question:"In _____, flowers start to grow.",answer:"spring",points:15},{id:"temperature-1",type:"multiple-choice",question:"What measures how hot or cold it is?",options:["Clock","Ruler","Temperature","Scale"],correct:2,points:15}]},{id:"transport-directions",title:"Transporte & Dire\xe7\xf5es",description:"Meios de transporte e como se orientar",category:"transport",icon:"\ud83d\ude97",timeLimit:30,difficulty:2,questions:[{id:"car-1",type:"multiple-choice",question:"What do you drive on the road?",options:["Bicycle","Car","Plane","Boat"],correct:1,points:10},{id:"walk-1",type:"fill-blank",question:"I _____ to school every day.",answer:"walk",points:10},{id:"bus-1",type:"true-false",question:"A bus can carry many people",correct:!0,points:10},{id:"airport-1",type:"multiple-choice",question:"Where do airplanes take off?",options:["Train station","Airport","Bus stop","Harbor"],correct:1,points:10},{id:"left-1",type:"multiple-choice",question:"Turn _____ at the corner.",options:["straight","left","up","down"],correct:1,points:10},{id:"far-1",type:"fill-blank",question:"The store is very _____ from here.",answer:"far",points:15},{id:"bicycle-1",type:"true-false",question:"A bicycle has two wheels",correct:!0,points:10},{id:"map-1",type:"multiple-choice",question:"What helps you find your way?",options:["Book","Map","Food","Music"],correct:1,points:10},{id:"near-1",type:"fill-blank",question:"The bank is _____ the school.",answer:"near",points:15},{id:"train-1",type:"multiple-choice",question:"What travels on railway tracks?",options:["Car","Bus","Train","Truck"],correct:2,points:15}]},{id:"hobbies-freetime",title:"Hobbies & Tempo Livre",description:"Atividades de lazer e passatempos",category:"hobbies",icon:"\ud83c\udfae",timeLimit:25,difficulty:2,questions:[{id:"music-1",type:"multiple-choice",question:"What do you do with music?",options:["Eat it","Listen to it","Write it","Cook it"],correct:1,points:10},{id:"read-1",type:"fill-blank",question:"I like to _____ books.",answer:"read",points:10},{id:"football-1",type:"true-false",question:"Football is a popular sport in Brazil",correct:!0,points:10},{id:"movie-1",type:"multiple-choice",question:"Where do you watch movies?",options:["Library","Cinema","Hospital","Bank"],correct:1,points:10},{id:"swim-1",type:"multiple-choice",question:"What do you do in a swimming pool?",options:["Run","Jump","Swim","Sleep"],correct:2,points:10},{id:"guitar-1",type:"fill-blank",question:"I can play the _____.",answer:"guitar",points:15},{id:"weekend-1",type:"true-false",question:"People have more free time on weekends",correct:!0,points:10},{id:"game-1",type:"multiple-choice",question:"What do you play for fun?",options:["Work","Games","Homework","Cleaning"],correct:1,points:10},{id:"hobby-1",type:"fill-blank",question:"My favorite _____ is painting.",answer:"hobby",points:15},{id:"fun-1",type:"multiple-choice",question:'Complete: "I have _____ when I play"',options:["work","fun","tired","sad"],correct:1,points:15}]}],M=[{id:"news-001",category:"Comunidade",headline:"Academia Teacher Alex ultrapassa 500 alunos ativos em 6 meses",summary:"M\xe9todo inovador com \xe1udio e gamifica\xe7\xe3o atrai estudantes de todo o Brasil",icon:"\ud83c\udf89",color:"#10b981"},{id:"news-002",category:"Sucesso",headline:"Ex-aluno da Teacher Alex consegue promo\xe7\xe3o em multinacional americana",summary:"Flu\xeancia desenvolvida na academia foi decisiva para nova posi\xe7\xe3o",icon:"\ud83d\ude80",color:"#3b82f6"},{id:"news-003",category:"Comunidade",headline:"847 li\xe7\xf5es de \xe1udio completadas apenas esta semana na plataforma",summary:"Engajamento dos estudantes bate novo recorde mensal",icon:"\ud83d\udcc8",color:"#8b5cf6"},{id:"news-004",category:"Global",headline:"Estudantes brasileiros lideram ranking de dedica\xe7\xe3o em ingl\xeas na Am\xe9rica Latina",summary:"Pesquisa internacional destaca persist\xeancia e motiva\xe7\xe3o \xfanicos",icon:"\ud83c\udfc6",color:"#f59e0b"},{id:"news-005",category:"Teacher Alex",headline:"Professor Alex desenvolve t\xe9cnica exclusiva para pron\xfancia de brasileiros",summary:"M\xe9todo combina sotaque com padr\xf5es internacionais de ingl\xeas",icon:"\ud83c\udfaf",color:"#ef4444"},{id:"news-006",category:"Pesquisa",headline:"Estudo comprova: aprendizado com \xe1udio melhora reten\xe7\xe3o em 73%",summary:"Pesquisas mostram resultados positivos",icon:"\ud83d\udd2c",color:"#06b6d4"},{id:"news-007",category:"Ci\xeancia",headline:"Neurocientistas descobrem: gamifica\xe7\xe3o ativa \xe1reas espec\xedficas do c\xe9rebro",summary:"Sistema de XP e n\xedveis estimula mesmo centro de recompensa que exerc\xedcios",icon:"\ud83e\udde0",color:"#a855f7"},{id:"news-008",category:"Educa\xe7\xe3o",headline:"M\xe9todo tradicional vs. digital: Digital supera cursos presenciais",summary:"Comparativo mostra 40% mais progresso em mesmo per\xedodo de tempo",icon:"\ud83d\udcca",color:"#10b981"},{id:"news-009",category:"Lingu\xedstica",headline:"Descoberta: brasileiros processam ingl\xeas diferente de outros latinos",summary:"Estrutura \xfanica do portugu\xeas cria vantagens espec\xedficas no aprendizado",icon:"\ud83e\uddec",color:"#f97316"},{id:"news-010",category:"Psicologia",headline:"Ansiedade em falar ingl\xeas cai 65% com m\xe9todo de repeti\xe7\xe3o espa\xe7ada",summary:"T\xe9cnica reduz bloqueios mentais significativamente",icon:"\ud83d\udc9a",color:"#22c55e"},{id:"news-011",category:"Mundial",headline:"Brasil se torna 3\xba pa\xeds com maior crescimento em flu\xeancia de ingl\xeas",summary:"Plataformas digitais impulsionam revolu\xe7\xe3o no ensino nacional",icon:"\ud83c\udf0d",color:"#3b82f6"},{id:"news-012",category:"Mercado",headline:"Vagas que exigem ingl\xeas crescem 156% no mercado brasileiro",summary:"Empresas priorizam candidatos com certifica\xe7\xe3o internacional",icon:"\ud83d\udcbc",color:"#8b5cf6"},{id:"news-013",category:"Tecnologia",headline:"IA revela: sotaque brasileiro \xe9 mais aceito globalmente que franc\xeas",summary:"An\xe1lise de 2 milh\xf5es de conversas comprova prefer\xeancia internacional",icon:"\ud83e\udd16",color:"#06b6d4"},{id:"news-014",category:"Cultura",headline:"78% dos brasileiros assistem s\xe9ries em ingl\xeas",summary:"Streaming impulsiona imers\xe3o natural no idioma entre jovens",icon:"\ud83d\udcfa",color:"#dc2626"},{id:"news-015",category:"Economia",headline:"Profissionais bil\xedngues ganham 61% a mais que monol\xedngues no Brasil",summary:"Pesquisa salarial confirma valor do ingl\xeas no mercado atual",icon:"\ud83d\udcb0",color:"#059669"},{id:"news-016",category:"Curiosidade",headline:'Descoberto: palavra "OK" foi inventada por acidente em 1839',summary:"Erro de digita\xe7\xe3o em jornal americano virou express\xe3o mundial",icon:"\u2705",color:"#f59e0b"},{id:"news-017",category:"Hist\xf3ria",headline:"Shakespeare inventou mais de 1.700 palavras que usamos hoje",summary:'Termos como "bedroom" e "lonely" foram cria\xe7\xf5es do dramaturgo',icon:"\ud83d\udcda",color:"#7c3aed"},{id:"news-018",category:"Lingu\xedstica",headline:"Ingl\xeas cria uma palavra nova de outro idioma a cada 98 minutos",summary:"L\xedngua mais inclusiva do mundo absorve constantemente novos termos",icon:"\ud83d\udd04",color:"#10b981"},{id:"news-019",category:"Curiosidade",headline:"Frase mais dif\xedcil do ingl\xeas tem apenas 11 palavras",summary:'"Buffalo buffalo Buffalo buffalo buffalo buffalo Buffalo buffalo"',icon:"\ud83d\udc03",color:"#f97316"},{id:"news-020",category:"Etimologia",headline:'Palavra "salary" vem de soldados romanos pagos com sal',summary:'Origem hist\xf3rica explica express\xe3o "worth his salt"',icon:"\ud83e\uddc2",color:"#6366f1"},{id:"news-021",category:"Teacher Alex",headline:"Alex revela: maior erro dos brasileiros \xe9 traduzir sem contexto",summary:'Professor ensina a "pensar em ingl\xeas" desde a primeira li\xe7\xe3o',icon:"\ud83d\udca1",color:"#ef4444"},{id:"news-022",category:"Dica",headline:"Segredo do Teacher Alex: 15 minutos di\xe1rios valem mais que 3 horas semanais",summary:"Consist\xeancia supera intensidade no aprendizado de idiomas",icon:"\u23f0",color:"#22c55e"},{id:"news-023",category:"M\xe9todo",headline:"Alex adapta t\xe9cnicas para ensino internacional",summary:"Sotaque vira vantagem na pron\xfancia de vogais inglesas",icon:"\ud83c\udfd4\ufe0f",color:"#8b5cf6"},{id:"news-024",category:"Teacher Alex",headline:"Professor cria sistema \xfanico para alunos ",summary:"\xc1udios espec\xedficos para revis\xe3o comprovadamente eficazes",icon:"\ud83d\ude34",color:"#06b6d4"},{id:"news-025",category:"Inova\xe7\xe3o",headline:'Alex desenvolve "mapa mental" personalizado para cada sotaque brasileiro',summary:"Ferramenta identifica dificuldades regionais e adapta li\xe7\xf5es automaticamente",icon:"\ud83d\uddfa\ufe0f",color:"#f59e0b"},{id:"news-026",category:"Sucesso",headline:"Estudante de 17 anos passa em universidade americana ap\xf3s 8 meses",summary:"Jovem de Minas Gerais credita aprova\xe7\xe3o ao m\xe9todo",icon:"\ud83c\udf93",color:"#3b82f6"},{id:"news-027",category:"Conquista",headline:"Aposentada de 68 anos realiza sonho de morar no Canad\xe1",summary:"Never too late: flu\xeancia desenvolvida na terceira idade abre portas",icon:"\u2708\ufe0f",color:"#10b981"},{id:"news-028",category:"Carreira",headline:"Engenheiro triplica sal\xe1rio ap\xf3s certifica\xe7\xe3o internacional",summary:"Flu\xeancia em ingl\xeas abre oportunidade em empresa",icon:"\u2699\ufe0f",color:"#f97316"},{id:"news-029",category:"Fam\xedlia",headline:"M\xe3e e filha estudam juntas: dupla conquista flu\xeancia em sincronia",summary:"Fam\xedlia de BH vira exemplo de dedica\xe7\xe3o e apoio m\xfatuo",icon:"\ud83d\udc69\u200d\ud83d\udc67",color:"#ec4899"},{id:"news-030",category:"Supera\xe7\xe3o",headline:"T\xedmido extremo vira palestrante internacional em 1 ano",summary:"Confian\xe7a no ingl\xeas transforma personalidade e abre novos caminhos",icon:"\ud83c\udfa4",color:"#8b5cf6"},{id:"news-031",category:"Tecnologia",headline:"IA da Teacher Alex Academy em desenvolvimento",summary:"Sistema oferece exerc\xedcios preventivos personalizados",icon:"\ud83d\udd2e",color:"#06b6d4"},{id:"news-032",category:"Inova\xe7\xe3o",headline:"Novo algoritmo detecta progresso invis\xedvel em pronuncia",summary:"Micro-melhorias s\xe3o celebradas para manter motiva\xe7\xe3o alta",icon:"\ud83d\udce1",color:"#a855f7"},{id:"news-033",category:"Atualiza\xe7\xe3o",headline:'Plataforma adiciona modo "Sono Profundo" para revis\xe3o noturna',summary:"\xc1udios em frequ\xeancia espec\xedfica refor\xe7am mem\xf3ria durante descanso",icon:"\ud83c\udf19",color:"#1e40af"},{id:"news-034",category:"Funcionalidade",headline:"Sistema de XP \xe9 copiado por outras escolas de idiomas",summary:"Gamifica\xe7\xe3o da Teacher Alex vira padr\xe3o na ind\xfastria educacional",icon:"\ud83c\udfc5",color:"#f59e0b"},{id:"news-035",category:"Expans\xe3o",headline:"Teacher Alex Academy anuncia vers\xe3o para empresas",summary:"Corpora\xe7\xf5es brasileiras podem treinar equipes na plataforma",icon:"\ud83c\udfe2",color:"#059669"},{id:"news-036",category:"Cultura",headline:"Express\xf5es brasileiras em ingl\xeas viram tend\xeancia no TikTok mundial",summary:'"Saudade feeling" e "jeitinho way" conquistam milh\xf5es de views',icon:"\ud83d\udcf1",color:"#ec4899"},{id:"news-037",category:"Social",headline:"Grupo do WhatsApp da Teacher Alex \xe9 comunidade de membros",summary:"Estudantes se ajudam e formam amizades internacionais",icon:"\ud83d\udc65",color:"#22c55e"},{id:"news-038",category:"Impacto",headline:"M\xe9todo da Teacher Alex amplia acesso ao ingl\xeas",summary:"Pre\xe7o acess\xedvel democratiza ensino de qualidade internacional",icon:"\u2696\ufe0f",color:"#3b82f6"},{id:"news-039",category:"Inclus\xe3o",headline:"Plataforma lan\xe7a recursos para estudantes com dislexia",summary:"\xc1udio-primeiro approach remove barreiras tradicionais de leitura",icon:"\u267f",color:"#8b5cf6"},{id:"news-040",category:"Fam\xedlia",headline:"Av\xf3s brasileiros aprendem ingl\xeas para conversar com netos no exterior",summary:"Segmento que mais cresce na Teacher Alex Academy",icon:"\ud83d\udc74",color:"#f97316"},{id:"news-041",category:"Motiva\xe7\xe3o",headline:"Estudo revela: aprender ingl\xeas aumenta autoestima em 89%",summary:"Confian\xe7a lingu\xedstica se reflete em todas as \xe1reas da vida",icon:"\ud83d\udcaa",color:"#dc2626"},{id:"news-042",category:"Sa\xfade",headline:"Bilinguismo previne redu\xe7\xe3o cognitiva e melhora mem\xf3ria, confirma pesquisa",summary:"C\xe9rebros que falam ingl\xeas envelhecem 5 anos mais devagar",icon:"\ud83e\udde0",color:"#10b981"},{id:"news-043",category:"Lifestyle",headline:"Viajantes brasileiros s\xe3o mais bem recebidos ap\xf3s melhora no ingl\xeas",summary:"Comunica\xe7\xe3o fluente quebra preconceitos e cria conex\xf5es genu\xednas",icon:"\ud83c\udf0e",color:"#06b6d4"},{id:"news-044",category:"Relacionamento",headline:"Casais que estudam ingl\xeas juntos t\xeam 43% menos brigas",summary:"Objetivo comum fortalece v\xednculos e cria cumplicidade",icon:"\ud83d\udc95",color:"#ec4899"},{id:"news-045",category:"Autoestima",headline:"Terapeutas recomendam ingl\xeas como forma de terapia alternativa",summary:"Conquistas di\xe1rias no idioma combatem depress\xe3o e ansiedade",icon:"\ud83c\udf08",color:"#a855f7"},{id:"news-046",category:"Futuro",headline:"2028: ano em que ingl\xeas se torna obrigat\xf3rio em 78% das vagas de emprego",summary:"Mercado acelera exig\xeancias lingu\xedsticas p\xf3s-pandemia",icon:"\ud83d\udd2e",color:"#1e40af"},{id:"news-047",category:"Previs\xe3o",headline:"IA projeta: Brasil ter\xe1 30 milh\xf5es de falantes fluentes at\xe9 2030",summary:"Revolu\xe7\xe3o digital democratiza acesso ao ensino de qualidade",icon:"\ud83d\udcc8",color:"#059669"},{id:"news-048",category:"Tend\xeancia",headline:"Micro-learning vence maratonas: 15 minutos di\xe1rios superam m\xe9todos antigos",summary:"Neuroci\xeancia comprova efic\xe1cia da const\xe2ncia sobre intensidade",icon:"\u26a1",color:"#f59e0b"},{id:"news-049",category:"Revolu\xe7\xe3o",headline:"Ensino presencial perde 67% dos alunos para plataformas digitais",summary:"Flexibilidade e personaliza\xe7\xe3o redefinem educa\xe7\xe3o no Brasil",icon:"\ud83d\udd04",color:"#8b5cf6"},{id:"news-050",category:"Marco",headline:"Teacher Alex Academy celebra 10.000\xaa li\xe7\xe3o completada na plataforma",summary:"Comunidade atinge marco hist\xf3rico e planeja festa virtual",icon:"\ud83c\udf8a",color:"#ef4444"}],z=()=>{const[e,t]=(0,r.useState)(null),[n,i]=(0,r.useState)([]),[s,a]=(0,r.useState)(0),c=l();(0,r.useEffect)(()=>{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return[...M].sort(()=>Math.random()-.5).slice(0,e)}(10);i(e),t(e[0])},[]),(0,r.useEffect)(()=>{if(0===n.length)return;const e=setInterval(()=>{a(e=>{const r=(e+1)%n.length;return t(n[r]),r})},8e3);return()=>clearInterval(e)},[n]);return e?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* \ud83d\uddde\ufe0f NEWS CARD STYLES - Plague Inc Inspired */\n        .news-card {\n          background: ${c.bg.secondary};\n          border: 1px solid ${c.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          box-shadow: ${c.shadow.md};\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          cursor: pointer;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .news-card:hover {\n          transform: translateY(-4px);\n          box-shadow: ${c.shadow.lg};\n          border-color: ${c.border.secondary};\n        }\n\n        .news-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 4px;\n          background: linear-gradient(90deg, #dc2626, #ef4444);\n          border-radius: 20px 20px 0 0;\n        }\n\n        /* Header */\n        .news-header {\n          display: flex;\n          align-items: center;\n          justify-content: between;\n          margin-bottom: 1.5rem;\n        }\n\n        .news-logo {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n        }\n\n        .news-icon {\n          width: 40px;\n          height: 40px;\n          background: linear-gradient(135deg, #dc2626, #ef4444);\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 1.25rem;\n        }\n\n        .news-brand {\n          color: ${c.text.primary};\n          font-weight: 600;\n          font-size: 1.1rem;\n          letter-spacing: -0.01em;\n        }\n\n        .news-live {\n          background: #dc2626;\n          color: white;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          font-size: 0.75rem;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n          animation: pulse 2s infinite;\n        }\n\n        @keyframes pulse {\n          0%, 100% { opacity: 1; }\n          50% { opacity: 0.7; }\n        }\n\n        /* Content */\n        .news-content {\n          margin-bottom: 1rem;\n        }\n\n        .news-category {\n          display: inline-block;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          font-size: 0.75rem;\n          font-weight: 600;\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n          margin-bottom: 1rem;\n        }\n\n        .news-headline {\n          font-size: 1.25rem;\n          font-weight: 700;\n          color: ${c.text.primary};\n          line-height: 1.4;\n          margin-bottom: 0.75rem;\n          letter-spacing: -0.01em;\n        }\n\n        .news-summary {\n          color: ${c.text.secondary};\n          font-size: 0.95rem;\n          line-height: 1.5;\n          margin-top: 0.5rem;\n        }\n\n        /* Controls - Simplified */\n        .news-controls {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-top: 1rem;\n        }\n\n        .news-navigation {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .nav-button {\n          width: 32px;\n          height: 32px;\n          border-radius: 8px;\n          background: ${c.bg.tertiary};\n          border: 1px solid ${c.border.primary};\n          color: ${c.text.secondary};\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .nav-button:hover {\n          background: ${c.border.secondary};\n          color: ${c.text.primary};\n        }\n\n        .nav-button:active {\n          transform: scale(0.95);\n        }\n\n        .news-indicator {\n          display: flex;\n          gap: 0.25rem;\n          margin: 0 1rem;\n        }\n\n        .indicator-dot {\n          width: 6px;\n          height: 6px;\n          border-radius: 50%;\n          background: ${c.border.primary};\n          transition: all 0.2s ease;\n        }\n\n        .indicator-dot.active {\n          background: #dc2626;\n          transform: scale(1.2);\n        }\n\n        /* Loading State */\n        .news-card-loading {\n          background: ${c.bg.secondary};\n          border: 1px solid ${c.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          text-align: center;\n          color: ${c.text.secondary};\n        }\n\n        .loading-spinner {\n          width: 32px;\n          height: 32px;\n          border: 3px solid ${c.border.primary};\n          border-top: 3px solid #dc2626;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto 1rem;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Responsive */\n        @media (max-width: 767px) {\n          .news-card {\n            padding: 1.5rem;\n          }\n          \n          .news-header {\n            margin-bottom: 1rem;\n          }\n          \n          .news-headline {\n            font-size: 1.1rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"news-card",children:[(0,o.jsxs)("div",{className:"news-header",children:[(0,o.jsxs)("div",{className:"news-logo",children:[(0,o.jsx)("div",{className:"news-icon",children:"\ud83d\udcf0"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"news-brand",children:"English News"}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:c.text.muted},children:"Teacher Alex Academy"})]})]}),(0,o.jsx)("div",{className:"news-live",children:"AO VIVO"})]}),(0,o.jsxs)("div",{className:"news-content",children:[(0,o.jsxs)("div",{className:"news-category",style:{backgroundColor:`${e.color}22`,color:e.color},children:[e.icon," ",e.category]}),(0,o.jsx)("h3",{className:"news-headline",children:e.headline}),(0,o.jsx)("div",{className:"news-summary",children:e.summary})]}),(0,o.jsx)("div",{className:"news-controls",children:(0,o.jsxs)("div",{className:"news-navigation",children:[(0,o.jsx)("button",{className:"nav-button",onClick:e=>{e.stopPropagation(),(()=>{if(0===n.length)return;const e=0===s?n.length-1:s-1;a(e),t(n[e])})()},children:(0,o.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),(0,o.jsx)("div",{className:"news-indicator",children:n.slice(0,5).map((e,t)=>(0,o.jsx)("div",{className:"indicator-dot "+(t===s%5?"active":"")},t))}),(0,o.jsx)("button",{className:"nav-button",onClick:e=>{e.stopPropagation(),(()=>{if(0===n.length)return;const e=(s+1)%n.length;a(e),t(n[e])})()},children:(0,o.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]})})]})]}):(0,o.jsxs)("div",{className:"news-card-loading",children:[(0,o.jsx)("div",{className:"loading-spinner"}),(0,o.jsx)("p",{children:"Carregando not\xedcias..."})]})},F=(e=>{if(Array.isArray(e)&&e.length>0){return e.every(e=>e&&"string"===typeof e.id&&e.id.length>0)?e.map(e=>e.id):e.map((e,t)=>`quiz-${t+1}`)}return["quiz-1"]})(O),$=F.length,V=e=>{let{studentData:t,onNavigate:n}=e;const r=l(),i=(()=>{if(!t||!t.progress)return{totalXP:0,currentLevel:1,currentStreak:0,completedLessons:0,completedStories:0,completedWordMatches:0,completedQuizzes:0,totalActivities:0,xpToNextLevel:50,progressPercent:0};const e=t.totalXP||0,n=I(e),r=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return!t.startsWith("story-")&&!t.startsWith("wordmatch-")&&!t.startsWith("quiz-")&&n.completed}).length,i=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("story-")&&n.completed}).length,s=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("wordmatch-")&&n.completed}).length,o=F.filter(e=>{const n=(e=>{const n=(null===t||void 0===t?void 0:t.progress)||{};if(void 0!==n[e])return n[e];if(!e.startsWith("quiz-")&&void 0!==n[`quiz-${e}`])return n[`quiz-${e}`];if(e.startsWith("quiz-")){const t=e.slice(5);if(void 0!==n[t])return n[t]}})(e);return!0===n||!0===(null===n||void 0===n?void 0:n.completed)||!0===(null===n||void 0===n?void 0:n.passed)}).length,a=r+i+s+o,l=A(e),c=P(e);return{totalXP:e,currentLevel:n,currentStreak:(e=>{if(!e||0===e.length)return 0;const t=e.map(e=>e.timestamp.toDate().toDateString()).filter((e,t,n)=>n.indexOf(e)===t).sort();if(0===t.length)return 0;let n=1;const r=(new Date).toDateString(),i=t[t.length-1],s=new Date(Date.now()-864e5).toDateString();if(i!==r&&i!==s)return 0;for(let o=t.length-2;o>=0;o--){const e=new Date(t[o]).getTime();if(1!==(new Date(t[o+1]).getTime()-e)/864e5)break;n++}return n})(t.xpHistory||[]),completedLessons:r,completedStories:i,completedWordMatches:s,completedQuizzes:o,totalActivities:a,xpToNextLevel:l,progressPercent:c}})();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Dark Mode Hub Container */\n        .hub-container {\n          max-width: 1000px;\n          margin: 0 auto;\n        }\n\n        /* \ud83d\uddde\ufe0f NEWS SECTION STYLING */\n        .news-section {\n          margin-bottom: 2rem;\n        }\n\n        .news-section-title {\n          color: ${r.text.primary};\n          font-size: 1.25rem;\n          font-weight: 600;\n          margin-bottom: 1rem;\n          text-align: center;\n          letter-spacing: -0.01em;\n        }\n\n        /* Progress Card - Elegant Dark Mode */\n        .progress-card {\n          background: ${r.bg.secondary};\n          border: 1px solid ${r.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          margin-bottom: 2rem;\n          box-shadow: ${r.shadow.md};\n          position: relative;\n          overflow: hidden;\n        }\n\n        .progress-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 4px;\n          background: linear-gradient(90deg, ${r.brand.blue}, #0066CC);\n          border-radius: 20px 20px 0 0;\n        }\n\n        .progress-title {\n          color: ${r.text.primary};\n          font-size: 1.5rem;\n          font-weight: 600;\n          margin-bottom: 0.5rem;\n          text-align: center;\n          letter-spacing: -0.01em;\n        }\n\n        .progress-subtitle {\n          color: ${r.text.secondary};\n          font-size: 1rem;\n          text-align: center;\n          margin-bottom: 2rem;\n          font-weight: 400;\n        }\n\n        /* Level & XP Row */\n        .progress-stats {\n          display: grid;\n          grid-template-columns: 1fr 1fr 1fr;\n          gap: 1.5rem;\n          margin-bottom: 2rem;\n        }\n\n        .stat-item {\n          text-align: center;\n          background: ${r.bg.tertiary};\n          border: 1px solid ${r.border.primary};\n          border-radius: 16px;\n          padding: 1rem 0.75rem;\n          backdrop-filter: blur(10px);\n          transition: all 0.2s ease;\n        }\n\n        .stat-item:hover {\n          background: ${r.border.secondary};\n          transform: translateY(-2px);\n        }\n\n        .stat-value {\n          font-size: 1.5rem;\n          font-weight: 500;\n          color: ${r.text.primary};\n          margin-bottom: 0.25rem;\n          letter-spacing: -0.02em;\n        }\n\n        .stat-value.primary {\n          color: ${r.brand.blue};\n          font-weight: 500;\n        }\n\n        .stat-label {\n          font-size: 0.85rem;\n          color: ${r.text.secondary};\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n          font-weight: 500;\n        }\n\n        /* Progress Bar */\n        .progress-bar-container {\n          margin-bottom: 1.5rem;\n        }\n\n        .progress-bar {\n          background: ${r.bg.tertiary};\n          height: 8px;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 0.75rem;\n        }\n\n        .progress-fill {\n          background: linear-gradient(90deg, ${r.brand.blue}, #0066CC);\n          height: 100%;\n          border-radius: 10px;\n          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n          box-shadow: 0 0 8px ${r.brand.blue}33;\n        }\n\n        .progress-text {\n          text-align: center;\n          font-size: 0.9rem;\n          color: ${r.text.secondary};\n          font-weight: 500;\n        }\n\n        /* Achievement Row */\n        .achievements {\n          display: flex;\n          justify-content: center;\n          gap: 2rem;\n        }\n\n        .achievement {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .achievement-icon {\n          width: 20px;\n          height: 20px;\n        }\n\n        .achievement-value {\n          font-size: 1.1rem;\n          font-weight: 600;\n          color: ${r.text.primary};\n        }\n\n        .achievement-label {\n          font-size: 0.8rem;\n          color: ${r.text.secondary};\n          margin-left: 0.25rem;\n        }\n\n        /* Activities Section */\n        .activities-section-title {\n          color: ${r.text.primary};\n          font-size: 1.25rem;\n          font-weight: 600;\n          margin-bottom: 1.5rem;\n          text-align: center;\n          letter-spacing: -0.01em;\n        }\n\n        /* Activity Cards Grid */\n        .activities-grid {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 1.5rem;\n        }\n\n        @media (min-width: 768px) {\n          .activities-grid {\n            grid-template-columns: repeat(2, 1fr);\n          }\n        }\n\n        @media (min-width: 1024px) {\n          .activities-grid {\n            grid-template-columns: repeat(3, 1fr);\n          }\n        }\n\n        /* Activity Card - Elegant Dark Mode */\n        .activity-card {\n          background: ${r.bg.secondary};\n          border: 1px solid ${r.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          box-shadow: ${r.shadow.md};\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          cursor: pointer;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .activity-card:hover {\n          transform: translateY(-4px);\n          box-shadow: ${r.shadow.lg};\n          border-color: ${r.border.secondary};\n        }\n\n        .activity-card.disabled {\n          opacity: 0.7;\n          cursor: not-allowed;\n          background: ${r.bg.tertiary};\n        }\n\n        .activity-card.disabled:hover {\n          transform: none;\n          box-shadow: ${r.shadow.md};\n        }\n\n        /* Activity Icon */\n        .activity-icon {\n          width: 64px;\n          height: 64px;\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: 0 auto 1.5rem;\n          font-size: 2rem;\n          transition: all 0.3s ease;\n        }\n\n        .activity-card:hover .activity-icon {\n          transform: scale(1.1);\n        }\n\n        .activity-icon.lessons {\n          background: linear-gradient(135deg, ${r.brand.blue}, #0066CC);\n          box-shadow: 0 4px 16px ${r.brand.blue}33;\n        }\n\n        .activity-icon.stories {\n          background: linear-gradient(135deg, ${r.brand.red}, #B71C1C);\n          box-shadow: 0 4px 16px ${r.brand.red}33;\n        }\n\n        .activity-icon.words {\n          background: linear-gradient(135deg, ${r.brand.orange}, #D97706);\n          box-shadow: 0 4px 16px ${r.brand.orange}33;\n        }\n\n        .activity-icon.quiz {\n          background: linear-gradient(135deg, #10b981, #059669);\n          box-shadow: 0 4px 16px rgba(16, 185, 129, 0.33);\n        }\n\n        .activity-icon.coming-soon {\n          background: linear-gradient(135deg, ${r.text.muted}, #6B7280);\n          box-shadow: 0 4px 16px ${r.text.muted}33;\n        }\n\n        /* Activity Content */\n        .activity-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${r.text.primary};\n          text-align: center;\n          margin-bottom: 0.75rem;\n          letter-spacing: -0.01em;\n        }\n\n        .activity-description {\n          font-size: 0.95rem;\n          color: ${r.text.secondary};\n          text-align: center;\n          margin-bottom: 1rem;\n          line-height: 1.5;\n        }\n\n        .activity-stats {\n          text-align: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .activity-progress {\n          font-size: 0.9rem;\n          color: ${r.text.secondary};\n          margin-bottom: 0.5rem;\n        }\n\n        .activity-count {\n          font-size: 1rem;\n          font-weight: 600;\n          margin-bottom: 0.5rem;\n        }\n\n        .activity-count.lessons { color: ${r.brand.blue}; }\n        .activity-count.stories { color: ${r.brand.red}; }\n        .activity-count.words { color: ${r.brand.orange}; }\n        .activity-count.quiz { color: #10b981; }\n        .activity-count.coming-soon { color: ${r.text.muted}; }\n\n        /* Activity Button */\n        .activity-button {\n          width: 100%;\n          padding: 0.875rem 1.5rem;\n          border: none;\n          border-radius: 12px;\n          font-weight: 600;\n          font-size: 0.95rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 0.5rem;\n        }\n\n        .activity-button.lessons {\n          background: linear-gradient(135deg, ${r.brand.blue}, #0066CC);\n          color: white;\n          box-shadow: 0 2px 8px ${r.brand.blue}33;\n        }\n\n        .activity-button.stories {\n          background: linear-gradient(135deg, ${r.brand.red}, #B71C1C);\n          color: white;\n          box-shadow: 0 2px 8px ${r.brand.red}33;\n        }\n\n        .activity-button.words {\n          background: linear-gradient(135deg, ${r.brand.orange}, #D97706);\n          color: white;\n          box-shadow: 0 2px 8px ${r.brand.orange}33;\n        }\n\n        .activity-button.quiz {\n          background: linear-gradient(135deg, #10b981, #059669);\n          color: white;\n          box-shadow: 0 2px 8px rgba(16, 185, 129, 0.33);\n        }\n\n        .activity-button.coming-soon {\n          background: ${r.bg.tertiary};\n          color: ${r.text.muted};\n          border: 1px solid ${r.border.primary};\n          cursor: not-allowed;\n        }\n\n        .activity-button:not(.coming-soon):hover {\n          transform: translateY(-1px);\n          filter: brightness(1.05);\n        }\n\n        .activity-button:not(.coming-soon):active {\n          transform: translateY(0);\n        }\n\n        /* Coming Soon Badge */\n        .coming-soon-badge {\n          background: linear-gradient(135deg, ${r.brand.orange}, #D97706);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          display: inline-block;\n          margin-top: 0.5rem;\n        }\n\n        /* Responsive Adjustments */\n        @media (max-width: 767px) {\n          .progress-card {\n            padding: 1.5rem;\n            margin-bottom: 1.5rem;\n          }\n\n          .progress-stats {\n            gap: 1rem;\n          }\n\n          .stat-value {\n            font-size: 1.75rem;\n          }\n\n          .achievements {\n            gap: 1.5rem;\n          }\n\n          .activity-card {\n            padding: 1.5rem;\n          }\n\n          .activity-icon {\n            width: 56px;\n            height: 56px;\n            font-size: 1.75rem;\n          }\n\n          .activity-title {\n            font-size: 1.25rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"hub-container",children:[(0,o.jsxs)("div",{className:"news-section",children:[(0,o.jsx)("h2",{className:"news-section-title",children:"\ud83d\udcf0 \xdaltimas do Mundo do Ingl\xeas"}),(0,o.jsx)(z,{})]}),(0,o.jsxs)("div",{className:"progress-card",children:[(0,o.jsx)("h2",{className:"progress-title",children:"Seu Progresso"}),(0,o.jsx)("p",{className:"progress-subtitle",children:"Continue assim!"}),(0,o.jsxs)("div",{className:"progress-stats",children:[(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsxs)("div",{className:"stat-value",children:["N\xedvel ",i.currentLevel]}),(0,o.jsx)("div",{className:"stat-label",children:"Atual"})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("div",{className:"stat-value primary",children:i.totalXP}),(0,o.jsx)("div",{className:"stat-label",children:"Total XP"})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("div",{className:"stat-value",children:i.xpToNextLevel}),(0,o.jsx)("div",{className:"stat-label",children:"Para o pr\xf3ximo"})]})]}),(0,o.jsxs)("div",{className:"progress-bar-container",children:[(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:`${i.progressPercent}%`}})}),(0,o.jsxs)("div",{className:"progress-text",children:[Math.round(i.progressPercent),"% para o N\xedvel ",i.currentLevel+1]})]}),(0,o.jsxs)("div",{className:"achievements",children:[(0,o.jsxs)("div",{className:"achievement",children:[(0,o.jsx)("svg",{className:"achievement-icon",style:{color:r.brand.red},viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67z"})}),(0,o.jsx)("span",{className:"achievement-value",children:i.currentStreak}),(0,o.jsx)("span",{className:"achievement-label",children:"dias"})]}),(0,o.jsxs)("div",{className:"achievement",children:[(0,o.jsx)("svg",{className:"achievement-icon",style:{color:r.brand.blue},viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsx)("span",{className:"achievement-value",children:i.totalActivities}),(0,o.jsx)("span",{className:"achievement-label",children:"atividades"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h2",{className:"activities-section-title",children:"\ud83c\udfaf Suas Atividades"}),(0,o.jsxs)("div",{className:"activities-grid",children:[(0,o.jsxs)("div",{className:"activity-card",onClick:()=>n("lessons"),children:[(0,o.jsx)("div",{className:"activity-icon lessons",children:(0,o.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"})})}),(0,o.jsx)("h3",{className:"activity-title",children:"Li\xe7\xf5es"}),(0,o.jsx)("p",{className:"activity-description",children:"8 s\xe9ries dispon\xedveis"}),(0,o.jsxs)("div",{className:"activity-stats",children:[(0,o.jsx)("p",{className:"activity-progress",children:"Aprenda ingl\xeas com \xe1udio"}),(0,o.jsxs)("p",{className:"activity-count lessons",children:[i.completedLessons," de 80 completas"]})]}),(0,o.jsx)("button",{className:"activity-button lessons",children:"\ud83d\udcda Continuar Aprendendo"})]}),(0,o.jsxs)("div",{className:"activity-card",onClick:()=>n("story-completion"),children:[(0,o.jsx)("div",{className:"activity-icon stories",children:(0,o.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,o.jsx)("h3",{className:"activity-title",children:"Jogos de Hist\xf3ria"}),(0,o.jsx)("p",{className:"activity-description",children:"Complete hist\xf3rias interativas"}),(0,o.jsxs)("div",{className:"activity-stats",children:[(0,o.jsx)("p",{className:"activity-progress",children:"Hist\xf3rias em ingl\xeas"}),(0,o.jsx)("p",{className:"activity-count stories",children:i.completedStories===D.length?"Todas completas! \ud83c\udf89":`${i.completedStories} de ${D.length} completas`})]}),(0,o.jsx)("button",{className:"activity-button stories",children:i.completedStories===D.length?"\ud83d\udcd6 Revisar Hist\xf3rias":"\ud83c\udfae Come\xe7ar a Jogar"})]}),(0,o.jsxs)("div",{className:"activity-card",onClick:()=>n("word-match"),children:[(0,o.jsx)("div",{className:"activity-icon words",children:(0,o.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsx)("h3",{className:"activity-title",children:"Combine Palavras"}),(0,o.jsx)("p",{className:"activity-description",children:"Ingl\xeas com Portugu\xeas"}),(0,o.jsxs)("div",{className:"activity-stats",children:[(0,o.jsx)("p",{className:"activity-progress",children:"Vocabul\xe1rio essencial"}),(0,o.jsx)("p",{className:"activity-count words",children:i.completedWordMatches===R.length?"Todos completos! \ud83c\udf89":`${i.completedWordMatches} de ${R.length} completos`})]}),(0,o.jsx)("button",{className:"activity-button words",children:i.completedWordMatches===R.length?"\ud83c\udfaf Revisar Rounds":"\ud83c\udfaf Come\xe7ar a Combinar"})]}),(0,o.jsxs)("div",{className:"activity-card",onClick:()=>n("quiz"),children:[(0,o.jsx)("div",{className:"activity-icon quiz",children:(0,o.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}),(0,o.jsx)("h3",{className:"activity-title",children:"Quiz R\xe1pido"}),(0,o.jsx)("p",{className:"activity-description",children:"Perguntas cronometradas"}),(0,o.jsxs)("div",{className:"activity-stats",children:[(0,o.jsx)("p",{className:"activity-progress",children:"Teste seus conhecimentos"}),(0,o.jsx)("p",{className:"activity-count quiz",children:i.completedQuizzes===$?"Todos completos! \ud83c\udf89":`${i.completedQuizzes} de ${$} completos`})]}),(0,o.jsx)("button",{className:"activity-button quiz",children:i.completedQuizzes===$?"\ud83c\udfaf Revisar Quizzes":"\u26a1 Come\xe7ar Quiz"})]}),(0,o.jsxs)("div",{className:"activity-card disabled",children:[(0,o.jsx)("div",{className:"activity-icon coming-soon",children:(0,o.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c1.66 0 3 1.34 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})})}),(0,o.jsx)("h3",{className:"activity-title",children:"Pr\xe1tica de Voz"}),(0,o.jsx)("p",{className:"activity-description",children:"IA para pron\xfancia"}),(0,o.jsxs)("div",{className:"activity-stats",children:[(0,o.jsx)("p",{className:"activity-progress",children:"Feedback inteligente"}),(0,o.jsx)("div",{className:"coming-soon-badge",children:"Em Breve!"})]}),(0,o.jsx)("button",{className:"activity-button coming-soon",children:"\ud83c\udf99\ufe0f Praticar Fala"}),(0,o.jsx)("div",{style:{textAlign:"center",marginTop:"1rem",fontSize:"0.8rem",color:r.text.muted},children:"Grave sua voz \u2022 Feedback de pron\xfancia \u2022 Ganhe confian\xe7a"})]}),(0,o.jsxs)("div",{className:"activity-card disabled",children:[(0,o.jsx)("div",{className:"activity-icon coming-soon",children:(0,o.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,o.jsx)("h3",{className:"activity-title",children:"Nova Atividade"}),(0,o.jsx)("p",{className:"activity-description",children:"Mais divers\xe3o em breve"}),(0,o.jsxs)("div",{className:"activity-stats",children:[(0,o.jsx)("p",{className:"activity-progress",children:"Aguarde novidades"}),(0,o.jsx)("div",{className:"coming-soon-badge",children:"Em Breve!"})]}),(0,o.jsx)("button",{className:"activity-button coming-soon",children:"\ud83c\udfae Aguarde"}),(0,o.jsx)("div",{style:{textAlign:"center",marginTop:"1rem",fontSize:"0.8rem",color:r.text.muted},children:"Nova atividade \u2022 Mais XP \u2022 Mais divers\xe3o"})]})]})]})]})]})},U=e=>{let{user:t,onBack:n,onSeriesSelect:i}=e;const[s,a]=(0,r.useState)({}),[c,u]=(0,r.useState)(!0),d=l(),h=[{id:"foundation",title:"Foundation",description:"Domine os fundamentos do ingl\xeas",color:"#196de3",totalLessons:10,icon:"foundation"},{id:"sports",title:"Sports",description:"Futebol, Olimp\xedadas e paix\xe3o brasileira",color:"#27ae60",totalLessons:10,icon:"sports"},{id:"culture",title:"Culture",description:"Tradi\xe7\xf5es brasileiras e cultura global",color:"#9b59b6",totalLessons:10,icon:"culture"},{id:"travel",title:"Travel",description:"Explore o mundo com ingl\xeas",color:"#3498db",totalLessons:10,icon:"travel"},{id:"food",title:"Food",description:"Do a\xe7a\xed \xe0 culin\xe1ria internacional",color:"#e67e22",totalLessons:10,icon:"food"},{id:"movies",title:"Movies",description:"Cinema, entretenimento e narrativas",color:"#bf3d30",totalLessons:10,icon:"movies"},{id:"gaming",title:"Gaming",description:"Videogames e entretenimento digital",color:"#34495e",totalLessons:10,icon:"gaming"},{id:"business",title:"Business",description:"Ingl\xeas profissional e corporativo",color:"#2c5282",totalLessons:10,icon:"business"},{id:"portal",title:"Portal",description:"T\xf3picos avan\xe7ados e conte\xfado especial",color:"#f39c12",totalLessons:10,icon:"portal",comingSoon:!0}],f=e=>{let{type:t,className:n="w-7 h-7"}=e;const r={className:`${n} text-white`,fill:"currentColor",viewBox:"0 0 24 24"};switch(t){case"foundation":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})});case"sports":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M7 4V2C7 1.45 7.45 1 8 1s1 .45 1 1v2h6V2c0-.55.45-1 1-1s1 .45 1 1v2h1c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h1z"})});case"culture":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})});case"travel":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29z"})});case"food":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.20-1.10-6.12.81z"})});case"movies":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})});case"gaming":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"})});case"business":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2z"})});default:return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}};(0,r.useEffect)(()=>{(async()=>{try{const e=await g(t.username);if(e.success&&e.student&&e.student.progress){const t={};for(const n of h){if(n.comingSoon){t[n.id]={completedLessons:0,totalXP:0};continue}const r=Object.entries(e.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(n.id)}).reduce((e,t)=>{let[n,r]=t;return r.completed&&(e.completedLessons+=1,e.totalXP+=r.xpEarned||0),e},{completedLessons:0,totalXP:0});t[n.id]=r}a(t)}else{const e={};h.forEach(t=>{e[t.id]={completedLessons:0,totalXP:0}}),a(e)}}catch(e){console.error("Error loading series progress:",e);const t={};h.forEach(e=>{t[e.id]={completedLessons:0,totalXP:0}}),a(t)}finally{u(!1)}})()},[t.username]);if(c)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:d.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 rounded-full animate-spin mx-auto mb-4",style:{borderColor:`${d.border.primary}`,borderTopColor:d.brand.blue}}),(0,o.jsx)("p",{style:{color:d.text.secondary},className:"font-medium",children:"Carregando s\xe9ries..."})]})});const p={totalCompleted:Object.values(s).reduce((e,t)=>e+t.completedLessons,0),totalXP:Object.values(s).reduce((e,t)=>e+t.totalXP,0),seriesStarted:Object.values(s).filter(e=>e.completedLessons>0).length},m=h.filter(e=>!e.comingSoon);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Dark Mode Series Selector */\n        .series-container {\n          max-width: 1000px;\n          margin: 0 auto;\n        }\n\n        /* Loading Spinner */\n        .loading-spinner {\n          width: 48px;\n          height: 48px;\n          border: 3px solid ${d.border.primary};\n          border-top: 3px solid ${d.brand.blue};\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Stats Card */\n        .stats-card {\n          background: ${d.bg.secondary};\n          border: 1px solid ${d.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          margin-bottom: 2rem;\n          box-shadow: ${d.shadow.md};\n        }\n\n        .stats-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${d.text.primary};\n          text-align: center;\n          margin-bottom: 0.5rem;\n          letter-spacing: -0.01em;\n        }\n\n        .stats-subtitle {\n          color: ${d.text.secondary};\n          text-align: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .stats-grid {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 1.5rem;\n          text-align: center;\n        }\n\n        .stat-item {\n          padding: 1rem;\n          background: ${d.bg.tertiary};\n          border-radius: 12px;\n          border: 1px solid ${d.border.primary};\n          transition: all 0.2s ease;\n        }\n\n        .stat-item:hover {\n          background: ${d.border.secondary};\n          transform: translateY(-2px);\n        }\n\n        .stat-value {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${d.text.primary};\n          margin-bottom: 0.25rem;\n        }\n\n        .stat-label {\n          font-size: 0.8rem;\n          color: ${d.text.secondary};\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n          font-weight: 500;\n        }\n\n        /* Series Grid */\n        .series-grid {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 1.5rem;\n        }\n\n        @media (min-width: 768px) {\n          .series-grid {\n            grid-template-columns: repeat(2, 1fr);\n          }\n        }\n\n        @media (min-width: 1024px) {\n          .series-grid {\n            grid-template-columns: repeat(3, 1fr);\n          }\n        }\n\n        /* Series Card - Elegant Dark Mode */\n        .series-card {\n          background: ${d.bg.secondary};\n          border: 1px solid ${d.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          box-shadow: ${d.shadow.md};\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          cursor: pointer;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .series-card:hover {\n          transform: translateY(-4px);\n          box-shadow: ${d.shadow.lg};\n          border-color: ${d.border.secondary};\n        }\n\n        .series-card.coming-soon {\n          opacity: 0.7;\n          cursor: not-allowed;\n          background: ${d.bg.tertiary};\n        }\n\n        .series-card.coming-soon:hover {\n          transform: none;\n          box-shadow: ${d.shadow.md};\n        }\n\n        /* Series Header */\n        .series-header {\n          display: flex;\n          align-items: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .series-icon {\n          width: 56px;\n          height: 56px;\n          border-radius: 14px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 1rem;\n          transition: all 0.3s ease;\n          flex-shrink: 0;\n        }\n\n        .series-card:hover .series-icon {\n          transform: scale(1.05);\n        }\n\n        .series-info {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .series-title {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: ${d.text.primary};\n          margin-bottom: 0.25rem;\n          letter-spacing: -0.01em;\n        }\n\n        .series-description {\n          font-size: 0.9rem;\n          color: ${d.text.secondary};\n          line-height: 1.4;\n        }\n\n        .coming-soon-badge {\n          background: linear-gradient(135deg, ${d.brand.orange}, #D97706);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          margin-left: 0.5rem;\n        }\n\n        /* Progress Section */\n        .progress-section {\n          margin-bottom: 1.5rem;\n        }\n\n        .progress-bar {\n          background: ${d.bg.tertiary};\n          height: 6px;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 1rem;\n        }\n\n        .progress-fill {\n          height: 100%;\n          border-radius: 10px;\n          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        .progress-stats {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .progress-text {\n          font-size: 0.9rem;\n          color: ${d.text.secondary};\n        }\n\n        .progress-number {\n          font-weight: 600;\n          color: ${d.text.primary};\n        }\n\n        .xp-badge {\n          background: ${d.bg.tertiary};\n          color: ${d.brand.orange};\n          font-size: 0.8rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          border: 1px solid ${d.border.primary};\n        }\n\n        /* Action Button */\n        .series-button {\n          width: 100%;\n          padding: 0.875rem 1.5rem;\n          border: none;\n          border-radius: 12px;\n          font-weight: 600;\n          font-size: 0.95rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .series-button.available {\n          background: linear-gradient(135deg, ${d.brand.blue}, #0066CC);\n          color: white;\n          box-shadow: 0 2px 8px ${d.brand.blue}33;\n        }\n\n        .series-button.coming-soon {\n          background: ${d.bg.tertiary};\n          color: ${d.text.muted};\n          border: 1px solid ${d.border.primary};\n          cursor: not-allowed;\n        }\n\n        .series-button.available:hover {\n          transform: translateY(-1px);\n          filter: brightness(1.05);\n        }\n\n        .series-button.available:active {\n          transform: translateY(0);\n        }\n\n        .button-arrow {\n          width: 16px;\n          height: 16px;\n          transition: transform 0.2s ease;\n        }\n\n        .series-button.available:hover .button-arrow {\n          transform: translateX(2px);\n        }\n\n        /* Coming Soon Card Special Styling */\n        .coming-soon-content {\n          text-align: center;\n          padding: 1rem 0;\n        }\n\n        .coming-soon-title {\n          font-size: 1rem;\n          font-weight: 600;\n          color: ${d.brand.orange};\n          margin-bottom: 0.5rem;\n        }\n\n        .coming-soon-description {\n          font-size: 0.9rem;\n          color: ${d.text.secondary};\n        }\n\n        /* Responsive Adjustments */\n        @media (max-width: 767px) {\n          .stats-card {\n            padding: 1.5rem;\n          }\n\n          .stats-grid {\n            gap: 1rem;\n          }\n\n          .series-card {\n            padding: 1.5rem;\n          }\n\n          .series-header {\n            margin-bottom: 1rem;\n          }\n\n          .series-icon {\n            width: 48px;\n            height: 48px;\n          }\n\n          .series-title {\n            font-size: 1.125rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"series-container",children:[(0,o.jsxs)("div",{className:"stats-card",children:[(0,o.jsx)("h2",{className:"stats-title",children:"Escolha sua S\xe9rie"}),(0,o.jsxs)("p",{className:"stats-subtitle",children:[m.length," s\xe9ries de li\xe7\xf5es dispon\xedveis"]}),(0,o.jsxs)("div",{className:"stats-grid",children:[(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("div",{className:"stat-value",children:p.totalCompleted}),(0,o.jsx)("div",{className:"stat-label",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("div",{className:"stat-value",children:p.totalXP}),(0,o.jsx)("div",{className:"stat-label",children:"XP Total"})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsxs)("div",{className:"stat-value",children:[p.seriesStarted,"/",m.length]}),(0,o.jsx)("div",{className:"stat-label",children:"S\xe9ries Iniciadas"})]})]})]}),(0,o.jsx)("div",{className:"series-grid",children:h.map(e=>{const t=((e,t)=>{const n=s[e];return n?Math.round(n.completedLessons/t*100):0})(e.id,e.totalLessons),n=s[e.id]||{completedLessons:0,totalXP:0};return(0,o.jsxs)("div",{onClick:()=>(e=>{e.comingSoon||i(e.id,e.title)})(e),className:"series-card "+(e.comingSoon?"coming-soon":""),children:[(0,o.jsxs)("div",{className:"series-header",children:[(0,o.jsx)("div",{className:"series-icon",style:{background:e.comingSoon?`linear-gradient(135deg, ${d.text.muted}, #6B7280)`:`linear-gradient(135deg, ${e.color}, ${e.color}dd)`,boxShadow:e.comingSoon?`0 2px 8px ${d.text.muted}33`:`0 2px 8px ${e.color}33`},children:e.comingSoon?(0,o.jsx)("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z"})}):(0,o.jsx)(f,{type:e.icon})}),(0,o.jsxs)("div",{className:"series-info",children:[(0,o.jsxs)("h3",{className:"series-title",children:[e.title,e.comingSoon&&(0,o.jsx)("span",{className:"coming-soon-badge",children:"Em Breve"})]}),(0,o.jsx)("p",{className:"series-description",children:e.description})]})]}),e.comingSoon?(0,o.jsxs)("div",{className:"coming-soon-content",children:[(0,o.jsx)("div",{className:"coming-soon-title",children:"\ud83d\ude80 Conte\xfado Avan\xe7ado em Desenvolvimento"}),(0,o.jsx)("div",{className:"coming-soon-description",children:"Aguarde novidades incr\xedveis!"})]}):(0,o.jsxs)("div",{className:"progress-section",children:[(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:`${t}%`,background:t>0?`linear-gradient(90deg, ${d.brand.blue}, #0066CC)`:`linear-gradient(90deg, ${e.color}, ${e.color}dd)`}})}),(0,o.jsxs)("div",{className:"progress-stats",children:[(0,o.jsxs)("div",{className:"progress-text",children:[(0,o.jsxs)("span",{className:"progress-number",children:[n.completedLessons,"/",e.totalLessons]})," ","li\xe7\xf5es \u2022 ",t,"% completo"]}),n.totalXP>0&&(0,o.jsxs)("div",{className:"xp-badge",children:[n.totalXP," XP"]})]})]}),(0,o.jsxs)("button",{className:"series-button "+(e.comingSoon?"coming-soon":"available"),disabled:e.comingSoon,children:[(0,o.jsx)("span",{children:e.comingSoon?"Aguarde o lan\xe7amento":0===t?"Come\xe7ar agora":100===t?"Revisar s\xe9rie":"Continuar"}),!e.comingSoon&&(0,o.jsx)("svg",{className:"button-arrow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id)})})]})]})},q=e=>{let{user:t,seriesId:i,seriesTitle:s,onBack:a,onLessonSelect:c}=e;const[u,d]=(0,r.useState)([]),[h,f]=(0,r.useState)({}),[p,m]=(0,r.useState)(!0),y=l(),b={foundation:{color:"#196de3",gradient:"from-blue-500 to-blue-600"},sports:{color:"#27ae60",gradient:"from-green-500 to-green-600"},culture:{color:"#9b59b6",gradient:"from-purple-500 to-purple-600"},travel:{color:"#3498db",gradient:"from-sky-500 to-sky-600"},food:{color:"#e67e22",gradient:"from-orange-500 to-orange-600"},movies:{color:"#bf3d30",gradient:"from-red-500 to-red-600"},gaming:{color:"#34495e",gradient:"from-slate-600 to-slate-700"},business:{color:"#2c5282",gradient:"from-blue-800 to-blue-900"},portal:{color:"#f39c12",gradient:"from-amber-500 to-amber-600"}},v=b[i]||b.foundation;(0,r.useEffect)(()=>{(async()=>{try{let r=[];try{switch(i){case"foundation":const{FOUNDATION_LESSONS:e}=await n.e(568).then(n.bind(n,568));r=e;break;case"gaming":try{const{GAMING_LESSONS:e}=await n.e(852).then(n.bind(n,852));r=e}catch{console.log("Gaming lessons file not found, using placeholder"),r=w(i)}break;case"food":try{const{FOOD_LESSONS:e}=await n.e(483).then(n.bind(n,483));r=e}catch{console.log("Food lessons file not found, using placeholder"),r=w(i)}break;case"movies":try{const{MOVIE_LESSONS:e}=await n.e(429).then(n.bind(n,429));r=e}catch{console.log("Movie lessons file not found, using placeholder"),r=w(i)}break;case"travel":try{const{TRAVEL_LESSONS:e}=await n.e(767).then(n.bind(n,767));r=e}catch{console.log("Travel lessons file not found, using placeholder"),r=w(i)}break;case"sports":try{const{SPORTS_LESSONS:e}=await n.e(558).then(n.bind(n,558));r=e}catch{console.log("Sports lessons file not found, using placeholder"),r=w(i)}break;case"business":const{BUSINESS_LESSONS:t}=await n.e(289).then(n.bind(n,289));r=t;break;case"culture":try{const{CULTURE_LESSONS:e}=await n.e(387).then(n.bind(n,387));r=e}catch{console.log("Culture lessons file not found, using placeholder"),r=w(i)}break;case"portal":try{const{PORTAL_LESSONS:e}=await n.e(165).then(n.bind(n,165));r=e}catch{console.log("Portal lessons file not found, using placeholder"),r=w(i)}break;default:r=w(i)}}catch(e){console.error("Error loading lesson data:",e),r=w(i)}d(r);const s=await g(t.username);if(s.success&&s.student&&s.student.progress){const e=Object.entries(s.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(i)}).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{});f(e)}else f({})}catch(e){console.error("Error loading lesson data:",e),d([]),f({})}finally{m(!1)}})()},[i,t.username]);const w=e=>{const t=["2:15","3:42","4:18","3:56","3:29","4:03","3:51","4:27","3:38","5:12"],n={foundation:[{title:"Basic Greetings",desc:"Hello, how are you?",file:"audio-01-greetings.mp3"},{title:"Family Members",desc:"Mother, father, sister",file:"audio-02-family.mp3"},{title:"Daily Routine",desc:"Morning to evening activities",file:"audio-03-routine.mp3"},{title:"Food & Drinks",desc:"Pizza, coffee, restaurant",file:"audio-04-food.mp3"},{title:"Weather & Clothes",desc:"Sunny, rainy, jacket",file:"audio-05-weather.mp3"},{title:"Shopping",desc:"Supermarket, prices, payment",file:"audio-06-shopping.mp3"},{title:"Hobbies",desc:"Reading, guitar, photography",file:"audio-07-hobbies.mp3"},{title:"Transportation",desc:"Bus, car, walking",file:"audio-08-transportation.mp3"},{title:"Health & Body",desc:"Exercise, doctor, healthy",file:"audio-09-health.mp3"},{title:"Future Plans",desc:"Travel, new job, dreams",file:"audio-10-future.mp3"}],sports:[{title:"Football Basics",desc:"Soccer, goal, team",file:"audio-01-football.mp3"},{title:"Basketball Game",desc:"Court, ball, score",file:"audio-02-basketball.mp3"},{title:"Swimming Pool",desc:"Water, stroke, lanes",file:"audio-03-swimming.mp3"},{title:"Tennis Match",desc:"Racket, serve, court",file:"audio-04-tennis.mp3"},{title:"Running Marathon",desc:"Race, finish line, time",file:"audio-05-running.mp3"},{title:"Gym Workout",desc:"Weights, exercise, muscle",file:"audio-06-gym.mp3"},{title:"Cycling Tour",desc:"Bike, road, pedal",file:"audio-07-cycling.mp3"},{title:"Volleyball Game",desc:"Net, spike, team",file:"audio-08-volleyball.mp3"},{title:"Golf Course",desc:"Club, hole, green",file:"audio-09-golf.mp3"},{title:"Olympic Games",desc:"Medal, champion, record",file:"audio-10-olympics.mp3"}],travel:[{title:"Airport Check-in",desc:"Passport, flight, gate",file:"audio-01-airport.mp3"},{title:"Hotel Booking",desc:"Room, reservation, key",file:"audio-02-hotel.mp3"},{title:"City Sightseeing",desc:"Tourist, map, guide",file:"audio-03-sightseeing.mp3"},{title:"Restaurant Order",desc:"Menu, waiter, bill",file:"audio-04-restaurant.mp3"},{title:"Train Journey",desc:"Platform, ticket, seat",file:"audio-05-train.mp3"},{title:"Beach Vacation",desc:"Sand, waves, relaxing",file:"audio-06-beach.mp3"},{title:"Mountain Hiking",desc:"Trail, summit, backpack",file:"audio-07-mountain.mp3"},{title:"City Shopping",desc:"Store, souvenir, bargain",file:"audio-08-shopping.mp3"},{title:"Cultural Museum",desc:"Art, history, exhibition",file:"audio-09-museum.mp3"},{title:"Return Home",desc:"Memories, photos, stories",file:"audio-10-return.mp3"}],food:[{title:"Brazilian Cuisine",desc:"Feijoada, a\xe7a\xed, p\xe3o",file:"audio-01-brazilian.mp3"},{title:"Italian Kitchen",desc:"Pizza, pasta, gelato",file:"audio-02-italian.mp3"},{title:"Breakfast Time",desc:"Coffee, bread, eggs",file:"audio-03-breakfast.mp3"},{title:"Cooking Recipe",desc:"Ingredients, oven, timer",file:"audio-04-cooking.mp3"},{title:"Healthy Eating",desc:"Vegetables, fruits, vitamins",file:"audio-05-healthy.mp3"},{title:"Fast Food",desc:"Burger, fries, delivery",file:"audio-06-fastfood.mp3"},{title:"Dinner Party",desc:"Guests, wine, celebration",file:"audio-07-dinner.mp3"},{title:"Street Food",desc:"Market, vendor, spicy",file:"audio-08-street.mp3"},{title:"Dessert Time",desc:"Cake, chocolate, sweet",file:"audio-09-dessert.mp3"},{title:"Food Safety",desc:"Fresh, clean, storage",file:"audio-10-safety.mp3"}],movies:[{title:"Cinema Experience",desc:"Screen, popcorn, tickets",file:"audio-01-cinema.mp3"},{title:"Action Movies",desc:"Hero, fight, adventure",file:"audio-02-action.mp3"},{title:"Comedy Films",desc:"Funny, laugh, jokes",file:"audio-03-comedy.mp3"},{title:"Horror Stories",desc:"Scary, ghost, afraid",file:"audio-04-horror.mp3"},{title:"Romance Drama",desc:"Love, couple, heart",file:"audio-05-romance.mp3"},{title:"Documentary",desc:"Real, facts, learning",file:"audio-06-documentary.mp3"},{title:"Animation Fun",desc:"Cartoon, children, colorful",file:"audio-07-animation.mp3"},{title:"Sci-Fi Future",desc:"Space, robot, technology",file:"audio-08-scifi.mp3"},{title:"Movie Reviews",desc:"Critics, rating, opinion",file:"audio-09-reviews.mp3"},{title:"Film Festival",desc:"Awards, premiere, red carpet",file:"audio-10-festival.mp3"}],business:[{title:"Job Interview",desc:"Questions, resume, professional",file:"audio-01-interview.mp3"},{title:"Office Meeting",desc:"Conference, presentation, team",file:"audio-02-meeting.mp3"},{title:"Email Writing",desc:"Formal, subject, attachment",file:"audio-03-email.mp3"},{title:"Phone Calls",desc:"Client, schedule, appointment",file:"audio-04-phone.mp3"},{title:"Negotiation",desc:"Deal, contract, agreement",file:"audio-05-negotiation.mp3"},{title:"Project Management",desc:"Deadline, task, progress",file:"audio-06-project.mp3"},{title:"Financial Report",desc:"Budget, profit, analysis",file:"audio-07-financial.mp3"},{title:"Marketing Strategy",desc:"Brand, customer, campaign",file:"audio-08-marketing.mp3"},{title:"Workplace Culture",desc:"Colleague, environment, respect",file:"audio-09-culture.mp3"},{title:"Career Growth",desc:"Promotion, skills, future",file:"audio-10-career.mp3"}]};return(n[e]||n.foundation).map((n,r)=>({id:`${e}-${String(r+1).padStart(2,"0")}`,title:n.title,description:n.desc,duration:t[r]||"3:30",audioFile:`audio/a1-${e}/${n.file}`,questions:[{question:`What is the main topic of "${n.title}"?`,options:[n.desc,"Something else","Not sure","Different topic"],correct:0}]}))},x=e=>{var t,n;if(0===e)return!0;const r=null===(t=u[e-1])||void 0===t?void 0:t.id;return(null===(n=h[r])||void 0===n?void 0:n.completed)||!1};if(p)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:y.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 rounded-full animate-spin mx-auto mb-6",style:{borderColor:y.border.primary,borderTopColor:y.brand.blue}}),(0,o.jsx)("p",{style:{color:y.text.secondary},className:"font-medium text-lg",children:"Carregando li\xe7\xf5es..."})]})});const k=(()=>{const e=u.filter(e=>{var t;return null===(t=h[e.id])||void 0===t?void 0:t.completed}).length;return{completedCount:e,totalXP:Object.values(h).reduce((e,t)=>e+(t.xpEarned||0),0),completionPercent:u.length>0?Math.round(e/u.length*100):0}})();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Dark Mode Lessons Container */\n        .lessons-container {\n          max-width: 1000px;\n          margin: 0 auto;\n        }\n\n        /* Loading Spinner */\n        .loading-spinner {\n          width: 48px;\n          height: 48px;\n          border: 3px solid ${y.border.primary};\n          border-top: 3px solid ${y.brand.blue};\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Series Header Card */\n        .series-header-card {\n          background: linear-gradient(135deg, ${v.color}dd 0%, ${v.color} 100%);\n          border-radius: 20px;\n          padding: 2rem;\n          margin-bottom: 2rem;\n          color: white;\n          position: relative;\n          overflow: hidden;\n          box-shadow: 0 8px 32px ${v.color}33;\n        }\n\n        .series-header-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 1px, transparent 1px);\n          background-size: 20px 20px;\n          opacity: 0.3;\n        }\n\n        .series-header-content {\n          position: relative;\n          z-index: 1;\n        }\n\n        .series-icon {\n          width: 64px;\n          height: 64px;\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: 0 auto 1.5rem;\n        }\n\n        .series-title {\n          font-size: 2rem;\n          font-weight: 600;\n          text-align: center;\n          margin-bottom: 0.5rem;\n          letter-spacing: -0.01em;\n        }\n\n        .series-subtitle {\n          text-align: center;\n          font-size: 1rem;\n          opacity: 0.9;\n          margin-bottom: 1.5rem;\n        }\n\n        .series-stats {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 1rem;\n          margin-top: 1.5rem;\n        }\n\n        .stat-pill {\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n          border-radius: 50px;\n          padding: 0.75rem 1rem;\n          text-align: center;\n        }\n\n        .stat-value {\n          font-size: 1.5rem;\n          font-weight: 600;\n          margin-bottom: 0.25rem;\n        }\n\n        .stat-label {\n          font-size: 0.8rem;\n          opacity: 0.8;\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n        }\n\n        /* Lesson Cards */\n        .lessons-grid {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n        }\n\n        .lesson-card {\n          background: ${y.bg.secondary};\n          border: 1px solid ${y.border.primary};\n          border-radius: 16px;\n          padding: 1.5rem;\n          box-shadow: ${y.shadow.sm};\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          cursor: pointer;\n          position: relative;\n        }\n\n        .lesson-card:hover {\n          transform: translateY(-2px);\n          box-shadow: ${y.shadow.md};\n          border-color: ${y.border.secondary};\n        }\n\n        .lesson-card.locked {\n          opacity: 0.6;\n          cursor: not-allowed;\n          background: ${y.bg.tertiary};\n        }\n\n        .lesson-card.locked:hover {\n          transform: none;\n          box-shadow: ${y.shadow.sm};\n        }\n\n        .lesson-card.completed {\n          background: ${y.isDark?`${y.brand.blue}11`:"#f0f9ff"};\n          border-color: ${y.brand.blue}66;\n        }\n\n        /* Lesson Content Layout */\n        .lesson-content {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n        }\n\n        .lesson-number {\n          width: 48px;\n          height: 48px;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 1.125rem;\n          flex-shrink: 0;\n          transition: all 0.3s ease;\n        }\n\n        .lesson-number.not-started {\n          background: ${y.bg.tertiary};\n          color: ${y.text.secondary};\n          border: 2px solid ${y.border.primary};\n        }\n\n        .lesson-number.completed {\n          background: linear-gradient(135deg, ${y.brand.blue}, #0066CC);\n          color: white;\n          box-shadow: 0 2px 8px ${y.brand.blue}33;\n        }\n\n        .lesson-number.locked {\n          background: ${y.bg.tertiary};\n          color: ${y.text.muted};\n          border: 2px solid ${y.border.primary};\n        }\n\n        .lesson-card:hover .lesson-number:not(.locked) {\n          transform: scale(1.05);\n        }\n\n        .lesson-info {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .lesson-title {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: ${y.text.primary};\n          margin-bottom: 0.25rem;\n          letter-spacing: -0.01em;\n        }\n\n        .lesson-description {\n          color: ${y.text.secondary};\n          font-size: 0.95rem;\n          margin-bottom: 0.75rem;\n          line-height: 1.4;\n        }\n\n        .lesson-meta {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          flex-wrap: wrap;\n        }\n\n        .lesson-duration {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          font-size: 0.85rem;\n          color: ${y.text.secondary};\n        }\n\n        .lesson-badges {\n          display: flex;\n          gap: 0.5rem;\n          margin-left: auto;\n        }\n\n        .score-badge {\n          background: linear-gradient(135deg, ${y.brand.blue}, #0066CC);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        .xp-badge {\n          background: linear-gradient(135deg, ${y.brand.orange}, #D97706);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        .lock-badge {\n          background: ${y.bg.tertiary};\n          color: ${y.text.secondary};\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          border: 1px solid ${y.border.primary};\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        /* Series Summary Card */\n        .series-summary {\n          background: ${y.bg.secondary};\n          border: 1px solid ${y.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          margin-top: 2rem;\n          box-shadow: ${y.shadow.md};\n        }\n\n        .summary-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${y.text.primary};\n          text-align: center;\n          margin-bottom: 1rem;\n          letter-spacing: -0.01em;\n        }\n\n        .progress-bar-container {\n          margin-bottom: 1.5rem;\n        }\n\n        .progress-bar {\n          background: ${y.bg.tertiary};\n          height: 8px;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 0.75rem;\n        }\n\n        .progress-fill {\n          background: linear-gradient(90deg, ${y.brand.blue}, #0066CC);\n          height: 100%;\n          border-radius: 10px;\n          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n          box-shadow: 0 0 8px ${y.brand.blue}33;\n        }\n\n        .progress-text {\n          text-align: center;\n          color: ${y.text.secondary};\n          font-size: 0.95rem;\n        }\n\n        /* Responsive Design */\n        @media (max-width: 767px) {\n          .series-header-card {\n            padding: 1.5rem;\n          }\n\n          .series-title {\n            font-size: 1.5rem;\n          }\n\n          .series-stats {\n            grid-template-columns: 1fr;\n            gap: 0.75rem;\n          }\n\n          .lesson-card {\n            padding: 1.25rem;\n          }\n\n          .lesson-content {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .lesson-badges {\n            margin-left: 0;\n          }\n\n          .series-summary {\n            padding: 1.5rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"lessons-container",children:[(0,o.jsx)("div",{className:"series-header-card",children:(0,o.jsxs)("div",{className:"series-header-content",children:[(0,o.jsx)("div",{className:"series-icon",children:(0,o.jsx)("svg",{className:"w-8 h-8",fill:"white",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,o.jsx)("h1",{className:"series-title",children:s}),(0,o.jsxs)("p",{className:"series-subtitle",children:[u.length," li\xe7\xf5es dispon\xedveis"]}),(0,o.jsxs)("div",{className:"series-stats",children:[(0,o.jsxs)("div",{className:"stat-pill",children:[(0,o.jsxs)("div",{className:"stat-value",children:[k.completedCount,"/",u.length]}),(0,o.jsx)("div",{className:"stat-label",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"stat-pill",children:[(0,o.jsx)("div",{className:"stat-value",children:k.totalXP}),(0,o.jsx)("div",{className:"stat-label",children:"XP Ganho"})]}),(0,o.jsxs)("div",{className:"stat-pill",children:[(0,o.jsxs)("div",{className:"stat-value",children:[k.completionPercent,"%"]}),(0,o.jsx)("div",{className:"stat-label",children:"Completada"})]})]})]})}),(0,o.jsx)("div",{className:"lessons-grid",children:u.map((e,t)=>{const n=x(t),r=(e=>{const t=h[e.id];return t?{status:t.completed?"completed":"in-progress",score:t.score||0,xp:t.xpEarned||0}:{status:"not-started",score:0,xp:0}})(e);return(0,o.jsx)("div",{onClick:()=>((e,t)=>{x(t)&&c(e,i)})(e,t),className:"lesson-card "+(n?"completed"===r.status?"completed":"":"locked"),children:(0,o.jsxs)("div",{className:"lesson-content",children:[(0,o.jsx)("div",{className:"lesson-number "+("completed"===r.status?"completed":n?"not-started":"locked"),children:"completed"===r.status?(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}):(0,o.jsx)("span",{children:t+1})}),(0,o.jsxs)("div",{className:"lesson-info",children:[(0,o.jsx)("h3",{className:"lesson-title",children:e.title}),(0,o.jsx)("p",{className:"lesson-description",children:e.description}),(0,o.jsxs)("div",{className:"lesson-meta",children:[(0,o.jsxs)("div",{className:"lesson-duration",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,o.jsx)("span",{children:e.duration})]}),(0,o.jsxs)("div",{className:"lesson-badges",children:["completed"===r.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"score-badge",children:[(0,o.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),r.score,"%"]}),(0,o.jsxs)("div",{className:"xp-badge",children:[(0,o.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),"+",r.xp," XP"]})]}),!n&&(0,o.jsxs)("div",{className:"lock-badge",children:[(0,o.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2z"})}),"Bloqueada"]})]})]})]})]})},e.id)})}),(0,o.jsxs)("div",{className:"series-summary",children:[(0,o.jsx)("h3",{className:"summary-title",children:"Progresso da S\xe9rie"}),(0,o.jsxs)("div",{className:"progress-bar-container",children:[(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:k.completedCount/u.length*100+"%"}})}),(0,o.jsx)("div",{className:"progress-text",children:k.completedCount===u.length?"\ud83c\udf89 S\xe9rie completada com excel\xeancia!":`${u.length-k.completedCount} li\xe7\xf5es restantes para dominar ${s}`})]})]})]})]})},B=e=>{let{user:t,lesson:n,seriesId:i,onBack:s,onComplete:a}=e;const c=l(),u=(0,r.useRef)(null),[d,h]=(0,r.useState)(!1),[f,p]=(0,r.useState)(0),[m,g]=(0,r.useState)(0),[b,v]=(0,r.useState)(0),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)(1),[_,E]=(0,r.useState)({}),[C,T]=(0,r.useState)(!1),[N,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=u.current;if(!e)return;const t=()=>{g(e.duration),x(!0)},n=()=>{e.duration>0&&(p(e.currentTime),v(e.currentTime/e.duration*100))},r=()=>h(!1);return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",n),e.addEventListener("ended",r),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",r)}},[]);const A=e=>{if(!u.current||!w)return;const t=Math.max(0,Math.min(m,f+e));u.current.currentTime=t},P=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,L=Object.keys(_).length===n.questions.length;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* \ud83c\udf19 ELEGANT DARK MODE LESSON PLAYER */\n        .lesson-container {\n          min-height: 100vh;\n          background: ${c.bg.gradient};\n          width: 100%;\n          color: ${c.text.primary};\n        }\n        \n        .lesson-content {\n          max-width: 1000px;\n          margin: 0 auto;\n          padding: 0 1rem;\n        }\n        \n        @media (min-width: 768px) {\n          .lesson-content {\n            padding: 0 2rem;\n          }\n        }\n        \n        .header {\n          background: ${c.bg.secondary};\n          backdrop-filter: blur(20px);\n          border-bottom: 1px solid ${c.border.primary};\n          padding: 1rem;\n          width: 100%;\n          box-shadow: ${c.shadow.sm};\n        }\n        \n        .card {\n          background: ${c.bg.secondary};\n          backdrop-filter: blur(20px);\n          border-radius: 1.5rem;\n          padding: 1.5rem;\n          margin: 1.5rem 0;\n          box-shadow: ${c.shadow.md};\n          border: 1px solid ${c.border.primary};\n        }\n        \n        @media (min-width: 768px) {\n          .card {\n            padding: 2.5rem;\n            margin: 2rem 0;\n          }\n        }\n        \n        /* AUDIO CONTROLS - Dark Mode */\n        .audio-controls {\n          background: ${c.bg.secondary};\n          border-radius: 1.5rem;\n          padding: 1.5rem;\n          border: 2px solid ${c.border.primary};\n          margin-bottom: 1.5rem;\n          box-shadow: ${c.shadow.sm};\n        }\n        \n        .play-button {\n          width: 70px;\n          height: 70px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, ${c.brand.blue}, #0066CC);\n          border: none;\n          color: white;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          box-shadow: 0 4px 16px ${c.brand.blue}33;\n        }\n        \n        .play-button:active {\n          transform: scale(0.95);\n        }\n        \n        .play-button:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        .control-btn {\n          width: 58px;\n          height: 58px;\n          border-radius: 50%;\n          background: ${c.bg.tertiary};\n          border: 2px solid ${c.border.primary};\n          color: ${c.brand.blue};\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        .control-btn:active {\n          transform: scale(0.9);\n          background: ${c.border.secondary};\n        }\n        \n        .speed-btn {\n          padding: 0.3rem 0.45rem;\n          border-radius: 0.75rem;\n          border: 2px solid ${c.border.primary};\n          background: ${c.bg.tertiary};\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 600;\n          color: ${c.text.primary};\n        }\n        \n        .speed-btn.active {\n          background: ${c.brand.blue};\n          border-color: ${c.brand.blue};\n          color: white;\n        }\n        \n        .speed-btn:active {\n          transform: scale(0.95);\n        }\n        \n        .progress-bar {\n          background: ${c.bg.tertiary};\n          height: 8px;\n          border-radius: 4px;\n          cursor: pointer;\n          overflow: hidden;\n        }\n        \n        .progress-fill {\n          background: linear-gradient(90deg, ${c.brand.blue}, #0066CC);\n          height: 100%;\n          transition: width 0.1s ease;\n        }\n        \n        /* QUESTIONS - Dark Mode */\n        .question-card {\n          background: ${c.bg.secondary};\n          border-radius: 1rem;\n          padding: 1.5rem;\n          margin-bottom: 1.5rem;\n          border: 1px solid ${c.border.primary};\n          box-shadow: ${c.shadow.sm};\n        }\n        \n        .option-btn {\n          width: 100%;\n          text-align: left;\n          padding: 1rem 1.25rem;\n          background: ${c.bg.tertiary};\n          border: 2px solid ${c.border.primary};\n          border-radius: 0.75rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          margin: 0.5rem 0;\n          color: ${c.text.primary};\n        }\n        \n        .option-btn:hover {\n          background: ${c.border.secondary};\n        }\n        \n        .option-btn.selected {\n          background: ${c.brand.blue}1A;\n          border-color: ${c.brand.blue};\n          color: ${c.brand.blue};\n        }\n        \n        .submit-btn {\n          width: 100%;\n          padding: 1rem 2rem;\n          background: linear-gradient(135deg, ${c.brand.green}, #059669);\n          color: white;\n          border: none;\n          border-radius: 1rem;\n          font-size: 1.125rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        .submit-btn:disabled {\n          background: ${c.bg.tertiary};\n          color: ${c.text.muted};\n          cursor: not-allowed;\n        }\n        \n        .submit-btn:not(:disabled):active {\n          transform: scale(0.98);\n        }\n        \n        /* MODAL - Dark Mode */\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 1rem;\n        }\n        \n        .modal {\n          background: ${c.bg.secondary};\n          border: 1px solid ${c.border.primary};\n          border-radius: 1.5rem;\n          padding: 2rem;\n          max-width: 90vw;\n          width: 100%;\n          max-width: 500px;\n          max-height: 80vh;\n          overflow-y: auto;\n          position: relative;\n          box-shadow: ${c.shadow.lg};\n          color: ${c.text.primary};\n        }\n        \n        .modal-close {\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n          width: 2rem;\n          height: 2rem;\n          border-radius: 50%;\n          background: ${c.bg.tertiary};\n          border: none;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: ${c.text.secondary};\n        }\n        \n        /* Status Badge */\n        .status-badge {\n          display: inline-block;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          font-size: 0.85rem;\n          font-weight: 600;\n        }\n        \n        .status-badge.ready {\n          background: ${c.brand.green}22;\n          color: ${c.brand.green};\n          border: 1px solid ${c.brand.green}33;\n        }\n        \n        .status-badge.loading {\n          background: ${c.text.muted}22;\n          color: ${c.text.muted};\n        }\n        \n        /* Perfect Animation */\n        .perfect-animation {\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: 3rem;\n          font-weight: 900;\n          color: #fbbf24;\n          text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n          z-index: 1001;\n          pointer-events: none;\n          animation: perfectPop 3s ease-out forwards;\n        }\n        \n        @keyframes perfectPop {\n          0% { transform: translate(-50%, -50%) scale(0) rotate(-12deg); opacity: 0; }\n          20% { transform: translate(-50%, -50%) scale(1.4) rotate(-12deg); opacity: 1; }\n          40% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          70% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          100% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 0; }\n        }\n      `}),(0,o.jsxs)("div",{className:"lesson-container",children:[(0,o.jsx)("div",{className:"header",children:(0,o.jsx)("div",{className:"lesson-content",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("button",{onClick:s,className:"flex items-center transition-colors",style:{color:c.text.secondary,background:"none",border:"none",cursor:"pointer"},onMouseEnter:e=>e.target.style.color=c.text.primary,onMouseLeave:e=>e.target.style.color=c.text.secondary,children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"font-semibold text-lg",style:{color:c.text.primary},children:n.title}),(0,o.jsx)("div",{className:"text-sm",style:{color:c.text.secondary},children:"Li\xe7\xe3o de Ingl\xeas"})]}),(0,o.jsx)("div",{className:"w-16"})]})})}),(0,o.jsxs)("div",{className:"lesson-content",children:[(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"text-5xl mb-4",children:"\ud83c\udfa7"}),(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:{color:c.text.primary},children:"Ou\xe7a e Aprenda"}),(0,o.jsx)("p",{style:{color:c.text.secondary},children:"Ou\xe7a o \xe1udio e responda as perguntas"})]}),(0,o.jsx)("audio",{ref:u,preload:"metadata",children:(0,o.jsx)("source",{src:n.audioFile,type:"audio/mpeg"})}),(0,o.jsxs)("div",{className:"audio-controls",children:[(0,o.jsx)("div",{className:"text-center mb-4",children:(0,o.jsx)("div",{className:"status-badge "+(w?"ready":"loading"),children:w?"\u2705 \xc1udio Pronto":"\u23f3 Carregando..."})}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm mb-2",style:{color:c.text.secondary},children:[(0,o.jsx)("span",{children:P(f)}),(0,o.jsxs)("span",{className:"font-medium",style:{color:c.brand.blue},children:[Math.round(b),"%"]}),(0,o.jsx)("span",{children:P(m)})]}),(0,o.jsx)("div",{className:"progress-bar",onClick:e=>{if(!u.current||!w)return;const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width;u.current.currentTime=n*m},children:(0,o.jsx)("div",{className:"progress-fill",style:{width:`${b}%`}})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-6 mb-6",children:[(0,o.jsx)("button",{className:"control-btn",onClick:()=>A(-10),disabled:!w,children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.334 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})}),(0,o.jsx)("div",{className:"text-xs",children:"-10s"})]})}),(0,o.jsx)("button",{className:"play-button",onClick:async()=>{if(w&&u.current)try{d?(u.current.pause(),h(!1)):(await u.current.play(),h(!0))}catch(e){console.error("Audio error:",e)}},disabled:!w,children:d?(0,o.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,o.jsx)("svg",{className:"w-8 h-8 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,o.jsx)("button",{className:"control-btn",onClick:()=>A(10),disabled:!w,children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})}),(0,o.jsx)("div",{className:"text-xs",children:"+10s"})]})})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-sm font-medium mb-3",style:{color:c.text.secondary},children:"Velocidade"}),(0,o.jsx)("div",{className:"flex justify-center space-x-2",children:[.5,.75,1,1.25,1.5].map(e=>(0,o.jsxs)("button",{onClick:()=>(e=>{u.current&&w&&(u.current.playbackRate=e,S(e))})(e),disabled:!w,className:"speed-btn "+(k===e?"active":""),children:[e,"x"]},e))})]})]})]}),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"text-4xl mb-3",children:"\u2753"}),(0,o.jsx)("h3",{className:"text-xl font-semibold",style:{color:c.text.primary},children:"Responda as Perguntas"}),(0,o.jsxs)("p",{style:{color:c.text.secondary},className:"mt-2",children:[Object.keys(_).length,"/",n.questions.length," respondidas"]})]}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:Object.keys(_).length/n.questions.length*100+"%"}})})}),(0,o.jsx)("div",{className:"space-y-6",children:n.questions.map((e,t)=>(0,o.jsxs)("div",{className:"question-card",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,o.jsx)("span",{className:"text-sm font-bold px-3 py-1 rounded-full mr-3",style:{background:`${c.brand.blue}22`,color:c.brand.blue},children:t+1}),(0,o.jsx)("span",{className:"text-xs uppercase",style:{color:c.text.muted},children:"Question"})]}),(0,o.jsx)("h4",{className:"text-lg font-semibold",style:{color:c.text.primary},children:e.question})]}),(0,o.jsx)("div",{className:"space-y-2",children:e.options.map((e,n)=>(0,o.jsxs)("button",{onClick:()=>E({..._,[t]:n}),className:"option-btn "+(_[t]===n?"selected":""),children:[(0,o.jsxs)("span",{className:"font-bold mr-3",style:{color:c.text.muted},children:[String.fromCharCode(97+n),")"]}),(0,o.jsx)("span",{className:"flex-1",children:e}),_[t]===n&&(0,o.jsx)("span",{style:{color:c.brand.blue},className:"text-xl ml-2",children:"\u2713"})]},n))})]},t))}),(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsx)("button",{className:"submit-btn",onClick:async()=>{try{let e=0;const r={};n.questions.forEach((t,n)=>{const i=_[n],s=i===t.correct;s&&e++,r[n]={question:t.question,userAnswer:void 0!==i?t.options[i]:"N\xe3o respondeu",correctAnswer:t.options[t.correct],isCorrect:s}});const s=Math.round(e/n.questions.length*100),o=await j(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:n.questions.length,perfectScore:100===s}),a={completed:!0,score:s,xpEarned:o.xpEarned,correctAnswers:e,totalQuestions:n.questions.length,completedAt:new Date,seriesName:i};await y(t.username,n.id,a),I({score:s,correctCount:e,totalQuestions:n.questions.length,xpEarned:o.xpEarned,leveledUp:o.leveledUp,newLevel:o.level,detailedResults:r}),T(!0)}catch(e){console.error("Error completing lesson:",e)}},disabled:!L,children:L?"\ud83c\udfaf Verificar Respostas!":`Responda mais ${n.questions.length-Object.keys(_).length} pergunta${n.questions.length-Object.keys(_).length!==1?"s":""}`})})]})]}),C&&N&&(0,o.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&T(!1),children:(0,o.jsxs)("div",{className:"modal",children:[(0,o.jsx)("button",{className:"modal-close",onClick:()=>T(!1),children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(()=>{const e=(t=N.score)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea dominou esta li\xe7\xe3o!"}:t>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3tima compreens\xe3o!"}:t>=70?{emoji:"\ud83d\udc4d",title:"Bom Trabalho!",message:"Continue praticando!"}:{emoji:"\ud83d\udcaa",title:"Continue Tentando!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!"};var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"text-5xl mb-4",children:e.emoji}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:c.text.primary},children:e.title}),(0,o.jsx)("p",{style:{color:c.text.secondary},children:e.message})]}),(0,o.jsxs)("div",{className:"text-white rounded-xl p-4 mb-6 text-center",style:{background:`linear-gradient(135deg, ${c.brand.blue}, ${c.brand.green})`},children:[(0,o.jsxs)("div",{className:"text-3xl font-bold mb-1",children:[N.score,"%"]}),(0,o.jsxs)("div",{className:"text-sm mb-1",children:[N.correctCount,"/",N.totalQuestions," corretas"]}),(0,o.jsxs)("div",{className:"text-xs opacity-90",children:["+",N.xpEarned," XP"]}),N.leveledUp&&(0,o.jsxs)("div",{className:"text-sm font-bold mt-2 bg-purple-600 rounded px-3 py-1 inline-block",children:["\ud83c\udf89 Level ",N.newLevel,"!"]})]}),N.detailedResults&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"font-semibold mb-3 text-center",style:{color:c.text.primary},children:"Suas Respostas"}),(0,o.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(N.detailedResults).map(e=>{let[t,n]=e;return(0,o.jsx)("div",{className:"p-3 rounded-lg border-l-4",style:{background:n.isCorrect?`${c.brand.green}11`:`${c.brand.red}11`,borderLeftColor:n.isCorrect?c.brand.green:c.brand.red},children:(0,o.jsxs)("div",{className:"flex items-start text-sm",children:[(0,o.jsx)("span",{className:"mr-2 font-bold",style:{color:n.isCorrect?c.brand.green:c.brand.red},children:n.isCorrect?"\u2713":"\u2717"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"font-medium mb-1",style:{color:c.text.primary},children:["Q",parseInt(t)+1]}),n.isCorrect?(0,o.jsx)("div",{style:{color:c.brand.green},children:"Correto!"}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{color:c.brand.red},className:"mb-1",children:["Sua: ",n.userAnswer]}),(0,o.jsxs)("div",{style:{color:c.brand.green},children:["Correto: ",n.correctAnswer]})]})]})]})},t)})})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[N.score<100&&(0,o.jsx)("button",{onClick:()=>{E({}),T(!1),u.current&&(u.current.currentTime=0,p(0),v(0),h(!1))},className:"w-full py-3 rounded-xl font-medium text-white",style:{background:c.brand.red},children:"\ud83d\udd04 Tentar Novamente"}),(0,o.jsx)("button",{onClick:()=>{a({lessonId:n.id,score:N.score,answers:_,correctAnswers:N.correctCount,totalQuestions:N.totalQuestions,xpEarned:N.xpEarned})},className:"w-full py-3 rounded-xl font-medium text-white",style:{background:c.brand.blue},children:"\ud83c\udf89 Continuar"})]})]})})()]})}),C&&N&&100===N.score&&(0,o.jsx)("div",{className:"perfect-animation",children:"\u2605 PERFEITO! \u2605"})]})]})},H=D,W=e=>{let{user:t,onBack:n}=e;const[i,s]=(0,r.useState)(0),[a,c]=(0,r.useState)({}),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(new Set),[b,v]=(0,r.useState)(!0),[w,x]=(0,r.useState)(0),k=l();(0,r.useEffect)(()=>{S()},[t.username]);const S=async()=>{try{console.log("\ud83d\udcd6 Loading story progress for:",t.username);const e=await g(t.username);if(e.success&&e.student&&e.student.progress){const t=Object.entries(e.student.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("story-")&&n.completed}).map(e=>{let[t]=e;return t.replace("story-","")});console.log("\u2705 Found completed stories:",t),m(new Set(t))}}catch(e){console.error("\u274c Error loading story progress:",e)}finally{v(!1)}},_=H[i],E=_.story.filter(e=>"blank"===e.type),C=E.length,T=Object.keys(a).length,N=T===C,I=()=>w<E.length?E[w]:null,A=()=>{c({}),x(0),d(!1),f(null)};return b?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:k.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 rounded-full animate-spin mx-auto mb-6",style:{borderColor:k.border.primary,borderTopColor:k.brand.red}}),(0,o.jsx)("p",{style:{color:k.text.secondary},className:"font-medium text-lg",children:"Carregando suas hist\xf3rias..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* \ud83c\udf19 ELEGANT DARK MODE STORY EXPERIENCE */\n        .story-container {\n          max-width: 1000px;\n          margin: 0 auto;\n          padding: 0;\n          color: ${k.text.primary};\n        }\n\n        /* Stories Header */\n        .stories-header {\n          background: ${k.bg.secondary};\n          border-radius: 0 0 20px 20px;\n          padding: 1.5rem;\n          margin-bottom: 1.5rem;\n          box-shadow: ${k.shadow.md};\n          border: 1px solid ${k.border.primary};\n        }\n\n        .progress-overview {\n          text-align: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .progress-title {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: ${k.text.primary};\n          margin-bottom: 0.5rem;\n        }\n\n        .progress-subtitle {\n          color: ${k.text.secondary};\n          margin-bottom: 1rem;\n        }\n\n        .progress-stats {\n          display: flex;\n          justify-content: center;\n          gap: 1.5rem;\n          margin-bottom: 1.5rem;\n        }\n\n        .stat-pill {\n          background: linear-gradient(135deg, ${k.brand.red}, #B71C1C);\n          color: white;\n          padding: 0.5rem 1rem;\n          border-radius: 50px;\n          font-size: 0.85rem;\n          font-weight: 600;\n        }\n\n        .progress-bar {\n          background: ${k.bg.tertiary};\n          height: 6px;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 1rem;\n        }\n\n        .progress-fill {\n          background: linear-gradient(90deg, ${k.brand.red}, #B71C1C);\n          height: 100%;\n          transition: width 0.8s ease;\n          border-radius: 10px;\n        }\n\n        .stories-grid {\n          display: flex;\n          gap: 0.75rem;\n          overflow-x: auto;\n          padding-bottom: 0.5rem;\n          scrollbar-width: thin;\n          cursor: grab;\n        }\n\n        .stories-grid::-webkit-scrollbar {\n          height: 8px;\n        }\n\n        .stories-grid::-webkit-scrollbar-track {\n          background: ${k.bg.tertiary};\n          border-radius: 4px;\n        }\n\n        .stories-grid::-webkit-scrollbar-thumb {\n          background: ${k.brand.red};\n          border-radius: 4px;\n        }\n\n        .story-tab {\n          flex-shrink: 0;\n          background: ${k.bg.tertiary};\n          border: 2px solid ${k.border.primary};\n          border-radius: 12px;\n          padding: 0.75rem 1rem;\n          text-align: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          min-width: 120px;\n        }\n\n        .story-tab.active {\n          background: linear-gradient(135deg, ${k.brand.red}, #B71C1C);\n          border-color: ${k.brand.red};\n          color: white;\n          transform: scale(1.05);\n        }\n\n        .story-tab.completed {\n          background: linear-gradient(135deg, ${k.brand.green}, #059669);\n          border-color: ${k.brand.green};\n          color: white;\n        }\n\n        .story-icon {\n          font-size: 1.5rem;\n          display: block;\n          margin-bottom: 0.25rem;\n        }\n\n        .story-tab-title {\n          font-size: 0.8rem;\n          font-weight: 600;\n          margin-bottom: 0.25rem;\n          color: ${k.text.primary};\n        }\n\n        .story-tab.active .story-tab-title,\n        .story-tab.completed .story-tab-title {\n          color: white;\n        }\n\n        .story-tab-category {\n          font-size: 0.65rem;\n          opacity: 0.8;\n          color: ${k.text.secondary};\n        }\n\n        .story-tab.active .story-tab-category,\n        .story-tab.completed .story-tab-category {\n          color: rgba(255, 255, 255, 0.8);\n        }\n\n        /* Main Story Card */\n        .story-card {\n          background: ${k.bg.secondary};\n          border-radius: 20px;\n          margin: 0 1rem 1.5rem;\n          box-shadow: ${k.shadow.lg};\n          overflow: hidden;\n          border: 1px solid ${k.border.primary};\n        }\n\n        .story-header {\n          background: linear-gradient(135deg, ${k.brand.red}, #B71C1C);\n          color: white;\n          padding: 1.5rem;\n          text-align: center;\n        }\n\n        .story-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          margin-bottom: 0.5rem;\n        }\n\n        .story-subtitle {\n          opacity: 0.9;\n          margin-bottom: 1rem;\n        }\n\n        .story-progress-pills {\n          display: flex;\n          justify-content: center;\n          gap: 1rem;\n        }\n\n        .progress-pill {\n          background: rgba(255, 255, 255, 0.2);\n          padding: 0.5rem 1rem;\n          border-radius: 50px;\n          font-size: 0.85rem;\n          font-weight: 600;\n        }\n\n        /* Story Content */\n        .story-content {\n          padding: 2rem 1.5rem;\n        }\n\n        .story-text {\n          font-size: 1.125rem;\n          line-height: 1.8;\n          color: ${k.text.primary};\n          text-align: center;\n          margin-bottom: 2rem;\n          font-family: Georgia, serif;\n        }\n\n        .story-blank {\n          display: inline-block;\n          background: ${k.isDark?`${k.brand.blue}22`:"#f0f9ff"};\n          border: 2px solid ${k.brand.blue};\n          border-radius: 8px;\n          padding: 0.25rem 0.75rem;\n          margin: 0 0.25rem;\n          color: ${k.brand.blue};\n          font-weight: 600;\n          min-width: 80px;\n          text-align: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .story-blank.filled {\n          background: ${k.isDark?`${k.brand.green}22`:"#dcfce7"};\n          border-color: ${k.brand.green};\n          color: ${k.brand.green};\n        }\n\n        .story-blank.active {\n          background: ${k.isDark?`${k.brand.orange}22`:"#fef3c7"};\n          border-color: ${k.brand.orange};\n          color: ${k.brand.orange};\n          transform: scale(1.05);\n        }\n\n        /* Options Section */\n        .options-section {\n          margin-bottom: 2rem;\n        }\n\n        .options-title {\n          font-size: 1rem;\n          font-weight: 600;\n          color: ${k.text.primary};\n          text-align: center;\n          margin-bottom: 1rem;\n        }\n\n        .options-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 0.75rem;\n        }\n\n        @media (min-width: 640px) {\n          .options-grid {\n            grid-template-columns: repeat(4, 1fr);\n          }\n        }\n\n        .option-button {\n          background: ${k.bg.tertiary};\n          border: 2px solid ${k.border.primary};\n          border-radius: 12px;\n          padding: 1rem 0.75rem;\n          text-align: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 500;\n          color: ${k.text.primary};\n          min-height: 64px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          user-select: none;\n        }\n\n        .option-button:active {\n          transform: scale(0.95);\n        }\n\n        .option-button.selected {\n          background: linear-gradient(135deg, ${k.brand.blue}, #1e40af);\n          border-color: ${k.brand.blue};\n          color: white;\n          transform: scale(1.05);\n        }\n\n        /* Complete Button */\n        .complete-section {\n          padding: 0 1.5rem 2rem;\n        }\n\n        .complete-button {\n          width: 100%;\n          padding: 1rem;\n          border: none;\n          border-radius: 12px;\n          font-size: 1.125rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .complete-button.ready {\n          background: linear-gradient(135deg, ${k.brand.green}, #047857);\n          color: white;\n        }\n\n        .complete-button.disabled {\n          background: ${k.bg.tertiary};\n          color: ${k.text.muted};\n          cursor: not-allowed;\n        }\n\n        .complete-button.ready:active {\n          transform: scale(0.98);\n        }\n\n        /* Modal */\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 1rem;\n        }\n\n        .modal {\n          background: ${k.bg.secondary};\n          border: 1px solid ${k.border.primary};\n          border-radius: 1.5rem;\n          padding: 2rem;\n          max-width: 90vw;\n          width: 100%;\n          max-width: 500px;\n          max-height: 80vh;\n          overflow-y: auto;\n          position: relative;\n          text-align: center;\n          box-shadow: ${k.shadow.lg};\n          color: ${k.text.primary};\n        }\n\n        .modal-emoji {\n          font-size: 4rem;\n          margin-bottom: 1rem;\n        }\n\n        .modal-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${k.text.primary};\n          margin-bottom: 0.5rem;\n        }\n\n        .modal-message {\n          color: ${k.text.secondary};\n          margin-bottom: 1.5rem;\n        }\n\n        .modal-score {\n          background: linear-gradient(135deg, ${k.brand.green}, #15803d);\n          color: white;\n          margin: 0 0 1.5rem;\n          border-radius: 12px;\n          padding: 1.5rem;\n          text-align: center;\n        }\n\n        .score-big {\n          font-size: 3rem;\n          font-weight: 600;\n          margin-bottom: 0.5rem;\n        }\n\n        .modal-buttons {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .modal-button {\n          padding: 1rem;\n          border: none;\n          border-radius: 12px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .modal-button.primary {\n          background: linear-gradient(135deg, ${k.brand.red}, #B71C1C);\n          color: white;\n        }\n\n        .modal-button.secondary {\n          background: ${k.bg.tertiary};\n          color: ${k.text.secondary};\n          border: 1px solid ${k.border.primary};\n        }\n\n        .modal-button:active {\n          transform: scale(0.98);\n        }\n\n        /* Perfect Animation */\n        @keyframes perfectPop {\n          0% { transform: translate(-50%, -50%) scale(0) rotate(-12deg); opacity: 0; }\n          20% { transform: translate(-50%, -50%) scale(1.4) rotate(-12deg); opacity: 1; }\n          40% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          70% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          100% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 0; }\n        }\n      `}),(0,o.jsxs)("div",{className:"story-container",children:[(0,o.jsxs)("div",{className:"stories-header",children:[(0,o.jsxs)("div",{className:"progress-overview",children:[(0,o.jsx)("h2",{className:"progress-title",children:"\ud83d\udcd6 Suas Hist\xf3rias"}),(0,o.jsx)("p",{className:"progress-subtitle",children:"Complete hist\xf3rias interativas em ingl\xeas"}),(0,o.jsxs)("div",{className:"progress-stats",children:[(0,o.jsxs)("div",{className:"stat-pill",children:[p.size,"/",H.length," Completas"]}),(0,o.jsxs)("div",{className:"stat-pill",children:[Math.round(p.size/H.length*100),"% Progresso"]})]}),(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:p.size/H.length*100+"%"}})})]}),(0,o.jsx)("div",{className:"stories-grid",children:H.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>{s(t),c({}),x(0),d(!1),f(null)},className:"story-tab "+(t===i?"active":p.has(e.id)?"completed":""),children:[(0,o.jsx)("span",{className:"story-icon",children:e.icon}),(0,o.jsx)("div",{className:"story-tab-title",children:e.title}),(0,o.jsx)("div",{className:"story-tab-category",children:e.category}),p.has(e.id)&&(0,o.jsx)("div",{style:{fontSize:"0.7rem",marginTop:"0.25rem"},children:"\u2705"})]},e.id))})]}),(0,o.jsxs)("div",{className:"story-card",children:[(0,o.jsxs)("div",{className:"story-header",children:[(0,o.jsx)("h1",{className:"story-title",children:_.title}),(0,o.jsxs)("p",{className:"story-subtitle",children:[_.category," \u2022 ",_.difficulty]}),(0,o.jsx)("div",{className:"story-progress-pills",children:(0,o.jsxs)("div",{className:"progress-pill",children:[T,"/",C," Preenchidas"]})})]}),(0,o.jsxs)("div",{className:"story-content",children:[(0,o.jsx)("div",{className:"story-text",children:_.story.map((e,t)=>{if("text"===e.type)return(0,o.jsx)("span",{children:e.content},t);{var n;const r=(null===(n=I())||void 0===n?void 0:n.id)===e.id,i=void 0!==a[e.id]?e.options[a[e.id]]:"____";return(0,o.jsx)("span",{className:`story-blank ${void 0!==a[e.id]?"filled":""} ${r?"active":""}`,onClick:()=>(e=>{x(e)})(E.findIndex(t=>t.id===e.id)),children:i},t)}})}),I()&&(0,o.jsxs)("div",{className:"options-section",children:[(0,o.jsx)("h3",{className:"options-title",children:"Escolha a melhor op\xe7\xe3o:"}),(0,o.jsx)("div",{className:"options-grid",children:I().options.map((e,t)=>(0,o.jsx)("button",{onClick:()=>((e,t)=>{const n={...a,[e]:t};c(n),w<E.length-1&&!a[e]&&setTimeout(()=>{x(w+1)},500)})(I().id,t),className:"option-button "+(a[I().id]===t?"selected":""),children:e},t))})]}),(0,o.jsx)("div",{className:"complete-section",children:(0,o.jsx)("button",{onClick:async()=>{console.log("\ud83c\udfaf Starting story completion check...");let e=0;_.story.filter(e=>"blank"===e.type).forEach(t=>{a[t.id]===t.correct&&e++});const n=Math.round(e/C*100);try{console.log("\ud83c\udf1f Awarding XP for story completion...");const r=await j(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:C,perfectScore:100===n}),i={completed:!0,score:n,xpEarned:r.xpEarned,correctAnswers:e,totalQuestions:C,completedAt:new Date,storyId:_.id,storyTitle:_.title,storyCategory:_.category,difficulty:_.difficulty,userAnswers:a},s=`story-${_.id}`,o=await y(t.username,s,i);o&&o.success&&(console.log("\u2705 Story progress saved successfully!"),m(e=>new Set([...e,_.id]))),f({score:n,correctCount:e,totalBlanks:C,xpEarned:r.xpEarned,leveledUp:r.leveledUp,newLevel:r.level})}catch(r){console.error("\u274c Error in story completion:",r),f({score:n,correctCount:e,totalBlanks:C,xpEarned:0})}d(!0)},disabled:!N,className:"complete-button "+(N?"ready":"disabled"),children:N?"\ud83d\udcd6 Completar Hist\xf3ria!":`Preencha mais ${C-T} espa\xe7os`})})]})]}),u&&100===(null===h||void 0===h?void 0:h.score)&&(0,o.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",fontWeight:"900",color:"#fbbf24",textShadow:"0 4px 8px rgba(0, 0, 0, 0.5)",zIndex:1001,pointerEvents:"none",animation:"perfectPop 3s ease-out forwards"},children:"\u2605 PERFEITO! \u2605"}),u&&h&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsx)("div",{className:"modal",children:p.size===H.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"modal-emoji",children:"\ud83c\udfc6"}),(0,o.jsx)("h2",{className:"modal-title",children:"Parab\xe9ns! Voc\xea completou todas as hist\xf3rias!"}),(0,o.jsxs)("p",{className:"modal-message",children:[H.length," hist\xf3rias conquistadas! Voc\xea \xe9 um mestre da narrativa! \ud83c\udf1f"]}),(0,o.jsxs)("div",{style:{background:`linear-gradient(135deg, ${k.brand.red}, #B71C1C)`,color:"white",margin:"0 0 1.5rem",borderRadius:"12px",padding:"1.5rem"},children:[(0,o.jsx)("div",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"\ud83c\udf89 TODAS AS HIST\xd3RIAS COMPLETAS! \ud83c\udf89"}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:["Total: ",p.size,"/",H.length," hist\xf3rias"]})]}),(0,o.jsxs)("div",{className:"modal-buttons",children:[(0,o.jsx)("button",{onClick:n,className:"modal-button primary",children:"\ud83c\udfe0 Voltar para o Portal"}),(0,o.jsx)("button",{onClick:()=>{s(0),A()},className:"modal-button secondary",children:"\ud83d\udcd6 Ler Hist\xf3rias Novamente"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(()=>{const e=(t=h.score)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea dominou esta hist\xf3ria!"}:t>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3tima narrativa!"}:t>=70?{emoji:"\ud83d\udc4d",title:"Bom Trabalho!",message:"Bom trabalho com o contexto!"}:t>=60?{emoji:"\ud83d\udcaa",title:"Continue!",message:"Voc\xea est\xe1 melhorando!"}:{emoji:"\ud83e\udd17",title:"Tente Novamente!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!"};var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"modal-emoji",children:e.emoji}),(0,o.jsx)("h2",{className:"modal-title",children:e.title}),(0,o.jsx)("p",{className:"modal-message",children:e.message})]})})(),(0,o.jsxs)("div",{className:"modal-score",children:[(0,o.jsxs)("div",{className:"score-big",children:[h.score,"%"]}),(0,o.jsxs)("div",{className:"score-details",children:[h.correctCount,"/",h.totalBlanks," corretas",(0,o.jsx)("br",{}),"+",h.xpEarned," XP ganho!",h.leveledUp&&(0,o.jsxs)("div",{style:{marginTop:"0.5rem",fontWeight:"600"},children:["\ud83c\udf89 N\xedvel ",h.newLevel,"!"]})]})]}),(0,o.jsxs)("div",{className:"modal-buttons",children:[h.score<100&&(0,o.jsx)("button",{onClick:A,className:"modal-button secondary",children:"\ud83d\udd04 Tentar Novamente"}),i<H.length-1&&(0,o.jsx)("button",{onClick:()=>{i<H.length-1&&(s(i+1),c({}),x(0),d(!1),f(null))},className:"modal-button primary",children:"\u27a1\ufe0f Pr\xf3xima Hist\xf3ria"}),(0,o.jsx)("button",{onClick:()=>d(!1),className:"modal-button secondary",children:"\ud83d\udcd6 Continuar Esta Hist\xf3ria"})]})]})})})]})]})},G=R,K=e=>{let{user:t,onBack:n}=e;const[i,s]=(0,r.useState)(0),[a,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(new Set),[p,m]=(0,r.useState)(!1),[b,v]=(0,r.useState)(null),[w,x]=(0,r.useState)(!0),[k,S]=(0,r.useState)([]),[_,E]=(0,r.useState)([]),C=l(),T=G[i];(0,r.useEffect)(()=>{A()},[]),(0,r.useEffect)(()=>{T&&I()},[i]);const N=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},I=()=>{if(T){const e=T.words.map(e=>{let[t]=e;return t}),t=T.words.map(e=>{let[,t]=e;return t});S(N(e)),E(N(t)),console.log("\ud83c\udfb2 Words shuffled for extra challenge!")}},A=async()=>{try{var e;const n=await g(t.username);if(n.success&&null!==(e=n.student)&&void 0!==e&&e.progress){const e=Object.keys(n.student.progress).filter(e=>e.startsWith("wordmatch-")&&n.student.progress[e].completed).map(e=>e.replace("wordmatch-",""));f(new Set(e))}}catch(n){console.error("Error loading progress:",n)}x(!1)},P=(e,t)=>{const n=`${e}-${t}`;if(a.some(t=>t.includes(e)))return;if(!u||u.key===n)return void d((null===u||void 0===u?void 0:u.key)===n?null:{word:e,lang:t,key:n});const r=T.words.find(t=>{let[n,r]=t;return u.word===n&&e===r||u.word===r&&e===n});if(r){const e=[...a,r];c(e),d(null),e.length===T.words.length?setTimeout(()=>L(e.length),800):setTimeout(()=>I(),500)}else d(null),setTimeout(()=>I(),300)},L=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.length;const n=Math.round(e/T.words.length*100);try{const r=await j(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:T.words.length,perfectScore:100===n});await y(t.username,`wordmatch-${T.id}`,{completed:!0,score:n,xpEarned:r.xpEarned,correctMatches:e,totalPairs:T.words.length,completedAt:new Date}),f(e=>new Set([...e,T.id])),v({score:n,matches:e,total:T.words.length,xp:r.xpEarned,levelUp:r.leveledUp,newLevel:r.level}),m(!0)}catch(r){console.error("Error completing round:",r)}},R=()=>{c([]),d(null),m(!1),v(null),I()};return w?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:C.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 rounded-full animate-spin mx-auto mb-4",style:{borderColor:C.border.primary,borderTopColor:C.brand.orange}}),(0,o.jsx)("p",{style:{color:C.text.secondary},className:"font-medium",children:"Carregando palavras..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        .word-match-container {\n          min-height: 100vh;\n          background: ${C.bg.gradient};\n          padding: 1rem;\n          color: ${C.text.primary};\n        }\n\n        .content-container {\n          max-width: 800px;\n          margin: 0 auto;\n        }\n\n        .round-selector {\n          background: ${C.bg.secondary};\n          border: 1px solid ${C.border.primary};\n          border-radius: 1rem;\n          padding: 1.5rem;\n          margin-bottom: 1.5rem;\n          box-shadow: ${C.shadow.md};\n        }\n\n        .round-grid {\n          display: flex;\n          gap: 0.75rem;\n          overflow-x: auto;\n          padding-bottom: 0.5rem;\n        }\n\n        .round-tab {\n          flex-shrink: 0;\n          background: ${C.brand.orange};\n          color: white;\n          border: none;\n          border-radius: 0.75rem;\n          padding: 0.75rem 1rem;\n          min-width: 100px;\n          text-align: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .round-tab.active {\n          background: #ea580c;\n          transform: scale(1.05);\n          box-shadow: ${C.shadow.md};\n        }\n\n        .round-tab.completed {\n          background: ${C.brand.green};\n        }\n\n        .round-tab:hover {\n          filter: brightness(0.9);\n        }\n\n        .game-card {\n          background: ${C.bg.secondary};\n          border: 1px solid ${C.border.primary};\n          border-radius: 1rem;\n          padding: 2rem;\n          box-shadow: ${C.shadow.md};\n          margin-bottom: 1.5rem;\n        }\n\n        .game-header {\n          text-align: center;\n          margin-bottom: 2rem;\n        }\n\n        .game-title {\n          color: ${C.text.primary};\n        }\n\n        .game-subtitle {\n          color: ${C.text.secondary};\n        }\n\n        .progress-bar {\n          background: ${C.bg.tertiary};\n          height: 8px;\n          border-radius: 4px;\n          overflow: hidden;\n          margin: 1rem 0;\n        }\n\n        .progress-fill {\n          background: ${C.brand.orange};\n          height: 100%;\n          transition: width 0.5s ease;\n        }\n\n        .progress-text {\n          color: ${C.text.secondary};\n        }\n\n        .words-grid {\n          display: grid;\n          grid-template-columns: 1fr 1fr;\n          gap: 2rem;\n          margin-bottom: 2rem;\n        }\n\n        .words-column {\n          background: ${C.bg.tertiary};\n          border: 1px solid ${C.border.primary};\n          border-radius: 0.75rem;\n          padding: 1rem;\n        }\n\n        .column-header {\n          text-align: center;\n          font-weight: 600;\n          color: ${C.text.primary};\n          margin-bottom: 1rem;\n          padding: 0.5rem;\n          background: ${C.bg.secondary};\n          border: 1px solid ${C.border.primary};\n          border-radius: 0.5rem;\n        }\n\n        .word-list {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n\n        .word-button {\n          background: ${C.bg.secondary};\n          border: 2px solid ${C.border.primary};\n          border-radius: 0.5rem;\n          padding: 0.75rem;\n          text-align: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 500;\n          color: ${C.text.primary};\n        }\n\n        .word-button:hover:not(:disabled) {\n          border-color: ${C.brand.orange};\n          transform: translateY(-1px);\n          box-shadow: ${C.shadow.sm};\n        }\n\n        .word-button.selected {\n          background: ${C.brand.orange};\n          border-color: ${C.brand.orange};\n          color: white;\n          transform: scale(1.02);\n          box-shadow: ${C.shadow.md};\n        }\n\n        .word-button.matched {\n          background: ${C.brand.green};\n          border-color: ${C.brand.green};\n          color: white;\n          cursor: default;\n          opacity: 0.8;\n        }\n\n        .word-button:disabled {\n          cursor: not-allowed;\n        }\n\n        .instructions {\n          background: ${C.isDark?"rgba(59, 130, 246, 0.1)":"#dbeafe"};\n          border: 1px solid ${C.isDark?"rgba(59, 130, 246, 0.3)":"#93c5fd"};\n          border-radius: 0.5rem;\n          padding: 1rem;\n          text-align: center;\n          color: ${C.isDark?"#93c5fd":"#1e40af"};\n          font-size: 0.9rem;\n        }\n\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 1rem;\n          backdrop-filter: blur(4px);\n        }\n\n        .modal {\n          background: ${C.bg.secondary};\n          border: 1px solid ${C.border.primary};\n          border-radius: 1rem;\n          padding: 2rem;\n          max-width: 400px;\n          width: 100%;\n          text-align: center;\n          box-shadow: ${C.shadow.lg};\n        }\n\n        .modal-title {\n          color: ${C.text.primary};\n        }\n\n        .modal-button {\n          background: ${C.brand.orange};\n          color: white;\n          border: none;\n          border-radius: 0.5rem;\n          padding: 0.75rem 1.5rem;\n          margin: 0.25rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 500;\n        }\n\n        .modal-button:hover {\n          filter: brightness(0.9);\n          transform: translateY(-1px);\n        }\n\n        .modal-button.secondary {\n          background: ${C.bg.tertiary};\n          color: ${C.text.primary};\n          border: 1px solid ${C.border.primary};\n        }\n\n        .modal-button.secondary:hover {\n          background: ${C.border.secondary};\n        }\n\n        .score-card {\n          background: ${C.isDark?"rgba(251, 146, 60, 0.1)":"#fff7ed"};\n          border: 1px solid ${C.isDark?"rgba(251, 146, 60, 0.3)":"#fed7aa"};\n          border-radius: 0.75rem;\n          padding: 1rem;\n          margin: 1rem 0;\n        }\n\n        .score-number {\n          color: ${C.brand.orange};\n        }\n\n        .score-details {\n          color: ${C.isDark?"#fdba74":"#9a3412"};\n        }\n\n        /* Perfect Animation */\n        @keyframes perfectPop {\n          0% { transform: translate(-50%, -50%) scale(0) rotate(-12deg); opacity: 0; }\n          20% { transform: translate(-50%, -50%) scale(1.4) rotate(-12deg); opacity: 1; }\n          40% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          70% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          100% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 0; }\n        }\n\n        @media (max-width: 640px) {\n          .word-match-container {\n            padding: 0.5rem;\n          }\n\n          .words-grid {\n            gap: 1rem;\n          }\n\n          .game-card {\n            padding: 1rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"word-match-container",children:[(0,o.jsxs)("div",{className:"content-container",children:[(0,o.jsxs)("div",{className:"round-selector",children:[(0,o.jsx)("h2",{className:"text-xl font-bold text-center mb-4 game-title",children:"\ud83c\udfaf Combine Palavras"}),(0,o.jsx)("div",{className:"round-grid",children:G.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>{s(t),R()},className:`round-tab ${t===i?"active":""} ${h.has(e.id)?"completed":""}`,children:[(0,o.jsx)("div",{className:"text-lg",children:e.icon}),(0,o.jsx)("div",{className:"text-sm font-medium",children:e.title}),h.has(e.id)&&(0,o.jsx)("div",{className:"text-xs",children:"\u2705"})]},e.id))})]}),(0,o.jsxs)("div",{className:"game-card",children:[(0,o.jsxs)("div",{className:"game-header",children:[(0,o.jsxs)("h1",{className:"text-2xl font-bold mb-2 game-title",children:[T.icon," ",T.title]}),(0,o.jsxs)("p",{className:"game-subtitle mb-4",children:["Combine ",T.words.length," pares de palavras"]}),(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:a.length/T.words.length*100+"%"}})}),(0,o.jsxs)("p",{className:"text-sm progress-text",children:[a.length," de ",T.words.length," combinados"]})]}),(0,o.jsxs)("div",{className:"words-grid",children:[(0,o.jsxs)("div",{className:"words-column",children:[(0,o.jsx)("div",{className:"column-header",children:"\ud83c\uddfa\ud83c\uddf8 English"}),(0,o.jsx)("div",{className:"word-list",children:k.map(e=>{const t=a.some(t=>t.includes(e)),n=(null===u||void 0===u?void 0:u.word)===e;return(0,o.jsx)("button",{onClick:()=>P(e,"en"),disabled:t,className:"word-button "+(t?"matched":n?"selected":""),children:e},e)})})]}),(0,o.jsxs)("div",{className:"words-column",children:[(0,o.jsx)("div",{className:"column-header",children:"\ud83c\udde7\ud83c\uddf7 Portugu\xeas"}),(0,o.jsx)("div",{className:"word-list",children:_.map(e=>{const t=a.some(t=>t.includes(e)),n=(null===u||void 0===u?void 0:u.word)===e;return(0,o.jsx)("button",{onClick:()=>P(e,"pt"),disabled:t,className:"word-button "+(t?"matched":n?"selected":""),children:e},e)})})]})]}),(0,o.jsxs)("div",{className:"instructions",children:["Clique em uma palavra em ingl\xeas e depois em sua tradu\xe7\xe3o em portugu\xeas!",(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"As palavras mudam de posi\xe7\xe3o ap\xf3s cada tentativa para mais desafio! \ud83c\udfaf"})]})]}),(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{onClick:n,className:"modal-button secondary",children:"\u2190 Voltar ao Hub"})})]}),p&&b&&100===b.score&&(0,o.jsx)("div",{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:"3rem",fontWeight:"900",color:"#fbbf24",textShadow:"0 4px 8px rgba(0, 0, 0, 0.3)",zIndex:1001,pointerEvents:"none",animation:"perfectPop 3s ease-out forwards"},children:"\u2605 PERFEITO! \u2605"}),p&&b&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsx)("div",{className:"modal",children:h.size===G.length?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2 modal-title",children:"Parab\xe9ns! Voc\xea completou todos os exerc\xedcios!"}),(0,o.jsxs)("p",{className:"mb-4",style:{color:C.text.secondary},children:[G.length," rounds conquistados! Voc\xea \xe9 um mestre das palavras! \ud83c\udf1f"]}),(0,o.jsxs)("div",{className:"score-card",children:[(0,o.jsx)("div",{className:"text-lg font-bold",children:"\ud83c\udf89 MISS\xc3O COMPLETA! \ud83c\udf89"}),(0,o.jsxs)("div",{className:"text-sm mt-2 score-details",children:["Total: ",h.size,"/",G.length," rounds"]})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("button",{onClick:n,className:"modal-button",children:"\ud83c\udfe0 Voltar para o Portal"}),(0,o.jsx)("button",{onClick:()=>{s(0),R()},className:"modal-button secondary",children:"\ud83d\udd04 Jogar de Novo"})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"text-4xl mb-4",children:100===b.score?"\ud83c\udfc6":b.score>=80?"\ud83c\udf89":"\ud83d\udc4d"}),(0,o.jsx)("h2",{className:"text-xl font-bold mb-2 modal-title",children:100===b.score?"Perfeito!":b.score>=80?"Excelente!":"Bom trabalho!"}),(0,o.jsxs)("div",{className:"score-card",children:[(0,o.jsxs)("div",{className:"text-2xl font-bold score-number",children:[b.score,"%"]}),(0,o.jsxs)("div",{className:"text-sm score-details",children:[b.matches,"/",b.total," palavras combinadas",(0,o.jsx)("br",{}),"+",b.xp," XP ganho!",b.levelUp&&(0,o.jsxs)("div",{className:"font-bold mt-1",children:["\ud83c\udf89 N\xedvel ",b.newLevel,"!"]})]})]}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[b.score<100&&(0,o.jsx)("button",{onClick:R,className:"modal-button secondary",children:"\ud83d\udd04 Tentar Novamente"}),i<G.length-1&&(0,o.jsx)("button",{onClick:()=>{i<G.length-1&&(s(i+1),R())},className:"modal-button",children:"\u27a1\ufe0f Pr\xf3ximo Round"}),(0,o.jsx)("button",{onClick:()=>m(!1),className:"modal-button secondary",children:"\u2728 Continuar"})]})]})})})]})]})},Q=e=>{let{user:t,onBack:n}=e;const[i,s]=(0,r.useState)(null),[a,c]=(0,r.useState)(0),[u,d]=(0,r.useState)({}),[h,f]=(0,r.useState)(0),[p,m]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[w,x]=(0,r.useState)(null),[k,S]=(0,r.useState)(new Set),[_,E]=(0,r.useState)(!0),[C,T]=(0,r.useState)(""),N=(0,r.useRef)(null),I=l(),A=null===i||void 0===i?void 0:i.questions[a];(0,r.useEffect)(()=>{P()},[]),(0,r.useEffect)(()=>(p&&h>0?N.current=setTimeout(()=>{f(h-1)},1e3):p&&0===h&&M(),()=>{N.current&&clearTimeout(N.current)}),[h,p]);const P=async()=>{try{var e;const n=await g(t.username);if(n.success&&null!==(e=n.student)&&void 0!==e&&e.progress){const e=Object.keys(n.student.progress).filter(e=>e.startsWith("quiz-")&&n.student.progress[e].completed).map(e=>e.replace("quiz-",""));S(new Set(e))}}catch(n){console.error("Error loading progress:",n)}E(!1)},L=e=>{s(e),c(0),d({}),f(e.timeLimit),m(!0),v(!1),x(null),T("")},R=e=>{if(!p||!A)return;const t=A.id;d(n=>{const r={...n,[t]:e};return setTimeout(()=>{z(r,t)},500),r})},D=()=>{C.trim()&&(R(C.trim()),T(""))},M=()=>{const e=A.id;d(t=>{const n={...t,[e]:null};return setTimeout(()=>{z(n,e)},100),n})},z=(e,t)=>{a<i.questions.length-1?(c(a+1),f(i.timeLimit),T("")):F(e)},F=async e=>{m(!1);let n=0,r=0;const s=i.questions.reduce((e,t)=>e+t.points,0),o=i.questions.map((t,i)=>{const s=e[t.id];let o=!1,a="",l="";if(null===s||void 0===s||""===s)o=!1,a="N\xe3o respondeu","multiple-choice"===t.type?l=t.options[t.correct]:"true-false"===t.type?l=t.correct?"Verdadeiro":"Falso":"fill-blank"===t.type&&(l=t.answer);else if("multiple-choice"===t.type){const e=parseInt(s),n=parseInt(t.correct);o=e===n,a=t.options[e]||`Resposta inv\xe1lida (${s})`,l=t.options[n]}else if("true-false"===t.type){const e=!0===s||"true"===s,n=!0===t.correct;o=e===n,a=e?"Verdadeiro":"Falso",l=n?"Verdadeiro":"Falso"}else if("fill-blank"===t.type){o=String(s).trim().toLowerCase()===String(t.answer).trim().toLowerCase(),a=String(s).trim(),l=String(t.answer).trim()}return o&&(n++,r+=t.points),{question:t.question,userAnswer:a,correctAnswer:l,isCorrect:o,points:o?t.points:0,type:t.type}}),a=Math.round(n/i.questions.length*100);try{const e=await j(t.username,"LESSON_COMPLETE",{correctAnswers:n,totalQuestions:i.questions.length,perfectScore:100===a,difficulty:i.difficulty});await y(t.username,`quiz-${i.id}`,{completed:!0,score:a,xpEarned:e.xpEarned,correctAnswers:n,totalQuestions:i.questions.length,totalPoints:r,maxPoints:s,difficulty:i.difficulty,completedAt:new Date,quizTitle:i.title}),S(e=>new Set([...e,i.id])),x({percentage:a,correctCount:n,totalQuestions:i.questions.length,totalPoints:r,maxPoints:s,xpEarned:e.xpEarned,levelUp:e.leveledUp,newLevel:e.level,questionResults:o})}catch(l){console.error("Error saving quiz results:",l),x({percentage:a,correctCount:n,totalQuestions:i.questions.length,totalPoints:r,maxPoints:s,xpEarned:0,questionResults:o})}v(!0)},$=()=>{s(null),m(!1),v(!1),c(0),d({}),T("")};return _?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:I.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 rounded-full animate-spin mx-auto mb-4",style:{borderColor:I.border.primary,borderTopColor:"#10b981"}}),(0,o.jsx)("p",{style:{color:I.text.secondary},className:"font-medium",children:"Carregando quizzes..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        .quiz-container {\n          max-width: 800px;\n          margin: 0 auto;\n          padding: 1rem;\n          color: ${I.text.primary};\n        }\n\n        .quiz-selector {\n          background: ${I.bg.secondary};\n          border: 1px solid ${I.border.primary};\n          border-radius: 1rem;\n          padding: 2rem;\n          margin-bottom: 1.5rem;\n          box-shadow: ${I.shadow.md};\n        }\n\n        .quiz-grid {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 1rem;\n        }\n\n        @media (min-width: 768px) {\n          .quiz-grid {\n            grid-template-columns: repeat(2, 1fr);\n          }\n        }\n\n        .quiz-card {\n          background: ${I.bg.tertiary};\n          border: 2px solid ${I.border.primary};\n          border-radius: 1rem;\n          padding: 1.5rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          position: relative;\n        }\n\n        .quiz-card:hover {\n          border-color: #10b981;\n          transform: translateY(-2px);\n          box-shadow: ${I.shadow.md};\n        }\n\n        .quiz-card.completed {\n          border-color: #10b981;\n          background: ${I.isDark?"rgba(16, 185, 129, 0.1)":"#ecfdf5"};\n        }\n\n        .quiz-game {\n          background: ${I.bg.secondary};\n          border: 1px solid ${I.border.primary};\n          border-radius: 1rem;\n          padding: 2rem;\n          box-shadow: ${I.shadow.md};\n          margin-bottom: 1.5rem;\n        }\n\n        .timer-bar {\n          background: ${I.bg.tertiary};\n          height: 8px;\n          border-radius: 4px;\n          overflow: hidden;\n          margin-bottom: 2rem;\n        }\n\n        .timer-fill {\n          background: linear-gradient(90deg, #10b981, #059669);\n          height: 100%;\n          transition: width 1s linear;\n        }\n\n        .timer-fill.danger {\n          background: linear-gradient(90deg, #ef4444, #dc2626);\n        }\n\n        .question-card {\n          background: ${I.bg.tertiary};\n          border: 1px solid ${I.border.primary};\n          border-radius: 1rem;\n          padding: 2rem;\n          text-align: center;\n          margin-bottom: 2rem;\n        }\n\n        .option-button {\n          width: 100%;\n          padding: 1rem;\n          margin: 0.5rem 0;\n          background: ${I.bg.secondary};\n          border: 2px solid ${I.border.primary};\n          border-radius: 0.75rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          text-align: left;\n          color: ${I.text.primary};\n        }\n\n        .option-button:hover {\n          border-color: #10b981;\n          background: ${I.border.secondary};\n        }\n\n        .option-button:active {\n          transform: scale(0.98);\n        }\n\n        .true-false-buttons {\n          display: flex;\n          gap: 1rem;\n          justify-content: center;\n          margin-top: 1.5rem;\n        }\n\n        .tf-button {\n          padding: 1rem 2rem;\n          border: none;\n          border-radius: 0.75rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: 1rem;\n        }\n\n        .tf-true {\n          background: #10b981;\n          color: white;\n        }\n\n        .tf-false {\n          background: #ef4444;\n          color: white;\n        }\n\n        .tf-button:hover {\n          transform: scale(1.05);\n        }\n\n        .tf-button:active {\n          transform: scale(0.95);\n        }\n\n        .fill-input {\n          width: 200px;\n          padding: 1rem;\n          border: 2px solid ${I.border.primary};\n          border-radius: 0.75rem;\n          background: ${I.bg.secondary};\n          color: ${I.text.primary};\n          text-align: center;\n          font-size: 1.1rem;\n          margin: 0 1rem;\n        }\n\n        .fill-input:focus {\n          outline: none;\n          border-color: #10b981;\n        }\n\n        .submit-button {\n          background: #10b981;\n          color: white;\n          border: none;\n          border-radius: 0.75rem;\n          padding: 1rem 2rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .submit-button:hover {\n          background: #059669;\n          transform: translateY(-1px);\n        }\n\n        .submit-button:disabled {\n          background: ${I.border.primary};\n          cursor: not-allowed;\n          transform: none;\n        }\n\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 1rem;\n          backdrop-filter: blur(4px);\n        }\n\n        .modal {\n          background: ${I.bg.secondary};\n          border: 1px solid ${I.border.primary};\n          border-radius: 1rem;\n          padding: 2rem;\n          max-width: 600px;\n          width: 100%;\n          max-height: 85vh;\n          overflow-y: auto;\n          text-align: center;\n          box-shadow: ${I.shadow.lg};\n        }\n\n        .modal-button {\n          background: #10b981;\n          color: white;\n          border: none;\n          border-radius: 0.5rem;\n          padding: 0.75rem 1.5rem;\n          margin: 0.25rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 500;\n        }\n\n        .modal-button:hover {\n          background: #059669;\n        }\n\n        .modal-button.secondary {\n          background: ${I.bg.tertiary};\n          color: ${I.text.primary};\n          border: 1px solid ${I.border.primary};\n        }\n\n        .progress-indicator {\n          text-align: center;\n          margin-bottom: 1rem;\n          color: ${I.text.secondary};\n        }\n\n        .quiz-stats {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 1rem;\n          font-size: 0.9rem;\n          color: ${I.text.secondary};\n        }\n\n        /* Review Modal Styles */\n        .review-container {\n          max-height: 250px;\n          overflow-y: auto;\n          margin: 1.5rem 0;\n        }\n\n        .review-question {\n          border-radius: 0.75rem;\n          padding: 1rem;\n          margin-bottom: 0.75rem;\n          text-align: left;\n        }\n\n        .review-question.correct {\n          border: 2px solid #10b981;\n          background: ${I.isDark?"rgba(16, 185, 129, 0.1)":"#ecfdf5"};\n        }\n\n        .review-question.incorrect {\n          border: 2px solid #ef4444;\n          background: ${I.isDark?"rgba(239, 68, 68, 0.1)":"#fef2f2"};\n        }\n\n        .review-header {\n          display: flex;\n          align-items: flex-start;\n          gap: 0.5rem;\n          margin-bottom: 0.75rem;\n        }\n\n        .review-icon {\n          font-size: 1.25rem;\n          margin-top: 0.125rem;\n        }\n\n        .review-question-text {\n          font-weight: 600;\n          font-size: 0.9rem;\n          color: ${I.text.primary};\n          line-height: 1.4;\n        }\n\n        .review-answers {\n          font-size: 0.85rem;\n          margin-top: 0.5rem;\n        }\n\n        .review-user-answer {\n          color: ${I.text.secondary};\n          margin-bottom: 0.25rem;\n        }\n\n        .review-correct-answer {\n          color: #10b981;\n          font-weight: 500;\n        }\n\n        .review-points {\n          display: inline-block;\n          background: #10b981;\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.5rem;\n          border-radius: 0.375rem;\n          margin-top: 0.5rem;\n        }\n\n        .review-points.zero {\n          background: #ef4444;\n        }\n\n        @media (max-width: 640px) {\n          .quiz-container {\n            padding: 0.5rem;\n          }\n          \n          .quiz-game {\n            padding: 1rem;\n          }\n          \n          .true-false-buttons {\n            flex-direction: column;\n          }\n\n          .modal {\n            margin: 0.5rem;\n            padding: 1.5rem;\n            max-height: 90vh;\n          }\n\n          .review-container {\n            max-height: 200px;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"quiz-container",children:[!i&&(0,o.jsxs)("div",{className:"quiz-selector",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"\ud83c\udfaf Quiz R\xe1pido"}),(0,o.jsx)("p",{style:{color:I.text.secondary},children:"Teste seus conhecimentos com perguntas cronometradas!"})]}),(0,o.jsx)("div",{className:"quiz-grid",children:O.map(e=>(0,o.jsxs)("div",{onClick:()=>L(e),className:"quiz-card "+(k.has(e.id)?"completed":""),children:[(0,o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,o.jsx)("span",{className:"text-2xl mr-3",children:e.icon}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"font-bold",style:{color:I.text.primary},children:[e.title,k.has(e.id)&&" \u2705"]}),(0,o.jsx)("p",{className:"text-sm",style:{color:I.text.secondary},children:e.description})]})]}),(0,o.jsxs)("div",{className:"quiz-stats",children:[(0,o.jsxs)("span",{children:[e.questions.length," perguntas"]}),(0,o.jsxs)("span",{children:[e.timeLimit,"s por pergunta"]}),(0,o.jsx)("span",{children:"\u2b50".repeat(e.difficulty)})]})]},e.id))})]}),i&&!b&&(0,o.jsxs)("div",{className:"quiz-game",children:[(0,o.jsxs)("div",{className:"text-center mb-4",children:[(0,o.jsx)("h2",{className:"text-xl font-bold",style:{color:I.text.primary},children:i.title}),(0,o.jsxs)("div",{className:"progress-indicator",children:["Pergunta ",a+1," de ",i.questions.length]})]}),(0,o.jsx)("div",{className:"timer-bar",children:(0,o.jsx)("div",{className:"timer-fill "+(h<=5?"danger":""),style:{width:h/i.timeLimit*100+"%"}})}),(0,o.jsx)("div",{className:"text-center mb-4",children:(0,o.jsxs)("span",{className:"text-2xl font-bold",style:{color:h<=5?"#ef4444":"#10b981"},children:[h,"s"]})}),A&&(0,o.jsxs)("div",{className:"question-card",children:[(0,o.jsx)("h3",{className:"text-xl font-semibold mb-4",style:{color:I.text.primary},children:A.question}),"multiple-choice"===A.type&&(0,o.jsx)("div",{children:A.options.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>R(t),className:"option-button",children:[(0,o.jsxs)("span",{className:"font-bold mr-3",style:{color:I.text.muted},children:[String.fromCharCode(65+t),")"]}),e]},t))}),"true-false"===A.type&&(0,o.jsxs)("div",{className:"true-false-buttons",children:[(0,o.jsx)("button",{onClick:()=>R(!0),className:"tf-button tf-true",children:"\u2713 Verdadeiro"}),(0,o.jsx)("button",{onClick:()=>R(!1),className:"tf-button tf-false",children:"\u2717 Falso"})]}),"fill-blank"===A.type&&(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"mb-4",children:(0,o.jsx)("input",{type:"text",value:C,onChange:e=>T(e.target.value),onKeyPress:e=>"Enter"===e.key&&D(),className:"fill-input",placeholder:"Digite aqui...",autoFocus:!0})}),(0,o.jsx)("button",{onClick:D,disabled:!C.trim(),className:"submit-button",children:"Enviar Resposta"})]})]})]}),!i&&(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{onClick:n,className:"modal-button secondary",children:"\u2190 Voltar ao Hub"})}),i&&!b&&(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{onClick:$,className:"modal-button secondary",children:"\u2190 Voltar aos Quizzes"})}),b&&w&&(0,o.jsx)("div",{className:"modal-overlay",children:(0,o.jsxs)("div",{className:"modal",children:[(()=>{const e=(t=w.percentage)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea \xe9 um mestre!"}:t>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3timo conhecimento!"}:t>=70?{emoji:"\ud83d\udc4d",title:"Muito Bom!",message:"Continue assim!"}:t>=60?{emoji:"\ud83d\udcda",title:"Bom!",message:"Continue estudando!"}:{emoji:"\ud83d\udcaa",title:"Continue Tentando!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!"};var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"text-6xl mb-4",children:e.emoji}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:I.text.primary},children:e.title}),(0,o.jsx)("p",{className:"mb-4",style:{color:I.text.secondary},children:e.message})]})})(),(0,o.jsxs)("div",{className:"rounded-lg p-4 mb-4",style:{background:I.isDark?"rgba(16, 185, 129, 0.1)":"#ecfdf5",border:`1px solid ${I.border.primary}`},children:[(0,o.jsxs)("div",{className:"text-3xl font-bold mb-2",style:{color:"#10b981"},children:[w.percentage,"%"]}),(0,o.jsxs)("div",{className:"text-sm",style:{color:I.text.secondary},children:[w.correctCount,"/",w.totalQuestions," corretas \u2022 ",w.totalPoints,"/",w.maxPoints," pontos",(0,o.jsx)("br",{}),"+",w.xpEarned," XP ganho!",w.levelUp&&(0,o.jsxs)("div",{className:"font-bold mt-1",children:["\ud83c\udf89 N\xedvel ",w.newLevel,"!"]})]})]}),(0,o.jsx)("div",{className:"review-container",children:w.questionResults.map((e,t)=>(0,o.jsx)("div",{className:"review-question "+(e.isCorrect?"correct":"incorrect"),children:(0,o.jsxs)("div",{className:"review-header",children:[(0,o.jsx)("span",{className:"review-icon",children:e.isCorrect?"\u2705":"\u274c"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("p",{className:"review-question-text",children:[t+1,". ",e.question]}),(0,o.jsxs)("div",{className:"review-answers",children:[(0,o.jsxs)("p",{className:"review-user-answer",children:[(0,o.jsx)("strong",{children:"Sua resposta:"})," ",e.userAnswer]}),!e.isCorrect&&(0,o.jsxs)("p",{className:"review-correct-answer",children:[(0,o.jsx)("strong",{children:"Resposta correta:"})," ",e.correctAnswer]})]}),(0,o.jsxs)("span",{className:"review-points "+(0===e.points?"zero":""),children:[e.points," pontos"]})]})]})},t))}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("button",{onClick:()=>L(i),className:"modal-button",children:"\ud83d\udd04 Tentar Novamente"}),(0,o.jsx)("button",{onClick:$,className:"modal-button secondary",children:"\ud83d\udcda Outros Quizzes"}),(0,o.jsx)("button",{onClick:n,className:"modal-button secondary",children:"\ud83c\udfe0 Voltar ao Hub"})]})]})})]})]})},X=e=>{let{user:t,onLogout:n}=e;const[i,s]=(0,r.useState)("hub"),[a,c]=(0,r.useState)({}),[h,f]=(0,r.useState)(null),[p,m]=(0,r.useState)(!0),b=l();(0,r.useEffect)(()=>{v();const e=e=>{e.state&&e.state.view?(s(e.state.view),c(e.state.params||{}),"hub"===e.state.view&&v()):(s("hub"),c({}),v())};return window.addEventListener("popstate",e),window.history.replaceState({view:"hub",params:{}},"",""),()=>{window.removeEventListener("popstate",e)}},[]);const v=async()=>{try{const e=await g(t.username);e.success?f(e.student):console.error("Failed to load student data:",e.error)}catch(e){console.error("Error loading student data:",e)}m(!1)},w=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s(e),c(t),"hub"===e&&v(),window.history.pushState({view:e,params:t},"",""),setTimeout(()=>{window.scrollTo(0,0)},0)},x=(()=>{if(!h||!h.progress)return{totalXP:0,currentLevel:1,completedLessons:0,totalActivities:0};const e=h.totalXP||0,t=h.level||1,n=Object.entries(h.progress||{}).filter(e=>{let[t,n]=e;return!t.startsWith("story-")&&!t.startsWith("wordmatch-")&&!t.startsWith("quiz-")&&n.completed}).length,r=Object.entries(h.progress||{}).filter(e=>{let[t,n]=e;return n.completed}).length;return{totalXP:e,currentLevel:t,completedLessons:n,totalActivities:r}})();return p?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:b.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderBottomColor:b.brand.blue}}),(0,o.jsx)("p",{style:{color:b.text.secondary},className:"font-medium text-lg",children:"Carregando sua academia..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Claude-Style Dark Mode Variables */\n        .app-container {\n          min-height: 100vh;\n          background: ${b.bg.gradient};\n          color: ${b.text.primary};\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          transition: all 0.3s ease;\n        }\n\n        /* ELEGANT HEADER - Dark Mode Aware */\n        .modern-header {\n          background: linear-gradient(135deg, ${b.brand.blue} 0%, #0066CC 100%);\n          border-radius: 0 0 24px 24px;\n          box-shadow: ${b.shadow.md};\n          position: relative;\n          overflow: hidden;\n        }\n\n        .header-pattern {\n          position: absolute;\n          inset: 0;\n          background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 1px, transparent 1px);\n          background-size: 20px 20px;\n          opacity: 0.3;\n        }\n\n        .header-content {\n          position: relative;\n          padding: 1.5rem 1rem 2rem;\n          max-width: 1200px;\n          margin: 0 auto;\n        }\n\n        @media (min-width: 768px) {\n          .header-content {\n            padding: 2rem 2rem 2.5rem;\n          }\n        }\n\n        /* Back Button - Elegant */\n        .back-btn {\n          display: inline-flex;\n          align-items: center;\n          color: rgba(255, 255, 255, 0.9);\n          font-weight: 400;\n          font-size: 0.95rem;\n          margin-bottom: 1rem;\n          transition: all 0.2s ease;\n          text-decoration: none;\n          background: none;\n          border: none;\n          cursor: pointer;\n        }\n\n        .back-btn:hover {\n          color: white;\n          transform: translateX(-2px);\n        }\n\n        .back-btn svg {\n          margin-right: 0.5rem;\n          transition: transform 0.2s ease;\n        }\n\n        .back-btn:hover svg {\n          transform: translateX(-2px);\n        }\n\n        /* Academy Badge - Warm and Inviting */\n        .academy-badge {\n          display: inline-block;\n          background: ${b.brand.red};\n          padding: 0.75rem 1.5rem;\n          border-radius: 16px;\n          margin-bottom: 1rem;\n          box-shadow: 0 4px 12px ${b.brand.red}33;\n          border: 1px solid rgba(255, 255, 255, 0.1);\n        }\n\n        .academy-title {\n          color: white;\n          font-size: 1.25rem;\n          font-weight: 500;\n          margin: 0;\n          letter-spacing: 0.01em;\n        }\n\n        @media (min-width: 768px) {\n          .academy-title {\n            font-size: 1.5rem;\n          }\n        }\n\n        /* User Welcome - Personal and Warm */\n        .user-welcome {\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          border-radius: 16px;\n          padding: 1rem 1.5rem;\n          margin-bottom: 1.5rem;\n        }\n\n        .page-title {\n          color: white;\n          font-size: 1.75rem;\n          font-weight: 600;\n          margin: 0 0 0.7rem;\n          letter-spacing: -0.01em;\n        }\n\n        .student-name-highlight {\n          background: rgba(255, 255, 255, 0.15);\n          padding: 0.25rem 0.75rem;\n          border-radius: 12px;\n          font-weight: 600;\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255, 255, 255, 0.2);\n        }\n        \n        .user-name {\n          color: rgba(255, 255, 255, 0.9);\n          font-size: 1.125rem;\n          margin: 0;\n          font-weight: 500;\n        }\n\n        /* Progress Pills - Cozy and Motivating */\n        .progress-pills {\n          display: flex;\n          gap: 0.75rem;\n          flex-wrap: wrap;\n        }\n\n        .progress-pill {\n          background: rgba(255, 255, 255, 0.2);\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n          border-radius: 50px;\n          padding: 0.5rem 1rem;\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          font-size: 0.85rem;\n          color: white;\n          font-weight: 500;\n        }\n\n        .progress-icon {\n          width: 16px;\n          height: 16px;\n          opacity: 0.9;\n        }\n\n        /* Main Content - Elegant Dark Mode */\n        .main-content {\n          padding: 1.5rem 1rem;\n          max-width: 1200px;\n          margin: 0 auto;\n          background: ${b.bg.primary};\n        }\n\n        @media (min-width: 768px) {\n          .main-content {\n            padding: 2.5rem 2rem;\n          }\n        }\n\n        /* Logout Button - Dark Mode Styled */\n        .logout-container {\n          padding: 0 1rem 2rem;\n          max-width: 1200px;\n          margin: 0 auto;\n          text-align: center;\n          background: ${b.bg.primary};\n        }\n\n        @media (min-width: 768px) {\n          .logout-container {\n            padding: 0 2rem 2.5rem;\n          }\n        }\n\n        .logout-btn {\n          background: ${b.bg.secondary};\n          border: 1px solid ${b.border.primary};\n          border-radius: 16px;\n          padding: 0.75rem 1.5rem;\n          color: ${b.text.secondary};\n          font-weight: 500;\n          font-size: 0.9rem;\n          display: inline-flex;\n          align-items: center;\n          gap: 0.5rem;\n          transition: all 0.2s ease;\n          box-shadow: ${b.shadow.sm};\n          cursor: pointer;\n        }\n\n        .logout-btn:hover {\n          background: ${b.bg.tertiary};\n          border-color: ${b.border.secondary};\n          color: ${b.text.primary};\n          transform: translateY(-1px);\n          box-shadow: ${b.shadow.md};\n        }\n\n        /* Dark Mode Toggle Positioning */\n        .dark-mode-toggle {\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n          z-index: 10;\n        }\n\n        @media (min-width: 768px) {\n          .dark-mode-toggle {\n            top: 1.5rem;\n            right: 1.5rem;\n          }\n        }\n\n        /* Loading Animation - Dark Mode */\n        .loading-spinner {\n          width: 48px;\n          height: 48px;\n          border: 3px solid ${b.border.primary};\n          border-top: 3px solid ${b.brand.blue};\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Smooth Transitions for Everything */\n        * {\n          transition: color 0.2s ease, background-color 0.2s ease, border-color 0.2s ease, transform 0.2s ease;\n        }\n      `}),(0,o.jsxs)("div",{className:"app-container",children:[(0,o.jsx)("div",{className:"dark-mode-toggle",children:(0,o.jsx)(u,{})}),(0,o.jsxs)("header",{className:"modern-header",children:[(0,o.jsx)("div",{className:"header-pattern"}),(0,o.jsxs)("div",{className:"header-content",children:["hub"!==i&&(0,o.jsxs)("button",{onClick:()=>w("hub"),className:"back-btn",children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),"Voltar ao Hub"]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"academy-badge",children:(0,o.jsx)("h1",{className:"academy-title",children:"Teacher Alex's English Academy"})}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(d,{})}),(0,o.jsxs)("div",{className:"user-welcome",children:[(0,o.jsx)("h2",{className:"page-title",children:(()=>{var e;switch(i){case"hub":return"Sua Jornada";case"lessons":return"Escolher S\xe9rie";case"lessons-list":return a.seriesTitle||"Li\xe7\xf5es";case"lesson-player":return(null===(e=a.lesson)||void 0===e?void 0:e.title)||"Aprendendo";case"story-completion":return"Hist\xf3rias";case"word-match":return"Combine Palavras";case"quiz":return"Quiz R\xe1pido";default:return"Aprendendo"}})()}),(0,o.jsx)("p",{className:"user-name",children:(0,o.jsx)("span",{className:"student-name-highlight",children:(null===h||void 0===h?void 0:h.name)||t.username})})]}),"hub"===i&&(0,o.jsxs)("div",{className:"progress-pills",children:[(0,o.jsxs)("div",{className:"progress-pill",children:[(0,o.jsx)("svg",{className:"progress-icon",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),"N\xedvel ",x.currentLevel]}),(0,o.jsxs)("div",{className:"progress-pill",children:[(0,o.jsx)("svg",{className:"progress-icon",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),x.totalActivities," atividades"]}),(0,o.jsxs)("div",{className:"progress-pill",children:[(0,o.jsx)("svg",{className:"progress-icon",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),x.totalXP," XP"]})]})]})]})]}),"lesson-player"===i?(0,o.jsx)(B,{user:t,lesson:a.lesson,seriesId:a.seriesId,onBack:()=>w("lessons-list",{seriesId:a.seriesId,seriesTitle:a.seriesTitle}),onComplete:async e=>{try{console.log("\ud83d\udd0d DEBUG - All data:"),console.log("- results:",e),console.log("- viewParams:",a),console.log("- viewParams.seriesId:",a.seriesId),console.log("- results.lessonId:",e.lessonId),console.log("- user.username:",t.username);const n=50+10*e.correctAnswers,r={completed:!0,score:e.score,xpEarned:n,correctAnswers:e.correctAnswers,totalQuestions:e.totalQuestions,completedAt:new Date,seriesName:a.seriesId};if(console.log("\ud83d\udcdd Progress data to save:",r),!e.lessonId)return void console.error("\u274c Lesson ID is undefined!");if(!a.seriesId)return void console.error("\u274c Series ID is undefined!");const i=await y(t.username,e.lessonId,r);i&&i.success?(console.log("\u2705 Progress saved successfully!"),await v()):console.error("\u274c Failed to save progress:",i)}catch(n){console.error("\u274c Error saving lesson progress:",n)}w("lessons-list",{seriesId:a.seriesId,seriesTitle:a.seriesTitle})}}):(0,o.jsxs)("main",{className:"main-content",children:["hub"===i&&(0,o.jsx)(V,{studentData:h,onNavigate:w}),"story-completion"===i&&(0,o.jsx)(W,{user:t,onBack:()=>w("hub")}),"word-match"===i&&(0,o.jsx)(K,{user:t,onBack:()=>w("hub")}),"lessons"===i&&(0,o.jsx)(U,{user:t,onBack:()=>w("hub"),onSeriesSelect:(e,t)=>{w("lessons-list",{seriesId:e,seriesTitle:t})}}),"quiz"===i&&(0,o.jsx)(Q,{user:t,onBack:()=>w("hub")}),"lessons-list"===i&&(0,o.jsx)(q,{user:t,seriesId:a.seriesId,seriesTitle:a.seriesTitle,onBack:()=>w("lessons"),onLessonSelect:(e,t)=>{w("lesson-player",{lesson:e,seriesId:t,seriesTitle:a.seriesTitle})}})]}),(0,o.jsx)("div",{className:"logout-container",children:(0,o.jsxs)("button",{onClick:n,className:"logout-btn",children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4m7 14l5-5-5-5m5 5H9"})}),"Sair"]})})]})]})},Y=()=>{const[e,t]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0),c=l();(0,r.useEffect)(()=>{const e=(0,s.Yk)(e=>{e?console.log("\u2705 User is logged in:",e):(console.log("\ud83d\udc4b User is logged out"),t(null)),a(!1)});return()=>e()},[]);const u=e=>{console.log("\ud83c\udf89 Login successful in App:",e),t(e)},d=async()=>{const{logout:e}=await Promise.resolve().then(n.bind(n,719));await e(),t(null)};return i?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:c.bg.gradient,color:c.text.primary},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderBottomColor:c.brand.blue}}),(0,o.jsx)("p",{style:{color:c.text.secondary},children:"Loading Teacher Alex's Academy..."})]})}):e?"teacher"===e.role?(0,o.jsx)(v,{user:e,onLogout:d}):"student"===e.role?(0,o.jsx)(X,{user:e,onLogout:d}):(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:c.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-4",style:{color:c.text.primary},children:"Unknown user role"}),(0,o.jsx)("button",{onClick:d,className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:c.brand.red},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Logout"})]})}):(0,o.jsx)(h,{onLoginSuccess:u})};const J=function(){return(0,o.jsx)(c,{children:(0,o.jsx)(Y,{})})};i.createRoot(document.getElementById("root")).render((0,o.jsx)(r.StrictMode,{children:(0,o.jsx)(J,{})}))})();
//# sourceMappingURL=main.1b2c282f.js.map