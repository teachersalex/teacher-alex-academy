/*! For license information please see main.5061546b.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var N=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var _=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case N:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case f:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case C:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return P(e(t))}catch(n){}}return null}var R=Array.isArray,L=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},D=[],z=-1;function F(e){return{current:e}}function q(e){0>z||(e.current=D[z],D[z]=null,z--)}function V(e,t){z++,D[z]=e.current,e.current=t}var U=F(null),B=F(null),$=F(null),H=F(null);function W(e,t){switch(V($,t),V(B,e),V(U,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}q(U),V(U,e)}function G(){q(U),q(B),q($)}function K(e){null!==e.memoizedState&&V(H,e);var t=U.current,n=id(t,e.type);t!==n&&(V(B,e),V(U,n))}function Q(e){B.current===e&&(q(U),q(B)),H.current===e&&(q(H),Kd._currentValue=M)}var X=Object.prototype.hasOwnProperty,Y=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(me(e)/fe|0)|0},me=Math.log,fe=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~i)?s=ve(r):0!==(o&=a)?s=ve(o):n||0!==(n=a&~e)&&(s=ve(n)):0!==(a=r&~i)?s=ve(a):0!==o?s=ve(o):n||0!==(n=r&~e)&&(s=ve(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ce(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-pe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function _e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function je(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Ae=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ae,Re="__reactProps$"+Ae,Le="__reactContainer$"+Ae,Oe="__reactEvents$"+Ae,Me="__reactListeners$"+Ae,De="__reactHandles$"+Ae,ze="__reactResources$"+Ae,Fe="__reactMarker$"+Ae;function qe(e){delete e[Pe],delete e[Re],delete e[Oe],delete e[Me],delete e[De]}function Ve(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Le]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[Pe])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Ue(e){if(e=e[Pe]||e[Le]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function $e(e){var t=e[ze];return t||(t=e[ze]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function He(e){e[Fe]=!0}var We=new Set,Ge={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Xe,Ye,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,X.call(et,s)||!X.call(Ze,s)&&(Je.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Xe)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Ye=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Ye}var it=!1;function ot(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],a=i[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function ft(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,s,i,o,a){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(R(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Ct(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Et(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&Et(e,i,t[i])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Rt=null;function Lt(e){var t=Ue(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ft(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Re]||null;if(!s)throw Error(o(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Mt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Rt)&&(Vc(),Pt&&(t=Pt,e=Rt,Rt=Pt=null,Lt(t),e)))for(t=0;t<e.length;t++)Lt(e[t])}}function Dt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var zt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ft=!1;if(zt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Ft=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch(Rh){Ft=!1}var Vt=null,Ut=null,Bt=null;function $t(){if(Bt)return Bt;var e,t,n=Ut,r=n.length,s="value"in Vt?Vt.value:Vt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===s[i-t];t++);return Bt=s.slice(e,1<t?1-t:void 0)}function Ht(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Gt(){return!1}function Kt(e){function t(t,n,r,s,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Wt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Xt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Kt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Qt=e.screenX-Yt.screenX,Xt=e.screenY-Yt.screenY):Xt=Qt=0,Yt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Kt(nn),sn=Kt(h({},nn,{dataTransfer:0})),on=Kt(h({},en,{relatedTarget:0})),an=Kt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return pn}var fn=Kt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Ht(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Ht(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ht(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Kt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Kt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Kt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Kt(h({},Jt,{newState:0,oldState:0})),xn=[9,13,27,32],kn=zt&&"CompositionEvent"in window,Sn=null;zt&&"documentMode"in document&&(Sn=document.documentMode);var En=zt&&"TextEvent"in window&&!Sn,Cn=zt&&(!kn||Sn&&8<Sn&&11>=Sn),Tn=String.fromCharCode(32),Nn=!1;function _n(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Rt?Rt.push(r):Rt=[r]:Pt=r,0<(t=$u(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ln=null,On=null;function Mn(e){Mu(e,0)}function Dn(e){if(ht(Be(e)))return e}function zn(e,t){if("change"===e)return t}var Fn=!1;if(zt){var qn;if(zt){var Vn="oninput"in document;if(!Vn){var Un=document.createElement("div");Un.setAttribute("oninput","return;"),Vn="function"===typeof Un.oninput}qn=Vn}else qn=!1;Fn=qn&&(!document.documentMode||9<document.documentMode)}function Bn(){Ln&&(Ln.detachEvent("onpropertychange",$n),On=Ln=null)}function $n(e){if("value"===e.propertyName&&Dn(On)){var t=[];Rn(t,On,e,At(e)),Mt(Mn,t)}}function Hn(e,t,n){"focusin"===e?(Bn(),On=n,(Ln=t).attachEvent("onpropertychange",$n)):"focusout"===e&&Bn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Dn(On)}function Gn(e,t){if("click"===e)return Dn(t)}function Kn(e,t){if("input"===e||"change"===e)return Dn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!X.call(t,s)||!Qn(e[s],t[s]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=zt&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==pt(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Xn(ir,r)||(ir=r,0<(r=$u(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}zt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var pr=hr("animationend"),mr=hr("animationiteration"),fr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),Ke(t,[e])}xr.push("scrollEnd");var Sr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Cr=[],Tr=0,Nr=0;function _r(){for(var e=Tr,t=Nr=Tr=0;t<e;){var n=Cr[t];Cr[t++]=null;var r=Cr[t];Cr[t++]=null;var s=Cr[t];Cr[t++]=null;var i=Cr[t];if(Cr[t++]=null,null!==r&&null!==s){var o=r.pending;null===o?s.next=s:(s.next=o.next,o.next=s),r.pending=s}0!==i&&Pr(n,s,i)}}function Ir(e,t,n,r){Cr[Tr++]=e,Cr[Tr++]=t,Cr[Tr++]=n,Cr[Tr++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function jr(e,t,n,r){return Ir(e,t,n,r),Rr(e)}function Ar(e,t){return Ir(e,null,null,t),Rr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-pe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Rr(e){if(50<Pc)throw Pc=0,Rc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mr(e,t,n,r){return new Or(e,t,n,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=Mr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Fr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,s,i){var a=0;if(r=e,"function"===typeof e)Dr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,U.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Mr(31,n,t,s)).elementType=N,e.lanes=i,e;case g:return Vr(n.children,s,i,t);case y:a=8,s|=24;break;case v:return(e=Mr(12,n,t,2|s)).elementType=v,e.lanes=i,e;case S:return(e=Mr(13,n,t,s)).elementType=S,e.lanes=i,e;case E:return(e=Mr(19,n,t,s)).elementType=E,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case w:a=9;break e;case k:a=11;break e;case C:a=14;break e;case T:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Mr(a,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Vr(e,t,n,r){return(e=Mr(7,e,r,t)).lanes=n,e}function Ur(e,t,n){return(e=Mr(6,e,null,t)).lanes=n,e}function Br(e,t,n){return(t=Mr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var $r=[],Hr=0,Wr=null,Gr=0,Kr=[],Qr=0,Xr=null,Yr=1,Jr="";function Zr(e,t){$r[Hr++]=Gr,$r[Hr++]=Wr,Wr=e,Gr=t}function es(e,t,n){Kr[Qr++]=Yr,Kr[Qr++]=Jr,Kr[Qr++]=Xr,Xr=e;var r=Yr;e=Jr;var s=32-pe(r)-1;r&=~(1<<s),n+=1;var i=32-pe(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Yr=1<<32-pe(t)+s|n<<s|r,Jr=i+e}else Yr=1<<i|n<<s|r,Jr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Wr;)Wr=$r[--Hr],$r[Hr]=null,Gr=$r[--Hr],$r[Hr]=null;for(;e===Xr;)Xr=Kr[--Qr],Kr[Qr]=null,Jr=Kr[--Qr],Kr[Qr]=null,Yr=Kr[--Qr],Kr[Qr]=null}var rs=null,ss=null,is=!1,os=null,as=!1,ls=Error(o(519));function cs(e){throw fs(Er(Error(o(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Re]=r,n){case"dialog":Du("cancel",t),Du("close",t);break;case"iframe":case"object":case"embed":Du("load",t);break;case"video":case"audio":for(n=0;n<Lu.length;n++)Du(Lu[n],t);break;case"source":Du("error",t);break;case"img":case"image":case"link":Du("error",t),Du("load",t);break;case"details":Du("toggle",t);break;case"input":Du("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Du("invalid",t);break;case"textarea":Du("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Xu(t.textContent,n)?(null!=r.popover&&(Du("beforetoggle",t),Du("toggle",t)),null!=r.onScroll&&Du("scroll",t),null!=r.onScrollEnd&&Du("scrollend",t),null!=r.onClick&&(t.onclick=Yu),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(as=!1);case 27:case 3:return void(as=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,pd(e.type)?(e=vd,vd=null,ss=e):ss=n):ss=rs?yd(e.stateNode.nextSibling):null;return!0}function ps(){ss=rs=null,is=!1}function ms(){var e=os;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),os=null),e}function fs(e){null===os?os=[e]:os.push(e)}var gs=F(null),ys=null,vs=null;function bs(e,t,n){V(gs,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=gs.current,q(gs)}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var a=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),xs(i.return,n,e),r||(a=null);break e}i=l.next}}else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),xs(a,n,e),a=null}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}function Ss(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var a=s.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=s.type;Qn(s.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(s===H.current){if(null===(a=s.alternate))throw Error(o(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Kd):e=[Kd])}s=s.return}null!==e&&ks(t,e,n,r),t.flags|=262144}function Es(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){ys=e,vs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ts(e){return _s(ys,e)}function Ns(e,t){return null===ys&&Cs(e),_s(e,t)}function _s(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vs){if(null===e)throw Error(o(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return n}var Is="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},js=r.unstable_scheduleCallback,As=r.unstable_NormalPriority,Ps={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rs(){return{controller:new Is,data:new Map,refCount:0}}function Ls(e){e.refCount--,0===e.refCount&&js(As,function(){e.controller.abort()})}var Os=null,Ms=0,Ds=0,zs=null;function Fs(){if(0===--Ms&&null!==Os){null!==zs&&(zs.status="fulfilled");var e=Os;Os=null,Ds=0,zs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var qs=L.S;L.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Os){var n=Os=[];Ms=0,Ds=Iu(),zs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ms++,t.then(Fs,Fs)}(0,t),null!==qs&&qs(e,t)};var Vs=F(null);function Us(){var e=Vs.current;return null!==e?e:rc.pooledCache}function Bs(e,t){V(Vs,null===t?Vs.current:t.pool)}function $s(){var e=Us();return null===e?null:{parent:Ps._currentValue,pool:e}}var Hs=Error(o(460)),Ws=Error(o(474)),Gs=Error(o(542)),Ks={then:function(){}};function Qs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xs(){}function Ys(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xs,Xs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xs,Xs);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Js=t,Hs}}var Js=null;function Zs(){if(null===Js)throw Error(o(459));var e=Js;return Js=null,e}function ei(e){if(e===Hs||e===Gs)throw Error(o(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Rr(e),Pr(e,null,n),t}return Ir(e,r,t,n),Rr(e)}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}function ai(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==zs)throw zs}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(o=0,u=c=l=null,a=i;;){var p=-536870913&a.lane,m=p!==a.lane;if(m?(ic&p)===p:(r&p)===p){0!==p&&p===Ds&&(li=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var f=e,g=a;p=t;var y=n;switch(g.tag){case 1:if("function"===typeof(f=g.payload)){d=f.call(y,d,p);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(p="function"===typeof(f=g.payload)?f.call(y,d,p):f)||void 0===p)break e;d=h({},d,p);break e;case 2:ti=!0}}null!==(p=a.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[p]:m.push(p))}else m={lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,o|=p;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(m=a).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),pc|=o,e.lanes=o,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var pi=F(null),mi=F(0);function fi(e,t){V(mi,e=dc),V(pi,t),dc=e|t.baseLanes}function gi(){V(mi,dc),V(pi,pi.current)}function yi(){dc=mi.current,q(pi),q(mi)}var vi=0,bi=null,wi=null,xi=null,ki=!1,Si=!1,Ei=!1,Ci=0,Ti=0,Ni=null,_i=0;function Ii(){throw Error(o(321))}function ji(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Ai(e,t,n,r,s,i){return vi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L.H=null===e||null===e.memoizedState?Wo:Go,Ei=!1,i=n(r,s),Ei=!1,Si&&(i=Ri(t,n,r,s)),Pi(e),i}function Pi(e){L.H=Ho;var t=null!==wi&&null!==wi.next;if(vi=0,xi=wi=bi=null,ki=!1,Ti=0,Ni=null,t)throw Error(o(300));null===e||Na||null!==(e=e.dependencies)&&Es(e)&&(Na=!0)}function Ri(e,t,n,r){bi=e;var s=0;do{if(Si&&(Ni=null),Ti=0,Si=!1,25<=s)throw Error(o(301));if(s+=1,xi=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}L.H=Ko,i=t(n,r)}while(Si);return i}function Li(){var e=L.H,t=e.useState()[0];return t="function"===typeof t.then?qi(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Oi(){var e=0!==Ci;return Ci=0,e}function Mi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Di(e){if(ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ki=!1}vi=0,xi=wi=bi=null,Si=!1,Ti=Ci=0,Ni=null}function zi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?bi.memoizedState=xi=e:xi=xi.next=e,xi}function Fi(){if(null===wi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===xi?bi.memoizedState:xi.next;if(null!==t)xi=t,wi=e;else{if(null===e){if(null===bi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===xi?bi.memoizedState=xi=e:xi=xi.next=e}return xi}function qi(e){var t=Ti;return Ti+=1,null===Ni&&(Ni=[]),e=Ys(Ni,e,t),t=bi,null===(null===xi?t.memoizedState:xi.next)&&(t=t.alternate,L.H=null===t||null===t.memoizedState?Wo:Go),e}function Vi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return qi(e);if(e.$$typeof===x)return Ts(e)}throw Error(o(438,String(e)))}function Ui(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=_;return t.index++,n}function Bi(e,t){return"function"===typeof t?t(e):t}function $i(e){return Hi(Fi(),wi,e)}function Hi(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var a=s.next;s.next=i.next,i.next=a}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=a=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(vi&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ds&&(d=!0);else{if((vi&p)===p){u=u.next,p===Ds&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=i):c=c.next=h,bi.lanes|=p,pc|=p}h=u.action,Ei&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,a=i):c=c.next=p,bi.lanes|=h,pc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=i:c.next=l,!Qn(i,e.memoizedState)&&(Na=!0,d&&null!==(n=zs)))throw n;e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Wi(e){var t=Fi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{i=e(i,a.action),a=a.next}while(a!==s);Qn(i,t.memoizedState)||(Na=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Gi(e,t,n){var r=bi,s=Fi(),i=is;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Qn((wi||s).memoizedState,n);if(a&&(s.memoizedState=n,Na=!0),s=s.queue,yo(2048,8,Xi.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||null!==xi&&1&xi.memoizedState.tag){if(r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Qi.bind(null,r,s,n,t),null),null===rc)throw Error(o(349));i||0!==(124&vi)||Ki(r,t,n)}return n}function Ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qi(e,t,n,r){t.value=n,t.getSnapshot=r,Yi(t)&&Ji(e)}function Xi(e,t,n){return n(function(){Yi(t)&&Ji(e)})}function Yi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Ji(e){var t=Ar(e,2);null!==t&&Mc(t,e,2)}function Zi(e){var t=zi();if("function"===typeof e){var n=e;if(e=n(),Ei){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,Hi(e,wi,"function"===typeof r?r:Bi)}function to(e,t,n,r,s){if(Uo(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==L.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,no(t,i)):(i.next=n.next,t.pending=n.next=i)}}function no(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=L.T,o={};L.T=o;try{var a=n(s,r),l=L.S;null!==l&&l(o,a),ro(e,t,a)}catch(c){io(e,t,c)}finally{L.T=i}}else try{ro(e,t,i=n(s,r))}catch(u){io(e,t,u)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){so(e,t,n)},function(n){return io(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function io(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(is){var n=rc.formState;if(null!==n){e:{var r=bi;if(is){if(ss){t:{for(var s=ss,i=as;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=yd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=yd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=zi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=Fo.bind(null,bi,r),r.dispatch=n,r=Zi(!1),i=Vo.bind(null,bi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=zi()).queue=s,n=to.bind(null,bi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(Fi(),wi,e)}function uo(e,t,n){if(t=Hi(e,t,ao)[0],e=$i(Bi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=qi(t)}catch(o){if(o===Hs)throw Gs;throw o}else r=t;var s=(t=Fi()).queue,i=s.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,mo(9,{destroy:void 0,resource:void 0},ho.bind(null,s,n),null)),[r,i,e]}function ho(e,t){e.action=t}function po(e){var t=Fi(),n=wi;if(null!==n)return uo(t,n,e);Fi(),t=t.memoizedState;var r=(n=Fi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function mo(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function fo(){return Fi().memoizedState}function go(e,t,n,r){var s=zi();r=void 0===r?null:r,bi.flags|=e,s.memoizedState=mo(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var s=Fi();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&ji(r,wi.memoizedState.deps)?s.memoizedState=mo(t,i,n,r):(bi.flags|=e,s.memoizedState=mo(1|t,i,n,r))}function vo(e,t){go(8390656,8,e,t)}function bo(e,t){yo(2048,8,e,t)}function wo(e,t){return yo(4,2,e,t)}function xo(e,t){return yo(4,4,e,t)}function ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function So(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,ko.bind(null,t,e),n)}function Eo(){}function Co(e,t){var n=Fi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ji(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function To(e,t){var n=Fi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ji(t,r[1]))return r[0];if(r=e(),Ei){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function No(e,t,n){return void 0===n||0!==(1073741824&vi)?e.memoizedState=t:(e.memoizedState=n,e=Oc(),bi.lanes|=e,pc|=e,n)}function _o(e,t,n,r){return Qn(n,t)?n:null!==pi.current?(e=No(e,n,r),Qn(e,t)||(Na=!0),e):0===(42&vi)?(Na=!0,e.memoizedState=n):(e=Oc(),bi.lanes|=e,pc|=e,t)}function Io(e,t,n,r,s){var i=O.p;O.p=0!==i&&8>i?i:8;var o=L.T,a={};L.T=a,Vo(e,!1,t,n);try{var l=s(),c=L.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)qo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Lc());else qo(e,t,r,Lc())}catch(u){qo(e,t,{then:function(){},status:"rejected",reason:u},Lc())}finally{O.p=i,L.T=o}}function jo(){}function Ao(e,t,n,r){if(5!==e.tag)throw Error(o(476));var s=Po(e).queue;Io(e,s,t,M,null===n?jo:function(){return Ro(e),n(r)})}function Po(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:M},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ro(e){qo(e,Po(e).next.queue,{},Lc())}function Lo(){return Ts(Kd)}function Oo(){return Fi().memoizedState}function Mo(){return Fi().memoizedState}function Do(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Lc(),r=ii(t,e=si(n),n);return null!==r&&(Mc(r,t,n),oi(r,t,n)),t={cache:Rs()},void(e.payload=t)}t=t.return}}function zo(e,t,n){var r=Lc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Uo(e)?Bo(t,n):null!==(n=jr(e,t,n,r))&&(Mc(n,e,r),$o(n,t,r))}function Fo(e,t,n){qo(e,t,n,Lc())}function qo(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Uo(e))Bo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Qn(a,o))return Ir(e,t,s,0),null===rc&&_r(),!1}catch(l){}if(null!==(n=jr(e,t,s,r)))return Mc(n,e,r),$o(n,t,r),!0}return!1}function Vo(e,t,n,r){if(r={lane:2,revertLane:Iu(),action:r,hasEagerState:!1,eagerState:null,next:null},Uo(e)){if(t)throw Error(o(479))}else null!==(t=jr(e,n,r,2))&&Mc(t,e,2)}function Uo(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Bo(e,t){Si=ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $o(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}var Ho={readContext:Ts,use:Vi,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},Wo={readContext:Ts,use:Vi,useCallback:function(e,t){return zi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=zi();t=void 0===t?null:t;var r=e();if(Ei){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=zi();if(void 0!==n){var s=n(t);if(Ei){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=zo.bind(null,bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},zi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Fo.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Eo,useDeferredValue:function(e,t){return No(zi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Io.bind(null,bi,e.queue,!0,!1),zi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bi,s=zi();if(is){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&ic)||Ki(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,vo(Xi.bind(null,r,i,e),[e]),r.flags|=2048,mo(9,{destroy:void 0,resource:void 0},Qi.bind(null,r,i,n,t),null),n},useId:function(){var e=zi(),t=rc.identifierPrefix;if(is){var n=Jr;t="\xab"+t+"R"+(n=(Yr&~(1<<32-pe(Yr)-1)).toString(32)+n),0<(n=Ci++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=_i++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Lo,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=zi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Vo.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Ui,useCacheRefresh:function(){return zi().memoizedState=Do.bind(null,bi)}},Go={readContext:Ts,use:Vi,useCallback:Co,useContext:Ts,useEffect:bo,useImperativeHandle:So,useInsertionEffect:wo,useLayoutEffect:xo,useMemo:To,useReducer:$i,useRef:fo,useState:function(){return $i(Bi)},useDebugValue:Eo,useDeferredValue:function(e,t){return _o(Fi(),wi.memoizedState,e,t)},useTransition:function(){var e=$i(Bi)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:qi(e),t]},useSyncExternalStore:Gi,useId:Oo,useHostTransitionStatus:Lo,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Fi(),0,e,t)},useMemoCache:Ui,useCacheRefresh:Mo},Ko={readContext:Ts,use:Vi,useCallback:Co,useContext:Ts,useEffect:bo,useImperativeHandle:So,useInsertionEffect:wo,useLayoutEffect:xo,useMemo:To,useReducer:Wi,useRef:fo,useState:function(){return Wi(Bi)},useDebugValue:Eo,useDeferredValue:function(e,t){var n=Fi();return null===wi?No(n,e,t):_o(n,wi.memoizedState,e,t)},useTransition:function(){var e=Wi(Bi)[0],t=Fi().memoizedState;return["boolean"===typeof e?e:qi(e),t]},useSyncExternalStore:Gi,useId:Oo,useHostTransitionStatus:Lo,useFormState:po,useActionState:po,useOptimistic:function(e,t){var n=Fi();return null!==wi?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Ui,useCacheRefresh:Mo},Qo=null,Xo=0;function Yo(e){var t=Xo;return Xo+=1,null===Qo&&(Qo=[]),Ys(Qo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===p)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Ur(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===T&&ea(i)===t.type)?(Jo(t=s(t,n.props),n),t.return=e,t):(Jo(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Br(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Vr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return Jo(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case f:return(t=Br(t,e.mode,n)).return=e,t;case T:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||j(t))return(t=Vr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Yo(t),n);if(t.$$typeof===x)return h(e,Ns(e,t),n);Zo(e,t)}return null}function p(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===s?c(e,t,n,r):null;case f:return n.key===s?u(e,t,n,r):null;case T:return p(e,t,n=(s=n._init)(n._payload),r)}if(R(n)||j(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,Yo(n),r);if(n.$$typeof===x)return p(e,t,Ns(e,n),r);Zo(e,n)}return null}function y(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case f:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case T:return y(e,t,n,r=(0,r._init)(r._payload),s)}if(R(r)||j(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return y(e,t,n,Yo(r),s);if(r.$$typeof===x)return y(e,t,n,Ns(t,r),s);Zo(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===T&&ea(b)===c.type){n(l,c.sibling),Jo(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=Vr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Jo(d=qr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case f:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Br(u,l.mode,d)).return=l,l=d}return a(l);case T:return v(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(s,o,a,l){for(var c=null,u=null,d=o,m=o=0,f=null;null!==d&&m<a.length;m++){d.index>m?(f=d,d=null):f=d.sibling;var g=p(s,d,a[m],l);if(null===g){null===d&&(d=f);break}e&&d&&null===g.alternate&&t(s,d),o=i(g,o,m),null===u?c=g:u.sibling=g,u=g,d=f}if(m===a.length)return n(s,d),is&&Zr(s,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(s,a[m],l))&&(o=i(d,o,m),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,m),c}for(d=r(d);m<a.length;m++)null!==(f=y(d,s,m,a[m],l))&&(e&&null!==f.alternate&&d.delete(null===f.key?m:f.key),o=i(f,o,m),null===u?c=f:u.sibling=f,u=f);return e&&d.forEach(function(e){return t(s,e)}),is&&Zr(s,m),c}(l,c,u,d);if(j(u)){if("function"!==typeof(b=j(u)))throw Error(o(150));return function(s,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,m=a,f=a=0,g=null,v=l.next();null!==m&&!v.done;f++,v=l.next()){m.index>f?(g=m,m=null):g=m.sibling;var b=p(s,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(s,m),a=i(b,a,f),null===d?u=b:d.sibling=b,d=b,m=g}if(v.done)return n(s,m),is&&Zr(s,f),u;if(null===m){for(;!v.done;f++,v=l.next())null!==(v=h(s,v.value,c))&&(a=i(v,a,f),null===d?u=v:d.sibling=v,d=v);return is&&Zr(s,f),u}for(m=r(m);!v.done;f++,v=l.next())null!==(v=y(m,s,f,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?f:v.key),a=i(v,a,f),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),is&&Zr(s,f),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Yo(u),d);if(u.$$typeof===x)return v(l,c,Ns(l,u),d);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Ur(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Xo=0;var s=v(e,t,n,r);return Qo=null,s}catch(o){if(o===Hs||o===Gs)throw o;var i=Mr(29,o,null,e.mode);return i.lanes=r,i.return=e,i}}}var na=ta(!0),ra=ta(!1),sa=F(null),ia=null;function oa(e){var t=e.alternate;V(ua,1&ua.current),V(sa,e),null===ia&&(null===t||null!==pi.current||null!==t.memoizedState)&&(ia=e)}function aa(e){if(22===e.tag){if(V(ua,ua.current),V(sa,e),null===ia){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ia=e)}}else la()}function la(){V(ua,ua.current),V(sa,sa.current)}function ca(e){q(sa),ia===e&&(ia=null),q(ua)}var ua=F(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var pa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Mc(t,e,r),oi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Lc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Mc(t,e,r),oi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Lc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Mc(t,e,n),oi(t,e,n))}};function ma(e,t,n,r,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(s,i))}function fa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function ba(e){console.error(e)}function wa(e){ya(e)}function xa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Sa(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){xa(e,t)},n}function Ea(e){return(e=si(e)).tag=3,e}function Ca(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){ka(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,r),"function"!==typeof s&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ta=Error(o(461)),Na=!1;function _a(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Ia(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return Cs(t),r=Ai(e,t,n,o,i,s),a=Oi(),null===e||Na?(is&&a&&ts(t),t.flags|=1,_a(e,t,r,s),t.child):(Mi(e,t,s),Qa(e,t,s))}function ja(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Dr(i)||void 0!==i.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Aa(e,t,i,r,s))}if(i=e.child,!Xa(e,s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(o,r)&&e.ref===t.ref)return Qa(e,t,s)}return t.flags|=1,(e=zr(i,r)).ref=t.ref,e.return=t,t.child=e}function Aa(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(Na=!1,t.pendingProps=r=i,!Xa(e,s))return t.lanes=e.lanes,Qa(e,t,s);0!==(131072&e.flags)&&(Na=!0)}}return Oa(e,t,n,r,s)}function Pa(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Ra(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ra(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Bs(0,null!==i?i.cachePool:null),null!==i?fi(t,i):gi(),aa(t)}else null!==i?(Bs(0,i.cachePool),fi(t,i),la(),t.memoizedState=null):(null!==e&&Bs(0,null),gi(),la());return _a(e,t,s,n),t.child}function Ra(e,t,n,r){var s=Us();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Bs(0,null),gi(),aa(t),null!==e&&Ss(e,t,r,!0),null}function La(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Oa(e,t,n,r,s){return Cs(t),n=Ai(e,t,n,r,void 0,s),r=Oi(),null===e||Na?(is&&r&&ts(t),t.flags|=1,_a(e,t,n,s),t.child):(Mi(e,t,s),Qa(e,t,s))}function Ma(e,t,n,r,s,i){return Cs(t),t.updateQueue=null,n=Ri(t,r,n,s),Pi(e),r=Oi(),null===e||Na?(is&&r&&ts(t),t.flags|=1,_a(e,t,n,i),t.child):(Mi(e,t,i),Qa(e,t,i))}function Da(e,t,n,r,s){if(Cs(t),null===t.stateNode){var i=Lr,o=n.contextType;"object"===typeof o&&null!==o&&(i=Ts(o)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=pa,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Ts(o):Lr,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ha(t,n,o,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&pa.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,l=ga(n,a);i.props=l;var c=i.context,u=n.contextType;o=Lr,"object"===typeof u&&null!==u&&(o=Ts(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a||c!==o)&&fa(t,i,r,o),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,a||h!==c||ti?("function"===typeof d&&(ha(t,n,d,r),c=t.memoizedState),(l=ti||ma(t,n,l,r,h,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=o,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=ga(n,o=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Lr,"object"===typeof c&&null!==c&&(l=Ts(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&fa(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var p=t.memoizedState;o!==d||h!==p||ti||null!==e&&null!==e.dependencies&&Es(e.dependencies)?("function"===typeof a&&(ha(t,n,a,r),p=t.memoizedState),(u=ti||ma(t,n,u,r,h,p,l)||null!==e&&null!==e.dependencies&&Es(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,La(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,s),t.child=na(t,null,n,s)):_a(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Qa(e,t,s),e}function za(e,t,n,r){return ps(),t.flags|=256,_a(e,t,n,r),t.child}var Fa={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qa(e){return{baseLanes:e,cachePool:$s()}}function Va(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ua(e,t,n){var r,s=t.pendingProps,i=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?oa(t):la(),is){var l,c=ss;if(l=c){e:{for(l=c,c=as;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Yr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Mr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=s.children,s=s.fallback,i?(la(),c=$a({mode:"hidden",children:c},i=t.mode),s=Vr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=qa(n),i.childLanes=Va(e,r,n),t.memoizedState=Fa,s):(oa(t),Ba(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=Ha(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),i=s.fallback,c=t.mode,s=$a({mode:"visible",children:s.children},c),(i=Vr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,na(t,e.child,null,n),(s=t.child).memoizedState=qa(n),s.childLanes=Va(e,r,n),t.memoizedState=Fa,t=i);else if(oa(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(o(419))).stack="",s.digest=r,fs({value:s,source:null,stack:null}),t=Ha(e,t,n)}else if(Na||Ss(e,t,n,!1),r=0!==(n&e.childLanes),Na||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:_e(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Ar(e,s),Mc(r,e,s),Ta;"$?"===c.data||Gc(),t=Ha(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=yd(c.nextSibling),rs=t,is=!0,os=null,as=!1,null!==e&&(Kr[Qr++]=Yr,Kr[Qr++]=Jr,Kr[Qr++]=Xr,Yr=e.id,Jr=e.overflow,Xr=t),(t=Ba(t,s.children)).flags|=4096);return t}return i?(la(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=zr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=zr(u,i):(i=Vr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=qa(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=$s(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=Va(e,r,n),t.memoizedState=Fa,s):(oa(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ba(e,t){return(t=$a({mode:"visible",children:t},e.mode)).return=e,e.child=t}function $a(e,t){return(e=Mr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ha(e,t,n){return na(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Ga(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ka(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(V(ua,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ga(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===da(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ga(t,!0,n,null,i);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ss(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Es(e))}function Ya(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Na=!0;else{if(!Xa(e,n)&&0===(128&t.flags))return Na=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),bs(0,Ps,e.memoizedState.cache),ps();break;case 27:case 5:K(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(oa(t),null!==(e=Qa(e,t,n))?e.sibling:null);oa(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ss(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),V(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Pa(e,t,n);case 24:bs(0,Ps,e.memoizedState.cache)}return Qa(e,t,n)}(e,t,n);Na=0!==(131072&e.flags)}else Na=!1,is&&0!==(1048576&t.flags)&&es(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===k){t.tag=11,t=Ia(null,t,r,e,n);break e}if(s===C){t.tag=14,t=ja(null,t,r,e,n);break e}}throw t=P(r)||r,Error(o(306,t,""))}Dr(r)?(e=ga(r,e),t.tag=1,t=Da(null,t,r,e,n)):(t.tag=0,t=Oa(null,t,r,e,n))}return t;case 0:return Oa(e,t,t.type,t.pendingProps,n);case 1:return Da(e,t,r=t.type,s=ga(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var a=t.memoizedState;if(r=a.cache,bs(0,Ps,r),r!==i.cache&&ks(t,[Ps],n,!0),ci(),r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=za(e,t,r,n);break e}if(r!==s){fs(s=Er(Error(o(424)),t)),t=za(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=yd(e.firstChild),rs=t,is=!0,os=null,as=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===s){t=Qa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 26:return La(e,t),null===e?(n=_d(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=rd($.current).createElement(n))[Pe]=t,r[Re]=e,ed(r,n,e),He(r),t.stateNode=r):t.memoizedState=_d(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&is&&(r=t.stateNode=wd(t.type,t.pendingProps,$.current),rs=t,as=!0,s=ss,pd(t.type)?(vd=s,ss=yd(r.firstChild)):ss=s),_a(e,t,t.pendingProps.children,n),La(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Fe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,as))?(t.stateNode=r,rs=t,ss=yd(r.firstChild),as=!1,s=!0):s=!1),s||cs(t)),K(t),s=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,r=i.children,od(s,i)?r=null:null!==a&&od(s,a)&&(t.flags|=32),null!==t.memoizedState&&(s=Ai(e,t,Li,null,null,n),Kd._currentValue=s),La(e,t),_a(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,as))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Ua(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):_a(e,t,r,n),t.child;case 11:return Ia(e,t,t.type,t.pendingProps,n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bs(0,t.type,r.value),_a(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Cs(t),r=r(s=Ts(s)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return ja(e,t,t.type,t.pendingProps,n);case 15:return Aa(e,t,t.type,t.pendingProps,n);case 19:return Ka(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=$a(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=zr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Pa(e,t,n);case 24:return Cs(t),r=Ts(Ps),null===e?(null===(s=Us())&&(s=rc,i=Rs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),bs(0,Ps,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ps,r)):(r=i.cache,bs(0,Ps,r),r!==s.cache&&ks(t,[Ps],n,!0))),_a(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Vd(t)){if(null!==(t=sa.current)&&((4194048&ic)===ic?null!==ia:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ia))throw Js=Ks,Ws;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ws(Ps),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ms())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=$.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=U.current,hs(t)?us(t):(e=wd(s,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=U.current,hs(t))us(t);else{switch(s=rd($.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Pe]=t,e[Re]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=$.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Xu(e.nodeValue,n)))||cs(t)}else(e=rd(e).createTextNode(r))[Pe]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[Pe]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ms(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&qu(t.stateNode.containerInfo),nl(t),null;case 10:return ws(t.type),nl(t),null;case 19:if(q(ua),null===(s=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=da(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Fr(n,e),n=n.sibling;return V(ua,1&ua.current|2),t.child}e=e.sibling}null!==s.tail&&te()>kc&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=ua.current,V(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),yi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&q(Vs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(Ps),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(Ps),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return q(ua),null;case 4:return G(),null;case 10:return ws(t.type),null;case 22:case 23:return ca(t),yi(),null!==e&&q(Vs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(Ps),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:ws(Ps),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:ca(t);break;case 19:q(ua);break;case 10:ws(t.type);break;case 22:case 23:ca(t),yi(),null!==e&&q(Vs);break;case 24:ws(Ps)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==s)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,s=t;var l=n,c=a;try{c()}catch(u){uu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function pl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,a=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||Ju(e,t,m,null,r,h)}}for(var p in r){var m=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=m||null!=h))switch(p){case"type":i=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":a=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(o(137,t));break;default:m!==h&&Ju(e,t,p,m,r,h)}}return void gt(e,a,l,c,u,d,i,s);case"select":for(i in m=a=l=p=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||Ju(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&Ju(e,t,s,i,r,c)}return t=l,n=a,r=m,void(null!=p?bt(e,!!n,p,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=p=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,s)}for(a in r)if(s=r[a],i=n[a],r.hasOwnProperty(a)&&(null!=s||null!=i))switch(a){case"value":p=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==i&&Ju(e,t,a,s,r,i)}return void wt(e,p,m);case"option":for(var f in n)if(p=n[f],n.hasOwnProperty(f)&&null!=p&&!r.hasOwnProperty(f))if("selected"===f)e.selected=!1;else Ju(e,t,f,null,r,p);for(c in r)if(p=r[c],m=n[c],r.hasOwnProperty(c)&&p!==m&&(null!=p||null!=m))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Ju(e,t,c,p,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,p);for(u in r)if(p=r[u],m=n[u],r.hasOwnProperty(u)&&p!==m&&(null!=p||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:Ju(e,t,u,p,r,m)}return;default:if(Tt(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,p);for(d in r)p=r[d],m=n[d],!r.hasOwnProperty(d)||p===m||void 0===p&&void 0===m||Zu(e,t,d,p,r,m);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&Ju(e,t,v,null,r,p);for(h in r)p=r[h],m=n[h],!r.hasOwnProperty(h)||p===m||null==p&&null==m||Ju(e,t,h,p,r,m)}(r,e.type,n,t),r[Re]=t}catch(s){uu(e,e.return,s)}}function ml(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&pd(e.type)||4===e.tag}function fl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ml(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&pd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Yu));else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&pd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,r,n),t[Pe]=e,t[Re]=n}catch(i){uu(e,e.return,i)}}var bl=!1,wl=!1,xl=!1,kl="function"===typeof WeakSet?WeakSet:Set,Sl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Dl(e,n),4&r&&ol(5,n);break;case 1:if(Dl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var s=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Dl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Dl(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Dl(e,n);break;case 13:Dl(e,n),4&r&&jl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=mu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,s=bl;var i=wl;bl=r,(wl=t)&&!i?Fl(e,n,0!==(8772&n.subtreeFlags)):Dl(e,n),bl=s,wl=i}break;case 30:break;default:Dl(e,n)}}function Cl(e){var t=e.alternate;null!==t&&(e.alternate=null,Cl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Nl=!1;function _l(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wl||dl(n,t),_l(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Tl,s=Nl;pd(n.type)&&(Tl=n.stateNode,Nl=!1),_l(e,t,n),xd(n.stateNode),Tl=r,Nl=s;break;case 5:wl||dl(n,t);case 6:if(r=Tl,s=Nl,Tl=null,_l(e,t,n),Nl=s,null!==(Tl=r))if(Nl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Tl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Tl&&(Nl?(md(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nh(e)):md(Tl,n.stateNode));break;case 4:r=Tl,s=Nl,Tl=n.stateNode.containerInfo,Nl=!0,_l(e,t,n),Tl=r,Nl=s;break;case 0:case 11:case 14:case 15:wl||al(2,n,t),wl||al(4,n,t),_l(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),_l(e,t,n);break;case 21:_l(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,_l(e,t,n),wl=r;break;default:_l(e,t,n)}}function jl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nh(e)}catch(n){uu(t,t.return,n)}}function Al(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=fu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Pl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(pd(l.type)){Tl=l.stateNode,Nl=!1;break e}break;case 5:Tl=l.stateNode,Nl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Tl)throw Error(o(160));Il(i,a,s),Tl=null,Nl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ll(t,e),t=t.sibling}var Rl=null;function Ll(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),Ol(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:Pl(t,e),Ol(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Rl;if(Pl(t,e),Ol(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Fe]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),ed(i,r,n),i[Pe]=e,He(i),r=i;break e;case"link":var a=Fd("link","href",s).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((i=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(a=Fd("meta","content",s).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((i=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(o(468,r))}i[Pe]=e,He(i),r=i}e.stateNode=r}else qd(s,e.type,e.stateNode);else e.stateNode=Ld(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?qd(s,e.type,e.stateNode):Ld(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pl(t,e),Ol(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&pl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pl(t,e),Ol(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{kt(s,"")}catch(m){uu(e,e.return,m)}}4&r&&null!=e.stateNode&&pl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(xl=!0);break;case 6:if(Pl(t,e),Ol(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){uu(e,e.return,m)}}break;case 3:if(zd=null,s=Rl,Rl=Ed(t.containerInfo),Pl(t,e),Rl=s,Ol(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nh(t.containerInfo)}catch(m){uu(e,e.return,m)}xl&&(xl=!1,Ml(e));break;case 4:r=Rl,Rl=Ed(e.stateNode.containerInfo),Pl(t,e),Ol(e),Rl=r;break;case 12:default:Pl(t,e),Ol(e);break;case 13:Pl(t,e),Ol(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=wl;if(bl=u||s,wl=d||c,Pl(t,e),wl=d,bl=u,Ol(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||bl||wl||zl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){uu(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(m){uu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Al(e,n))));break;case 19:Pl(t,e),Ol(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Al(e,r)));case 30:case 21:}}function Ol(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(ml(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var s=n.stateNode;yl(e,fl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(kt(i,""),n.flags&=-33),yl(e,fl(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,fl(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Dl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function zl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),zl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),zl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),zl(t);break;case 22:null===t.memoizedState&&zl(t);break;default:zl(t)}e=e.sibling}}function Fl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Fl(s,i,n),ol(4,i);break;case 1:if(Fl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var a=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],a)}catch(c){uu(r,r.return,c)}}n&&64&o&&ll(i),ul(i,i.return);break;case 27:vl(i);case 26:case 5:Fl(s,i,n),n&&null===r&&4&o&&hl(i),ul(i,i.return);break;case 12:Fl(s,i,n);break;case 13:Fl(s,i,n),n&&4&o&&jl(s,i);break;case 22:null===i.memoizedState&&Fl(s,i,n),ul(i,i.return);break;case 30:break;default:Fl(s,i,n)}t=t.sibling}}function ql(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ls(n))}function Vl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e))}function Ul(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Bl(e,t,n,r),t=t.sibling}function Bl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Ul(e,t,n,r),2048&s&&ol(9,t);break;case 1:case 13:default:Ul(e,t,n,r);break;case 3:Ul(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ls(e)));break;case 12:if(2048&s){Ul(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,a=i.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Ul(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Ul(e,t,n,r):Hl(e,t):2&i._visibility?Ul(e,t,n,r):(i._visibility|=2,$l(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&ql(o,t);break;case 24:Ul(e,t,n,r),2048&s&&Vl(t.alternate,t)}}function $l(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:$l(i,o,a,l,s),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?$l(i,o,a,l,s):Hl(i,o):(u._visibility|=2,$l(i,o,a,l,s)),s&&2048&c&&ql(o.alternate,o);break;case 24:$l(i,o,a,l,s),s&&2048&c&&Vl(o.alternate,o);break;default:$l(i,o,a,l,s)}t=t.sibling}}function Hl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Hl(n,r),2048&s&&ql(r.alternate,r);break;case 24:Hl(n,r),2048&s&&Vl(r.alternate,r);break;default:Hl(n,r)}t=t.sibling}}var Wl=8192;function Gl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Gl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===Ud)throw Error(o(475));var r=Ud;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Id(n.href),i=e.querySelector(jd(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=$d.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void He(i);i=e.ownerDocument||e,n=Ad(n),(s=kd.get(s))&&Md(n,s),He(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=$d.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Rl,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Rl;Rl=Ed(e.stateNode.containerInfo),Gl(e),Rl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Gl(e),Wl=t):Gl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Xl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 0:case 11:case 15:Xl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Xl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Xl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ls(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var s=(r=Sl).sibling,i=r.return;if(Cl(r),r===n){Sl=null;break e}if(null!==s){s.return=i,Sl=s;break e}Sl=i}}}var ec={getCacheForType:function(e){var t=Ts(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ic=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,pc=0,mc=0,fc=0,gc=0,yc=0,vc=null,bc=null,wc=!1,xc=0,kc=1/0,Sc=null,Ec=null,Cc=0,Tc=null,Nc=null,_c=0,Ic=0,jc=null,Ac=null,Pc=0,Rc=null;function Lc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==L.T){return 0!==Ds?Ds:Iu()}return je()}function Oc(){0===gc&&(gc=0===(536870912&ic)||is?ke():536870912);var e=sa.current;return null!==e&&(e.flags|=32),gc}function Mc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Bc(e,0),qc(e,ic,gc,!1)),Ce(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(mc|=n),4===hc&&qc(e,ic,gc,!1)),ku(e))}function Dc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=Hc(),s=Wc();rc!==e||ic!==t?(Sc=null,kc=te()+500,Bc(e,t)):cc=we(e,t);e:for(;;)try{if(0!==oc&&null!==sc){t=sc;var i=ac;t:switch(oc){case 1:oc=0,ac=null,Zc(e,t,i,1);break;case 2:case 9:if(Qs(i)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),ku(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Qs(i)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,Zc(e,t,i,7));break;case 5:var a=null;switch(sc.tag){case 26:a=sc.memoizedState;case 5:case 27:var l=sc;if(!a||Vd(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}oc=0,ac=null,Zc(e,t,i,5);break;case 6:oc=0,ac=null,Zc(e,t,i,6);break;case 8:Uc(),hc=6;break e;default:throw Error(o(462))}}Xc();break}catch(d){$c(e,d)}return vs=ys=null,L.H=r,L.A=s,nc=n,null!==sc?0:(rc=null,ic=0,_r(),hc)}(e,t):Kc(e,t,!0),i=r;;){if(0===s){cc&&!r&&qc(e,t,0,!1);break}if(n=e.current.alternate,!i||Fc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;s=vc;var c=l.current.memoizedState.isDehydrated;if(c&&(Bc(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,mc|=i,s=4;break e}i=bc,bc=s,null!==i&&(null===bc?bc=i:bc.push.apply(bc,i))}s=a}if(i=!1,2!==s)continue}}if(1===s){Bc(e,0),qc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:qc(r,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(s=xc+300-te())){if(qc(r,t,gc,!lc),0!==be(r,0,!0))break e;r.timeoutHandle=ld(zc.bind(null,r,n,bc,Sc,wc,t,gc,mc,yc,lc,i,2,-0,0),s)}else zc(r,n,bc,Sc,wc,t,gc,mc,yc,lc,i,0,-0,0)}break}s=Kc(e,t,!1),i=!1}ku(e)}function zc(e,t,n,r,s,i,a,l,c,u,d,h,p,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Ud={stylesheets:null,count:0,unsuspend:Bd},Kl(t),null!==(h=function(){if(null===Ud)throw Error(o(475));var e=Ud;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,s,a,l,c,d,1,p,m)),void qc(e,i,a,!u);nu(e,t,i,n,r,s,a,l,c)}function Fc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qn(i(),s))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qc(e,t,n,r){t&=~fc,t&=~mc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-pe(s),o=1<<i;r[i]=-1,s&=~o}0!==n&&Te(e,n,t)}function Vc(){return 0!==(6&nc)||(Su(0,!1),!1)}function Uc(){if(null!==sc){if(0===oc)var e=sc.return;else vs=ys=null,Di(e=sc),Qo=null,Xo=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function Bc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Uc(),rc=e,sc=n=zr(e.current,null),ic=t,oc=0,ac=null,lc=!1,cc=we(e,t),uc=!1,yc=gc=fc=mc=pc=hc=0,bc=vc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-pe(r),i=1<<s;t|=e[s],r&=~i}return dc=t,_r(),n}function $c(e,t){bi=null,L.H=Ho,t===Hs||t===Gs?(t=Zs(),oc=3):t===Ws?(t=Zs(),oc=4):oc=t===Ta?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===sc&&(hc=1,xa(e,Er(t,e.current)))}function Hc(){var e=L.H;return L.H=Ho,null===e?Ho:e}function Wc(){var e=L.A;return L.A=ec,e}function Gc(){hc=4,lc||(4194048&ic)!==ic&&null!==sa.current||(cc=!0),0===(134217727&pc)&&0===(134217727&mc)||null===rc||qc(rc,ic,gc,!1)}function Kc(e,t,n){var r=nc;nc|=2;var s=Hc(),i=Wc();rc===e&&ic===t||(Sc=null,Bc(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==oc&&null!==sc){var a=sc,l=ac;switch(oc){case 8:Uc(),o=6;break e;case 3:case 2:case 9:case 6:null===sa.current&&(t=!0);var c=oc;if(oc=0,ac=null,Zc(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,Zc(e,a,l,c)}}Qc(),o=hc;break}catch(u){$c(e,u)}return t&&e.shellSuspendCounter++,vs=ys=null,nc=r,L.H=s,L.A=i,null===sc&&(rc=null,ic=0,_r()),o}function Qc(){for(;null!==sc;)Yc(sc)}function Xc(){for(;null!==sc&&!Z();)Yc(sc)}function Yc(e){var t=Ya(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ma(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Ma(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Di(t);default:il(n,t),t=Ya(n,t=sc=Fr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Zc(e,t,n,r){vs=ys=null,Di(t),Qo=null,Xo=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ss(t,n,s,!0),null!==(n=sa.current)){switch(n.tag){case 13:return null===ia?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Ks?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,s)),!1;case 22:return n.flags|=65536,r===Ks?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,s)),!1}throw Error(o(435,n.tag))}return du(e,r,s),Gc(),!1}if(is)return null!==(t=sa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&fs(Er(e=Error(o(422),{cause:r}),n))):(r!==ls&&fs(Er(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Er(r,n),ai(e,s=Sa(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var i=Error(o(520),{cause:r});if(i=Er(i,n),null===vc?vc=[i]:vc.push(i),4!==hc&&(hc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ai(n,e=Sa(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ec||!Ec.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Ca(s=Ea(s),e,n,r),ai(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,xa(e,Er(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,xa(e,Er(n,e.current)),void(sc=null)}32768&t.flags?(is||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=sa.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,r,s,i,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==Cc);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-pe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Te(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=Nr,a,l,c),e===rc&&(sc=rc=null,ic=0),Nc=t,Tc=e,_c=n,Ic=i,jc=s,Ac=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,Y(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=L.T,L.T=null,s=O.p,O.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==i||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++u===s&&(l=a),p===i&&++d===r&&(c=a),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(i=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var f=ga(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(f,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))fd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nc=a,O.p=s,L.T=r}}Cc=1,ru(),su(),iu()}}function ru(){if(1===Cc){Cc=0;var e=Tc,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=L.T,L.T=null;var r=O.p;O.p=2;var s=nc;nc|=4;try{Ll(t,e);var i=nd,o=er(e.containerInfo),a=i.focusedElem,l=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),m=a.textContent.length,f=Math.min(l.start,m),g=void 0===l.end?f:Math.min(l.end,m);!p.extend&&f>g&&(o=g,g=f,f=o);var y=Jn(a,f),v=Jn(a,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),f>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=a;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=s,O.p=r,L.T=n}}e.current=t,Cc=2}}function su(){if(2===Cc){Cc=0;var e=Tc,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=L.T,L.T=null;var r=O.p;O.p=2;var s=nc;nc|=4;try{El(e,t.alternate,t)}finally{nc=s,O.p=r,L.T=n}}Cc=3}}function iu(){if(4===Cc||3===Cc){Cc=0,ee();var e=Tc,t=Nc,n=_c,r=Ac;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Cc=5:(Cc=0,Nc=Tc=null,ou(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Ec=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=L.T,s=O.p,O.p=2,L.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];i(a.value,{componentStack:a.stack})}}finally{L.T=t,O.p=s}}0!==(3&_c)&&au(),ku(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Rc?Pc++:(Pc=0,Rc=e):Pc=0,Su(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ls(t)))}function au(e){return ru(),su(),iu(),lu()}function lu(){if(5!==Cc)return!1;var e=Tc,t=Ic;Ic=0;var n=Ie(_c),r=L.T,s=O.p;try{O.p=32>n?32:n,L.T=null,n=jc,jc=null;var i=Tc,a=_c;if(Cc=0,Nc=Tc=null,_c=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Yl(i.current),Bl(i,i.current,a,n),nc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{O.p=s,L.T=r,ou(e,t)}}function cu(e,t,n){t=Er(n,t),null!==(e=ii(e,t=Sa(e.stateNode,t,2),2))&&(Ce(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Er(n,e),null!==(r=ii(t,n=Ea(2),2))&&(Ca(n,r,t,e),Ce(r,2),ku(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-xc?0===(2&nc)&&Bc(e,0):fc|=n,yc===ic&&(yc=0)),ku(e)}function pu(e,t){0===t&&(t=Se()),null!==(e=Ar(e,t))&&(Ce(e,t),ku(e))}function mu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),pu(e,n)}function fu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),pu(e,n)}var gu=null,yu=null,vu=!1,bu=!1,wu=!1,xu=0;function ku(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),bu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?Y(re,Eu):Cu()}))}function Su(e,t){if(!wu&&bu){wu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var o=r.suspendedLanes,a=r.pingedLanes;i=(1<<31-pe(42|e)+1)-1,i=201326741&(i&=s&~(o&~a))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,_u(r,i))}else i=ic,0===(3&(i=be(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,i)||(n=!0,_u(r,i));r=r.next}}while(n);wu=!1}}function Eu(){Cu()}function Cu(){bu=vu=!1;var e=0;0!==xu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=xu),xu=0);for(var t=te(),n=null,r=gu;null!==r;){var s=r.next,i=Tu(r,t);0===i?(r.next=null,null===n?gu=s:n.next=s,null===s&&(yu=n)):(n=r,(0!==e||0!==(3&i))&&(bu=!0)),r=s}Su(e,!1)}function Tu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-pe(i),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&r)||(s[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}if(n=ic,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ie(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=ae}return r=Nu.bind(null,e),n=Y(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==Cc&&5!==Cc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=be(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Dc(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function _u(e,t){if(au())return null;Dc(e,t,!0)}function Iu(){return 0===xu&&(xu=ke()),xu}function ju(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Au(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Pu=0;Pu<xr.length;Pu++){var Ru=xr[Pu];kr(Ru.toLowerCase(),"on"+(Ru[0].toUpperCase()+Ru.slice(1)))}kr(pr,"onAnimationEnd"),kr(mr,"onAnimationIteration"),kr(fr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ou=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Lu));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){ya(u)}s.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){ya(u)}s.currentTarget=null,i=l}}}}function Du(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(Vu(t,e,2,!1),n.add(r))}function zu(e,t,n){var r=0;t&&(r|=4),Vu(n,e,r,t)}var Fu="_reactListening"+Math.random().toString(36).slice(2);function qu(e){if(!e[Fu]){e[Fu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Ou.has(t)||zu(t,!1,e),zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fu]||(t[Fu]=!0,zu("selectionchange",!1,t))}}function Vu(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Ft||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Uu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==a;){if(null===(o=Ve(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}a=a.parentNode}}r=r.return}Mt(function(){var r=i,s=At(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===Ht(n))break e;case"keydown":case"keyup":c=fn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case pr:case mr:case fr:c=an;break;case br:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==a?a+"Capture":null:a;d=[];for(var m,f=r;null!==f;){var g=f;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===p||null!=(g=Dt(f,p))&&d.push(Bu(f,g,m)),h)break;f=f.return}0<d.length&&(a=new c(a,u,null,n,s),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===jt||!(u=n.relatedTarget||n.fromElement)||!Ve(u)&&!u[Le])&&(c||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Ve(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",p="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",p="onPointerEnter",f="pointer"),h=null==c?a:Be(c),m=null==u?a:Be(u),(a=new d(g,f+"leave",c,n,s)).target=h,a.relatedTarget=m,g=null,Ve(s)===r&&((d=new d(p,f+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(p=u,f=0,m=d=c;m;m=Hu(m))f++;for(m=0,g=p;g;g=Hu(g))m++;for(;0<f-m;)d=Hu(d),f--;for(;0<m-f;)p=Hu(p),m--;for(;f--;){if(d===p||null!==p&&d===p.alternate)break e;d=Hu(d),p=Hu(p)}d=null}else d=null;null!==c&&Wu(o,a,c,d,!1),null!==u&&null!==h&&Wu(o,h,u,d,!0)}if("select"===(c=(a=r?Be(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=zn;else if(Pn(a))if(Fn)y=Kn;else{y=Wn;var v=Hn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Tt(r.elementType)&&(y=zn):y=Gn;switch(y&&(y=y(e,r))?Rn(o,y,n,s):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?Be(r):window,e){case"focusin":(Pn(v)||"true"===v.contentEditable)&&(rr=v,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,s)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?_n(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(b=$t()):(Ut="value"in(Vt=s)?Vt.value:Vt.textContent,jn=!0)),0<(v=$u(r,w)).length&&(w=new cn(w,e,null,n,s),o.push({event:w,listeners:v}),b?w.data=b:null!==(b=In(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Nn=!0,Tn);case"textInput":return(e=t.data)===Tn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!kn&&_n(e,t)?(e=$t(),Bt=Ut=Vt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=$u(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,s),o.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=ju((s[Re]||null).action),o=r.submitter;o&&null!==(t=(t=o[Re]||null)?ju(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var a=new Zt("action","action",null,r,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=o?Au(s,o):new FormData(s);Ao(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(a.preventDefault(),e=o?Au(s,o):new FormData(s),Ao(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(o,e,r,n,s)}Mu(o,t)})}function Bu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function $u(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Dt(e,n))&&r.unshift(Bu(e,s,i)),null!=(s=Dt(e,t))&&r.push(Bu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function Hu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wu(e,t,n,r,s){for(var i=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,s?null!=(c=Dt(n,i))&&o.unshift(Bu(n,c,l)):s||null!=(c=Dt(n,i))&&o.push(Bu(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Ku,"")}function Xu(e,t){return t=Qu(t),Qu(e)===t}function Yu(){}function Ju(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":Ct(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ju(e,t,"name",s.name,s,null),Ju(e,t,"formEncType",s.formEncType,s,null),Ju(e,t,"formMethod",s.formMethod,s,null),Ju(e,t,"formTarget",s.formTarget,s,null)):(Ju(e,t,"encType",s.encType,s,null),Ju(e,t,"method",s.method,s,null),Ju(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Yu);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Du("beforetoggle",e),Du("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Nt.get(n)||n,r)}}function Zu(e,t,n,r,s,i){switch(n){case"style":Ct(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Du("scroll",e);break;case"onScrollEnd":null!=r&&Du("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Yu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Re]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Du("error",e),Du("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,r,a,n,null)}}return i&&Ju(e,t,"srcSet",n.srcSet,n,null),void(s&&Ju(e,t,"src",n.src,n,null));case"input":Du("invalid",e);var l=r=a=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Ju(e,t,s,d,n,null)}}return yt(e,r,l,c,u,a,i,!1),void dt(e);case"select":for(i in Du("invalid",e),s=a=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Ju(e,t,i,l,n,null)}return t=r,n=a,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(a in Du("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return xt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Ju(e,t,c,s,n,null);return;case"dialog":Du("beforetoggle",e),Du("toggle",e),Du("cancel",e),Du("close",e);break;case"iframe":case"object":Du("load",e);break;case"video":case"audio":for(s=0;s<Lu.length;s++)Du(Lu[s],e);break;case"image":Du("error",e),Du("load",e);break;case"details":Du("toggle",e);break;case"embed":case"source":case"link":Du("error",e),Du("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,s,n,null)}return;default:if(Tt(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Zu(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Ju(e,t,l,s,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function pd(e){return"head"===e}function md(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&xd(o.documentElement),2&n&&xd(o.body),4&n)for(xd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Fe]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===s)return e.removeChild(i),void Nh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Nh(t)}function fd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":fd(n),qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);qe(e)}var kd=new Map,Sd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Cd=O.d;O.d={f:function(){var e=Cd.f(),t=Vc();return e||t},r:function(e){var t=Ue(e);null!==t&&5===t.tag&&"form"===t.type?Ro(t):Cd.r(e)},D:function(e){Cd.D(e),Nd("dns-prefetch",e,null)},C:function(e,t){Cd.C(e,t),Nd("preconnect",e,t)},L:function(e,t,n){Cd.L(e,t,n);var r=Td;if(r&&e&&t){var s='link[rel="preload"][as="'+ft(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+ft(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+ft(n.imageSizes)+'"]')):s+='[href="'+ft(e)+'"]';var i=s;switch(t){case"style":i=Id(e);break;case"script":i=Pd(e)}kd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(jd(i))||"script"===t&&r.querySelector(Rd(i))||(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}},m:function(e,t){Cd.m(e,t);var n=Td;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+ft(r)+'"][href="'+ft(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Pd(e)}if(!kd.has(i)&&(e=h({rel:"modulepreload",href:e},t),kd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Rd(i)))return}ed(r=n.createElement("link"),"link",e),He(r),n.head.appendChild(r)}}},X:function(e,t){Cd.X(e,t);var n=Td;if(n&&e){var r=$e(n).hoistableScripts,s=Pd(e),i=r.get(s);i||((i=n.querySelector(Rd(s)))||(e=h({src:e,async:!0},t),(t=kd.get(s))&&Dd(e,t),He(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){Cd.S(e,t,n);var r=Td;if(r&&e){var s=$e(r).hoistableStyles,i=Id(e);t=t||"default";var o=s.get(i);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(jd(i)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(i))&&Md(e,n);var l=o=r.createElement("link");He(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Od(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(i,o)}}},M:function(e,t){Cd.M(e,t);var n=Td;if(n&&e){var r=$e(n).hoistableScripts,s=Pd(e),i=r.get(s);i||((i=n.querySelector(Rd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(s))&&Dd(e,t),He(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Td="undefined"===typeof document?null:document;function Nd(e,t,n){var r=Td;if(r&&"string"===typeof t&&t){var s=ft(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Sd.has(s)||(Sd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(ed(t=r.createElement("link"),"link",e),He(t),r.head.appendChild(t)))}}function _d(e,t,n,r){var s,i,a,l,c=(c=$.current)?Ed(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Id(n.href),(r=(n=$e(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Id(n.href);var u=$e(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(jd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(s=c,i=e,a=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",a),He(i),s.head.appendChild(i))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Pd(n),(r=(n=$e(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Id(e){return'href="'+ft(e)+'"'}function jd(e){return'link[rel="stylesheet"]['+e+"]"}function Ad(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Pd(e){return'[src="'+ft(e)+'"]'}function Rd(e){return"script[async]"+e}function Ld(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+ft(n.href)+'"]');if(r)return t.instance=r,He(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return He(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",s),Od(r,n.precedence,e),t.instance=r;case"stylesheet":s=Id(n.href);var i=e.querySelector(jd(s));if(i)return t.state.loading|=4,t.instance=i,He(i),i;r=Ad(n),(s=kd.get(s))&&Md(r,s),He(i=(e.ownerDocument||e).createElement("link"));var a=i;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ed(i,"link",r),t.state.loading|=4,Od(i,n.precedence,e),t.instance=i;case"script":return i=Pd(n.src),(s=e.querySelector(Rd(i)))?(t.instance=s,He(s),s):(r=n,(s=kd.get(i))&&Dd(r=h({},n),s),He(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Od(r,n.precedence,e));return t.instance}function Od(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)i=a;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Dd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var zd=null;function Fd(e,t,n){if(null===zd){var r=new Map,s=zd=new Map;s.set(n,r)}else(r=(s=zd).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Fe]||i[Pe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(i):r.set(o,[i])}}return r}function qd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Vd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Ud=null;function Bd(){}function $d(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Hd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Hd=new Map,t.forEach(Gd,e),Hd=null,$d.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=Hd.get(e);if(n)var r=n.get(null);else{n=new Map,Hd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var o=s[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(s=t.instance).getAttribute("data-precedence"),(i=n.get(o)||r)===r&&n.set(null,s),n.set(o,s),this.count++,r=$d.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Kd={$$typeof:x,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function Qd(e,t,n,r,s,i,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Xd(e,t,n,r,s,i,o,a,l,c,u,d){return e=new Qd(e,t,n,o,a,l,c,d),t=1,!0===i&&(t|=24),i=Mr(3,null,null,t),e.current=i,i.stateNode=e,(t=Rs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Yd(e){return e?e=Lr:Lr}function Jd(e,t,n,r,s,i){s=Yd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Mc(n,0,t),oi(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Mc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=L.T;L.T=null;var i=O.p;try{O.p=2,ih(e,t,n,r)}finally{O.p=i,L.T=s}}function sh(e,t,n,r){var s=L.T;L.T=null;var i=O.p;try{O.p=8,ih(e,t,n,r)}finally{O.p=i,L.T=s}}function ih(e,t,n,r){if(nh){var s=oh(r);if(null===s)Uu(e,t,r,ah,n),vh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,s),!0;case"dragenter":return hh=bh(hh,e,t,n,r,s),!0;case"mouseover":return ph=bh(ph,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return mh.set(i,bh(mh.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,fh.set(i,bh(fh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==s;){var i=Ue(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=ve(i.pendingLanes);if(0!==o){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-pe(o);a.entanglements[1]|=l,o&=~l}ku(i),0===(6&nc)&&(kc=te()+500,Su(0,!1))}}break;case 13:null!==(a=Ar(i,2))&&Mc(a,0,2),Vc(),eh(i,2)}if(null===(i=oh(r))&&Uu(e,t,r,ah,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Uu(e,t,r,null,n)}}function oh(e){return lh(e=At(e))}var ah=null;function lh(e){if(ah=null,null!==(e=Ve(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ah=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,ph=null,mh=new Map,fh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":ph=null;break;case"pointerover":case"pointerout":mh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(t.pointerId)}}function bh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Ue(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wh(e){var t=Ve(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,function(){if(13===n.tag){var e=Lc();e=_e(e);var t=Ar(n,e);null!==t&&Mc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Ue(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);jt=r,n.target.dispatchEvent(r),jt=null,t.shift()}return!0}function kh(e,t,n){xh(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==ph&&xh(ph)&&(ph=null),mh.forEach(kh),fh.forEach(kh)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var Ch=null;function Th(e){Ch!==e&&(Ch=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ch===e&&(Ch=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=Ue(n);null!==i&&(e.splice(t,3),t-=3,Ao(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Nh(e){function t(t){return Eh(t,e)}null!==dh&&Eh(dh,e),null!==hh&&Eh(hh,e),null!==ph&&Eh(ph,e),mh.forEach(t),fh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],o=s[Re]||null;if("function"===typeof i)o||Th(n);else if(o){var a=null;if(i&&i.hasAttribute("formAction")){if(s=i,o=i[Re]||null)a=o.formAction;else if(null!==lh(s))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Th(n)}}}function _h(e){this._internalRoot=e}function Ih(e){this._internalRoot=e}Ih.prototype.render=_h.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jd(t.current,Lc(),e,t,null,null)},Ih.prototype.unmount=_h.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),Vc(),t[Le]=null}},Ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=je();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var jh=s.version;if("19.1.1"!==jh)throw Error(o(527,jh,"19.1.1"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ah={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ph.isDisabled&&Ph.supportsFiber)try{ue=Ph.inject(Ah),de=Ph}catch(Lh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",s=va,i=ba,l=wa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Xd(e,1,!1,null,0,n,r,s,i,l,0,null),e[Le]=t.current,qu(e),new _h(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,s="",i=va,l=ba,c=wa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Xd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Yd(null),n=t.current,(s=si(r=_e(r=Lc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,Ce(t,n),ku(t),e[Le]=t.current,qu(e),new Ih(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},232:(e,t,n)=>{n.d(t,{MF:()=>ue,j6:()=>ie,xZ:()=>oe,om:()=>se,Sx:()=>he,Wp:()=>de,KO:()=>pe});var r=n(606),s=n(965),i=n(776);let o,a;const l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap;let p={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function m(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),g(l.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(y(this),t,...r);return u.set(i,t.sort?t.sort():[t]),g(i)}}function f(e){return"function"===typeof e?m(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});c.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,p):e);var t}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(g(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&l.set(t,e)}).catch(()=>{}),h.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=f(e);return t!==e&&(d.set(e,t),h.set(t,e)),t}const y=e=>h.get(e);const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!v.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return w.set(t,i),i}p=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(p);class k{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const S="@firebase/app",E="0.14.0",C=new s.Vy("@firebase/app"),T="@firebase/app-compat",N="@firebase/analytics-compat",_="@firebase/analytics",I="@firebase/app-check-compat",j="@firebase/app-check",A="@firebase/auth",P="@firebase/auth-compat",R="@firebase/database",L="@firebase/data-connect",O="@firebase/database-compat",M="@firebase/functions",D="@firebase/functions-compat",z="@firebase/installations",F="@firebase/installations-compat",q="@firebase/messaging",V="@firebase/messaging-compat",U="@firebase/performance",B="@firebase/performance-compat",$="@firebase/remote-config",H="@firebase/remote-config-compat",W="@firebase/storage",G="@firebase/storage-compat",K="@firebase/firestore",Q="@firebase/ai",X="@firebase/firestore-compat",Y="firebase",J="[DEFAULT]",Z={[S]:"fire-core",[T]:"fire-core-compat",[_]:"fire-analytics",[N]:"fire-analytics-compat",[j]:"fire-app-check",[I]:"fire-app-check-compat",[A]:"fire-auth",[P]:"fire-auth-compat",[R]:"fire-rtdb",[L]:"fire-data-connect",[O]:"fire-rtdb-compat",[M]:"fire-fn",[D]:"fire-fn-compat",[z]:"fire-iid",[F]:"fire-iid-compat",[q]:"fire-fcm",[V]:"fire-fcm-compat",[U]:"fire-perf",[B]:"fire-perf-compat",[$]:"fire-rc",[H]:"fire-rc-compat",[W]:"fire-gcs",[G]:"fire-gcs-compat",[K]:"fire-fst",[X]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[Y]:"fire-js-all"},ee=new Map,te=new Map,ne=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){C.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function se(e){const t=e.name;if(ne.has(t))return C.debug(`There were multiple attempts to register component ${t}.`),!1;ne.set(t,e);for(const n of ee.values())re(n,e);for(const n of te.values())re(n,e);return!0}function ie(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},le=new i.FA("app","Firebase",ae);class ce{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw le.create("app-deleted",{appName:this._name})}}const ue="12.0.0";function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s={name:J,automaticDataCollectionEnabled:!0,...t},o=s.name;if("string"!==typeof o||!o)throw le.create("bad-app-name",{appName:String(o)});if(n||(n=(0,i.T9)()),!n)throw le.create("no-options");const a=ee.get(o);if(a){if((0,i.bD)(n,a.options)&&(0,i.bD)(s,a.config))return a;throw le.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of ne.values())l.addComponent(r);const c=new ce(n,s,l);return ee.set(o,c),c}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;const t=ee.get(e);if(!t&&e===J&&(0,i.T9)())return de();if(!t)throw le.create("no-app",{appName:e});return t}function pe(e,t,n){let s=Z[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void C.warn(e.join(" "))}se(new r.uA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const me="firebase-heartbeat-store";let fe=null;function ge(){return fe||(fe=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=g(o);return r&&o.addEventListener("upgradeneeded",e=>{r(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(me)}catch(n){console.warn(n)}}}).catch(e=>{throw le.create("idb-open",{originalErrorMessage:e.message})})),fe}async function ye(e,t){try{const n=(await ge()).transaction(me,"readwrite"),r=n.objectStore(me);await r.put(t,ve(e)),await n.done}catch(n){if(n instanceof i.g)C.warn(n.message);else{const e=le.create("idb-set",{originalErrorMessage:n?.message});C.warn(e.message)}}}function ve(e){return`${e.name}!${e.options.appId}`}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=we();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){C.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=we(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ke(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ke(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,i.Uj)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return C.warn(e),""}}}function we(){return(new Date).toISOString().substring(0,10)}class xe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ge()).transaction(me),n=await t.objectStore(me).get(ve(e));return await t.done,n}catch(t){if(t instanceof i.g)C.warn(t.message);else{const e=le.create("idb-get",{originalErrorMessage:t?.message});C.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ye(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ye(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function ke(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",se(new r.uA("platform-logger",e=>new k(e),"PRIVATE")),se(new r.uA("heartbeat",e=>new be(e),"PRIVATE")),pe(S,E,Se),pe(S,E,"esm2020"),pe("fire-js","")},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,f(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,s,i,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function _(){}function I(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,s,i,o)}}if(u)return o=o(e),u=""===i?"."+N(e,0):i,x(o)?(s="",null!=u&&(s=u.replace(T,"$&/")+"/"),I(o,t,s,"",function(e){return e})):null!=o&&(C(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+u,o=E(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,m=""===i?".":i+":";if(x(e))for(var f=0;f<e.length;f++)u+=I(i=e[f],t,s,a=m+N(i,f),o);else if("function"===typeof(f=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=p&&d[p]||d["@@iterator"])?d:null))for(e=f.call(e),f=0;!(i=e.next()).done;)u+=I(i=i.value,t,s,a=m+N(i,f++),o);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function j(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=f({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),a=0;a<i;a++)o[a]=arguments[a+2];r.children=o}return E(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===s[r]&&(s[r]=o[r]);return E(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),s=k.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,P)}catch(i){P(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},606:(e,t,n)=>{n.d(t,{h1:()=>a,uA:()=>s});var r=n(776);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{rJ:()=>Za,H9:()=>el,x7:()=>tc,GG:()=>rc,aU:()=>il,My:()=>$l,P:()=>ql,BN:()=>sc,mZ:()=>ic});var r,s,i=n(232),o=n(606),a=n(965),l=n(776),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return f(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=a(0),d=a(1),h=a(16777216);function p(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function f(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function g(e,t){return e.add(f(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(p(t))throw Error("division by zero");if(p(e))return new v(c,c);if(m(e))return t=b(f(e),t),new v(f(t.g),f(t.h));if(m(t))return t=b(e,f(t)),new v(f(t.g),t.h);if(30<e.g.length){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var s=x(n,1),i=x(r,1);for(r=x(r,2),n=x(n,2);!p(r);){var o=i.add(r);0>=o.l(e)&&(s=s.add(n),i=o),r=x(r,1),n=x(n,1)}return t=g(e,s.j(t)),new v(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(i=l(n)).j(t);m(o)||0<o.l(e);)o=(i=l(n-=r)).j(t);p(i)&&(i=d),s=s.add(i),e=g(e,o)}return new v(s,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(m(this))return-f(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(m(this))return"-"+f(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=b(n,t).g,i=((0<(n=g(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(p(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:p(e)?0:1},e.abs=function(){return m(this)?f(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(p(this)||p(e))return c;if(m(this))return m(e)?f(this).j(f(e)):f(f(this).j(e));if(m(e))return f(this.j(f(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var o=this.i(r)>>>16,a=65535&this.i(r),u=e.i(s)>>>16,d=65535&e.i(s);n[2*r+2*s]+=a*d,y(n,2*r+2*s),n[2*r+2*s+1]+=o*d,y(n,2*r+2*s+1),n[2*r+2*s+1]+=a*u,y(n,2*r+2*s+1),n[2*r+2*s+2]+=o*u,y(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+o),n);8>o?(o=l(Math.pow(n,o)),s=s.j(o).add(l(a))):s=(s=s.j(r)).add(l(a))}return s},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,p,m,f,g,y,v,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function E(e){return/^[\s\xa0]*$/.test(e)}function C(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function T(e){return T[" "](e),e}T[" "]=function(){};var N=-1!=C().indexOf("Gecko")&&!(-1!=C().toLowerCase().indexOf("webkit")&&-1==C().indexOf("Edge"))&&!(-1!=C().indexOf("Trident")||-1!=C().indexOf("MSIE"))&&-1==C().indexOf("Edge");function _(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function I(e){const t={};for(const n in e)t[n]=e[n];return t}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<j.length;t++)n=j[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function P(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function R(e){s.setTimeout(()=>{throw e},0)}function L(){var e=F;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var O=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new M,e=>e.reset());class M{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let D,z=!1,F=new class{constructor(){this.h=this.g=null}add(e,t){const n=O.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},q=()=>{const e=s.Promise.resolve(void 0);D=()=>{e.then(V)}};var V=()=>{for(var e;e=L();){try{e.h.call(e.g)}catch(n){R(n)}var t=O;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}z=!1};function U(){this.s=this.s,this.C=this.C}function B(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},B.prototype.h=function(){this.defaultPrevented=!0};var $=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function H(e,t){if(B.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(N){e:{try{T(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&H.aa.h.call(this)}}x(H,B);var W={2:"touch",3:"pen",4:"mouse"};H.prototype.h=function(){H.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Q(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++K,this.da=this.fa=!1}function X(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Y(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(X(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}Y.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Z(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,s){if(r&&r.once)return se(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ne(e,t[i],n,r,s);return null}return n=de(n),e&&e[G]?e.K(t,n,o(r)?!!r.capture:!!r,s):re(e,t,n,!1,r,s)}function re(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,l=ce(e);if(l||(e[ee]=l=new Y(e)),(n=l.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)$||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=de(n),e&&e[G]?e.L(t,n,o(r)?!!r.capture:!!r,s):re(e,t,n,!0,r,s)}function ie(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)ie(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=de(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(i=e.g[t],n,r,s))&&(X(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,s)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])J(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):X(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new H(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof Y?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){U.call(this),this.i=new Y(this),this.M=this,this.F=null}function pe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new B(t,e);else if(t instanceof B)t.target=t.target||e;else{var s=t;A(t=new B(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=me(o,r,!0,t)&&s}if(s=me(o=t.g=e,r,!0,t)&&s,s=me(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=me(o=t.g=n[i],r,!1,t)&&s}function me(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&J(e.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}function fe(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ge(e){e.g=fe(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(he,U),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,r){ie(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)X(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ye extends U{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(e){U.call(this),this.h=e,this.g={}}x(ve,U);var be=[];function we(e){_(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}ve.prototype.N=function(){ve.aa.N.call(this),we(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=s.JSON.stringify,ke=s.JSON.parse,Se=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function Ee(){}function Ce(e){return e.h||(e.h=e.i())}function Te(){}Ee.prototype.h=null;var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _e(){B.call(this,"d")}function Ie(){B.call(this,"c")}x(_e,B),x(Ie,B);var je={},Ae=null;function Pe(){return Ae=Ae||new he}function Re(e){B.call(this,je.La,e)}function Le(e){const t=Pe();pe(t,new Re(t))}function Oe(e,t){B.call(this,je.STAT_EVENT,e),this.stat=t}function Me(e){const t=Pe();pe(t,new Oe(t,e))}function De(e,t){B.call(this,je.Ma,e),this.size=t}function ze(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Fe(){this.g=!0}function qe(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return xe(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}je.La="serverreachability",x(Re,B),je.STAT_EVENT="statevent",x(Oe,B),je.Ma="timingevent",x(De,B),Fe.prototype.xa=function(){this.g=!1},Fe.prototype.info=function(){};var Ve,Ue={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Be={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function $e(){}function He(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}x($e,Ee),$e.prototype.g=function(){return new XMLHttpRequest},$e.prototype.i=function(){return{}},Ve=new $e;var Ge={},Ke={};function Qe(e,t,n){e.L=1,e.v=xt(gt(t)),e.m=n,e.P=!0,Xe(e,null)}function Xe(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ot(n.i,"t",r),e.C=0,n=e.j.J,e.h=new We,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ye(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(be[0]=s.toString()),s=be);for(var i=0;i<s.length;i++){var o=ne(n,s[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Le(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ye(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ke:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Ke:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ze(c(e.ba,e),t)}function tt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||vn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,we(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function st(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),an(n)}mn(n),Me(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=ze(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&yn(n),!E(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ut(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){dt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(tt(a),Ze(a)),r.g=o}else pn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Le()}catch(u){}}He.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},He.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Le(),tt(this);var n=this.g.Z();this.X=n;t:if(Ye(this)){var r=nn(this.g);e="";var i=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Me(12),rt(this),nt(this);break e}qe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Je(this,a),e==Ke){4==h&&(this.s=4,Me(14),n=!1),qe(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Me(15),qe(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}qe(this.i,this.l,e,null),st(this,e)}if(Ye(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Me(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),fn(d),d.M=!0,Me(11))}}else qe(this.i,this.l,a,"[Invalid Chunked Response]"),rt(this),nt(this)}else qe(this.i,this.l,a,null),st(this,a);4==h&&rt(this),this.o&&!this.J&&(4==h?vn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=P(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),rt(this),nt(this)}}}catch(h){}},He.prototype.cancel=function(){this.J=!0,rt(this)},He.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Le(),Me(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var it=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return k(e.i)}function pt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}ot.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ft(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof ft){this.h=e.h,yt(this,e.j),this.o=e.o,this.g=e.g,vt(this,e.s),this.l=e.l;var t=e.i,n=new At;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(mt))?(this.h=!1,yt(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),vt(this,t[4]),this.l=kt(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new At(null,this.h))}function gt(e){return new ft(e)}function yt(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof At?(e.i=t,function(e,t){t&&!e.j&&(Pt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Rt(this,t),Ot(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,It)),e.i=new At(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ft.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,Tt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,Tt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?_t:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,jt)),e.join("")};var Ct,Tt=/[#\/\?@]/g,Nt=/[#\?:]/g,_t=/[#\?]/g,It=/[#\?@]/g,jt=/#/g;function At(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Rt(e,t){Pt(e),t=Mt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Lt(e,t){return Pt(e),t=Mt(e,t),e.g.has(t)}function Ot(e,t,n){Rt(e,t),0<n.length&&(e.i=null,e.g.set(Mt(e,t),k(n)),e.h+=n.length)}function Mt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Dt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function zt(){this.g=new Se}function Ft(e,t,n){const r=n||"";try{pt(e,function(e,n){let s=e;o(e)&&(s=xe(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function qt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Vt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Ut(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,$t(e)}function $t(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ht(e){let t="";return _(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ht(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Gt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=At.prototype).add=function(e,t){Pt(this),this.i=null,e=Mt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Pt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Pt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Pt(this);let t=[];if("string"===typeof e)Lt(this,e)&&(t=t.concat(this.g.get(Mt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Pt(this),this.i=null,Lt(this,e=Mt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")},x(qt,Ee),qt.prototype.g=function(){return new Vt(this.l,this.j)},qt.prototype.i=(Ct={},function(){return Ct}),x(Vt,he),(e=Vt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,$t(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,$t(this)),this.g&&(this.readyState=3,$t(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ut(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):$t(this),3==this.readyState&&Ut(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Qa=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Vt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Gt,he);var Kt=/^https?$/i,Qt=["POST","PUT"];function Xt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Yt(e),Zt(e)}function Yt(e){e.A||(e.A=!0,pe(e,"complete"),pe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))fe(e.Ea,0,e);else if(pe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var o=String(e.D).match(mt)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),i=!Kt.test(o?o.toLowerCase():"")}n=i}if(n)pe(e,"complete"),pe(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Yt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||pe(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function en(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Fe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new zt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),dn(e,n),(t=new He(e,e.j,t)).L=2,t.v=xt(gt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function an(e){e.g&&(fn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(s.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function cn(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;D||q(),z||(D(),z=!0),F.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new He(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Qe(n,r,t)}function dn(e,t){e.H&&_(e.H,function(e,n){wt(t,n,e)}),e.l&&pt({},function(e,n){wt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=s[a].g;const l=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),o=!1;else try{Ft(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function pn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;D||q(),z||(D(),z=!0),F.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ze(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function fn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new He(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(gt(t)),n.m=null,n.P=!0,Xe(n,e)}function yn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),fn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;pe(r=Pe(),new De(r,n)),cn(e)}else pn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=ze(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new ft(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||yt(r,"https"),xt(r),t?function(e,t){const n=new Fe;if(s.Image){const r=new Image;r.onload=u(Dt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Dt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Dt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Dt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Fe;const n=new AbortController,r=setTimeout(()=>{n.abort(),Dt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Dt(0,0,!0,t):Dt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Dt(0,0,!1,t)})}(r.toString(),n)}else Me(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,k(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof ft?gt(n):new ft(n);if(""!=r.g)t&&(r.g=t+"."+r.g),vt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new ft(null);r&&yt(o,r),t&&(o.g=t),i&&vt(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),dn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new qt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function En(){}function Cn(){}function Tn(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!E(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Nn(e){_e.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _n(){Ie.call(this),this.status=1}function In(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ve.g(),this.v=this.o?Ce(this.o):Ce(Ve),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Xt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Xt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,pe(this,"complete"),pe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(Ct){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(Ct){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ke(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Me(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new He(this,this.j,e);let i=this.o;if(this.S&&(i?(i=I(i),A(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,s,t),wt(n=gt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ht(i)))+"&"+t:this.m&&Wt(n,this.m,i)),ut(this.h,s),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.T=!0,Qe(s,n,null)):Qe(s,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||at(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ze(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),mn(this),Me(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Cn.prototype.g=function(e,t){return new Tn(e,t)},x(Tn,he),Tn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tn.prototype.close=function(){on(this.g)},Tn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&cn(t)},Tn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Tn.aa.N.call(this)},x(Nn,_e),x(_n,Ie),x(In,En),In.prototype.ua=function(){pe(this.g,"a")},In.prototype.ta=function(e){pe(this.g,new Nn(e))},In.prototype.sa=function(e){pe(this.g,new _n)},In.prototype.ra=function(){pe(this.g,"b")},Cn.prototype.createWebChannel=Cn.prototype.g,Tn.prototype.send=Tn.prototype.o,Tn.prototype.open=Tn.prototype.m,Tn.prototype.close=Tn.prototype.close,v=w.createWebChannelTransport=function(){return new Cn},y=w.getStatEventTarget=function(){return Pe()},g=w.Event=je,f=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ue.NO_ERROR=0,Ue.TIMEOUT=8,Ue.HTTP_ERROR=6,m=w.ErrorCode=Ue,Be.COMPLETE="complete",p=w.EventType=Be,Te.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",he.prototype.listen=he.prototype.K,h=w.WebChannel=Te,w.FetchXmlHttpFactory=qt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,d=w.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",k="4.9.0";class S{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}S.UNAUTHENTICATED=new S(null),S.GOOGLE_CREDENTIALS=new S("google-credentials-uid"),S.FIRST_PARTY=new S("first-party-uid"),S.MOCK_USER=new S("mock-user");let E="12.0.0";const C=new a.Vy("@firebase/firestore");function T(){return C.logLevel}function N(e){if(C.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(j);C.debug(`Firestore (${E}): ${e}`,...s)}}function _(e){if(C.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(j);C.error(`Firestore (${E}): ${e}`,...s)}}function I(e){if(C.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(j);C.warn(`Firestore (${E}): ${e}`,...s)}}function j(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function A(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,P(e,r,n)}function P(e,t,n){let r=`FIRESTORE (${E}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw _(r),new Error(r)}function R(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||P(t,s,r)}function L(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class M extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class D{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class z{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(S.UNAUTHENTICATED))}shutdown(){}}class q{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class V{constructor(e){this.t=e,this.currentUser=S.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){R(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new D;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new D,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new D)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(R("string"==typeof t.accessToken,31837,{l:t}),new z(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return R(null===e||"string"==typeof e,2055,{h:e}),new S(e)}}class U{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=S.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class B{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new U(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(S.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,i.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){R(void 0===this.o,3512);const n=e=>{null!=e.error&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,N("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(R("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new $(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=W(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function K(e,t){return e<t?-1:e>t?1:0}function Q(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return J(n)===J(s)?K(n,s):J(n)?1:-1}return K(e.length,t.length)}const X=55296,Y=57343;function J(e){const t=e.charCodeAt(0);return t>=X&&t<=Y}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&A(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&A(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return K(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):Q(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new M(O.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends te{construct(e,t,n){return new se(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new se([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new M(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new M(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new M(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new M(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ne.fromString(e))}static fromName(e){return new ie(ne.fromString(e).popFirst(5))}static empty(){return new ie(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ne(e.slice()))}}function oe(e,t,n){if(!n)throw new M(O.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ae(e){if(!ie.isDocumentKey(e))throw new M(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function le(e){if(ie.isDocumentKey(e))throw new M(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ue(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":A(12329,{type:typeof e})}function de(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new M(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ue(e);throw new M(O.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function he(e,t){const n={typeString:e};return t&&(n.value=t),n}function pe(e,t){if(!ce(e))throw new M(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(void 0!==i&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new M(O.INVALID_ARGUMENT,n);return!0}const me=-62135596800,fe=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*fe);return new ge(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<me)throw new M(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fe}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(pe(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-me;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:he("string",ge._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ge(0,0))}static max(){return new ye(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ve=-1;class be{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}be.UNKNOWN_ID=-1;function we(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(1e9===r?new ge(n+1,0):new ge(n,r));return new ke(s,ie.empty(),t)}function xe(e){return new ke(e.readTime,e.key,ve)}class ke{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ke(ye.min(),ie.empty(),ve)}static max(){return new ke(ye.max(),ie.empty(),ve)}}function Se(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ie.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const Ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Te(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Ee)throw e;N("LocalStore","Unexpectedly lost primary lease")}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&A(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(e){return Ne.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,n)=>{t(e)})}static reject(e){return new Ne((t,n)=>{n(e)})}static waitFor(e){return new Ne((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ne.resolve(!1);for(const n of e)t=t.next(e=>e?Ne.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ne((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next(e=>{i[l]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ne((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function _e(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ie(e){return"IndexedDbTransactionError"===e.name}class je{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}je.ce=-1;const Ae=-1;function Pe(e){return null==e}function Re(e){return 0===e&&1/e==-1/0}function Le(e){return"number"==typeof e&&Number.isInteger(e)&&!Re(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Oe="\x01";function Me(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=ze(t)),t=De(e.get(n),t);return ze(t)}function De(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Oe:n+="\x01\x11";break;default:n+=t}}return n}function ze(e){return e+Oe+"\x01"}const Fe="remoteDocuments",qe="owner",Ve="mutationQueues",Ue="mutations";const Be="documentMutations",$e="remoteDocumentsV14",He="remoteDocumentGlobal",We="targets",Ge="targetDocuments",Ke="targetGlobal",Qe="collectionParents",Xe="clientMetadata",Ye="bundles",Je="namedQueries",Ze="indexConfiguration",et="indexState",tt="indexEntries",nt="documentOverlays",rt="globals",st=[Ve,Ue,Be,Fe,We,qe,Ke,Ge,Xe,He,Qe,Ye,Je],it=[Ve,Ue,Be,$e,We,qe,Ke,Ge,Xe,He,Qe,Ye,Je,nt],ot=it,at=[...ot,Ze,et,tt];function lt(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ct(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ut(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||pt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ht(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ht(this.root,e,this.comparator,!1)}getReverseIterator(){return new ht(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ht(this.root,e,this.comparator,!0)}}class ht{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pt{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:pt.RED,this.left=null!=r?r:pt.EMPTY,this.right=null!=s?s:pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new pt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw A(43730,{key:this.key,value:this.value});if(this.right.isRed())throw A(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw A(27949);return e+(this.isRed()?0:1)}}pt.EMPTY=null,pt.RED=!0,pt.BLACK=!1,pt.EMPTY=new class{constructor(){this.size=0}get key(){throw A(57766)}get value(){throw A(16141)}get color(){throw A(16727)}get left(){throw A(29726)}get right(){throw A(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new pt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ft(this.data.getIterator())}getIteratorFrom(e){return new ft(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof mt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new mt(this.comparator);return t.data=e,t}}class ft{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gt{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new gt([])}unionWith(e){let t=new mt(se.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new vt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const bt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wt(e){if(R(!!e,39018),"string"==typeof e){let t=0;const n=bt.exec(e);if(R(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xt(e.seconds),nanos:xt(e.nanos)}}function xt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kt(e){return"string"==typeof e?vt.fromBase64String(e):vt.fromUint8Array(e)}const St="server_timestamp",Et="__type__",Ct="__previous_value__",Tt="__local_write_time__";function Nt(e){const t=(e?.mapValue?.fields||{})[Et]?.stringValue;return t===St}function _t(e){const t=e.mapValue.fields[Ct];return Nt(t)?_t(t):t}function It(e){const t=wt(e.mapValue.fields[Tt].timestampValue);return new ge(t.seconds,t.nanos)}class jt{constructor(e,t,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const At="(default)";class Pt{constructor(e,t){this.projectId=e,this.database=t||At}static empty(){return new Pt("","")}get isDefaultDatabase(){return this.database===At}isEqual(e){return e instanceof Pt&&e.projectId===this.projectId&&e.database===this.database}}const Rt="__type__",Lt="__max__",Ot={mapValue:{fields:{__type__:{stringValue:Lt}}}},Mt="__vector__",Dt="value";function zt(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nt(e)?4:tn(e)?9007199254740991:Zt(e)?10:11:A(28295,{value:e})}function Ft(e,t){if(e===t)return!0;const n=zt(e);if(n!==zt(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return It(e).isEqual(It(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wt(e.timestampValue),r=wt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kt(e.bytesValue).isEqual(kt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xt(e.geoPointValue.latitude)===xt(t.geoPointValue.latitude)&&xt(e.geoPointValue.longitude)===xt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xt(e.integerValue)===xt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xt(e.doubleValue),r=xt(t.doubleValue);return n===r?Re(n)===Re(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Ft);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lt(n)!==lt(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ft(n[s],r[s])))return!1;return!0}(e,t);default:return A(52216,{left:e})}}function qt(e,t){return void 0!==(e.values||[]).find(e=>Ft(e,t))}function Vt(e,t){if(e===t)return 0;const n=zt(e),r=zt(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xt(e.integerValue||e.doubleValue),r=xt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ut(e.timestampValue,t.timestampValue);case 4:return Ut(It(e),It(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){const n=kt(e),r=kt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=K(n[s],r[s]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(xt(e.latitude),xt(t.latitude));return 0!==n?n:K(xt(e.longitude),xt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Bt(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},s=n[Dt]?.arrayValue,i=r[Dt]?.arrayValue,o=K(s?.values?.length||0,i?.values?.length||0);return 0!==o?o:Bt(s,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ot.mapValue&&t===Ot.mapValue)return 0;if(e===Ot.mapValue)return 1;if(t===Ot.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=Q(r[o],i[o]);if(0!==e)return e;const t=Vt(n[r[o]],s[i[o]]);if(0!==t)return t}return K(r.length,i.length)}(e.mapValue,t.mapValue);default:throw A(23264,{he:n})}}function Ut(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=wt(e),r=wt(t),s=K(n.seconds,r.seconds);return 0!==s?s:K(n.nanos,r.nanos)}function Bt(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Vt(n[s],r[s]);if(e)return e}return K(n.length,r.length)}function $t(e){return Ht(e)}function Ht(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wt(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return kt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ie.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ht(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Ht(e.fields[s])}`;return n+"}"}(e.mapValue):A(61005,{value:e})}function Wt(e){switch(zt(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=_t(e);return t?16+Wt(t):16;case 5:return 2*e.stringValue.length;case 6:return kt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Wt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ct(e.fields,(e,n)=>{t+=e.length+Wt(n)}),t}(e.mapValue);default:throw A(13486,{value:e})}}function Gt(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Kt(e){return!!e&&"integerValue"in e}function Qt(e){return!!e&&"arrayValue"in e}function Xt(e){return!!e&&"nullValue"in e}function Yt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jt(e){return!!e&&"mapValue"in e}function Zt(e){const t=(e?.mapValue?.fields||{})[Rt]?.stringValue;return t===Mt}function en(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ct(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=en(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=en(e.arrayValue.values[n]);return t}return{...e}}function tn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Lt}class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=en(t)}setAll(e){let t=se.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=en(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Jt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ft(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ct(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new nn(en(this.value))}}function rn(e){const t=[];return ct(e.fields,(e,n)=>{const r=new se([e]);if(Jt(n)){const e=rn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new gt(t)}class sn{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new sn(e,0,ye.min(),ye.min(),ye.min(),nn.empty(),0)}static newFoundDocument(e,t,n,r){return new sn(e,1,t,ye.min(),n,r,0)}static newNoDocument(e,t){return new sn(e,2,t,ye.min(),ye.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,ye.min(),ye.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class on{constructor(e,t){this.position=e,this.inclusive=t}}function an(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?ie.comparator(ie.fromName(o.referenceValue),n.key):Vt(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ln(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ft(e.position[n],t.position[n]))return!1;return!0}class cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function un(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dn{}class hn extends dn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wn(e,t,n):"array-contains"===t?new En(e,n):"in"===t?new Cn(e,n):"not-in"===t?new Tn(e,n):"array-contains-any"===t?new Nn(e,n):new hn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xn(e,n):new kn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Vt(t,this.value)):null!==t&&zt(this.value)===zt(t)&&this.matchesComparison(Vt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return A(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends dn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new pn(e,t)}matches(e){return mn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mn(e){return"and"===e.op}function fn(e){return gn(e)&&mn(e)}function gn(e){for(const t of e.filters)if(t instanceof pn)return!1;return!0}function yn(e){if(e instanceof hn)return e.field.canonicalString()+e.op.toString()+$t(e.value);if(fn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return`${e.op}(${t})`}}function vn(e,t){return e instanceof hn?function(e,t){return t instanceof hn&&e.op===t.op&&e.field.isEqual(t.field)&&Ft(e.value,t.value)}(e,t):e instanceof pn?function(e,t){return t instanceof pn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&vn(n,t.filters[r]),!0)}(e,t):void A(19439)}function bn(e){return e instanceof hn?function(e){return`${e.field.canonicalString()} ${e.op} ${$t(e.value)}`}(e):e instanceof pn?function(e){return e.op.toString()+" {"+e.getFilters().map(bn).join(" ,")+"}"}(e):"Filter"}class wn extends hn{constructor(e,t,n){super(e,t,n),this.key=ie.fromName(n.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class xn extends hn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kn extends hn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){return(t.arrayValue?.values||[]).map(e=>ie.fromName(e.referenceValue))}class En extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qt(t)&&qt(t.arrayValue,this.value)}}class Cn extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&qt(this.value.arrayValue,t)}}class Tn extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(qt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!qt(this.value.arrayValue,t)}}class Nn extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>qt(this.value.arrayValue,e))}}class _n{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function In(e){return new _n(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function jn(e){const t=L(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Pe(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>$t(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>$t(e)).join(",")),t.Te=e}return t.Te}function An(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!un(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ln(e.startAt,t.startAt)&&ln(e.endAt,t.endAt)}function Pn(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Rn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ln(e,t,n,r,s,i,o,a){return new Rn(e,t,n,r,s,i,o,a)}function On(e){return new Rn(e)}function Mn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Dn(e){return null!==e.collectionGroup}function zn(e){const t=L(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new mt(se.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new cn(r,n))}),e.has(se.keyField().canonicalString())||t.Ie.push(new cn(se.keyField(),n))}return t.Ie}function Fn(e){const t=L(e);return t.Ee||(t.Ee=qn(t,zn(e))),t.Ee}function qn(e,t){if("F"===e.limitType)return In(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new cn(e.field,t)});const n=e.endAt?new on(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new on(e.startAt.position,e.startAt.inclusive):null;return In(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vn(e,t){const n=e.filters.concat([t]);return new Rn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Un(e,t,n){return new Rn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Bn(e,t){return An(Fn(e),Fn(t))&&e.limitType===t.limitType}function $n(e){return`${jn(Fn(e))}|lt:${e.limitType}`}function Hn(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>bn(e)).join(", ")}]`),Pe(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>$t(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>$t(e)).join(",")),`Target(${t})`}(Fn(e))}; limitType=${e.limitType})`}function Wn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ie.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of zn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=an(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zn(e),t))&&!(e.endAt&&!function(e,t,n){const r=an(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zn(e),t))}(e,t)}function Gn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kn(e){return(t,n)=>{let r=!1;for(const s of zn(e)){const e=Qn(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Qn(e,t,n){const r=e.field.isKeyField()?ie.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Vt(r,s):A(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return A(19790,{direction:e.dir})}}class Xn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ct(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return ut(this.inner)}size(){return this.innerSize}}const Yn=new dt(ie.comparator);function Jn(){return Yn}const Zn=new dt(ie.comparator);function er(){let e=Zn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function tr(e){let t=Zn;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function nr(){return sr()}function rr(){return sr()}function sr(){return new Xn(e=>e.toString(),(e,t)=>e.isEqual(t))}const ir=new dt(ie.comparator),or=new mt(ie.comparator);function ar(){let e=or;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const lr=new mt(K);function cr(){return lr}function ur(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Re(t)?"-0":t}}function dr(e){return{integerValue:""+e}}function hr(e,t){return Le(t)?dr(t):ur(e,t)}class pr{constructor(){this._=void 0}}function mr(e,t,n){return e instanceof yr?function(e,t){const n={fields:{[Et]:{stringValue:St},[Tt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nt(t)&&(t=_t(t)),t&&(n.fields[Ct]=t),{mapValue:n}}(n,t):e instanceof vr?br(e,t):e instanceof wr?xr(e,t):function(e,t){const n=gr(e,t),r=Sr(n)+Sr(e.Ae);return Kt(n)&&Kt(e.Ae)?dr(r):ur(e.serializer,r)}(e,t)}function fr(e,t,n){return e instanceof vr?br(e,t):e instanceof wr?xr(e,t):n}function gr(e,t){return e instanceof kr?function(e){return Kt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yr extends pr{}class vr extends pr{constructor(e){super(),this.elements=e}}function br(e,t){const n=Er(t);for(const r of e.elements)n.some(e=>Ft(e,r))||n.push(r);return{arrayValue:{values:n}}}class wr extends pr{constructor(e){super(),this.elements=e}}function xr(e,t){let n=Er(t);for(const r of e.elements)n=n.filter(e=>!Ft(e,r));return{arrayValue:{values:n}}}class kr extends pr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sr(e){return xt(e.integerValue||e.doubleValue)}function Er(e){return Qt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Cr{constructor(e,t){this.version=e,this.transformResults=t}}class Tr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tr}static exists(e){return new Tr(void 0,e)}static updateTime(e){return new Tr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class _r{}function Ir(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fr(e.key,Tr.none()):new Lr(e.key,e.data,Tr.none());{const n=e.data,r=nn.empty();let s=new mt(se.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Or(e.key,r,new gt(s.toArray()),Tr.none())}}function jr(e,t,n){e instanceof Lr?function(e,t,n){const r=e.value.clone(),s=Dr(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Or?function(e,t,n){if(!Nr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Dr(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Mr(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ar(e,t,n,r){return e instanceof Lr?function(e,t,n,r){if(!Nr(e.precondition,t))return n;const s=e.value.clone(),i=zr(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Or?function(e,t,n,r){if(!Nr(e.precondition,t))return n;const s=zr(e.fieldTransforms,r,t),i=t.data;return i.setAll(Mr(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Nr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Pr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=gr(r.transform,e||null);null!=s&&(null===n&&(n=nn.empty()),n.set(r.field,s))}return n||null}function Rr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vr&&t instanceof vr||e instanceof wr&&t instanceof wr?Z(e.elements,t.elements,Ft):e instanceof kr&&t instanceof kr?Ft(e.Ae,t.Ae):e instanceof yr&&t instanceof yr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Lr extends _r{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Or extends _r{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Mr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Dr(e,t,n){const r=new Map;R(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,fr(o,a,n[s]))}return r}function zr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,mr(e,i,t))}return r}class Fr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&jr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ar(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ar(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rr();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=Ir(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ar())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>Rr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>Rr(e,t))}}class Ur{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){R(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ir;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Ur(e,t,n,r)}}class Br{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class $r{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hr,Wr;function Gr(e){switch(e){case O.OK:return A(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return A(15467,{code:e})}}function Kr(e){if(void 0===e)return _("GRPC error has no .code"),O.UNKNOWN;switch(e){case Hr.OK:return O.OK;case Hr.CANCELLED:return O.CANCELLED;case Hr.UNKNOWN:return O.UNKNOWN;case Hr.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Hr.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Hr.INTERNAL:return O.INTERNAL;case Hr.UNAVAILABLE:return O.UNAVAILABLE;case Hr.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Hr.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Hr.NOT_FOUND:return O.NOT_FOUND;case Hr.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Hr.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Hr.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Hr.ABORTED:return O.ABORTED;case Hr.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Hr.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Hr.DATA_LOSS:return O.DATA_LOSS;default:return A(39323,{code:e})}}(Wr=Hr||(Hr={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";let Qr=null;function Xr(){return new TextEncoder}const Yr=new r([4294967295,4294967295],0);function Jr(e){const t=Xr().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function Zr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,s],0),new r([i,o],0)]}class es{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ts(`Invalid padding: ${t}`);if(n<0)throw new ts(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ts(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ts(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(Yr)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Jr(e),[n,r]=Zr(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new es(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Jr(e),[n,r]=Zr(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ns{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,rs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ns(ye.min(),r,new dt(K),Jn(),ar())}}class rs{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rs(n,t,ar(),ar(),ar())}}class ss{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class is{constructor(e,t){this.targetId=e,this.Ce=t}}class os{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class as{constructor(){this.ve=0,this.Fe=us(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ar(),t=ar(),n=ar();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:A(38017,{changeType:s})}}),new rs(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=us()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,R(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ls{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=cs(),this.He=cs(),this.Ye=new dt(K)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:A(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(Pn(s))if(0===n){const e=new ie(s.path);this.et(t,e,sn.newNoDocument(e,ye.min()))}else R(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}Qr?.lt(function(e,t,n,r,s){const i={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(i.bloomFilter={applied:0===s,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),i}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=kt(n).toUint8Array()}catch(e){if(e instanceof yt)return I("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new es(i,r,s)}catch(e){return I(e instanceof ts?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&Pn(s.target)){const t=new ie(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ar();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ns(e,t,this.Ye,this.je,n);return this.je=Jn(),this.Je=cs(),this.He=cs(),this.Ye=new dt(K),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new as,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new mt(K),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new mt(K),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||N("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new as),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cs(){return new dt(ie.comparator)}function us(){return new dt(ie.comparator)}const ds={asc:"ASCENDING",desc:"DESCENDING"},hs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ps={and:"AND",or:"OR"};class ms{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fs(e,t){return e.useProto3Json||Pe(t)?t:{value:t}}function gs(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ys(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vs(e,t){return gs(e,t.toTimestamp())}function bs(e){return R(!!e,49232),ye.fromTimestamp(function(e){const t=wt(e);return new ge(t.seconds,t.nanos)}(e))}function ws(e,t){return xs(e,t).canonicalString()}function xs(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ks(e){const t=ne.fromString(e);return R(Us(t),10190,{key:t.toString()}),t}function Ss(e,t){return ws(e.databaseId,t.path)}function Es(e,t){const n=ks(t);if(n.get(1)!==e.databaseId.projectId)throw new M(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new M(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ie(_s(n))}function Cs(e,t){return ws(e.databaseId,t)}function Ts(e){const t=ks(e);return 4===t.length?ne.emptyPath():_s(t)}function Ns(e){return new ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _s(e){return R(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Is(e,t,n){return{name:Ss(e,t),fields:n.value.mapValue.fields}}function js(e,t){let n;if(t instanceof Lr)n={update:Is(e,t.key,t.value)};else if(t instanceof Fr)n={delete:Ss(e,t.key)};else if(t instanceof Or)n={update:Is(e,t.key,t.data),updateMask:Vs(t.fieldMask)};else{if(!(t instanceof qr))return A(16599,{Vt:t.type});n={verify:Ss(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kr)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw A(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:A(27497)}(e,t.precondition)),n}function As(e,t){return{documents:[Cs(e,t.path)]}}function Ps(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Cs(e,s);const i=function(e){if(0!==e.length)return qs(pn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:zs(e.field),direction:Os(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=fs(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function Rs(e){let t=Ts(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){R(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ls(e);return t instanceof pn&&fn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new cn(Fs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Pe(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new on(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new on(n,t)}(n.endAt)),Ln(t,s,o,i,a,"F",l,c)}function Ls(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fs(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fs(e.unaryFilter.field);return hn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fs(e.unaryFilter.field);return hn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fs(e.unaryFilter.field);return hn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return A(61313);default:return A(60726)}}(e):void 0!==e.fieldFilter?function(e){return hn.create(Fs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return A(58110);default:return A(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return pn.create(e.compositeFilter.filters.map(e=>Ls(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return A(1026)}}(e.compositeFilter.op))}(e):A(30097,{filter:e})}function Os(e){return ds[e]}function Ms(e){return hs[e]}function Ds(e){return ps[e]}function zs(e){return{fieldPath:e.canonicalString()}}function Fs(e){return se.fromServerFormat(e.fieldPath)}function qs(e){return e instanceof hn?function(e){if("=="===e.op){if(Yt(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NAN"}};if(Xt(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yt(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NOT_NAN"}};if(Xt(e.value))return{unaryFilter:{field:zs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(e.field),op:Ms(e.op),value:e.value}}}(e):e instanceof pn?function(e){const t=e.getFilters().map(e=>qs(e));return 1===t.length?t[0]:{compositeFilter:{op:Ds(e.op),filters:t}}}(e):A(54877,{filter:e})}function Vs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Us(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Bs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class $s{constructor(e){this.yt=e}}function Hs(e){const t=Rs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Un(t,t.limit,"L"):t}class Ws{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xt(e.integerValue));else if("doubleValue"in e){const n=xt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Re(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=wt(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(kt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?tn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zt(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):A(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Dt,s=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xt(s)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ie.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ws.Kt=new Ws;class Gs{constructor(){this.Cn=new Ks}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(ke.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(ke.min())}updateCollectionGroup(e,t,n){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class Ks{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mt(ne.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mt(ne.comparator)).toArray()}}new Uint8Array(0);const Qs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xs=41943040;class Ys{static withCacheSize(e){return new Ys(e,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Ys.DEFAULT_COLLECTION_PERCENTILE=10,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ys.DEFAULT=new Ys(Xs,Ys.DEFAULT_COLLECTION_PERCENTILE,Ys.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ys.DISABLED=new Ys(-1,0,0);class Js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Js(0)}static cr(){return new Js(-1)}}const Zs="LruGarbageCollector",ei=1048576;function ti(e,t){let[n,r]=e,[s,i]=t;const o=K(n,s);return 0===o?K(r,i):o}class ni{constructor(e){this.Ir=e,this.buffer=new mt(ti),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ti(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ri{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){N(Zs,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ie(e)?N(Zs,"Ignoring IndexedDB error during garbage collection: ",e):await Te(e)}await this.Vr(3e5)})}}class si{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(je.ce);const n=new ni(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Qs)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qs):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(N("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),T()<=a.$b.DEBUG&&N("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-u}ms\n\tDetermined least recently used ${r} in `+(o-i)+"ms\n"+`\tRemoved ${s} targets in `+(l-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ii(e,t){return new si(e,t)}class oi{constructor(){this.changes=new Xn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ne.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ai{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class li{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ar(n.mutation,e,gt.empty(),ge.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ar()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar();const r=nr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=er();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=nr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ar()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Jn();const i=sr(),o=sr();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Or)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Ar(o.mutation,t,o.mutation.getFieldMask(),ge.now())):i.set(t.key,gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>o.set(e,new ai(t,i.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=sr();let r=new dt((e,t)=>e-t),s=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||gt.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||ar()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=rr();l.forEach(e=>{if(!s.has(e)){const r=Ir(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ne.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Dn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ne.resolve(nr());let o=ve,a=s;return i.next(t=>Ne.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Ne.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,ar())).next(e=>({batchId:o,changes:tr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(e=>{let t=er();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=er();return this.indexManager.getCollectionParents(e,s).next(o=>Ne.forEach(o,o=>{const a=function(e,t){return new Rn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sn.newInvalidDocument(r)))});let n=er();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Ar(i.mutation,r,gt.empty(),ge.now()),Wn(t,r)&&(n=n.insert(e,r))}),n})}}class ci{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:bs(e.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Hs(e.bundledQuery),readTime:bs(e.readTime)}}(t)),Ne.resolve()}}class ui{constructor(){this.overlays=new dt(ie.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nr();return Ne.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ne.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,t,n){const r=nr(),s=t.length+1,i=new ie(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ne.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new dt((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=nr(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nr(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ne.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Br(t,n));let s=this.qr.get(t);void 0===s&&(s=ar(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class di{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}class hi{constructor(){this.Qr=new mt(pi.$r),this.Ur=new mt(pi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new pi(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new pi(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ie(new ne([])),n=new pi(t,e),r=new pi(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ie(new ne([])),n=new pi(t,e),r=new pi(t,e+1);let s=ar();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new pi(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ie.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||ie.comparator(e.key,t.key)}}class mi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new mt(pi.$r)}checkEmpty(e){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Vr(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Zr=this.Zr.add(new pi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(i)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?Ae:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pi(t,0),r=new pi(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mt(K);return t.forEach(e=>{const t=new pi(e,0),r=new pi(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ie.isDocumentKey(s)||(s=s.child(""));const i=new pi(new ie(s),0);let o=new mt(K);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},i),Ne.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){R(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(t.mutations,r=>{const s=new pi(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new pi(t,0),r=this.Zr.firstAfterOrEqual(n);return Ne.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class fi{constructor(e){this.ri=e,this.docs=new dt(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ne.resolve(n?n.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let n=Jn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sn.newInvalidDocument(e))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Jn();const i=t.path,o=new ie(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Se(xe(o),n)<=0||(r.has(o.key)||Wn(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(e,t,n,r){A(9500)}ii(e,t){return Ne.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new gi(this)}getSize(e){return Ne.resolve(this.size)}}class gi extends oi{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class yi{constructor(e){this.persistence=e,this.si=new Xn(e=>jn(e),An),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new hi,this.targetCount=0,this.ai=Js.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Js(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ne.waitFor(s).next(()=>r)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ne.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ne.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ne.resolve(n)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}class vi{constructor(e,t){this.ui={},this.overlays={},this.ci=new je(0),this.li=!1,this.li=!0,this.hi=new di,this.referenceDelegate=e(this),this.Pi=new yi(this),this.indexManager=new Gs,this.remoteDocumentCache=function(e){return new fi(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new $s(t),this.Ii=new ci(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ui,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new mi(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){N("MemoryPersistence","Starting transaction:",e);const r=new bi(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class bi extends Ce{constructor(e){super(),this.currentSequenceNumber=e}}class wi{constructor(e){this.persistence=e,this.Ri=new hi,this.Vi=null}static mi(e){return new wi(e)}get fi(){if(this.Vi)return this.Vi;throw A(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const r=ie.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ye.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xi{constructor(e,t){this.persistence=e,this.pi=new Xn(e=>Me(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ii(this,t)}static mi(e,t){return new xi(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ne.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ne.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,ye.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wt(e.data.value)),t}br(e,t,n){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ne.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ki{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ar(),r=ar();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ki(e,t.fromCache,n,r)}}class Si{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ei{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,l.nr)()?8:_e((0,l.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Si;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(T()<=a.$b.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",Hn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(T()<=a.$b.DEBUG&&N("QueryEngine","Query:",Hn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(T()<=a.$b.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",Hn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fn(t))):Ne.resolve())}ys(e,t){if(Mn(t))return Ne.resolve(null);let n=Fn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Un(t,null,"F"),n=Fn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ar(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Un(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Mn(t)||r.isEqual(ye.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Ne.resolve(null):(T()<=a.$b.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hn(t)),this.vs(e,i,t,we(r,ve)).next(e=>e))})}Ds(e,t){let n=new mt(Kn(e));return t.forEach((t,r)=>{Wn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return T()<=a.$b.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",Hn(t)),this.ps.getDocumentsMatchingQuery(e,t,ke.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ci="LocalStore",Ti=3e8;class Ni{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new dt(K),this.xs=new Xn(e=>jn(e),An),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new li(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _i(e,t,n,r){return new Ni(e,t,n,r)}async function Ii(e,t){const n=L(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=ar();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function ji(e){const t=L(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Ai(e,t,n){let r=ar(),s=ar();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Jn();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ye.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):N(Ci,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{ks:r,qs:s}})}function Pi(e,t){const n=L(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ae),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ri(e,t){const n=L(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Ne.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new Bs(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Li(e,t,n){const r=L(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Ie(e))throw e;N(Ci,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Oi(e,t,n){const r=L(e);let s=ye.min(),i=ar();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=L(e),s=r.xs.get(n);return void 0!==s?Ne.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Fn(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:ye.min(),n?i:ar())).next(e=>(Mi(r,Gn(t),e),{documents:e,Qs:i})))}function Mi(e,t,n){let r=e.Os.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Di{constructor(){this.activeTargetIds=cr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zi{constructor(){this.Mo=new Di,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Di,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fi{Oo(e){}shutdown(){}}const qi="ConnectivityMonitor";class Vi{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){N(qi,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){N(qi,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Ui=null;function Bi(){return null===Ui?Ui=268435456+Math.round(2147483648*Math.random()):Ui++,"0x"+Ui.toString(16)}const $i="RestConnection",Hi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wi{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===At?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,s){const i=Bi(),o=this.zo(e,t.toUriEncodedString());N($i,`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,s);const{host:c}=new URL(o),u=(0,l.zJ)(c);return this.Jo(e,o,a,n,u).then(t=>(N($i,`Received RPC '${e}' ${i}: `,t),t),t=>{throw I($i,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Hi[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Gi{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ki="WebChannelConnection";class Qi extends Wi{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=Bi();return new Promise((s,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(p.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case m.NO_ERROR:const t=a.getResponseJson();N(Ki,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case m.TIMEOUT:N(Ki,`RPC '${e}' ${i} timed out`),o(new M(O.DEADLINE_EXCEEDED,"Request time out"));break;case m.HTTP_ERROR:const n=a.getStatus();if(N(Ki,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(t.status);o(new M(e,t.message))}else o(new M(O.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new M(O.UNAVAILABLE,"Connection failed."));break;default:A(9055,{l_:e,streamId:i,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{N(Ki,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);N(Ki,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=Bi(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=v(),o=y(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=s.join("");N(Ki,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=i.createWebChannel(c,a);this.I_(u);let d=!1,p=!1;const m=new Gi({Yo:t=>{p?N(Ki,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(N(Ki,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),N(Ki,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{p||(N(Ki,`RPC '${e}' stream ${r} transport opened.`),m.o_())}),b(u,h.EventType.CLOSE,()=>{p||(p=!0,N(Ki,`RPC '${e}' stream ${r} transport closed`),m.a_(),this.E_(u))}),b(u,h.EventType.ERROR,t=>{p||(p=!0,I(Ki,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),m.a_(new M(O.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{if(!p){const n=t.data[0];R(!!n,16349);const s=n,i=s?.error||s[0]?.error;if(i){N(Ki,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=Hr[e];if(void 0!==t)return Kr(t)}(t),s=i.message;void 0===n&&(n=O.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),p=!0,m.a_(new M(n,s)),u.close()}else N(Ki,`RPC '${e}' stream ${r} received:`,n),m.u_(n)}}),b(o,g.STAT_EVENT,t=>{t.stat===f.PROXY?N(Ki,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===f.NOPROXY&&N(Ki,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Xi(){return"undefined"!=typeof document?document:null}function Yi(e){return new ms(e,!0)}class Ji{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&N("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Zi="PersistentStream";class eo{constructor(e,t,n,r,s,i,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ji(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(_(t.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new M(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return N(Zi,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(N(Zi,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class to extends eo{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:A(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(R(void 0===t||"string"==typeof t,58123),vt.fromBase64String(t||"")):(R(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),vt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?O.UNKNOWN:Kr(e.code);return new M(t,e.message||"")}(o);n=new os(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Es(e,r.document.name),i=bs(r.document.updateTime),o=r.document.createTime?bs(r.document.createTime):ye.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ss(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Es(e,r.document),i=r.readTime?bs(r.readTime):ye.min(),o=sn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ss([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Es(e,r.document),i=r.removedTargetIds||[];n=new ss([],i,s,null)}else{if(!("filter"in t))return A(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new $r(r,s),o=e.targetId;n=new is(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?bs(t.readTime):ye.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ns(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Pn(r)?{documents:As(e,r)}:{query:Ps(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ys(e,t.resumeToken);const r=fs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=gs(e,t.snapshotVersion.toTimestamp());const r=fs(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return A(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ns(this.serializer),t.removeTarget=e,this.q_(t)}}class no extends eo{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return R(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,R(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){R(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(R(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?bs(e.updateTime):bs(t);return n.isEqual(ye.min())&&(n=bs(t)),new Cr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=bs(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ns(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>js(this.serializer,e))};this.q_(t)}}class ro{}class so extends ro{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new M(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.Go(e,xs(t,n),r,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(O.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Ho(e,xs(t,n),r,o,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new M(O.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class io{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_(t),this.aa=!1):N("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oo="RemoteStore";class ao{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{yo(this)&&(N(oo,"Restarting streams for network reachability change."),await async function(e){const t=L(e);t.Ea.add(4),await co(t),t.Ra.set("Unknown"),t.Ea.delete(4),await lo(t)}(this))})}),this.Ra=new io(n,r)}}async function lo(e){if(yo(e))for(const t of e.da)await t(!0)}async function co(e){for(const t of e.da)await t(!1)}function uo(e,t){const n=L(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),go(n)?fo(n):Mo(n).O_()&&po(n,t))}function ho(e,t){const n=L(e),r=Mo(n);n.Ia.delete(t),r.O_()&&mo(n,t),0===n.Ia.size&&(r.O_()?r.L_():yo(n)&&n.Ra.set("Unknown"))}function po(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Mo(e).Y_(t)}function mo(e,t){e.Va.Ue(t),Mo(e).Z_(t)}function fo(e){e.Va=new ls({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Mo(e).start(),e.Ra.ua()}function go(e){return yo(e)&&!Mo(e).x_()&&e.Ia.size>0}function yo(e){return 0===L(e).Ea.size}function vo(e){e.Va=void 0}async function bo(e){e.Ra.set("Online")}async function wo(e){e.Ia.forEach((t,n)=>{po(e,t)})}async function xo(e,t){vo(e),go(e)?(e.Ra.ha(t),fo(e)):e.Ra.set("Unknown")}async function ko(e,t,n){if(e.Ra.set("Online"),t instanceof os&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){N(oo,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await So(e,n)}else if(t instanceof ss?e.Va.Ze(t):t instanceof is?e.Va.st(t):e.Va.tt(t),!n.isEqual(ye.min()))try{const t=await ji(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(vt.EMPTY_BYTE_STRING,r.snapshotVersion)),mo(e,t);const s=new Bs(r.target,t,n,r.sequenceNumber);po(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N(oo,"Failed to raise snapshot:",t),await So(e,t)}}async function So(e,t,n){if(!Ie(t))throw t;e.Ea.add(1),await co(e),e.Ra.set("Offline"),n||(n=()=>ji(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{N(oo,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await lo(e)})}function Eo(e,t){return t().catch(n=>So(e,n,t))}async function Co(e){const t=L(e),n=Do(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ae;for(;To(t);)try{const e=await Pi(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,No(t,e)}catch(e){await So(t,e)}_o(t)&&Io(t)}function To(e){return yo(e)&&e.Ta.length<10}function No(e,t){e.Ta.push(t);const n=Do(e);n.O_()&&n.X_&&n.ea(t.mutations)}function _o(e){return yo(e)&&!Do(e).x_()&&e.Ta.length>0}function Io(e){Do(e).start()}async function jo(e){Do(e).ra()}async function Ao(e){const t=Do(e);for(const n of e.Ta)t.ea(n.mutations)}async function Po(e,t,n){const r=e.Ta.shift(),s=Ur.from(r,t,n);await Eo(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Co(e)}async function Ro(e,t){t&&Do(e).X_&&await async function(e,t){if(function(e){return Gr(e)&&e!==O.ABORTED}(t.code)){const n=e.Ta.shift();Do(e).B_(),await Eo(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Co(e)}}(e,t),_o(e)&&Io(e)}async function Lo(e,t){const n=L(e);n.asyncQueue.verifyOperationInProgress(),N(oo,"RemoteStore received new credentials");const r=yo(n);n.Ea.add(3),await co(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await lo(n)}async function Oo(e,t){const n=L(e);t?(n.Ea.delete(2),await lo(n)):t||(n.Ea.add(2),await co(n),n.Ra.set("Unknown"))}function Mo(e){return e.ma||(e.ma=function(e,t,n){const r=L(e);return r.sa(),new to(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:bo.bind(null,e),t_:wo.bind(null,e),r_:xo.bind(null,e),H_:ko.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),go(e)?fo(e):e.Ra.set("Unknown")):(await e.ma.stop(),vo(e))})),e.ma}function Do(e){return e.fa||(e.fa=function(e,t,n){const r=L(e);return r.sa(),new no(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:jo.bind(null,e),r_:Ro.bind(null,e),ta:Ao.bind(null,e),na:Po.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Co(e)):(await e.fa.stop(),e.Ta.length>0&&(N(oo,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class zo{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new D,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new zo(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new M(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fo(e,t){if(_("AsyncQueue",`${t}: ${e}`),Ie(e))return new M(O.UNAVAILABLE,`${t}: ${e}`);throw e}class qo{static emptySet(e){return new qo(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ie.comparator(t.key,n.key):(e,t)=>ie.comparator(e.key,t.key),this.keyedMap=er(),this.sortedSet=new dt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Vo{constructor(){this.ga=new dt(ie.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):A(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Uo{constructor(e,t,n,r,s,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Uo(e,t,qo.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Bo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $o{constructor(){this.queries=Ho(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=L(e),r=n.queries;n.queries=Ho(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new M(O.ABORTED,"Firestore shutting down"))}}function Ho(){return new Xn(e=>$n(e),Bn)}async function Wo(e,t){const n=L(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new Bo,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Fo(e,`Initialization of query '${Hn(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Xo(n)}async function Go(e,t){const n=L(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ko(e,t){const n=L(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Xo(n)}function Qo(e,t,n){const r=L(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Xo(e){e.Ca.forEach(e=>{e.next()})}var Yo,Jo;(Jo=Yo||(Yo={})).Ma="default",Jo.Cache="cache";class Zo{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Uo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yo.Cache}}class ea{constructor(e){this.key=e}}class ta{constructor(e){this.key=e}}class na{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ar(),this.mutatedKeys=ar(),this.eu=Kn(e),this.tu=new qo(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Vo,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Wn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),p=!0):this.su(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(o=!0)),p&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return A(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==i.length||l?{snapshot:new Uo(this.query,e.tu,s,i,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Vo,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ar(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ta(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ea(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ar();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ra="SyncEngine";class sa{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ia{constructor(e){this.key=e,this.hu=!1}}class oa{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Xn(e=>$n(e),Bn),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ie.comparator),this.Au=new Map,this.Ru=new hi,this.Vu={},this.mu=new Map,this.fu=Js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function aa(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_a(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ca(r,t,n,!0),s}async function la(e,t){const n=_a(e);await ca(n,t,!0,!1)}async function ca(e,t,n,r){const s=await Ri(e.localStore,Fn(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await ua(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&uo(e.remoteStore,s),a}async function ua(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Oi(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return ka(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const i=await Oi(e.localStore,t,!0),o=new na(t,i.Qs),a=o.ru(i.documents),l=rs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=o.applyChanges(a,e.isPrimaryClient,l);ka(e,n,c.au);const u=new sa(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function da(e,t,n){const r=L(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!Bn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Li(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ho(r.remoteStore,s.targetId),wa(r,s.targetId)}).catch(Te)):(wa(r,s.targetId),await Li(r.localStore,s.targetId,!0))}async function ha(e,t){const n=L(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ho(n.remoteStore,r.targetId))}async function pa(e,t){const n=L(e);try{const e=await function(e,t){const n=L(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];t.targetChanges.forEach((i,a)=>{const l=s.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(vt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ti||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&o.push(n.Pi.updateTargetData(e,c))});let a=Jn(),l=ar();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Ai(e,i,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ye.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ne.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(R(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?R(r.hu,14607):e.removedDocuments.size>0&&(R(r.hu,42227),r.hu=!1))}),await Ca(n,e,t)}catch(e){await Te(e)}}function ma(e,t,n){const r=L(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=L(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Xo(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fa(e,t,n){const r=L(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new dt(ie.comparator);e=e.insert(i,sn.newNoDocument(i,ye.min()));const n=ar().add(i),s=new ns(ye.min(),new Map,new dt(K),e,n);await pa(r,s),r.du=r.du.remove(i),r.Au.delete(t),Ea(r)}else await Li(r.localStore,t,!1).then(()=>wa(r,t,n)).catch(Te)}async function ga(e,t){const n=L(e),r=t.batch.batchId;try{const e=await function(e,t){const n=L(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Ne.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);R(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ar();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ba(n,r,null),va(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ca(n,e)}catch(e){await Te(e)}}async function ya(e,t,n){const r=L(e);try{const e=await function(e,t){const n=L(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(R(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ba(r,t,n),va(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ca(r,e)}catch(n){await Te(n)}}function va(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function ba(e,t,n){const r=L(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function wa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||xa(e,t)})}function xa(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ho(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ea(e))}function ka(e,t,n){for(const r of n)r instanceof ea?(e.Ru.addReference(r.key,t),Sa(e,r)):r instanceof ta?(N(ra,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||xa(e,r.key)):A(19791,{wu:r})}function Sa(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(N(ra,"New document in limbo: "+n),e.Eu.add(r),Ea(e))}function Ea(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ie(ne.fromString(t)),r=e.fu.next();e.Au.set(r,new ia(n)),e.du=e.du.insert(n,r),uo(e.remoteStore,new Bs(Fn(On(n.path)),r,"TargetPurposeLimboResolution",je.ce))}}async function Ca(e,t,n){const r=L(e),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){s.push(e);const t=ki.As(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(e,t){const n=L(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ne.forEach(t,t=>Ne.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ne.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ie(e))throw e;N(Ci,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Ta(e,t){const n=L(e);if(!n.currentUser.isEqual(t)){N(ra,"User change. New user:",t.toKey());const e=await Ii(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new M(O.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ca(n,e.Ls)}}function Na(e,t){const n=L(e),r=n.Au.get(t);if(r&&r.hu)return ar().add(r.key);{let e=ar();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function _a(e){const t=L(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pa.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Na.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fa.bind(null,t),t.Pu.H_=Ko.bind(null,t.eventManager),t.Pu.yu=Qo.bind(null,t.eventManager),t}function Ia(e){const t=L(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ga.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ya.bind(null,t),t}class ja{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yi(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _i(this.persistence,new Ei,e.initialUser,this.serializer)}Cu(e){return new vi(wi.mi,this.serializer)}Du(e){return new zi}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ja.provider={build:()=>new ja};class Aa extends ja{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){R(this.persistence.referenceDelegate instanceof xi,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ri(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Ys.withCacheSize(this.cacheSizeBytes):Ys.DEFAULT;return new vi(e=>xi.mi(e,t),this.serializer)}}class Pa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ma(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ta.bind(null,this.syncEngine),await Oo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $o}createDatastore(e){const t=Yi(e.databaseInfo.databaseId),n=function(e){return new Qi(e)}(e.databaseInfo);return function(e,t,n,r){return new so(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new ao(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>ma(this.syncEngine,e,0),Vi.v()?new Vi:new Fi)}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new oa(e,t,n,r,s,i);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=L(e);N(oo,"RemoteStore shutting down."),t.Ea.add(5),await co(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Pa.provider={build:()=>new Pa};class Ra{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const La="FirestoreClient";class Oa{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=S.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{N(La,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(N(La,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new D;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ma(e,t){e.asyncQueue.verifyOperationInProgress(),N(La,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ii(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Da(e,t){e.asyncQueue.verifyOperationInProgress();const n=await za(e);N(La,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Lo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Lo(t.remoteStore,n)),e._onlineComponents=t}async function za(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N(La,"Using user provided OfflineComponentProvider");try{await Ma(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;I("Error using user provided cache. Falling back to memory cache: "+n),await Ma(e,new ja)}}else N(La,"Using default OfflineComponentProvider"),await Ma(e,new Aa(void 0));return e._offlineComponents}async function Fa(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N(La,"Using user provided OnlineComponentProvider"),await Da(e,e._uninitializedComponentsProvider._online)):(N(La,"Using default OnlineComponentProvider"),await Da(e,new Pa))),e._onlineComponents}function qa(e){return Fa(e).then(e=>e.syncEngine)}async function Va(e){const t=await Fa(e),n=t.eventManager;return n.onListen=aa.bind(null,t.syncEngine),n.onUnlisten=da.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=la.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ha.bind(null,t.syncEngine),n}function Ua(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new D;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ra({next:a=>{i.Nu(),t.enqueueAndForget(()=>Go(e,o));const l=a.docs.has(n);!l&&a.fromCache?s.reject(new M(O.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?s.reject(new M(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new Zo(On(n.path),i,{includeMetadataChanges:!0,qa:!0});return Wo(e,o)}(await Va(e),e.asyncQueue,t,n,r)),r.promise}function Ba(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new D;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ra({next:n=>{i.Nu(),t.enqueueAndForget(()=>Go(e,o)),n.fromCache&&"server"===r.source?s.reject(new M(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new Zo(n,i,{includeMetadataChanges:!0,qa:!0});return Wo(e,o)}(await Va(e),e.asyncQueue,t,n,r)),r.promise}function $a(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ha=new Map,Wa="firestore.googleapis.com",Ga=!0;class Ka{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new M(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wa,this.ssl=Ga}else this.host=e.host,this.ssl=e.ssl??Ga;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xs;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ei)throw new M(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new M(O.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$a(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new M(O.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new M(O.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new M(O.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qa{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ka({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new M(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ka(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new F;switch(e.type){case"firstParty":return new B(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new M(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ha.get(e);t&&(N("ComponentProvider","Removing Datastore"),Ha.delete(e),t.terminate())}(this),Promise.resolve()}}class Xa{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xa(this.firestore,e,this._query)}}class Ya{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ya(this.firestore,e,this._key)}toJSON(){return{type:Ya._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(pe(t,Ya._jsonSchema))return new Ya(e,n||null,new ie(ne.fromString(t.referencePath)))}}Ya._jsonSchemaVersion="firestore/documentReference/1.0",Ya._jsonSchema={type:he("string",Ya._jsonSchemaVersion),referencePath:he("string")};class Ja extends Xa{constructor(e,t,n){super(e,t,On(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ya(this.firestore,null,new ie(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function Za(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),oe("collection","path",t),e instanceof Qa){const n=ne.fromString(t,...r);return le(n),new Ja(e,null,n)}{if(!(e instanceof Ya||e instanceof Ja))throw new M(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return le(n),new Ja(e.firestore,null,n)}}function el(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=G.newId()),oe("doc","path",t),e instanceof Qa){const n=ne.fromString(t,...r);return ae(n),new Ya(e,null,new ie(n))}{if(!(e instanceof Ya||e instanceof Ja))throw new M(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return ae(n),new Ya(e.firestore,e instanceof Ja?e.converter:null,new ie(n))}}const tl="AsyncQueue";class nl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ji(this,"async_queue_retry"),this._c=()=>{const e=Xi();e&&N(tl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Xi();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Xi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new D;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ie(e))throw e;N(tl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,_("INTERNAL UNHANDLED ERROR: ",rl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=zo.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&A(47125,{Pc:rl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class sl extends Qa{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new nl,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nl(e),this._firestoreClient=void 0,await e}}}function il(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||At,s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=de(e,Qa);const s=(0,l.zJ)(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;s&&((0,l.gE)(`https://${a}`),(0,l.P1)("Firestore",!0)),i.host!==Wa&&i.host!==a&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!(0,l.bD)(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=S.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,e._app?.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new M(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new S(s)}e._authCredentials=new q(new z(t,n))}}(s,...e)}return s}function ol(e){if(e._terminated)throw new M(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||al(e),e._firestoreClient}function al(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new jt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,$a(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Oa(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(vt.fromBase64String(e))}catch(e){throw new M(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ll(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ll._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(pe(e,ll._jsonSchema))return ll.fromBase64String(e.bytes)}}ll._jsonSchemaVersion="firestore/bytes/1.0",ll._jsonSchema={type:he("string",ll._jsonSchemaVersion),bytes:he("string")};class cl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new M(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._methodName=e}}class dl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dl._jsonSchemaVersion}}static fromJSON(e){if(pe(e,dl._jsonSchema))return new dl(e.latitude,e.longitude)}}dl._jsonSchemaVersion="firestore/geoPoint/1.0",dl._jsonSchema={type:he("string",dl._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};class hl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(pe(e,hl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new hl(e.vectorValues);throw new M(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hl._jsonSchemaVersion="firestore/vectorValue/1.0",hl._jsonSchema={type:he("string",hl._jsonSchemaVersion),vectorValues:he("object")};const pl=/^__.*__$/;class ml{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Lr(e,this.data,t,this.fieldTransforms)}}class fl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Or(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw A(40011,{Ac:e})}}class yl{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Pl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(gl(this.Ac)&&pl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Yi(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yl({Ac:e,methodName:t,Dc:n,path:se.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bl(e){const t=e._freezeSettings(),n=Yi(e._databaseId);return new vl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wl(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);_l("Data must be an object, but it was:",o,r);const a=Tl(r,o);let l,c;if(i.merge)l=new gt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Il(t,r,n);if(!o.contains(s))throw new M(O.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Rl(e,s)||e.push(s)}l=new gt(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new ml(new nn(a),l,c)}class xl extends ul{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xl}}function kl(e,t,n,r){const s=e.Cc(1,t,n);_l("Data must be an object, but it was:",s,r);const i=[],o=nn.empty();ct(r,(e,r)=>{const a=Al(t,e,n);r=(0,l.Ku)(r);const c=s.yc(a);if(r instanceof xl)i.push(a);else{const e=Cl(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new gt(i);return new fl(o,a,s.fieldTransforms)}function Sl(e,t,n,r,s,i){const o=e.Cc(1,t,n),a=[Il(t,r,n)],c=[s];if(i.length%2!=0)throw new M(O.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<i.length;l+=2)a.push(Il(t,i[l])),c.push(i[l+1]);const u=[],d=nn.empty();for(let p=a.length-1;p>=0;--p)if(!Rl(u,a[p])){const e=a[p];let t=c[p];t=(0,l.Ku)(t);const n=o.yc(e);if(t instanceof xl)u.push(e);else{const r=Cl(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new gt(u);return new fl(d,h,o.fieldTransforms)}function El(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cl(n,e.Cc(r?4:3,t))}function Cl(e,t){if(Nl(e=(0,l.Ku)(e)))return _l("Unsupported field value:",t,e),Tl(e,t);if(e instanceof ul)return function(e,t){if(!gl(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Cl(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ge.fromDate(e);return{timestampValue:gs(t.serializer,n)}}if(e instanceof ge){const n=new ge(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gs(t.serializer,n)}}if(e instanceof dl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ll)return{bytesValue:ys(t.serializer,e._byteString)};if(e instanceof Ya){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ws(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof hl)return function(e,t){return{mapValue:{fields:{[Rt]:{stringValue:Mt},[Dt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ur(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${ue(e)}`)}(e,t)}function Tl(e,t){const n={};return ut(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ct(e,(e,r)=>{const s=Cl(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Nl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ge||e instanceof dl||e instanceof ll||e instanceof Ya||e instanceof ul||e instanceof hl)}function _l(e,t,n){if(!Nl(n)||!ce(n)){const r=ue(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Il(e,t,n){if((t=(0,l.Ku)(t))instanceof cl)return t._internalPath;if("string"==typeof t)return Al(e,t);throw Pl("Field path arguments must be of type string or ",e,!1,void 0,n)}const jl=new RegExp("[~\\*/\\[\\]]");function Al(e,t,n){if(t.search(jl)>=0)throw Pl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cl(...t.split("."))._internalPath}catch(r){throw Pl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Pl(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new M(O.INVALID_ARGUMENT,a+e+l)}function Rl(e,t){return e.some(e=>e.isEqual(t))}class Ll{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ya(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ol(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ml("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ol extends Ll{data(){return super.data()}}function Ml(e,t){return"string"==typeof t?Al(e,t):t instanceof cl?t._internalPath:t._delegate._internalPath}function Dl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new M(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zl{}class Fl extends zl{}function ql(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof zl&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Ul).length,n=e.filter(e=>e instanceof Vl).length;if(t>1||t>0&&n>0)throw new M(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Vl extends Fl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Vl(e,t,n)}_apply(e){const t=this._parse(e);return Gl(e._query,t),new Xa(e.firestore,e.converter,Vn(e._query,t))}_parse(e){const t=bl(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new M(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Wl(o,i);const t=[];for(const n of o)t.push(Hl(r,e,n));a={arrayValue:{values:t}}}else a=Hl(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Wl(o,i),a=El(n,t,o,"in"===i||"not-in"===i);return hn.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ul extends zl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ul(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:pn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Gl(n,s),n=Vn(n,s)}(e._query,t),new Xa(e.firestore,e.converter,Vn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Bl extends Fl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Bl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new M(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new M(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cn(t,n)}(e._query,this._field,this._direction);return new Xa(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Rn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function $l(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ml("orderBy",e);return Bl._create(n,t)}function Hl(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new M(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dn(t)&&-1!==n.indexOf("/"))throw new M(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ne.fromString(n));if(!ie.isDocumentKey(r))throw new M(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gt(e,new ie(r))}if(n instanceof Ya)return Gt(e,n._key);throw new M(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ue(n)}.`)}function Wl(e,t){if(!Array.isArray(e)||0===e.length)throw new M(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Gl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new M(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new M(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Kl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(zt(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw A(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ct(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[Dt].arrayValue?.values?.map(e=>xt(e.doubleValue));return new hl(t)}convertGeoPoint(e){return new dl(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=_t(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(It(e));default:return null}}convertTimestamp(e){const t=wt(e);return new ge(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ne.fromString(e);R(Us(n),9688,{name:e});const r=new Pt(n.get(1),n.get(3)),s=new ie(n.popFirst(5));return r.isEqual(t)||_(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Ql(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Xl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yl extends Ll{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ml("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new M(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Yl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yl._jsonSchema={type:he("string",Yl._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};class Jl extends Yl{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Zl{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Xl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Jl(this._firestore,this._userDataWriter,n.key,n,new Xl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new M(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Jl(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Xl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Jl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Xl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:ec(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new M(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ec(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return A(61501,{type:e})}}function tc(e){e=de(e,Ya);const t=de(e.firestore,sl);return Ua(ol(t),e._key).then(n=>ac(t,e,n))}Zl._jsonSchemaVersion="firestore/querySnapshot/1.0",Zl._jsonSchema={type:he("string",Zl._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};class nc extends Kl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ya(this.firestore,null,t)}}function rc(e){e=de(e,Xa);const t=de(e.firestore,sl),n=ol(t),r=new nc(t);return Dl(e._query),Ba(n,e._query).then(n=>new Zl(t,r,e,n))}function sc(e,t,n){e=de(e,Ya);const r=de(e.firestore,sl),s=Ql(e.converter,t,n);return oc(r,[wl(bl(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Tr.none())])}function ic(e,t,n){e=de(e,Ya);const r=de(e.firestore,sl),s=bl(r);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof cl?Sl(s,"updateDoc",e._key,t,n,a):kl(s,"updateDoc",e._key,t),oc(r,[i.toMutation(e._key,Tr.exists(!0))])}function oc(e,t){return function(e,t){const n=new D;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ia(e);try{const e=await function(e,t){const n=L(e),r=ge.now(),s=t.reduce((e,t)=>e.add(t.key),ar());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Jn(),l=ar();return n.Ns.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=Pr(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Or(e.key,t,rn(t.value.mapValue),Tr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:tr(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new dt(K)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ca(r,e.changes),await Co(r.remoteStore)}catch(e){const t=Fo(e,"Failed to persist write");n.reject(t)}}(await qa(e),t,n)),n.promise}(ol(e),t)}function ac(e,t,n){const r=n.docs.get(t._key),s=new nc(e);return new Yl(e,s,t._key,r,new Xl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){E=e}(i.MF),(0,i.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),o=new sl(new V(e.getProvider("auth-internal")),new H(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new M(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pt(e.options.projectId,t)}(i,r),i);return s={useFetchStreams:t,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(x,k,e),(0,i.KO)(x,k,"esm2020")}()},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},719:(e,t,n)=>{n.d(t,{Yk:()=>u,as:()=>o,bZ:()=>a,logout:()=>c,nS:()=>l});var r=n(823),s=n(667),i=n(791);const o=async(e,t)=>{try{console.log("\ud83d\udd10 Trying to login teacher...");const n=(await(0,r.x9)(i.j,e,t)).user,o=await(0,s.x7)((0,s.H9)(i.db,"teachers",n.uid));if(o.exists())return console.log("\u2705 Teacher login successful!"),{success:!0,user:{uid:n.uid,email:n.email,role:"teacher",...o.data()}};{console.log("\ud83d\udcdd Creating teacher profile automatically...");const e={email:n.email,displayName:"Teacher Alex",role:"teacher",createdAt:new Date};return await(0,s.BN)((0,s.H9)(i.db,"teachers",n.uid),e),console.log("\u2705 Teacher profile created and login successful!"),{success:!0,user:{uid:n.uid,email:n.email,role:"teacher",...e}}}}catch(n){return console.log("\u274c Teacher login failed:",n.message),{success:!1,error:n.message}}},a=async(e,t)=>{try{console.log("\ud83c\udf93 Trying to login student...");const n=`${e}@teacher-alex.com`,o=(await(0,r.x9)(i.j,n,t)).user,a=await(0,s.x7)((0,s.H9)(i.db,"students",e));if(a.exists())return console.log("\u2705 Student login successful!"),{success:!0,user:{uid:o.uid,username:e,role:"student",...a.data()}};throw new Error("Student account not found.")}catch(n){return console.log("\u274c Student login failed:",n.message),{success:!1,error:n.message}}},l=async e=>{try{const{username:t,password:n,name:o,series:a}=e;console.log("\ud83d\udc68\u200d\ud83c\udf93 Creating student account for:",o);const l=`${t}@teacher-alex.com`,c=(await(0,r.eJ)(i.j,l,n)).user;return await(0,s.BN)((0,s.H9)(i.db,"students",t),{name:o,username:t,email:l,uid:c.uid,series:a,createdAt:new Date,progress:{},lastActive:new Date}),await(0,r.CI)(i.j),console.log("\u2705 Student account created successfully!"),{success:!0,message:`Student ${o} created successfully!`}}catch(t){return console.log("\u274c Failed to create student:",t.message),{success:!1,error:t.message}}},c=async()=>{try{return await(0,r.CI)(i.j),console.log("\ud83d\udc4b User logged out successfully"),{success:!0}}catch(e){return console.log("\u274c Logout failed:",e.message),{success:!1,error:e.message}}},u=e=>(0,r.hg)(i.j,e)},776:(e,t,n)=>{n.d(t,{cY:()=>m,FA:()=>R,g:()=>P,u:()=>a,Uj:()=>o,Fy:()=>y,tD:()=>V,bD:()=>M,hp:()=>q,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>p,mS:()=>l,Ku:()=>$,ZQ:()=>x,sr:()=>C,zJ:()=>f,c1:()=>E,Im:()=>O,lT:()=>N,zW:()=>j,jZ:()=>k,lV:()=>T,nr:()=>_,Ov:()=>I,gE:()=>g,Am:()=>z,I9:()=>F,P1:()=>w,eX:()=>A});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],o=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==o||null==a||null==l)throw new i;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/teacher-alex-academy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>c()?.emulatorHosts?.[e],d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>c()?.config,p=e=>c()?.[`_${e}`];class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function f(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(i)),""].join(".")}const v={};let b=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!f(window.location.host)||v[e]===t||v[e]||b)return;function n(e){return`__firebase__banner__${e}`}v[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(v))v[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}s?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function S(){const e=c()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function E(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function C(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function T(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function N(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return!S()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}function A(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}class P extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,P.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(L,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new P(n,i,t)}}const L=/\{\$([^}]+)}/g;function O(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function M(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(D(n)&&D(i)){if(!M(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function D(e){return null!==e&&"object"===typeof e}function z(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function F(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function q(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function V(e,t){const n=new U(e,t);return n.subscribe.bind(n)}class U{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=B),void 0===r.error&&(r.error=B),void 0===r.complete&&(r.complete=B);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B(){}function $(e){return e&&e._delegate?e._delegate:e}},791:(e,t,n)=>{n.d(t,{j:()=>a,db:()=>l});var r=n(232);(0,r.KO)("firebase","12.0.0","app");var s=n(823),i=n(667);const o=(0,r.Wp)({apiKey:"AIzaSyA27IBxS3B0HC2jECzyQPt-CvflxRzfIW0",authDomain:"teacher-alex-v3.firebaseapp.com",projectId:"teacher-alex-v3",storageBucket:"teacher-alex-v3.firebasestorage.app",messagingSenderId:"38393935707",appId:"1:38393935707:web:6b9a5f1f5a2e282d09cc7e"}),a=(0,s.xI)(o),l=(0,i.aU)(o)},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},823:(e,t,n)=>{n.d(t,{eJ:()=>at,xI:()=>Rn,hg:()=>ct,x9:()=>lt,CI:()=>ut});var r=n(232),s=n(776),i=n(965),o=n(606);function a(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=a,c=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new i.Vy("@firebase/auth");function d(e){if(u.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];u.error(`Auth (${r.MF}): ${e}`,...n)}}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw g(e,...n)}function p(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g(e,...n)}function m(e,t,n){const r={...l(),[t]:n};return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function f(e){return m(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return c.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw g(t,...r)}}function v(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function b(e,t){e||v(t)}function w(){return"undefined"!==typeof self&&self.location?.href||""}function x(){return"http:"===k()||"https:"===k()}function k(){return"undefined"!==typeof self&&self.location?.protocol||null}class S{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(x()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function E(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class C{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void v("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void v("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void v("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const T={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},N=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_=new S(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function j(e,t,n,r){return A(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.Am)({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...i};return(0,s.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),C.fetch()(await R(e,e.config.apiHost,n,a),c)})}async function A(e,t,n){e._canInitEmulator=!1;const r={...T,...t};try{const t=new O(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw M(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw M(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw M(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw M(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);h(e,a)}}catch(i){if(i instanceof s.g)throw i;h(e,"network-request-failed",{message:String(i)})}}async function P(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await j(e,t,n,r,s);return"mfaPendingCredential"in i&&h(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function R(e,t,n,r){const s=`${t}${n}?${r}`,i=e,o=i.config.emulator?E(e.config,s):`${e.config.apiScheme}://${s}`;if(N.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(o).toString()}return o}function L(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class O{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(p(this.auth,"network-request-failed")),_.get())})}}function M(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=p(e,t,r);return s.customData._tokenResponse=n,s}function D(e){return void 0!==e&&void 0!==e.enterprise}class z{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return L(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function F(e,t){return j(e,"GET","/v2/recaptchaConfig",I(e,t))}async function q(e,t){return j(e,"POST","/v1/accounts:lookup",t)}function V(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function U(e){return 1e3*Number(e)}function B(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return d("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(d("Failed to decode base64 JWT payload"),null)}catch(i){return d("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $(e){const t=B(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function H(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=V(this.lastLoginAt),this.creationTime=V(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function K(e){const t=e.auth,n=await e.getIdToken(),r=await H(e,q(t,{idToken:n}));y(r?.users.length,t,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const i=s.providerUserInfo?.length?Q(s.providerUserInfo):[],o=(a=e.providerData,l=i,[...a.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var a,l;const c=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!o?.length,d=!!c&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new G(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function Q(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class X{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):$(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=$(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await A(e,{},async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await R(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),C.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new X;return n&&(y("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(y("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new X,this.toJSON())}_performRefresh(){return v("not implemented")}}function Y(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class J{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...s}=e;this.providerId="firebase",this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new G(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await H(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=B(r);y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:V(U(i.auth_time)),issuedAtTime:V(U(i.iat)),expirationTime:V(U(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await K(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new J({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await K(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(f(this.auth));const e=await this.getIdToken();return await H(this,async function(e,t){return j(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,i=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:p,stsTokenManager:m}=t;y(u&&m,e,"internal-error");const f=X.fromJSON(this.name,m);y("string"===typeof u,e,"internal-error"),Y(n,e.name),Y(r,e.name),y("boolean"===typeof d,e,"internal-error"),y("boolean"===typeof h,e,"internal-error"),Y(s,e.name),Y(i,e.name),Y(o,e.name),Y(a,e.name),Y(l,e.name),Y(c,e.name);const g=new J({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:f,createdAt:l,lastLoginAt:c});return p&&Array.isArray(p)&&(g.providerData=p.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new X;r.updateFromServerResponse(t);const s=new J({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await K(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Q(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!s?.length,o=new X;o.updateFromIdToken(n);const a=new J({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new G(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(a,l),a}}const Z=new Map;function ee(e){b(e instanceof Function,"Expected a class definition");let t=Z.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Z.set(e,t),t)}class te{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}te.type="NONE";const ne=te;function re(e,t,n){return`firebase:${e}:${t}:${n}`}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=re(this.userKey,r.apiKey,s),this.fullPersistenceKey=re("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await q(this.auth,{idToken:e}).catch(()=>{});return t?J._fromGetAccountInfoResponse(this.auth,t,e):null}return J._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(ee(ne),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ee(ne);const i=re(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(i);if(t){let n;if("string"===typeof t){const r=await q(e,{idToken:t}).catch(()=>{});if(!r)break;n=await J._fromGetAccountInfoResponse(e,r,t)}else n=J._fromJSON(e,t);l!==s&&(o=n),s=l;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch{}})),new se(s,e,n)):new se(s,e,n)}}function ie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ce(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(de(t))return"Blackberry";if(he(t))return"Webos";if(ae(t))return"Safari";if((t.includes("chrome/")||le(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function ae(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return pe(e)||ue(e)||he(e)||de(e)||/windows phone/i.test(e)||ce(e)}function fe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ie((0,s.ZQ)());break;case"Worker":t=`${ie((0,s.ZQ)())}-${e}`;break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${i}`}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class ye{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ve{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ee(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await se.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await q(this,{idToken:e}),n=await J._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,r=n?._redirectEventId,i=await this.tryRedirectSignIn(e);t&&t!==r||!i?.user||(n=i.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await K(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(f(this));const t=e?(0,s.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(f(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(f(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ee(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return j(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return j(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ee(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[ee(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(u.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];u.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function be(e){return(0,s.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ke(e){return xe.loadJS(e)}function Se(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ee{constructor(){this.enterprise=new Ce}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ce{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Te="NO_RECAPTCHA";class Ne{constructor(e){this.type="recaptcha-enterprise",this.auth=be(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;D(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Te)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ee).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{F(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new z(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&D(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xe.recaptchaEnterpriseScript;0!==t.length&&(t+=s),ke(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function _e(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Ne(e);let o;if(s)o=Te;else try{o=await i.verify(n)}catch(l){o=await i.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ie(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await _e(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await _e(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const s=await _e(e,t,n);return r(e,s).catch(async s=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const s=await _e(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await _e(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function je(e){const t=be(e),n=await F(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new z(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ne(t).verify()}}function Ae(e,t,n){const r=be(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=Pe(t),{host:a,port:l}=function(e){const t=Pe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Re(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Re(t)}}}(t),c=null===l?"":`:${l}`,u={url:`${o}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,s.bD)(u,r.config.emulator)&&(0,s.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,s.zJ)(a)?((0,s.gE)(`${o}//${a}${c}`),(0,s.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Pe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Re(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Le{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return v("not implemented")}_getIdTokenResponse(e){return v("not implemented")}_linkToIdToken(e,t){return v("not implemented")}_getReauthenticationResolver(e){return v("not implemented")}}async function Oe(e,t){return j(e,"POST","/v1/accounts:signUp",t)}async function Me(e,t){return P(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}class De extends Le{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new De(e,t,"password")}static _fromEmailAndCode(e,t){return new De(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ie(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Me,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:h(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return P(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:h(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ze(e,t){return P(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class Fe extends Le{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):h("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...s}=t;if(!n||!r)return null;const i=new Fe(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ze(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ze(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ze(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}async function qe(e,t){return j(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}const Ve={USER_NOT_FOUND:"user-not-found"};class Ue extends Le{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ue({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ue({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await P(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw M(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return P(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,{...t,operation:"REAUTH"}),Ve)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Ue({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Be{constructor(e){const t=(0,s.I9)((0,s.hp)(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);y(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new Be(t)}catch{return null}}}class $e{constructor(){this.providerId=$e.PROVIDER_ID}static credential(e,t){return De._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Be.parseLink(t);return y(n,"argument-error"),De._fromEmailAndCode(e,n.code,n.tenantId)}}$e.PROVIDER_ID="password",$e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",$e.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class He{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class We extends He{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ge extends We{constructor(){super("facebook.com")}static credential(e){return Fe._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ge.credential(t.oauthAccessToken)}catch{return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";class Ke extends We{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fe._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ke.credential(n,r)}catch{return null}}}Ke.GOOGLE_SIGN_IN_METHOD="google.com",Ke.PROVIDER_ID="google.com";class Qe extends We{constructor(){super("github.com")}static credential(e){return Fe._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qe.credential(t.oauthAccessToken)}catch{return null}}}Qe.GITHUB_SIGN_IN_METHOD="github.com",Qe.PROVIDER_ID="github.com";class Xe extends We{constructor(){super("twitter.com")}static credential(e,t){return Fe._fromParams({providerId:Xe.PROVIDER_ID,signInMethod:Xe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Xe.credentialFromTaggedObject(e)}static credentialFromError(e){return Xe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Xe.credential(n,r)}catch{return null}}}async function Ye(e,t){return P(e,"POST","/v1/accounts:signUp",I(e,t))}Xe.TWITTER_SIGN_IN_METHOD="twitter.com",Xe.PROVIDER_ID="twitter.com";class Je{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await J._fromIdTokenResponse(e,n,r),i=Ze(n);return new Je({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ze(n);return new Je({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class et extends s.g{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw et._fromErrorAndOperation(e,n,t,r);throw n})}async function nt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await H(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Je._forOperation(e,"link",r)}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(f(s));const i="reauthenticate";try{const r=await H(e,tt(s,i,t,e),n);y(r.idToken,s,"internal-error");const o=B(r.idToken);y(o,s,"internal-error");const{sub:a}=o;return y(e.uid===a,s,"user-mismatch"),Je._forOperation(e,i,r)}catch(o){throw"auth/user-not-found"===o?.code&&h(s,"user-mismatch"),o}}async function st(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(f(e));const s="signIn",i=await tt(e,s,t),o=await Je._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(o.user),o}async function it(e,t){return st(be(e),t)}async function ot(e){const t=be(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function at(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(f(e));const s=be(e),i=Ie(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ye,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ot(e),t}),a=await Je._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function lt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(f(e)):it((0,s.Ku)(e),$e.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ot(e),t})}function ct(e,t,n,r){return(0,s.Ku)(e).onAuthStateChanged(t,n,r)}function ut(e){return(0,s.Ku)(e).signOut()}function dt(e,t){return j(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}new WeakMap;const ht="__sak";class pt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class mt extends pt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=me(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mt.type="LOCAL";const ft=mt;function gt(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function yt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class vt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=yt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return gt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=yt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=yt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=gt(n);const s=setInterval(()=>{const e=gt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}vt.type="COOKIE";class bt extends pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bt.type="SESSION";const wt=bt;class xt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new xt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!i?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xt.receivers=[];class St{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=kt("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Et(){return window}function Ct(){return"undefined"!==typeof Et().WorkerGlobalScope&&"function"===typeof Et().importScripts}const Tt="firebaseLocalStorageDb",Nt="firebaseLocalStorage",_t="fbase_key";class It{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jt(e,t){return e.transaction([Nt],t?"readwrite":"readonly").objectStore(Nt)}function At(){const e=indexedDB.open(Tt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Nt,{keyPath:_t})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Nt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Tt);return new It(e).toPromise()}(),t(await At()))})})}async function Pt(e,t,n){const r=jt(e,!0).put({[_t]:t,value:n});return new It(r).toPromise()}function Rt(e,t){const n=jt(e,!0).delete(t);return new It(n).toPromise()}class Lt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await At()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ct()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xt._getInstance(Ct()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new St(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await At();return await Pt(e,ht,"1"),await Rt(e,ht),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=jt(e,!1).get(t),r=await new It(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=jt(e,!1).getAll();return new It(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Lt.type="LOCAL";const Ot=Lt;function Mt(e,t){return j(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}Se("rcb"),new S(3e4,6e4);const Dt="recaptcha";async function zt(e,t,n){if(!e._getRecaptchaConfig())try{await je(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){y("enroll"===t.type,e,"internal-error");const s={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Ie(e,s,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Te){y(n?.type===Dt,e,"argument-error");return dt(e,await Ft(e,t,n))}return dt(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const s=r.multiFactorHint?.uid||r.multiFactorUid;y(s,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ie(e,i,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Te){y(n?.type===Dt,e,"argument-error");return Mt(e,await Ft(e,t,n))}return Mt(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},s=Ie(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Te){y(n?.type===Dt,e,"argument-error");return qe(e,await Ft(e,t,n))}return qe(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Ft(e,t,n){y(n.type===Dt,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class qt{constructor(e){this.providerId=qt.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return zt(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return Ue._fromVerification(e,t)}static credentialFromResult(e){const t=e;return qt.credentialFromTaggedObject(t)}static credentialFromError(e){return qt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ue._fromTokenResponse(n,r):null}}function Vt(e,t){return t?ee(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}qt.PROVIDER_ID="phone",qt.PHONE_SIGN_IN_METHOD="phone";class Ut extends Le{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ze(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ze(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ze(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Bt(e){return st(e.auth,new Ut(e),e.bypassAuthState)}function $t(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),rt(n,new Ut(e),e.bypassAuthState)}async function Ht(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),nt(n,new Ut(e),e.bypassAuthState)}class Wt{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Bt;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return $t;default:h(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gt=new S(2e3,1e4);class Kt extends Wt{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Kt.currentPopupAction&&Kt.currentPopupAction.cancel(),Kt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=kt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(p(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(p(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kt.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(p(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Gt.get())};e()}}Kt.currentPopupAction=null;const Qt=new Map;class Xt extends Wt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Qt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Zt(t),r=Jt(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Qt.set(this.auth._key(),e)}return this.bypassAuthState||Qt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Yt(e,t){Qt.set(e._key(),t)}function Jt(e){return ee(e._redirectPersistence)}function Zt(e){return re("pendingRedirect",e.config.apiKey,e.name)}async function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(f(e));const s=be(e),i=Vt(s,t),o=new Xt(s,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,t)),a}class tn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rn(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(p(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nn(e))}saveEventToCache(e){this.cachedEventUids.add(nn(e)),this.lastProcessedEventTime=Date.now()}}function nn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rn(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const sn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,on=/^https?/;async function an(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return j(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(ln(n))return}catch{}h(e,"unauthorized-domain")}function ln(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!on.test(n))return!1;if(sn.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const cn=new S(3e4,6e4);function un(){const e=Et().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function dn(e){return new Promise((t,n)=>{function r(){un(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{un(),n(p(e,"network-request-failed"))},timeout:cn.get()})}if(Et().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!Et().gapi?.load){const t=Se("iframefcb");return Et()[t]=()=>{gapi.load?r():n(p(e,"network-request-failed"))},ke(`${xe.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw hn=null,e})}let hn=null;const pn=new S(5e3,15e3),mn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?E(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:r.MF},o=fn.get(e.config.apiHost);o&&(i.eid=o);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${(0,s.Am)(i).slice(1)}`}async function yn(e){const t=await function(e){return hn=hn||dn(e),hn}(e),n=Et().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:gn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=p(e,"network-request-failed"),i=Et().setTimeout(()=>{r(s)},pn.get());function o(){Et().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}const vn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...vn,width:r.toString(),height:i.toString(),top:o,left:a},u=(0,s.ZQ)().toLowerCase();n&&(l=le(u)?"_blank":n),oe(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return pe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!window.navigator?.standalone}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new bn(null);const h=window.open(t||"",l,d);y(h,e,"popup-blocked");try{h.focus()}catch(p){}return new bn(h)}const xn="__/auth/handler",kn="emulator/auth/handler",Sn=encodeURIComponent("fac");async function En(e,t,n,i,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:r.MF,eventId:o};if(t instanceof He){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof We){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${Sn}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${xn}`;return E(t,kn)}(e)}?${(0,s.Am)(c).slice(1)}${d}`}const Cn="webStorageSupport";const Tn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wt,this._completeRedirectFn=en,this._overrideRedirectResult=Yt}async _openPopup(e,t,n,r){b(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return wn(e,await En(e,t,n,w(),r),kt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Et().location.href=e}(await En(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await yn(e),n=new tn(e);return t.register("authEvent",t=>{y(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cn,{type:Cn},n=>{const r=n?.[0]?.[Cn];void 0!==r&&t(!!r),h(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=an(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return me()||ae()||pe()}};var Nn="@firebase/auth",_n="1.11.0";class In{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const jn=(0,s.XA)("authIdTokenMaxAge")||300;let An=null;const Pn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jn)return;const s=n?.token;An!==s&&(An=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Rn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.bD)(r,t??{}))return e;h(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Tn,persistence:[Ot,ft,wt]}),i=(0,s.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=Pn(e.toString());!function(e,t,n){(0,s.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,s.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const o=(0,s.Tj)("auth");return o&&Ae(n,`http://${o}`),n}var Ln;xe={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=p("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Ln="Browser",(0,r.om)(new o.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ln,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fe(Ln)},c=new ve(r,s,i,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ee);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new o.uA("auth-internal",e=>(e=>new In(e))(be(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Nn,_n,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Ln)),(0,r.KO)(Nn,_n,"esm2020")},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,m=!1,f=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!f)if(null!==r(c))f=!0,E||(E=!0,S());else{var t=r(u);null!==t&&P(k,t.startTime-e)}}var S,E=!1,C=-1,T=5,N=-1;function _(){return!!y||!(t.unstable_now()-N<T)}function I(){if(y=!1,E){var e=t.unstable_now();N=e;var n=!0;try{e:{f=!1,g&&(g=!1,b(C),C=-1),m=!0;var i=p;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&_());){var o=h.callback;if("function"===typeof o){h.callback=null,p=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(k,l.startTime-e),n=!1}}break e}finally{h=null,p=i,m=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=I,S=function(){A.postMessage(null)}}else S=function(){v(I,0)};function P(e,n){C=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(C),C=-1):g=!0,P(k,i-o))):(e.sortIndex=a,n(c,e),f||m||(f=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...i)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{165:"177ae2e8",289:"07aeaaca",387:"7071ea57",429:"9a6e9735",483:"273f645b",558:"2bed2593",568:"774a2efc",767:"7ac3feff",852:"3f8cded0"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="teacher-alex-academy:";n.l=(r,s,i,o)=>{if(e[r])e[r].push(s);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[s];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var s=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.p="/teacher-alex-academy/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,s[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)l(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkteacher_alex_academy=self.webpackChunkteacher_alex_academy||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),s=n(391),i=n(719),o=n(579);const a=(0,r.createContext)(),l=()=>{const e=(0,r.useContext)(a);if(!e)throw new Error("useDarkMode must be used within a DarkModeProvider");return e},c=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=localStorage.getItem("darkMode");e&&s("true"===e)},[]),(0,r.useEffect)(()=>{localStorage.setItem("darkMode",n.toString()),n?(document.documentElement.classList.add("dark"),document.documentElement.classList.remove("light")):(document.documentElement.classList.add("light"),document.documentElement.classList.remove("dark"))},[n]);const i={isDark:n,toggleDarkMode:()=>{s(!n)},bg:{primary:n?"#0f172a":"#f8fafc",secondary:n?"#1e293b":"#ffffff",tertiary:n?"#334155":"#f1f5f9",gradient:n?"linear-gradient(135deg, #0f172a 0%, #1e293b 100%)":"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},text:{primary:n?"#f8fafc":"#1c1917",secondary:n?"#cbd5e1":"#78716c",muted:n?"#94a3b8":"#9ca3af",inverse:n?"#1c1917":"#f8fafc"},border:{primary:n?"#334155":"#e7e5e4",secondary:n?"#475569":"#d6d3d1",focus:n?"#3b82f6":"#0082FF"},brand:{blue:"#0082FF",red:"#D32F2F",orange:"#F59E0B",green:"#10b981"},shadow:{sm:n?"0 2px 8px rgba(0, 0, 0, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.06)",md:n?"0 4px 16px rgba(0, 0, 0, 0.4)":"0 4px 16px rgba(0, 0, 0, 0.08)",lg:n?"0 8px 32px rgba(0, 0, 0, 0.5)":"0 8px 32px rgba(0, 0, 0, 0.12)"},input:{bg:n?"#334155":"#f5f5f4",border:n?"#475569":"#e7e5e4",placeholder:n?"#94a3b8":"#9ca3af",focus:{border:n?"#3b82f6":"#0082FF",shadow:n?"0 0 0 3px rgba(59, 130, 246, 0.1)":"0 0 0 3px rgba(0, 130, 255, 0.1)"}}};return(0,o.jsx)(a.Provider,{value:i,children:t})},u=()=>{const{isDark:e,toggleDarkMode:t}=l();return(0,o.jsxs)("button",{onClick:t,className:"relative inline-flex items-center justify-center w-12 h-6 rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2",style:{backgroundColor:e?"#3b82f6":"#e5e7eb",focusRingColor:"#3b82f6"},"aria-label":`Switch to ${e?"light":"dark"} mode`,children:[(0,o.jsx)("span",{className:"inline-block w-4 h-4 bg-white rounded-full shadow transform transition-transform duration-300",style:{transform:e?"translateX(12px)":"translateX(-12px)"}}),(0,o.jsxs)("div",{className:"absolute inset-0 flex items-center justify-between px-1 pointer-events-none",children:[(0,o.jsx)("svg",{className:"w-3 h-3 transition-opacity duration-300 "+(e?"opacity-100":"opacity-0"),style:{color:"#ffffff"},fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),(0,o.jsx)("svg",{className:"w-3 h-3 transition-opacity duration-300 "+(e?"opacity-0":"opacity-100"),style:{color:"#fbbf24"},fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 7a5 5 0 1 0 0 10 5 5 0 0 0 0-10zM2 13h2a1 1 0 0 0 0-2H2a1 1 0 0 0 0 2zm18 0h2a1 1 0 0 0 0-2h-2a1 1 0 0 0 0 2zM11 2v2a1 1 0 0 0 2 0V2a1 1 0 0 0-2 0zm0 18v2a1 1 0 0 0 2 0v-2a1 1 0 0 0-2 0zM5.99 4.58a1 1 0 0 0-1.41 1.41l1.06 1.06a1 1 0 0 0 1.41-1.41L5.99 4.58zm12.37 12.37a1 1 0 0 0-1.41 1.41l1.06 1.06a1 1 0 0 0 1.41-1.41l-1.06-1.06zm1.06-10.96a1 1 0 0 0-1.41-1.41l-1.06 1.06a1 1 0 0 0 1.41 1.41l1.06-1.06zM7.05 18.36a1 1 0 0 0-1.41-1.41l-1.06 1.06a1 1 0 0 0 1.41 1.41l1.06-1.06z"})})]})]})},d=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:"\n          @keyframes beta-pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.5; }\n          }\n        "}),(0,o.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"12px",padding:"0.4rem 0.8rem",color:"rgba(255, 255, 255, 0.9)",fontSize:"0.8rem",fontWeight:"500",display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)("div",{style:{width:"6px",height:"6px",borderRadius:"50%",background:"#10b981",animation:"beta-pulse 2s ease-in-out infinite"}}),"BETA"]})]}),h=e=>{let{onLoginSuccess:t}=e;const[n,s]=(0,r.useState)("student"),[a,c]=(0,r.useState)({username:"",email:"",password:""}),[h,p]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[g,y]=(0,r.useState)(""),v=l(),b=e=>{c({...a,[e.target.name]:e.target.value}),g&&y("")},w=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6L23 9l-11-6z"})}),x=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L12 2L3 7V9C3 14.55 6.84 19.74 12 21C17.16 19.74 21 14.55 21 9Z"})}),k=()=>(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,o.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}),S=()=>(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),(0,o.jsx)("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Password field container styles */\n        .password-container {\n          position: relative;\n        }\n\n        .password-toggle {\n          position: absolute;\n          right: 16px;\n          top: 50%;\n          transform: translateY(-50%);\n          background: transparent;\n          border: none;\n          cursor: pointer;\n          padding: 4px;\n          border-radius: 6px;\n          transition: all 0.2s ease;\n          color: ${v.text.secondary};\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .password-toggle:hover {\n          background: ${v.isDark?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.05)"};\n          color: ${v.text.primary};\n        }\n\n        .password-toggle:active {\n          transform: translateY(-50%) scale(0.95);\n        }\n\n        /* Adjust padding for password input to make room for icon */\n        .password-input {\n          padding-right: 52px !important;\n        }\n      `}),(0,o.jsxs)("div",{className:"min-h-screen flex items-center justify-center px-4 relative",style:{background:v.bg.gradient},translate:"no",children:[(0,o.jsx)("div",{className:"absolute top-6 right-6 z-10",children:(0,o.jsx)(u,{})}),(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsxs)("div",{className:"text-center mb-12",children:[(0,o.jsx)("h1",{className:"text-4xl font-light mb-2",style:{color:v.text.primary,letterSpacing:"-0.02em"},translate:"no",children:"Teacher Alex's English Academy"}),(0,o.jsx)("div",{className:"flex justify-center",children:(0,o.jsx)(d,{})}),(0,o.jsx)("p",{className:"text-lg",style:{color:v.text.secondary},translate:"no",children:"Portal Exclusivo dos Alunos"})]}),(0,o.jsxs)("div",{className:"rounded-3xl p-8",style:{backgroundColor:v.bg.secondary,border:`1px solid ${v.border.primary}`,boxShadow:v.shadow.lg},translate:"no",children:[(0,o.jsxs)("div",{className:"flex gap-2 mb-8",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>s("student"),className:"flex-1 py-4 px-6 rounded-2xl font-medium transition-all flex items-center justify-center gap-2",style:"student"===n?{background:v.brand.blue,color:"white",boxShadow:`0 4px 16px ${v.brand.blue}33`}:{backgroundColor:v.bg.tertiary,color:v.text.secondary,border:`1px solid ${v.border.primary}`},onMouseEnter:e=>{"student"!==n&&(e.target.style.backgroundColor=v.border.secondary)},onMouseLeave:e=>{"student"!==n&&(e.target.style.backgroundColor=v.bg.tertiary)},translate:"no",children:[(0,o.jsx)(w,{}),"Student"]}),(0,o.jsxs)("button",{type:"button",onClick:()=>s("teacher"),className:"flex-1 py-4 px-6 rounded-2xl font-medium transition-all flex items-center justify-center gap-2",style:"teacher"===n?{background:v.brand.red,color:"white",boxShadow:`0 4px 16px ${v.brand.red}33`}:{backgroundColor:v.bg.tertiary,color:v.text.secondary,border:`1px solid ${v.border.primary}`},onMouseEnter:e=>{"teacher"!==n&&(e.target.style.backgroundColor=v.border.secondary)},onMouseLeave:e=>{"teacher"!==n&&(e.target.style.backgroundColor=v.bg.tertiary)},translate:"no",children:[(0,o.jsx)(x,{}),"Teacher"]})]}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),f(!0),y("");try{let e;e="student"===n?await(0,i.bZ)(a.username,a.password):await(0,i.as)(a.email,a.password),e.success?t(e.user):y(e.error)}catch(r){y("Something went wrong. Please try again.")}f(!1)},className:"space-y-6",translate:"no",children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"student"===n?"text":"email",name:"student"===n?"username":"email",value:"student"===n?a.username:a.email,onChange:b,className:"w-full px-5 py-4 rounded-xl transition-all focus:outline-none",style:{fontSize:"16px",backgroundColor:v.input.bg,border:`1px solid ${v.input.border}`,color:v.text.primary},onFocus:e=>{e.target.style.borderColor="student"===n?v.brand.blue:v.brand.red,e.target.style.boxShadow=`0 0 0 3px ${"student"===n?v.brand.blue:v.brand.red}1A`},onBlur:e=>{e.target.style.borderColor=v.input.border,e.target.style.boxShadow="none"},placeholder:"student"===n?"Username":"Email",translate:"no",autoComplete:"student"===n?"username":"email",required:!0})}),(0,o.jsxs)("div",{className:"password-container",children:[(0,o.jsx)("input",{type:h?"text":"password",name:"password",value:a.password,onChange:b,className:"password-input w-full px-5 py-4 rounded-xl transition-all focus:outline-none",style:{fontSize:"16px",backgroundColor:v.input.bg,border:`1px solid ${v.input.border}`,color:v.text.primary},onFocus:e=>{e.target.style.borderColor="student"===n?v.brand.blue:v.brand.red,e.target.style.boxShadow=`0 0 0 3px ${"student"===n?v.brand.blue:v.brand.red}1A`},onBlur:e=>{e.target.style.borderColor=v.input.border,e.target.style.boxShadow="none"},placeholder:"Password",translate:"no",autoComplete:"current-password",required:!0}),(0,o.jsx)("button",{type:"button",className:"password-toggle",onClick:()=>{p(!h)},"aria-label":h?"Hide password":"Show password",tabIndex:-1,children:h?(0,o.jsx)(S,{}):(0,o.jsx)(k,{})})]}),g&&(0,o.jsxs)("div",{className:"rounded-xl p-4 text-sm",style:{backgroundColor:v.isDark?"#991b1b":"#fef2f2",border:"1px solid "+(v.isDark?"#dc2626":"#fecaca"),color:v.isDark?"#fca5a5":"#dc2626"},translate:"no",children:["\u274c ",g]}),(0,o.jsx)("button",{type:"submit",disabled:m,className:"w-full py-4 px-6 rounded-xl font-semibold text-white transition-all transform hover:scale-105 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none",style:{background:"student"===n?v.brand.blue:v.brand.red,boxShadow:`0 4px 16px ${"student"===n?v.brand.blue:v.brand.red}33`},translate:"no",children:m?(0,o.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,o.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,o.jsx)("span",{translate:"no",children:"Signing in..."})]}):(0,o.jsxs)("span",{translate:"no",children:["Sign in as ","student"===n?"Student":"Teacher"]})})]})]}),(0,o.jsx)("div",{className:"text-center mt-8",children:(0,o.jsx)("p",{style:{color:v.text.muted},className:"text-sm",translate:"no",children:"Made by Teacher Alex"})})]})]})]})};var p=n(667),m=n(791);const f=async()=>{try{console.log("\ud83d\udcda Getting all students...");const e=(0,p.P)((0,p.rJ)(m.db,"students"),(0,p.My)("name")),t=await(0,p.GG)(e),n=[];return t.forEach(e=>{n.push({id:e.id,...e.data()})}),console.log(`\u2705 Found ${n.length} students`),{success:!0,students:n}}catch(e){return console.log("\u274c Failed to get students:",e.message),{success:!1,error:e.message}}},g=async e=>{try{console.log("\ud83c\udf93 Getting student data for:",e);const t=await(0,p.x7)((0,p.H9)(m.db,"students",e));if(t.exists()){const e=t.data();return console.log("\u2705 Student data loaded"),{success:!0,student:{id:t.id,...e}}}throw new Error("Student not found")}catch(t){return console.log("\u274c Failed to get student data:",t.message),{success:!1,error:t.message}}},y=async(e,t,n)=>{try{console.log(`\ud83d\udcdd Updating progress for ${e}: lesson ${t}`),console.log("\ud83d\udcdd Progress data:",n);const r={};Object.keys(n).forEach(e=>{void 0!==n[e]?r[e]=n[e]:console.warn(`Skipping undefined value for key: ${e}`)});const s=`progress.${t}`;return await(0,p.mZ)((0,p.H9)(m.db,"students",e),{[s]:r,lastActive:new Date}),console.log("\u2705 Progress updated successfully"),{success:!0}}catch(r){return console.log("\u274c Failed to update progress:",r.message),{success:!1,error:r.message}}},v=async(e,t,n)=>{try{console.log(`\ud83d\udcd6 Updating study progress for ${e}: ${t}`),console.log("\ud83d\udcd6 Study progress data:",n);const r=`studyProgress.${t}`;return await(0,p.mZ)((0,p.H9)(m.db,"students",e),{[r]:n,lastStudyActivity:new Date,lastActive:new Date}),console.log("\u2705 Study progress updated successfully"),{success:!0}}catch(r){return console.log("\u274c Failed to update study progress:",r.message),{success:!1,error:r.message}}},b=async()=>{try{console.log("\ud83d\udcca Getting teacher stats...");const e=await f();if(!e.success)throw new Error(e.error);const t=e.students,n=t.length,r=new Date(Date.now()-6048e5),s=t.filter(e=>{var t;const n=null===(t=e.lastActive)||void 0===t?void 0:t.toDate();return n&&n>r}).length;let i=0,o=0;t.forEach(e=>{e.progress&&(i+=Object.keys(e.progress).length),e.studyProgress&&(o+=Object.keys(e.studyProgress).filter(t=>e.studyProgress[t].completed).length)});const a={totalStudents:n,activeStudents:s,totalCompletedLessons:i,totalStudySections:o,totalSeries:8,totalLessons:80};return console.log("\u2705 Teacher stats calculated:",a),{success:!0,stats:a}}catch(e){return console.log("\u274c Failed to get teacher stats:",e.message),{success:!1,error:e.message}}},w=e=>{let{user:t,onLogout:n}=e;const s=l(),[a,c]=(0,r.useState)("overview"),[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)({}),[m,g]=(0,r.useState)(!0),[y,v]=(0,r.useState)({name:"",username:"",password:"",series:"basic-english"}),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)({type:"",text:""});(0,r.useEffect)(()=>{E()},[]);const E=async()=>{g(!0);try{const[e,t]=await Promise.all([f(),b()]);e.success&&d(e.students),t.success&&p(t.stats)}catch(e){console.error("Error loading dashboard data:",e),S({type:"error",text:"Failed to load dashboard data"})}g(!1)},C=e=>{v({...y,[e.target.name]:e.target.value})};return m?(0,o.jsx)("div",{className:"loading-container",style:{background:s.bg.gradient},children:(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("div",{className:"loading-spinner",style:{borderColor:s.border.primary,borderTopColor:s.brand.blue}}),(0,o.jsx)("p",{style:{color:s.text.secondary},children:"Loading your dashboard..."})]})}):(0,o.jsxs)("div",{className:"dashboard-container",style:{background:s.bg.primary},children:[(0,o.jsx)("div",{className:"dashboard-header",style:{background:s.bg.secondary,boxShadow:s.shadow.sm,borderBottomColor:s.border.primary},children:(0,o.jsxs)("div",{className:"header-content",children:[(0,o.jsx)("h1",{className:"dashboard-title",style:{color:s.text.primary},children:"\ud83c\udf93 Teacher Alex's English Academy"}),(0,o.jsxs)("div",{className:"user-info",children:[(0,o.jsxs)("span",{className:"welcome-text",style:{color:s.text.secondary},children:["Welcome, ",t.displayName,"!"]}),(0,o.jsx)("button",{onClick:n,className:"btn",style:{background:s.brand.red,color:"white",boxShadow:s.shadow.sm},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Logout"})]})]})}),(0,o.jsxs)("div",{className:"dashboard-main",children:[(0,o.jsx)("div",{className:"tab-navigation",children:(0,o.jsxs)("nav",{className:"tab-nav-list",children:[(0,o.jsx)("button",{onClick:()=>c("overview"),className:"tab-button",style:{borderBottomColor:"overview"===a?s.brand.blue:"transparent",color:"overview"===a?s.brand.blue:s.text.secondary},onMouseEnter:e=>{"overview"!==a&&(e.target.style.color=s.text.primary)},onMouseLeave:e=>{"overview"!==a&&(e.target.style.color=s.text.secondary)},children:"\ud83d\udcca Overview"}),(0,o.jsxs)("button",{onClick:()=>c("students"),className:"tab-button",style:{borderBottomColor:"students"===a?s.brand.blue:"transparent",color:"students"===a?s.brand.blue:s.text.secondary},onMouseEnter:e=>{"students"!==a&&(e.target.style.color=s.text.primary)},onMouseLeave:e=>{"students"!==a&&(e.target.style.color=s.text.secondary)},children:["\ud83d\udc65 Students (",u.length,")"]}),(0,o.jsx)("button",{onClick:()=>c("create"),className:"tab-button",style:{borderBottomColor:"create"===a?s.brand.blue:"transparent",color:"create"===a?s.brand.blue:s.text.secondary},onMouseEnter:e=>{"create"!==a&&(e.target.style.color=s.text.primary)},onMouseLeave:e=>{"create"!==a&&(e.target.style.color=s.text.secondary)},children:"\u2795 Add Student"})]})}),k.text&&(0,o.jsxs)("div",{className:"message-alert",style:{background:"success"===k.type?"#d4edda":"#f8d7da",borderColor:"success"===k.type?"#c3e6cb":"#f5c6cb",color:"success"===k.type?"#155724":"#721c24"},children:["success"===k.type?"\u2705":"\u274c"," ",k.text]}),"overview"===a&&(0,o.jsxs)("div",{className:"overview-section card",style:{background:s.bg.secondary,boxShadow:s.shadow.sm},children:[(0,o.jsx)("h2",{className:"overview-title",style:{color:s.text.primary},children:"\ud83d\udcca Academy Overview"}),(0,o.jsxs)("div",{className:"stats-grid",children:[(0,o.jsxs)("div",{className:"card-content",style:{background:`${s.brand.blue}15`,border:`1px solid ${s.brand.blue}30`,borderRadius:"12px"},children:[(0,o.jsx)("div",{className:"stat-number",style:{color:s.brand.blue},children:h.totalStudents||0}),(0,o.jsx)("div",{className:"stat-label",style:{color:s.text.primary},children:"Total Students"})]}),(0,o.jsxs)("div",{className:"card-content",style:{background:`${s.brand.red}15`,border:`1px solid ${s.brand.red}30`,borderRadius:"12px"},children:[(0,o.jsx)("div",{className:"stat-number",style:{color:s.brand.red},children:h.activeStudents||0}),(0,o.jsx)("div",{className:"stat-label",style:{color:s.text.primary},children:"Active This Week"})]}),(0,o.jsxs)("div",{className:"card-content",style:{background:`${s.text.secondary}15`,border:`1px solid ${s.text.secondary}30`,borderRadius:"12px"},children:[(0,o.jsx)("div",{className:"stat-number",style:{color:s.text.secondary},children:h.totalCompletedLessons||0}),(0,o.jsx)("div",{className:"stat-label",style:{color:s.text.primary},children:"Lessons Completed"})]}),(0,o.jsxs)("div",{className:"card-content",style:{background:`${s.text.primary}15`,border:`1px solid ${s.text.primary}30`,borderRadius:"12px"},children:[(0,o.jsx)("div",{className:"stat-number",style:{color:s.text.primary},children:h.totalSeries||8}),(0,o.jsx)("div",{className:"stat-label",style:{color:s.text.secondary},children:"Lesson Series"})]})]}),(0,o.jsxs)("div",{className:"quick-actions",children:[(0,o.jsx)("h3",{className:"actions-title",style:{color:s.text.primary},children:"\ud83d\ude80 Quick Actions"}),(0,o.jsxs)("div",{className:"actions-buttons",children:[(0,o.jsx)("button",{onClick:()=>c("create"),className:"btn",style:{background:s.brand.blue,color:"white",boxShadow:s.shadow.sm},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\u2795 Add New Student"}),(0,o.jsx)("button",{onClick:()=>c("students"),className:"btn",style:{background:s.brand.red,color:"white",boxShadow:s.shadow.sm},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\ud83d\udc65 View All Students"})]})]})]}),"students"===a&&(0,o.jsxs)("div",{className:"students-section card",style:{background:s.bg.secondary,boxShadow:s.shadow.sm},children:[(0,o.jsx)("div",{className:"students-header",style:{borderBottomColor:s.border.primary},children:(0,o.jsx)("h2",{className:"students-title",style:{color:s.text.primary},children:"\ud83d\udc65 Your Students"})}),0===u.length?(0,o.jsxs)("div",{className:"empty-state",children:[(0,o.jsx)("div",{className:"empty-icon",children:"\ud83c\udf93"}),(0,o.jsx)("h3",{className:"empty-title",style:{color:s.text.primary},children:"No students yet"}),(0,o.jsx)("p",{className:"empty-description",style:{color:s.text.secondary},children:"Start by creating your first student account!"}),(0,o.jsx)("button",{onClick:()=>c("create"),className:"btn",style:{background:s.brand.blue,color:"white",boxShadow:s.shadow.sm},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\u2795 Create First Student"})]}):(0,o.jsx)("div",{className:"table-container",children:(0,o.jsxs)("table",{className:"students-table",children:[(0,o.jsx)("thead",{className:"table-head",style:{background:s.bg.tertiary},children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"table-header-cell",style:{color:s.text.secondary},children:"Student"}),(0,o.jsx)("th",{className:"table-header-cell",style:{color:s.text.secondary},children:"Series"}),(0,o.jsx)("th",{className:"table-header-cell",style:{color:s.text.secondary},children:"Progress"}),(0,o.jsx)("th",{className:"table-header-cell",style:{color:s.text.secondary},children:"Last Active"})]})}),(0,o.jsx)("tbody",{className:"table-body",style:{background:s.bg.secondary},children:u.map(e=>(0,o.jsxs)("tr",{className:"table-row",style:{borderTopColor:s.border.primary},onMouseEnter:e=>e.target.style.background=s.bg.tertiary,onMouseLeave:e=>e.target.style.background=s.bg.secondary,children:[(0,o.jsx)("td",{className:"table-cell",children:(0,o.jsxs)("div",{className:"student-info",children:[(0,o.jsx)("div",{className:"student-name",style:{color:s.text.primary},children:e.name}),(0,o.jsxs)("div",{className:"student-username",style:{color:s.text.secondary},children:["(@",e.username,")"]})]})}),(0,o.jsx)("td",{className:"table-cell",children:(0,o.jsx)("span",{className:"series-badge",style:{background:`${s.brand.blue}15`,color:s.brand.blue},children:e.series})}),(0,o.jsx)("td",{className:"table-cell",children:(0,o.jsxs)("div",{className:"progress-text",style:{color:s.text.primary},children:[e.progress?Object.keys(e.progress).length:0," lessons completed"]})}),(0,o.jsx)("td",{className:"table-cell",children:(0,o.jsx)("div",{className:"last-active",style:{color:s.text.secondary},children:e.lastActive?new Date(1e3*e.lastActive.seconds).toLocaleDateString():"Never"})})]},e.id))})]})})]}),"create"===a&&(0,o.jsxs)("div",{className:"create-section card",style:{background:s.bg.secondary,boxShadow:s.shadow.sm},children:[(0,o.jsx)("h2",{className:"create-title",style:{color:s.text.primary},children:"\u2795 Create New Student Account"}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),S({type:"",text:""});try{const e=await(0,i.nS)(y);e.success?(S({type:"success",text:e.message}),v({name:"",username:"",password:"",series:"basic-english"}),E()):S({type:"error",text:e.error})}catch(t){S({type:"error",text:"Failed to create student account"})}x(!1)},className:"create-form",children:[(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",style:{color:s.text.primary},children:"Student Name"}),(0,o.jsx)("input",{type:"text",name:"name",value:y.name,onChange:C,className:"form-input",style:{background:s.input.bg,borderColor:s.input.border,color:s.text.primary},placeholder:"e.g., Jo\xe3o Silva",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",style:{color:s.text.primary},children:"Username (for login)"}),(0,o.jsx)("input",{type:"text",name:"username",value:y.username,onChange:C,className:"form-input",style:{background:s.input.bg,borderColor:s.input.border,color:s.text.primary},placeholder:"e.g., joao",required:!0}),(0,o.jsx)("p",{className:"form-help",style:{color:s.text.secondary},children:"This will be used for student login (letters and numbers only)"})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",style:{color:s.text.primary},children:"Password"}),(0,o.jsx)("input",{type:"password",name:"password",value:y.password,onChange:C,className:"form-input",style:{background:s.input.bg,borderColor:s.input.border,color:s.text.primary},placeholder:"Create a secure password",required:!0})]}),(0,o.jsxs)("div",{className:"form-group",children:[(0,o.jsx)("label",{className:"form-label",style:{color:s.text.primary},children:"Lesson Series"}),(0,o.jsx)("select",{name:"series",value:y.series,onChange:C,className:"form-select",style:{background:s.input.bg,borderColor:s.input.border,color:s.text.primary},children:[{value:"basic-english",label:"\ud83d\udfe6 Basic English"},{value:"intermediate-english",label:"\ud83d\udfe6 Intermediate English"},{value:"business-english",label:"\ud83d\udfe6 Business English"},{value:"conversation-english",label:"\ud83d\udfe6 Conversation English"},{value:"travel-english",label:"\ud83d\udfe6 Travel English"},{value:"academic-english",label:"\ud83d\udfe6 Academic English"},{value:"pronunciation-english",label:"\ud83d\udfe6 Pronunciation English"},{value:"grammar-english",label:"\ud83d\udfe6 Grammar English"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("p",{className:"form-help",style:{color:s.text.secondary},children:"Choose which lesson series this student will follow"})]}),(0,o.jsx)("button",{type:"submit",disabled:w,className:"submit-button",style:{background:s.brand.blue,color:"white",boxShadow:s.shadow.sm},onMouseEnter:e=>{w||(e.target.style.filter="brightness(0.9)")},onMouseLeave:e=>{w||(e.target.style.filter="brightness(1)")},children:w?(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsx)("div",{className:"submit-spinner"}),"Creating Account..."]}):"\u2728 Create Student Account"})]})]})]})]})},x=e=>{let{currentView:t,user:n,studentData:r,progress:s,onNavigateToHub:i,onGetPageTitle:a}=e;const l="hub"===t,c=a(),h=t.includes("a2")||t.includes("A2");return(0,o.jsxs)("header",{className:"portal-header",children:[(0,o.jsx)("div",{className:"portal-header-pattern"}),(0,o.jsx)("div",{className:"portal-header-toggle",children:(0,o.jsx)(u,{})}),(0,o.jsxs)("div",{className:"portal-header-content",children:[!l&&(0,o.jsxs)("button",{onClick:i,className:"portal-back-button",children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),"Voltar ao Hub"]}),(0,o.jsxs)("div",{className:"portal-branding-section",children:[(0,o.jsx)("div",{className:"portal-academy-badge",children:"Teacher Alex's English Academy"}),(0,o.jsx)(d,{})]}),(0,o.jsxs)("div",{className:"portal-page-section",children:[(0,o.jsxs)("h1",{className:"portal-page-title",children:[c,h&&(0,o.jsx)("span",{className:"portal-level-indicator",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",fontSize:"0.75rem",fontWeight:"700",padding:"0.25rem 0.75rem",borderRadius:"12px",marginLeft:"1rem",textTransform:"uppercase",letterSpacing:"0.025em",display:"inline-block",verticalAlign:"middle"},children:"A2"})]}),(0,o.jsx)("div",{className:"portal-student-name",children:(null===r||void 0===r?void 0:r.name)||n.username})]}),l&&(0,o.jsxs)("div",{className:"portal-progress-pills",children:[(0,o.jsxs)("div",{className:"portal-progress-pill",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"portal-pill-icon",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsxs)("span",{className:"portal-pill-text",children:["N\xedvel ",s.currentLevel]})]}),(0,o.jsxs)("div",{className:"portal-progress-pill",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"portal-pill-icon",children:(0,o.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,o.jsxs)("span",{className:"portal-pill-text",children:[s.totalActivities," atividades",s.completedA2Lessons>0&&(0,o.jsx)("span",{style:{color:"#8b5cf6",fontWeight:"700",marginLeft:"0.25rem"},children:"+A2"})]})]}),(0,o.jsxs)("div",{className:"portal-progress-pill",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"portal-pill-icon",children:(0,o.jsx)("path",{d:"M13 10V3L4 14h7v7l9-11h-7z"})}),(0,o.jsxs)("span",{className:"portal-pill-text",children:[s.totalXP," XP"]})]})]}),h&&!l&&(0,o.jsx)("div",{className:"portal-a2-indicator",children:(0,o.jsxs)("div",{className:"portal-a2-badge",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",padding:"0.5rem 1.5rem",borderRadius:"16px",fontSize:"0.9rem",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.5rem",border:"1px solid rgba(255, 255, 255, 0.25)",backdropFilter:"blur(10px)",marginTop:"1rem"},children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsx)("span",{children:"N\xedvel Intermedi\xe1rio A2"})]})})]})]})},k=50,S=10,E=50,C=25,T=30,N=20,_=200,I=100,j=15,A=50,P=10,R=[0,50,100,150,200,300,450,650,900,1200,1600,2100,2700,3400,4200,5100,6100,7200,8400,9700,11200,13e3,15100,17500,20200,23200,26500,30100,34e3,38200,43e3,48500,54700,61600,69200,77500,86500,96200,106600,117700,129500,142e3,155200,169100,183700,199e3,215e3,231700,249100,267200],L=e=>{for(let t=R.length-1;t>=0;t--)if(e>=R[t])return t+1;return 1},O=e=>{const t=L(e);return t>=R.length?0:R[t]-e},M=e=>{const t=L(e);if(t>=R.length)return 100;const n=R[t-1],r=e-n,s=R[t]-n;return Math.round(r/s*100)},D=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{console.log(`\ud83c\udf1f Awarding XP: ${t} for ${e}`,n);let r=0;switch(t){case"LESSON_COMPLETE":const e="number"!==typeof n.correctAnswers||isNaN(n.correctAnswers)?0:n.correctAnswers,s="number"!==typeof n.totalQuestions||isNaN(n.totalQuestions)?1:n.totalQuestions;r=k+e*S,(n.perfectScore||e===s)&&(r+=E);break;case"DRAG_DROP_COMPLETE":r=C*(n.difficulty||1);break;case"SPEAKING_EXERCISE":r=T,n.accuracy>=90&&(r+=20);break;case"DAILY_STREAK":r=N*(n.streakDay||1);break;case"WEEKLY_PERFECT":r=_;break;case"ACHIEVEMENT_UNLOCK":r=I;break;case"STUDY_SECTION_COMPLETE":r=j,n.timeSpent>=300&&(r+=5),n.isFirstSection&&(r+=P);break;case"STUDY_GUIDE_COMPLETE":const i=n.sectionsCompleted||0;r=A+i*j,i>=3&&(r+=25);break;default:return console.warn(`Unknown activity type: ${t}`),{xpEarned:0,totalXP:0,level:1,leveledUp:!1}}(isNaN(r)||r<0)&&(console.warn(`Invalid XP calculated: ${r}, defaulting to 0`),r=0);const s=(0,p.H9)(m.db,"students",e),i=await(0,p.x7)(s);if(!i.exists())throw new Error("Student not found");const o=i.data(),a=o.totalXP||0,l=a+r,c=L(a),u=L(l),d=u>c,h={type:t,xpEarned:r,timestamp:new Date,data:n},f={totalXP:l,level:u,lastActive:new Date},g=o.xpHistory||[];return g.push(h),g.length>100&&g.splice(0,g.length-100),f.xpHistory=g,f.monsterStage=z(u),await(0,p.mZ)(s,f),console.log("\u2705 XP awarded successfully!",{username:e,activityType:t,xpEarned:r,oldLevel:c,newLevel:u,leveledUp:d,totalXP:l}),{xpEarned:r,totalXP:l,level:u,leveledUp:d,monsterStage:f.monsterStage}}catch(r){throw console.error("\u274c Failed to award XP:",r),r}},z=e=>e>=40?"legend":e>=30?"master":e>=20?"adult":e>=10?"teen":e>=5?"child":"baby",F=[{id:"basic-1",title:"B\xe1sico 1",icon:"\ud83c\udf1f",words:[["Hello","Ol\xe1"],["Goodbye","Tchau"],["Thank you","Obrigado"],["Please","Por favor"],["Water","\xc1gua"]]},{id:"colors",title:"Cores",icon:"\ud83c\udfa8",words:[["Red","Vermelho"],["Blue","Azul"],["Green","Verde"],["Yellow","Amarelo"],["Black","Preto"]]},{id:"emotions",title:"Emo\xe7\xf5es",icon:"\ud83d\ude0a",words:[["Happy","Feliz"],["Sad","Triste"],["Angry","Bravo"],["Excited","Animado"],["Tired","Cansado"]]},{id:"family",title:"Fam\xedlia",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",words:[["Mother","M\xe3e"],["Father","Pai"],["Sister","Irm\xe3"],["Brother","Irm\xe3o"],["Baby","Beb\xea"]]},{id:"food",title:"Comida",icon:"\ud83c\udf55",words:[["Apple","Ma\xe7\xe3"],["Bread","P\xe3o"],["Coffee","Caf\xe9"],["Rice","Arroz"],["Chicken","Frango"]]},{id:"animals",title:"Animais",icon:"\ud83d\udc36",words:[["Dog","Cachorro"],["Cat","Gato"],["Bird","P\xe1ssaro"],["Fish","Peixe"],["Horse","Cavalo"]]},{id:"numbers",title:"N\xfameros",icon:"\ud83d\udd22",words:[["One","Um"],["Two","Dois"],["Three","Tr\xeas"],["Four","Quatro"],["Five","Cinco"]]},{id:"body",title:"Corpo",icon:"\ud83d\udc64",words:[["Head","Cabe\xe7a"],["Hand","M\xe3o"],["Foot","P\xe9"],["Eye","Olho"],["Mouth","Boca"]]},{id:"house",title:"Casa",icon:"\ud83c\udfe0",words:[["Kitchen","Cozinha"],["Bedroom","Quarto"],["Door","Porta"],["Window","Janela"],["Table","Mesa"]]},{id:"weather",title:"Clima",icon:"\ud83c\udf24\ufe0f",words:[["Sun","Sol"],["Rain","Chuva"],["Cloud","Nuvem"],["Wind","Vento"],["Snow","Neve"]]},{id:"clothes",title:"Roupas",icon:"\ud83d\udc55",words:[["Shirt","Camisa"],["Pants","Cal\xe7a"],["Shoes","Sapatos"],["Hat","Chap\xe9u"],["Jacket","Jaqueta"]]},{id:"transport",title:"Transporte",icon:"\ud83d\ude97",words:[["Car","Carro"],["Bus","\xd4nibus"],["Train","Trem"],["Bicycle","Bicicleta"],["Airplane","Avi\xe3o"]]},{id:"time",title:"Tempo",icon:"\u23f0",words:[["Morning","Manh\xe3"],["Afternoon","Tarde"],["Night","Noite"],["Today","Hoje"],["Tomorrow","Amanh\xe3"]]},{id:"business",title:"Neg\xf3cios",icon:"\ud83d\udcbc",words:[["Meeting","Reuni\xe3o"],["Project","Projeto"],["Manager","Gerente"],["Success","Sucesso"],["Challenge","Desafio"]]},{id:"sports",title:"Esportes",icon:"\u26bd",words:[["Football","Futebol"],["Basketball","Basquete"],["Swimming","Nata\xe7\xe3o"],["Running","Corrida"],["Tennis","T\xeanis"]]}],q=[{id:"morning-routine",title:"Morning Routine",category:"Vida Di\xe1ria",difficulty:"F\xe1cil",icon:"\u2600\ufe0f",story:[{type:"text",content:"Every morning, Jo\xe3o wakes up at"},{type:"blank",id:0,options:["7 AM","11 PM","3 PM","midnight"],correct:0,explanation:"7 AM \xe9 hor\xe1rio comum para acordar de manh\xe3"},{type:"text",content:". He goes to the"},{type:"blank",id:1,options:["garage","bathroom","garden","roof"],correct:1,explanation:"Bathroom \xe9 onde escovamos os dentes"},{type:"text",content:"to brush his teeth. Then he drinks"},{type:"blank",id:2,options:["wine","beer","coffee","soda"],correct:2,explanation:"Coffee \xe9 bebida comum no caf\xe9 da manh\xe3 brasileiro"},{type:"text",content:"and eats breakfast before going to"},{type:"blank",id:3,options:["bed","work","party","cinema"],correct:1,explanation:"Work \xe9 para onde se vai depois do caf\xe9 da manh\xe3"},{type:"text",content:"."}]},{id:"weekend-football",title:"Weekend Football",category:"Esportes",difficulty:"F\xe1cil",icon:"\u26bd",story:[{type:"text",content:"On Sunday, Maria goes to the"},{type:"blank",id:0,options:["library","stadium","hospital","bank"],correct:1,explanation:"Stadium \xe9 onde se assiste jogos de futebol"},{type:"text",content:"to watch her favorite football"},{type:"blank",id:1,options:["book","movie","team","song"],correct:2,explanation:"Team \xe9 time/equipe de futebol"},{type:"text",content:"play. She wears her team"},{type:"blank",id:2,options:["jersey","pajamas","suit","apron"],correct:0,explanation:"Jersey \xe9 camisa do time"},{type:"text",content:"and cheers very"},{type:"blank",id:3,options:["quietly","sadly","loudly","slowly"],correct:2,explanation:"Loudly \xe9 como se torce em est\xe1dios"},{type:"text",content:"!"}]},{id:"grocery-shopping",title:"Grocery Shopping",category:"Vida Di\xe1ria",difficulty:"F\xe1cil",icon:"\ud83d\uded2",story:[{type:"text",content:"Ana needs to buy food at the"},{type:"blank",id:0,options:["gym","supermarket","beach","office"],correct:1,explanation:"Supermarket \xe9 onde se compra comida"},{type:"text",content:". She puts fresh"},{type:"blank",id:1,options:["cars","books","fruits","chairs"],correct:2,explanation:"Fruits s\xe3o alimentos que se compra"},{type:"text",content:"and vegetables in her shopping"},{type:"blank",id:2,options:["cart","pocket","hair","shoe"],correct:0,explanation:"Cart \xe9 carrinho de compras"},{type:"text",content:". At the cashier, she pays with her credit"},{type:"blank",id:3,options:["sandwich","hat","card","plant"],correct:2,explanation:"Card \xe9 cart\xe3o de cr\xe9dito para pagamento"},{type:"text",content:"."}]},{id:"beach-day",title:"Beach Day",category:"Cultura",difficulty:"F\xe1cil",icon:"\ud83c\udfd6\ufe0f",story:[{type:"text",content:"Carlos loves going to the"},{type:"blank",id:0,options:["mountain","desert","beach","forest"],correct:2,explanation:"Beach \xe9 praia, muito popular no Brasil"},{type:"text",content:"in Rio. He puts on"},{type:"blank",id:1,options:["makeup","sunscreen","perfume","shampoo"],correct:1,explanation:"Sunscreen \xe9 protetor solar para praia"},{type:"text",content:"to protect his skin from the sun. Then he"},{type:"blank",id:2,options:["sleeps","studies","swims","cooks"],correct:2,explanation:"Swims \xe9 nadar no mar"},{type:"text",content:"in the ocean and feels very"},{type:"blank",id:3,options:["angry","happy","tired","sick"],correct:1,explanation:"Happy \xe9 como se sente na praia"},{type:"text",content:"."}]},{id:"restaurant-dinner",title:"Restaurant Dinner",category:"Comida",difficulty:"F\xe1cil",icon:"\ud83c\udf7d\ufe0f",story:[{type:"text",content:"Tonight, Paulo and Sofia go to a nice"},{type:"blank",id:0,options:["library","restaurant","hospital","school"],correct:1,explanation:"Restaurant \xe9 onde se janta fora"},{type:"text",content:"for dinner. The"},{type:"blank",id:1,options:["doctor","waiter","teacher","pilot"],correct:1,explanation:"Waiter \xe9 gar\xe7om que atende no restaurante"},{type:"text",content:"brings them the menu. Paulo orders grilled"},{type:"blank",id:2,options:["books","steak","clothes","toys"],correct:1,explanation:"Steak \xe9 bife, comida de restaurante"},{type:"text",content:"and Sofia chooses baked"},{type:"blank",id:3,options:["computer","fish","bicycle","phone"],correct:1,explanation:"Fish \xe9 peixe, op\xe7\xe3o de prato principal"},{type:"text",content:"."}]},{id:"first-airplane",title:"First Airplane Trip",category:"Viagem",difficulty:"M\xe9dio",icon:"\u2708\ufe0f",story:[{type:"text",content:"Isabella is very"},{type:"blank",id:0,options:["bored","excited","angry","sleepy"],correct:1,explanation:"Excited \xe9 como se sente antes da primeira viagem"},{type:"text",content:"because today is her first airplane"},{type:"blank",id:1,options:["birthday","flight","job","school"],correct:1,explanation:"Flight \xe9 voo de avi\xe3o"},{type:"text",content:"to the United States. At the"},{type:"blank",id:2,options:["beach","park","airport","mall"],correct:2,explanation:"Airport \xe9 aeroporto, onde se pega o avi\xe3o"},{type:"text",content:", she shows her"},{type:"blank",id:3,options:["sandwich","passport","magazine","umbrella"],correct:1,explanation:"Passport \xe9 passaporte, documento para viajar"},{type:"text",content:"and boards the airplane."}]},{id:"new-job",title:"First Day at Work",category:"Trabalho",difficulty:"M\xe9dio",icon:"\ud83d\udcbc",story:[{type:"text",content:"Today is Pedro's first day at his new"},{type:"blank",id:0,options:["vacation","job","school","party"],correct:1,explanation:"Job \xe9 trabalho/emprego"},{type:"text",content:". He wears his best business"},{type:"blank",id:1,options:["pajamas","suit","swimsuit","shorts"],correct:1,explanation:"Suit \xe9 terno para trabalho formal"},{type:"text",content:"and arrives at the office early. His new"},{type:"blank",id:2,options:["boss","dog","car","sandwich"],correct:0,explanation:"Boss \xe9 chefe no trabalho"},{type:"text",content:"shows him around the office and he feels"},{type:"blank",id:3,options:["sad","angry","nervous","sleepy"],correct:2,explanation:"Nervous \xe9 natural no primeiro dia"},{type:"text",content:"but excited about the new opportunity."}]},{id:"birthday-party",title:"Birthday Party",category:"Celebra\xe7\xe3o",difficulty:"F\xe1cil",icon:"\ud83c\udf82",story:[{type:"text",content:"Today is Lucia's 25th"},{type:"blank",id:0,options:["funeral","birthday","exam","surgery"],correct:1,explanation:"Birthday \xe9 anivers\xe1rio"},{type:"text",content:"party. She invites all her best"},{type:"blank",id:1,options:["enemies","friends","doctors","teachers"],correct:1,explanation:"Friends s\xe3o amigos convidados para festa"},{type:"text",content:"to celebrate. There is a big chocolate birthday"},{type:"blank",id:2,options:["car","cake","book","computer"],correct:1,explanation:"Cake \xe9 bolo de anivers\xe1rio"},{type:"text",content:'with candles. Everyone sings "Happy Birthday" and she feels very'},{type:"blank",id:3,options:["sad","angry","happy","sick"],correct:2,explanation:"Happy \xe9 como se sente em festa de anivers\xe1rio"},{type:"text",content:"!"}]},{id:"rainy-day",title:"Rainy Day",category:"Clima",difficulty:"F\xe1cil",icon:"\ud83c\udf27\ufe0f",story:[{type:"text",content:"It is raining outside, so Miguel stays"},{type:"blank",id:0,options:["outside","home","wet","flying"],correct:1,explanation:"Home \xe9 onde ficamos quando chove"},{type:"text",content:". He watches the rain through the"},{type:"blank",id:1,options:["floor","window","ceiling","door"],correct:1,explanation:"Window \xe9 janela para ver a chuva"},{type:"text",content:"and decides to read a good"},{type:"blank",id:2,options:["sandwich","book","car","movie"],correct:1,explanation:"Book \xe9 livro para ler em dia chuvoso"},{type:"text",content:". He makes hot chocolate and feels very"},{type:"blank",id:3,options:["cold","cozy","wet","angry"],correct:1,explanation:"Cozy \xe9 aconchegante em casa"},{type:"text",content:"."}]},{id:"pet-dog",title:"My Pet Dog",category:"Animais",difficulty:"F\xe1cil",icon:"\ud83d\udc15",story:[{type:"text",content:"Carmen has a small pet"},{type:"blank",id:0,options:["elephant","dog","whale","dinosaur"],correct:1,explanation:"Dog \xe9 cachorro, animal de estima\xe7\xe3o comum"},{type:"text",content:"named Rex. Every morning she takes him to the"},{type:"blank",id:1,options:["office","park","hospital","bank"],correct:1,explanation:"Park \xe9 parque onde se passeia com c\xe3es"},{type:"text",content:"for a walk. Rex loves to play with his rubber"},{type:"blank",id:2,options:["homework","ball","computer","sandwich"],correct:1,explanation:"Ball \xe9 bola, brinquedo de cachorro"},{type:"text",content:"and is always very"},{type:"blank",id:3,options:["sad","angry","playful","tired"],correct:2,explanation:"Playful \xe9 brincalh\xe3o, t\xedpico de cachorros"},{type:"text",content:"."}]},{id:"cooking-lesson",title:"Cooking Lesson",category:"Culin\xe1ria",difficulty:"M\xe9dio",icon:"\ud83d\udc69\u200d\ud83c\udf73",story:[{type:"text",content:"Sara wants to learn how to"},{type:"blank",id:0,options:["fly","cook","swim","dance"],correct:1,explanation:"Cook \xe9 cozinhar"},{type:"text",content:"Italian pasta. She goes to the"},{type:"blank",id:1,options:["bathroom","kitchen","bedroom","garage"],correct:1,explanation:"Kitchen \xe9 cozinha onde se prepara comida"},{type:"text",content:"and gets all the ingredients. She boils"},{type:"blank",id:2,options:["ice","water","sand","air"],correct:1,explanation:"Water \xe9 \xe1gua para cozinhar massa"},{type:"text",content:"in a pot and adds the pasta. When ready, it smells"},{type:"blank",id:3,options:["terrible","delicious","loud","green"],correct:1,explanation:"Delicious \xe9 delicioso, cheiro bom de comida"},{type:"text",content:"!"}]},{id:"library-visit",title:"Visit to the Library",category:"Educa\xe7\xe3o",difficulty:"F\xe1cil",icon:"\ud83d\udcda",story:[{type:"text",content:"Roberto goes to the public"},{type:"blank",id:0,options:["gym","library","beach","restaurant"],correct:1,explanation:"Library \xe9 biblioteca para estudar"},{type:"text",content:"to study for his final exam. He finds a quiet"},{type:"blank",id:1,options:["party","table","concert","kitchen"],correct:1,explanation:"Table \xe9 mesa para estudar"},{type:"text",content:"in the study area and opens his"},{type:"blank",id:2,options:["sandwich","books","car","phone"],correct:1,explanation:"Books s\xe3o livros para estudar"},{type:"text",content:". He studies for two hours and feels well"},{type:"blank",id:3,options:["confused","prepared","hungry","sleepy"],correct:1,explanation:"Prepared \xe9 preparado ap\xf3s estudar"},{type:"text",content:" for the test."}]},{id:"weekend-market",title:"Weekend Market",category:"Compras",difficulty:"M\xe9dio",icon:"\ud83c\udf4e",story:[{type:"text",content:"On Saturday morning, Elena visits the local farmers'"},{type:"blank",id:0,options:["cinema","market","hospital","school"],correct:1,explanation:"Market \xe9 feira/mercado local"},{type:"text",content:". She buys fresh organic"},{type:"blank",id:1,options:["cars","fruits","books","clothes"],correct:1,explanation:"Fruits s\xe3o frutas vendidas na feira"},{type:"text",content:"and vegetables from local farmers. She talks to the friendly"},{type:"blank",id:2,options:["robots","sellers","animals","computers"],correct:1,explanation:"Sellers s\xe3o vendedores da feira"},{type:"text",content:"and learns about organic farming. She feels"},{type:"blank",id:3,options:["bored","interested","angry","sleepy"],correct:1,explanation:"Interested \xe9 interessada em aprender"},{type:"text",content:" in supporting local business."}]},{id:"music-concert",title:"Music Concert",category:"Entretenimento",difficulty:"M\xe9dio",icon:"\ud83c\udfb5",story:[{type:"text",content:"Tonight, Daniel goes to see his favorite rock"},{type:"blank",id:0,options:["doctor","band","teacher","dentist"],correct:1,explanation:"Band \xe9 banda musical"},{type:"text",content:"perform live. He arrives at the concert"},{type:"blank",id:1,options:["kitchen","venue","bathroom","office"],correct:1,explanation:"Venue \xe9 local do show"},{type:"text",content:"early to get a good spot near the stage. The music is very"},{type:"blank",id:2,options:["quiet","loud","invisible","cold"],correct:1,explanation:"Loud \xe9 alto, m\xfasica de rock"},{type:"text",content:"and energetic, so he dances all night. He feels"},{type:"blank",id:3,options:["bored","energetic","sad","sleepy"],correct:1,explanation:"Energetic \xe9 energ\xe9tico ap\xf3s show"},{type:"text",content:" and happy!"}]},{id:"gym-workout",title:"Gym Workout",category:"Sa\xfade",difficulty:"M\xe9dio",icon:"\ud83d\udcaa",story:[{type:"text",content:"Three times a week, Amanda goes to the local"},{type:"blank",id:0,options:["library","gym","restaurant","cinema"],correct:1,explanation:"Gym \xe9 academia para exercitar-se"},{type:"text",content:"to exercise and stay fit. She starts with light"},{type:"blank",id:1,options:["sleeping","stretching","eating","reading"],correct:1,explanation:"Stretching \xe9 alongamento antes do exerc\xedcio"},{type:"text",content:"to warm up her muscles. Then she lifts"},{type:"blank",id:2,options:["books","weights","sandwiches","flowers"],correct:1,explanation:"Weights s\xe3o pesos para muscula\xe7\xe3o"},{type:"text",content:"for thirty minutes. After working out, she feels"},{type:"blank",id:3,options:["weak","strong","hungry","cold"],correct:1,explanation:"Strong \xe9 forte ap\xf3s exercitar-se"},{type:"text",content:" and healthy."}]}],V=[{id:"greetings-intro",title:"Cumprimentos & Apresenta\xe7\xf5es",description:"Como se apresentar e cumprimentar em ingl\xeas",category:"basics",icon:"\ud83d\udc4b",timeLimit:20,difficulty:1,questions:[{id:"greet-1",type:"multiple-choice",question:"Como cumprimentar algu\xe9m antes das 12:00?",options:["Good morning","Good night","Good afternoon","Good evening"],correct:0,points:10,explanation:"Good morning \xe9 usado at\xe9 meio-dia"},{id:"name-1",type:"multiple-choice",question:'Complete: "What\'s _____ name?"',options:["you","your","yours","mine"],correct:1,points:10,explanation:"Your \xe9 o possessivo de you"},{id:"nice-1",type:"fill-blank",question:"Nice to _____ you! (primeiro encontro)",answer:"meet",points:15,explanation:"Meet \xe9 usado no primeiro encontro"},{id:"how-1",type:"multiple-choice",question:"Como perguntar sobre o bem-estar de algu\xe9m?",options:["How are you?","What are you?","Where are you?","Who are you?"],correct:0,points:10,explanation:"How are you? pergunta sobre como a pessoa est\xe1"},{id:"fine-1",type:"true-false",question:'"I\'m fine, thank you" \xe9 uma boa resposta para "How are you?"',correct:!0,points:10,explanation:"\xc9 a resposta padr\xe3o mais comum"},{id:"bye-1",type:"multiple-choice",question:"Como se despedir informalmente?",options:["Hello","See you later","Good morning","Thank you"],correct:1,points:10,explanation:"See you later \xe9 despedida casual"},{id:"from-1",type:"multiple-choice",question:'Complete: "I am _____ Brazil." (nacionalidade)',options:["in","from","at","on"],correct:1,points:15,explanation:"From indica origem/nacionalidade"},{id:"please-1",type:"multiple-choice",question:"Qual palavra torna um pedido mais educado?",options:["Thank you","Please","Sorry","Excuse me"],correct:1,points:10,explanation:"Please torna pedidos educados"},{id:"welcome-1",type:"true-false",question:'"You\'re welcome" \xe9 resposta para "Thank you"',correct:!0,points:10,explanation:"\xc9 a resposta padr\xe3o para agradecimentos"},{id:"spell-1",type:"multiple-choice",question:'Complete: "How do you _____ your name?" (letra por letra)',options:["speak","spell","say","tell"],correct:1,points:15,explanation:"Spell significa soletrar"}]},{id:"family-people",title:"Fam\xedlia & Pessoas",description:"Vocabul\xe1rio sobre fam\xedlia e relacionamentos",category:"family",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",timeLimit:25,difficulty:1,questions:[{id:"family-1",type:"multiple-choice",question:"Como se chama a irm\xe3 da sua m\xe3e?",options:["cousin","aunt","grandmother","sister"],correct:1,points:10,explanation:"Aunt = tia"},{id:"brother-1",type:"true-false",question:"Brother significa irm\xe3o",correct:!0,points:10,explanation:"Brother = irm\xe3o"},{id:"children-1",type:"multiple-choice",question:"Como se chama filhos e filhas juntos?",options:["parents","children","cousins","siblings"],correct:1,points:10,explanation:"Children = filhos (plural misto)"},{id:"married-1",type:"multiple-choice",question:'Complete: "My parents have been _____ for 20 years."',options:["married","working","living","studying"],correct:0,points:15,explanation:"Married = casados"},{id:"old-1",type:"multiple-choice",question:"Como perguntar a idade em ingl\xeas?",options:["How old are you?","What age do you have?","How many years are you?","How much age?"],correct:0,points:15,explanation:"How old are you? \xe9 a forma correta"},{id:"years-1",type:"multiple-choice",question:'Complete: "I am 25 _____ old"',options:["year","years","age","time"],correct:1,points:10,explanation:"Years \xe9 plural para n\xfameros > 1"},{id:"single-1",type:"true-false",question:"Single significa solteiro",correct:!0,points:10,explanation:"Single = solteiro/sem parceiro"},{id:"baby-1",type:"multiple-choice",question:"Como se chama uma crian\xe7a muito pequena?",options:["baby","teenager","adult","elder"],correct:0,points:10,explanation:"Baby = beb\xea"},{id:"have-1",type:"multiple-choice",question:'Complete: "I _____ two sisters."',options:["am","have","has","is"],correct:1,points:10,explanation:"Have \xe9 usado para posse/fam\xedlia"},{id:"only-1",type:"true-false",question:'"Only child" significa filho \xfanico',correct:!0,points:10,explanation:"Only child = filho \xfanico"}]},{id:"numbers-time",title:"N\xfameros & Tempo",description:"N\xfameros, horas e express\xf5es de tempo",category:"time",icon:"\ud83d\udd50",timeLimit:30,difficulty:2,questions:[{id:"time-1",type:"multiple-choice",question:'Como dizer "3:00" em ingl\xeas?',options:["It's three o'clock","It's three hours","It's third time","It's three times"],correct:0,points:10,explanation:"O'clock \xe9 usado para horas exatas"},{id:"thirty-1",type:"multiple-choice",question:'Como dizer "2:30"?',options:["Two fifteen","Two thirty","Two forty-five","Two twenty"],correct:1,points:15,explanation:"Thirty = 30 minutos"},{id:"fifteen-1",type:"multiple-choice",question:'3:15 = "It\'s _____ past three"',options:["half","quarter","thirty","fifteen"],correct:1,points:15,explanation:"Quarter = 15 minutos"},{id:"days-1",type:"multiple-choice",question:"Quantos dias tem uma semana?",options:["Five","Six","Seven","Eight"],correct:2,points:10,explanation:"Seven = sete dias"},{id:"monday-1",type:"true-false",question:"Monday \xe9 considerado o primeiro dia \xfatil da semana",correct:!0,points:10,explanation:"Monday inicia a semana de trabalho"},{id:"weekend-1",type:"multiple-choice",question:"Como se chama s\xe1bado e domingo juntos?",options:["Workdays","Weekend","Weekdays","Worktime"],correct:1,points:10,explanation:"Weekend = fim de semana"},{id:"months-1",type:"multiple-choice",question:"Quantos meses tem um ano?",options:["Ten","Eleven","Twelve","Thirteen"],correct:2,points:10,explanation:"Twelve = doze meses"},{id:"january-1",type:"multiple-choice",question:"Qual \xe9 o primeiro m\xeas do ano?",options:["December","January","March","February"],correct:1,points:10,explanation:"January = janeiro"},{id:"birthday-1",type:"true-false",question:"Birthday significa anivers\xe1rio",correct:!0,points:10,explanation:"Birthday = anivers\xe1rio de nascimento"},{id:"age-1",type:"multiple-choice",question:'Complete: "When is _____ birthday?"',options:["you","your","yours","mine"],correct:1,points:15,explanation:"Your \xe9 possessivo"}]},{id:"colors-objects",title:"Cores & Objetos",description:"Cores b\xe1sicas e objetos do dia a dia",category:"vocabulary",icon:"\ud83c\udfa8",timeLimit:25,difficulty:1,questions:[{id:"red-1",type:"multiple-choice",question:"Qual cor associamos ao sangue?",options:["Blue","Red","Green","Yellow"],correct:1,points:10,explanation:"Red = vermelho"},{id:"sky-1",type:"multiple-choice",question:"Qual cor do c\xe9u em dia claro?",options:["Red","Green","Blue","Purple"],correct:2,points:10,explanation:"Blue = azul"},{id:"grass-1",type:"multiple-choice",question:"Qual cor da grama?",options:["red","green","blue","yellow"],correct:1,points:10,explanation:"Green = verde"},{id:"sun-1",type:"multiple-choice",question:"Como vemos a cor do sol?",options:["White","Yellow","Orange","Red"],correct:1,points:10,explanation:"Yellow = amarelo"},{id:"night-1",type:"true-false",question:"Black significa preto",correct:!0,points:10,explanation:"Black = preto/escuro"},{id:"favorite-1",type:"multiple-choice",question:'Complete: "What\'s your _____ color?"',options:["like","love","favorite","best"],correct:2,points:15,explanation:"Favorite = favorito/preferido"},{id:"pen-1",type:"multiple-choice",question:"Com o que voc\xea escreve?",options:["Book","Pen","Table","Chair"],correct:1,points:10,explanation:"Pen = caneta"},{id:"book-1",type:"multiple-choice",question:'Complete: "I like to read a _____."',options:["song","book","food","color"],correct:1,points:10,explanation:"Book = livro"},{id:"phone-1",type:"true-false",question:"Phone significa telefone",correct:!0,points:10,explanation:"Phone = telefone"},{id:"colors-1",type:"multiple-choice",question:"Red + Blue = ?",options:["Green","Purple","Orange","Yellow"],correct:1,points:15,explanation:"Vermelho + Azul = Roxo"}]},{id:"food-drinks",title:"Comida & Bebidas",description:"Vocabul\xe1rio b\xe1sico sobre comida e bebidas",category:"food",icon:"\ud83c\udf55",timeLimit:25,difficulty:2,questions:[{id:"hungry-1",type:"multiple-choice",question:'Complete: "I am _____. I want to eat."',options:["thirsty","hungry","tired","happy"],correct:1,points:10,explanation:"Hungry = com fome"},{id:"thirsty-1",type:"multiple-choice",question:'Complete: "I am _____. I need water."',options:["hungry","thirsty","sleepy","cold"],correct:1,points:10,explanation:"Thirsty = com sede"},{id:"breakfast-1",type:"multiple-choice",question:"Como se chama a primeira refei\xe7\xe3o do dia?",options:["Lunch","Dinner","Breakfast","Snack"],correct:2,points:10,explanation:"Breakfast = caf\xe9 da manh\xe3"},{id:"water-1",type:"true-false",question:"Water significa \xe1gua",correct:!0,points:10,explanation:"Water = \xe1gua"},{id:"apple-1",type:"multiple-choice",question:"Qual destes \xe9 uma fruta?",options:["Bread","Apple","Rice","Chicken"],correct:1,points:10,explanation:"Apple = ma\xe7\xe3"},{id:"coffee-1",type:"multiple-choice",question:"Qual bebida \xe9 muito popular no Brasil?",options:["Beer","Wine","Coffee","Soda"],correct:2,points:10,explanation:"Coffee = caf\xe9"},{id:"lunch-1",type:"true-false",question:"Lunch \xe9 a refei\xe7\xe3o do meio-dia",correct:!0,points:10,explanation:"Lunch = almo\xe7o"},{id:"like-1",type:"multiple-choice",question:'Complete: "I _____ pizza very much."',options:["am like","like","likes","liking"],correct:1,points:15,explanation:"Like = gostar de"},{id:"restaurant-1",type:"multiple-choice",question:"Onde voc\xea vai para comer fora?",options:["hospital","restaurant","library","bank"],correct:1,points:15,explanation:"Restaurant = restaurante"},{id:"delicious-1",type:"true-false",question:"Delicious significa delicioso",correct:!0,points:10,explanation:"Delicious = delicioso"}]},{id:"home-daily",title:"Casa & Vida Di\xe1ria",description:"Vocabul\xe1rio sobre casa e rotina",category:"daily",icon:"\ud83c\udfe0",timeLimit:25,difficulty:1,questions:[{id:"home-1",type:"multiple-choice",question:"Em qual c\xf4modo voc\xea dorme?",options:["Kitchen","Bedroom","Bathroom","Living room"],correct:1,points:10,explanation:"Bedroom = quarto"},{id:"wake-1",type:"multiple-choice",question:'Complete: "I _____ up at 7 AM."',options:["get","wake","stand","sit"],correct:1,points:10,explanation:"Wake up = acordar"},{id:"shower-1",type:"multiple-choice",question:"Onde voc\xea toma banho?",options:["Bedroom","Kitchen","Bathroom","Garden"],correct:2,points:10,explanation:"Bathroom = banheiro"},{id:"clean-1",type:"true-false",question:"Kitchen significa cozinha",correct:!0,points:10,explanation:"Kitchen = cozinha"},{id:"bed-1",type:"multiple-choice",question:'Complete: "I go to _____ at 10 PM."',options:["sleep","bed","tired","dream"],correct:1,points:10,explanation:"Go to bed = ir para a cama"},{id:"door-1",type:"multiple-choice",question:'Complete: "Please open the _____."',options:["window","door","wall","floor"],correct:1,points:10,explanation:"Door = porta"},{id:"tv-1",type:"true-false",question:"Living room \xe9 a sala de estar",correct:!0,points:10,explanation:"Living room = sala de estar"},{id:"clothes-1",type:"multiple-choice",question:"O que voc\xea veste no corpo?",options:["Food","Clothes","Books","Water"],correct:1,points:10,explanation:"Clothes = roupas"},{id:"everyday-1",type:"multiple-choice",question:'Complete: "I brush my teeth _____ day."',options:["all","every","some","any"],correct:1,points:15,explanation:"Every day = todos os dias"},{id:"house-1",type:"multiple-choice",question:'Complete: "Welcome to my _____!"',options:["car","work","house","school"],correct:2,points:15,explanation:"House = casa"}]},{id:"body-health",title:"Corpo & Sa\xfade",description:"Partes do corpo e express\xf5es de sa\xfade",category:"health",icon:"\ud83d\udcaa",timeLimit:30,difficulty:2,questions:[{id:"head-1",type:"multiple-choice",question:"Qual parte fica no topo do corpo?",options:["Foot","Hand","Head","Arm"],correct:2,points:10,explanation:"Head = cabe\xe7a"},{id:"eyes-1",type:"multiple-choice",question:'Complete: "I see with my _____."',options:["ears","eyes","nose","mouth"],correct:1,points:10,explanation:"Eyes = olhos"},{id:"sick-1",type:"true-false",question:"Sick significa doente",correct:!0,points:10,explanation:"Sick = doente"},{id:"doctor-1",type:"multiple-choice",question:"Quem te ajuda quando est\xe1 doente?",options:["Teacher","Doctor","Cook","Driver"],correct:1,points:10,explanation:"Doctor = m\xe9dico"},{id:"walk-1",type:"multiple-choice",question:"Com o que voc\xea caminha?",options:["Hands","Eyes","Feet","Ears"],correct:2,points:10,explanation:"Feet = p\xe9s"},{id:"hurt-1",type:"multiple-choice",question:'Complete: "My arm _____."',options:["happy","hurts","good","nice"],correct:1,points:15,explanation:"Hurts = d\xf3i"},{id:"medicine-1",type:"true-false",question:"Medicine significa rem\xe9dio",correct:!0,points:10,explanation:"Medicine = rem\xe9dio"},{id:"tooth-1",type:"multiple-choice",question:"Com o que voc\xea mastiga?",options:["Nose","Ears","Teeth","Hair"],correct:2,points:10,explanation:"Teeth = dentes"},{id:"healthy-1",type:"multiple-choice",question:'Complete: "Exercise keeps you _____."',options:["sick","healthy","tired","old"],correct:1,points:15,explanation:"Healthy = saud\xe1vel"},{id:"heart-1",type:"multiple-choice",question:"Qual \xf3rg\xe3o bombeia sangue?",options:["Brain","Heart","Stomach","Lungs"],correct:1,points:15,explanation:"Heart = cora\xe7\xe3o"}]},{id:"weather-seasons",title:"Clima & Esta\xe7\xf5es",description:"Tempo, clima e esta\xe7\xf5es do ano",category:"weather",icon:"\ud83c\udf24\ufe0f",timeLimit:25,difficulty:2,questions:[{id:"sunny-1",type:"multiple-choice",question:"Como est\xe1 o tempo quando o sol brilha?",options:["Rainy","Sunny","Snowy","Windy"],correct:1,points:10,explanation:"Sunny = ensolarado"},{id:"rain-1",type:"multiple-choice",question:'Complete: "It\'s _____. Take an umbrella."',options:["sunny","raining","hot","cold"],correct:1,points:10,explanation:"Raining = chovendo"},{id:"hot-1",type:"true-false",question:"Summer \xe9 a esta\xe7\xe3o mais quente",correct:!0,points:10,explanation:"Summer = ver\xe3o"},{id:"seasons-1",type:"multiple-choice",question:"Quantas esta\xe7\xf5es tem o ano?",options:["Three","Four","Five","Six"],correct:1,points:10,explanation:"Four = quatro esta\xe7\xf5es"},{id:"winter-1",type:"multiple-choice",question:"Qual \xe9 a esta\xe7\xe3o mais fria?",options:["Spring","Summer","Fall","Winter"],correct:3,points:10,explanation:"Winter = inverno"},{id:"cold-1",type:"multiple-choice",question:'Complete: "It\'s very _____. I need a jacket."',options:["hot","cold","sunny","rainy"],correct:1,points:10,explanation:"Cold = frio"},{id:"umbrella-1",type:"true-false",question:"Umbrella significa guarda-chuva",correct:!0,points:10,explanation:"Umbrella = guarda-chuva"},{id:"clouds-1",type:"multiple-choice",question:"O que voc\xea v\xea antes de chover?",options:["Stars","Clouds","Sun","Moon"],correct:1,points:10,explanation:"Clouds = nuvens"},{id:"spring-1",type:"multiple-choice",question:'Complete: "In _____, flowers bloom."',options:["winter","spring","summer","fall"],correct:1,points:15,explanation:"Spring = primavera"},{id:"temperature-1",type:"multiple-choice",question:"O que mede qu\xe3o quente ou frio est\xe1?",options:["Clock","Ruler","Temperature","Scale"],correct:2,points:15,explanation:"Temperature = temperatura"}]},{id:"transport-directions",title:"Transporte & Dire\xe7\xf5es",description:"Meios de transporte e como se orientar",category:"transport",icon:"\ud83d\ude97",timeLimit:30,difficulty:2,questions:[{id:"car-1",type:"multiple-choice",question:"O que voc\xea dirige na estrada?",options:["Bicycle","Car","Plane","Boat"],correct:1,points:10,explanation:"Car = carro"},{id:"walk-1",type:"multiple-choice",question:'Complete: "I _____ to school." (a p\xe9)',options:["drive","walk","fly","swim"],correct:1,points:10,explanation:"Walk = caminhar"},{id:"bus-1",type:"true-false",question:"Bus significa \xf4nibus",correct:!0,points:10,explanation:"Bus = \xf4nibus"},{id:"airport-1",type:"multiple-choice",question:"Onde os avi\xf5es decolam?",options:["Train station","Airport","Bus stop","Harbor"],correct:1,points:10,explanation:"Airport = aeroporto"},{id:"left-1",type:"multiple-choice",question:'Complete: "Turn _____ at the corner." (esquerda)',options:["straight","left","up","down"],correct:1,points:10,explanation:"Left = esquerda"},{id:"far-1",type:"multiple-choice",question:'Complete: "The store is very _____ from here." (distante)',options:["near","far","close","next"],correct:1,points:15,explanation:"Far = longe"},{id:"bicycle-1",type:"true-false",question:"Bicycle tem duas rodas",correct:!0,points:10,explanation:"Bicycle = bicicleta"},{id:"map-1",type:"multiple-choice",question:"O que ajuda a encontrar dire\xe7\xf5es?",options:["Book","Map","Food","Music"],correct:1,points:10,explanation:"Map = mapa"},{id:"near-1",type:"multiple-choice",question:'Complete: "The bank is _____ the school." (perto)',options:["far","near","behind","under"],correct:1,points:15,explanation:"Near = perto"},{id:"train-1",type:"multiple-choice",question:"O que viaja em trilhos?",options:["Car","Bus","Train","Truck"],correct:2,points:15,explanation:"Train = trem"}]},{id:"hobbies-freetime",title:"Hobbies & Tempo Livre",description:"Atividades de lazer e passatempos",category:"hobbies",icon:"\ud83c\udfae",timeLimit:25,difficulty:2,questions:[{id:"music-1",type:"multiple-choice",question:"O que voc\xea faz com m\xfasica?",options:["Eat it","Listen to it","Drink it","Cook it"],correct:1,points:10,explanation:"Listen to = escutar"},{id:"read-1",type:"multiple-choice",question:'Complete: "I like to _____ books."',options:["eat","read","sing","drive"],correct:1,points:10,explanation:"Read = ler"},{id:"football-1",type:"true-false",question:"Football \xe9 futebol em ingl\xeas",correct:!0,points:10,explanation:"Football = futebol"},{id:"movie-1",type:"multiple-choice",question:"Onde voc\xea assiste filmes fora de casa?",options:["Library","Cinema","Hospital","Bank"],correct:1,points:10,explanation:"Cinema = cinema"},{id:"swim-1",type:"multiple-choice",question:"O que voc\xea faz na piscina?",options:["Run","Jump","Swim","Sleep"],correct:2,points:10,explanation:"Swim = nadar"},{id:"guitar-1",type:"multiple-choice",question:'Complete: "I can play the _____."',options:["book","guitar","food","car"],correct:1,points:15,explanation:"Guitar = viol\xe3o/guitarra"},{id:"weekend-1",type:"true-false",question:"Weekend \xe9 fim de semana em ingl\xeas",correct:!0,points:10,explanation:"Weekend = fim de semana"},{id:"game-1",type:"multiple-choice",question:"O que voc\xea joga por divers\xe3o?",options:["Work","Games","Homework","Cleaning"],correct:1,points:10,explanation:"Games = jogos"},{id:"hobby-1",type:"multiple-choice",question:'Complete: "My favorite _____ is painting."',options:["work","hobby","job","study"],correct:1,points:15,explanation:"Hobby = passatempo"},{id:"fun-1",type:"multiple-choice",question:'Complete: "I have _____ when I play."',options:["work","fun","tired","sad"],correct:1,points:15,explanation:"Fun = divers\xe3o"}]}],U=[{id:"news-001",category:"Motiva\xe7\xe3o",headline:"Nunca \xe9 tarde para aprender: hist\xf3rias de sucesso em qualquer idade",summary:"Pessoas de todas as idades descobrem que o ingl\xeas abre novas oportunidades",icon:"\ud83c\udf1f",color:"#10b981"},{id:"news-002",category:"Sucesso",headline:"Pequenos passos, grandes conquistas: a import\xe2ncia da consist\xeancia",summary:"Estudar 15 minutos por dia pode gerar resultados surpreendentes",icon:"\ud83d\ude80",color:"#3b82f6"},{id:"news-003",category:"Comunidade",headline:"Estudantes brasileiros se destacam em criatividade no aprendizado",summary:"Flexibilidade e persist\xeancia s\xe3o pontos fortes dos brasileiros",icon:"\ud83d\udcc8",color:"#8b5cf6"},{id:"news-004",category:"Global",headline:"Brasil entre os pa\xedses que mais crescem em interesse por ingl\xeas",summary:"Mercado globalizado impulsiona busca por flu\xeancia no idioma",icon:"\ud83c\udfc6",color:"#f59e0b"},{id:"news-005",category:"Educa\xe7\xe3o",headline:"M\xe9todo de \xe1udio ganha popularidade no ensino de idiomas",summary:"Aprender ouvindo primeiro facilita pron\xfancia e compreens\xe3o",icon:"\ud83c\udfaf",color:"#ef4444"},{id:"news-006",category:"Pesquisa",headline:"Estudos mostram: aprendizado com \xe1udio melhora reten\xe7\xe3o",summary:"Neuroci\xeancia confirma benef\xedcios do aprendizado auditivo",icon:"\ud83d\udd2c",color:"#06b6d4"},{id:"news-007",category:"Ci\xeancia",headline:"Gamifica\xe7\xe3o transforma experi\xeancia de aprendizado",summary:"Elementos de jogos motivam estudantes a manter consist\xeancia",icon:"\ud83e\udde0",color:"#a855f7"},{id:"news-008",category:"Educa\xe7\xe3o",headline:"Ensino digital cresce e democratiza acesso ao ingl\xeas",summary:"Plataformas online tornam aprendizado mais acess\xedvel",icon:"\ud83d\udcca",color:"#10b981"},{id:"news-009",category:"Lingu\xedstica",headline:"Sotaque brasileiro pode ser vantagem no ingl\xeas internacional",summary:"Clareza na pron\xfancia de vogais facilita comunica\xe7\xe3o global",icon:"\ud83e\uddec",color:"#f97316"},{id:"news-010",category:"Psicologia",headline:"Autoconfian\xe7a cresce com pequenas vit\xf3rias di\xe1rias",summary:"Progresso gradual reduz ansiedade e melhora autoestima",icon:"\ud83d\udc9a",color:"#22c55e"},{id:"news-011",category:"Mundial",headline:"Brasil se destaca no crescimento de interesse por ingl\xeas",summary:"Oportunidades internacionais impulsionam busca por flu\xeancia",icon:"\ud83c\udf0d",color:"#3b82f6"},{id:"news-012",category:"Mercado",headline:"Ingl\xeas se torna diferencial competitivo no mercado brasileiro",summary:"Empresas valorizam cada vez mais profissionais bil\xedngues",icon:"\ud83d\udcbc",color:"#8b5cf6"},{id:"news-013",category:"Tecnologia",headline:"Intelig\xeancia artificial ajuda personalizar aprendizado de idiomas",summary:"Tecnologia adapta ensino ao ritmo individual de cada estudante",icon:"\ud83e\udd16",color:"#06b6d4"},{id:"news-014",category:"Cultura",headline:"Streaming em ingl\xeas influencia aprendizado natural do idioma",summary:"Imers\xe3o atrav\xe9s de entretenimento acelera familiaridade",icon:"\ud83d\udcfa",color:"#dc2626"},{id:"news-015",category:"Economia",headline:"Profissionais bil\xedngues t\xeam mais oportunidades de carreira",summary:"Flu\xeancia em ingl\xeas abre portas para posi\xe7\xf5es internacionais",icon:"\ud83d\udcb0",color:"#059669"},{id:"news-016",category:"Curiosidade",headline:'A palavra "OK" tem origem surpreendente e acidental',summary:"Hist\xf3ria por tr\xe1s da express\xe3o mais universal do mundo",icon:"\u2705",color:"#f59e0b"},{id:"news-017",category:"Hist\xf3ria",headline:"Shakespeare criou mais de mil palavras ainda usadas hoje",summary:"Legado do dramaturgo continua vivo no ingl\xeas moderno",icon:"\ud83d\udcda",color:"#7c3aed"},{id:"news-018",category:"Lingu\xedstica",headline:"Ingl\xeas absorve palavras de outros idiomas constantemente",summary:"Caracter\xedstica torna o ingl\xeas uma l\xedngua din\xe2mica e inclusiva",icon:"\ud83d\udd04",color:"#10b981"},{id:"news-019",category:"Curiosidade",headline:"Frases aparentemente simples podem esconder complexidade",summary:"Ingl\xeas oferece camadas de significado para todos os n\xedveis",icon:"\ud83c\udccf",color:"#f97316"},{id:"news-020",category:"Etimologia",headline:"Palavras em ingl\xeas carregam hist\xf3rias fascinantes",summary:"Origem das palavras revela conex\xf5es culturais inesperadas",icon:"\ud83e\uddc2",color:"#6366f1"},{id:"news-021",category:"Dica",headline:"Erro comum: traduzir palavra por palavra limita flu\xeancia",summary:"Pensar em ingl\xeas desde o in\xedcio acelera desenvolvimento natural",icon:"\ud83d\udca1",color:"#ef4444"},{id:"news-022",category:"Estrat\xe9gia",headline:"Consist\xeancia vence intensidade no aprendizado de idiomas",summary:"Pr\xe1tica regular \xe9 mais eficaz que sess\xf5es longas espor\xe1dicas",icon:"\u23f0",color:"#22c55e"},{id:"news-023",category:"M\xe9todo",headline:"Sotaque brasileiro ganha reconhecimento internacional",summary:"Clareza e musicalidade do portugu\xeas facilitam pron\xfancia inglesa",icon:"\ud83c\udfb5",color:"#8b5cf6"},{id:"news-024",category:"T\xe9cnica",headline:"\xc1udio repetitivo melhora pron\xfancia durante o sono",summary:"C\xe9rebro continua processando linguagem em estado de repouso",icon:"\ud83d\ude34",color:"#06b6d4"},{id:"news-025",category:"Inova\xe7\xe3o",headline:"Mapeamento individual identifica dificuldades espec\xedficas",summary:"Personaliza\xe7\xe3o do ensino otimiza tempo e resultados",icon:"\ud83d\uddfa\ufe0f",color:"#f59e0b"},{id:"news-026",category:"Sucesso",headline:"Jovem brasileiro conquista vaga em universidade internacional",summary:"Prepara\xe7\xe3o constante e dedica\xe7\xe3o abrem portas globais",icon:"\ud83c\udf93",color:"#3b82f6"},{id:"news-027",category:"Conquista",headline:"Hist\xf3rias inspiram: aprender ingl\xeas na terceira idade",summary:"Determina\xe7\xe3o n\xe3o tem idade para realizar sonhos",icon:"\u2708\ufe0f",color:"#10b981"},{id:"news-028",category:"Carreira",headline:"Flu\xeancia em ingl\xeas transforma trajet\xf3rias profissionais",summary:"Novas oportunidades surgem com dom\xednio do idioma global",icon:"\u2699\ufe0f",color:"#f97316"},{id:"news-029",category:"Fam\xedlia",headline:"Fam\xedlias estudam ingl\xeas juntas e fortalecem v\xednculos",summary:"Objetivo comum cria momentos especiais de aprendizado",icon:"\ud83d\udc69\u200d\ud83d\udc67",color:"#ec4899"},{id:"news-030",category:"Supera\xe7\xe3o",headline:"Ingl\xeas ajuda pessoas t\xedmidas a ganharem autoconfian\xe7a",summary:"Nova l\xedngua pode significar nova personalidade mais segura",icon:"\ud83c\udfa4",color:"#8b5cf6"},{id:"news-031",category:"Tecnologia",headline:"IA personaliza experi\xeancia de aprendizado de idiomas",summary:"Algoritmos adaptam conte\xfado ao perfil individual de cada usu\xe1rio",icon:"\ud83d\udd2e",color:"#06b6d4"},{id:"news-032",category:"Inova\xe7\xe3o",headline:"Sistemas detectam progresso sutil em pron\xfancia",summary:"Tecnologia reconhece melhorias que motivam continuidade",icon:"\ud83d\udce1",color:"#a855f7"},{id:"news-033",category:"Atualiza\xe7\xe3o",headline:"Aprendizado noturno ganha espa\xe7o com novas t\xe9cnicas",summary:"Revis\xe3o durante sono pode refor\xe7ar mem\xf3ria lingu\xedstica",icon:"\ud83c\udf19",color:"#1e40af"},{id:"news-034",category:"Funcionalidade",headline:"Gamifica\xe7\xe3o revoluciona motiva\xe7\xe3o no ensino",summary:"Elementos de jogos tornam aprendizado mais envolvente",icon:"\ud83c\udfc5",color:"#f59e0b"},{id:"news-035",category:"Expans\xe3o",headline:"Empresas investem em capacita\xe7\xe3o de ingl\xeas para equipes",summary:"Treinamento corporativo em idiomas se torna estrat\xe9gico",icon:"\ud83c\udfe2",color:"#059669"},{id:"news-036",category:"Cultura",headline:"Express\xf5es brasileiras enriquecem ingl\xeas internacional",summary:"Diversidade cultural contribui para evolu\xe7\xe3o do idioma global",icon:"\ud83d\udcf1",color:"#ec4899"},{id:"news-037",category:"Social",headline:"Comunidades de aprendizado criam la\xe7os duradouros",summary:"Estudar em grupo fortalece motiva\xe7\xe3o e amizades",icon:"\ud83d\udc65",color:"#22c55e"},{id:"news-038",category:"Impacto",headline:"Ensino online democratiza acesso ao ingl\xeas de qualidade",summary:"Tecnologia quebra barreiras geogr\xe1ficas e econ\xf4micas",icon:"\u2696\ufe0f",color:"#3b82f6"},{id:"news-039",category:"Inclus\xe3o",headline:"M\xe9todos auditivos beneficiam diferentes estilos de aprendizado",summary:"Abordagem inclusiva atende necessidades diversas de estudantes",icon:"\u267f",color:"#8b5cf6"},{id:"news-040",category:"Fam\xedlia",headline:"Av\xf3s aprendem ingl\xeas para se conectar com netos",summary:"Amor familiar motiva aprendizado em qualquer idade",icon:"\ud83d\udc74",color:"#f97316"},{id:"news-041",category:"Motiva\xe7\xe3o",headline:"Aprender idiomas aumenta autoestima e confian\xe7a",summary:"Conquistas lingu\xedsticas se refletem em outras \xe1reas da vida",icon:"\ud83d\udcaa",color:"#dc2626"},{id:"news-042",category:"Sa\xfade",headline:"Bilinguismo contribui para sa\xfade cerebral",summary:"Exercitar o c\xe9rebro com idiomas pode prevenir decl\xednio cognitivo",icon:"\ud83e\udde0",color:"#10b981"},{id:"news-043",category:"Lifestyle",headline:"Ingl\xeas facilita conex\xf5es genu\xednas em viagens",summary:"Comunica\xe7\xe3o fluente enriquece experi\xeancias internacionais",icon:"\ud83c\udf0e",color:"#06b6d4"},{id:"news-044",category:"Relacionamento",headline:"Casais que estudam juntos fortalecem parceria",summary:"Metas compartilhadas criam cumplicidade e apoio m\xfatuo",icon:"\ud83d\udc95",color:"#ec4899"},{id:"news-045",category:"Bem-estar",headline:"Progresso em ingl\xeas pode melhorar humor e disposi\xe7\xe3o",summary:"Senso de conquista di\xe1ria combate sentimentos negativos",icon:"\ud83c\udf08",color:"#a855f7"},{id:"news-046",category:"Futuro",headline:"Ingl\xeas se consolida como idioma de oportunidades globais",summary:"Mercado internacional valoriza cada vez mais flu\xeancia",icon:"\ud83d\udd2e",color:"#1e40af"},{id:"news-047",category:"Previs\xe3o",headline:"Brasil pode se tornar refer\xeancia em ensino digital de idiomas",summary:"Inova\xe7\xe3o brasileira atrai aten\xe7\xe3o internacional",icon:"\ud83d\udcc8",color:"#059669"},{id:"news-048",category:"Tend\xeancia",headline:"Micro-aprendizado ganha prefer\xeancia sobre m\xe9todos intensivos",summary:"Sess\xf5es curtas e frequentes mostram maior efic\xe1cia",icon:"\u26a1",color:"#f59e0b"},{id:"news-049",category:"Revolu\xe7\xe3o",headline:"Personaliza\xe7\xe3o redefine futuro da educa\xe7\xe3o lingu\xedstica",summary:"Ensino adaptativo melhora experi\xeancia individual de aprendizado",icon:"\ud83d\udd04",color:"#8b5cf6"},{id:"news-050",category:"Milestone",headline:"Comunidade de estudantes brasileiros cresce globalmente",summary:"Networking internacional facilita oportunidades futuras",icon:"\ud83c\udf8a",color:"#ef4444"}],B=()=>{const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(0),[c,u]=(0,r.useState)(!1),d=l();return(0,r.useEffect)(()=>{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return[...U].sort(()=>Math.random()-.5).slice(0,e)}(5);s(e),t(e[0])},[]),(0,r.useEffect)(()=>{if(0===n.length)return;const e=setInterval(()=>{a(e=>{const r=(e+1)%n.length;return t(n[r]),r})},1e4);return()=>clearInterval(e)},[n]),e?(0,o.jsxs)("div",{className:"compact-news-ticker",onClick:()=>u(!c),style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"0.75rem 1rem",transition:"all 0.3s ease",cursor:"pointer",position:"relative",overflow:"hidden",marginBottom:"1rem"},onMouseEnter:e=>{e.target.style.background="rgba(255, 255, 255, 0.08)",e.target.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.target.style.background="rgba(255, 255, 255, 0.05)",e.target.style.transform="translateY(0)"},children:[(0,o.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,height:"2px",background:"linear-gradient(90deg, #dc2626, #ef4444)"}}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:c?"0.75rem":"0"},children:[(0,o.jsx)("div",{style:{width:"28px",height:"28px",background:"linear-gradient(135deg, #dc2626, #ef4444)",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",flexShrink:0},children:"\ud83d\udcf0"}),(0,o.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,o.jsxs)("div",{style:{color:(null===e||void 0===e?void 0:e.color)||"#dc2626",fontSize:"0.7rem",fontWeight:500,opacity:.8},children:[e.icon," ",e.category]}),(0,o.jsx)("h4",{style:{color:d.text.primary,fontSize:"0.85rem",fontWeight:600,lineHeight:1.3,margin:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.headline})]}),(0,o.jsx)("div",{style:{background:"#dc2626",color:"white",padding:"0.125rem 0.375rem",borderRadius:"6px",fontSize:"0.6rem",fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em",flexShrink:0},children:"LIVE"})]}),(0,o.jsxs)("div",{style:{maxHeight:c?"200px":"0",overflow:"hidden",transition:"max-height 0.3s ease"},children:[(0,o.jsx)("div",{style:{color:d.text.secondary,fontSize:"0.8rem",lineHeight:1.4,marginBottom:"0.75rem"},children:e.summary}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginTop:"0.5rem"},children:[(0,o.jsx)("button",{style:{width:"24px",height:"24px",borderRadius:"6px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",color:d.text.secondary,cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.stopPropagation();const r=0===i?n.length-1:i-1;a(r),t(n[r])},children:(0,o.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})})}),(0,o.jsx)("div",{style:{display:"flex",gap:"0.25rem"},children:n.map((e,t)=>(0,o.jsx)("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:t===i?"#dc2626":d.border.primary,transition:"all 0.2s ease",transform:t===i?"scale(1.3)":"scale(1)"}},t))}),(0,o.jsx)("button",{style:{width:"24px",height:"24px",borderRadius:"6px",background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",color:d.text.secondary,cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center"},onClick:e=>{e.stopPropagation();const r=(i+1)%n.length;a(r),t(n[r])},children:(0,o.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M8.59 16.59L10 18l6-6-6-6-1.41 1.41L13.17 12z"})})})]})]})]}):null},$=()=>{const e=l();return(0,o.jsxs)("section",{className:"hub-news-section",children:[(0,o.jsx)("h2",{className:"hub-news-title",style:{color:e.text.primary},children:"\ud83d\udcf0 \xdaltimas do Mundo do Ingl\xeas"}),(0,o.jsx)(B,{})]})},H=e=>{let{value:t,max:n=100,showText:r=!0,text:s,color:i,size:a="default",animated:c=!1,style:u={}}=e;const d=l(),h=Math.min(Math.max(t/n*100,0),100),p={small:{height:"4px",textSize:"0.8rem"},default:{height:"8px",textSize:"0.9rem"},large:{height:"12px",textSize:"1rem"},xl:{height:"16px",textSize:"1.1rem"}}[a],m=i||(h>=80?d.brand.green:h>=60?d.brand.blue:h>=40?d.brand.orange:"#ef4444");return(0,o.jsxs)("div",{style:{width:"100%",...u},children:[(0,o.jsx)("div",{style:{height:p.height,background:d.bg.tertiary,borderRadius:parseInt(p.height)/2,overflow:"hidden",marginBottom:r?"0.5rem":0},children:(0,o.jsx)("div",{style:{height:"100%",width:`${h}%`,background:m,borderRadius:parseInt(p.height)/2,transition:c?"width 0.3s ease":"width 1s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:`0 0 8px ${m}33`}})}),r&&(0,o.jsx)("div",{style:{textAlign:"center",fontSize:p.textSize,color:d.text.secondary,fontWeight:"500"},children:s||`${Math.round(h)}%`})]})},W=e=>{let{timeLeft:t,totalTime:n,dangerThreshold:r=5,showTime:s=!0}=e;const i=l(),a=t/n*100,c=t<=r;return(0,o.jsxs)("div",{style:{width:"100%"},children:[(0,o.jsx)("div",{style:{height:"8px",background:i.bg.tertiary,borderRadius:"4px",overflow:"hidden",marginBottom:s?"0.75rem":0},children:(0,o.jsx)("div",{style:{height:"100%",width:`${a}%`,background:c?"linear-gradient(90deg, #ef4444, #dc2626)":"linear-gradient(90deg, #10b981, #059669)",borderRadius:"4px",transition:"width 1s linear"}})}),s&&(0,o.jsx)("div",{style:{textAlign:"center",marginBottom:"1rem"},children:(0,o.jsxs)("span",{style:{fontSize:"1.5rem",fontWeight:"600",color:c?"#ef4444":i.brand.green},children:[t,"s"]})})]})},G=e=>{let{currentXP:t,xpToNextLevel:n,level:r,showLevel:s=!0}=e;const i=l(),a=t+n,c=a>0?t/a*100:0;return(0,o.jsxs)("div",{style:{width:"100%"},children:[(0,o.jsx)("div",{style:{height:"8px",background:i.bg.tertiary,borderRadius:"10px",overflow:"hidden",marginBottom:"0.5rem"},children:(0,o.jsx)("div",{style:{height:"100%",width:`${c}%`,background:`linear-gradient(90deg, ${i.brand.blue}, #0066CC)`,borderRadius:"10px",transition:"width 0.8s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:`0 0 8px ${i.brand.blue}33`}})}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"0.9rem",color:i.text.secondary},children:[s&&(0,o.jsxs)("span",{children:["N\xedvel ",r]}),(0,o.jsxs)("span",{children:[Math.round(c),"% para o pr\xf3ximo n\xedvel"]}),(0,o.jsxs)("span",{children:[n," XP restantes"]})]})]})},K=e=>{let{progress:t}=e;const n=l();return(0,o.jsxs)("div",{className:"hub-progress-card",style:{background:n.bg.secondary,border:`1px solid ${n.border.primary}`,boxShadow:n.shadow.lg},children:[(0,o.jsx)("div",{className:"hub-progress-accent",style:{background:`linear-gradient(90deg, ${n.brand.blue}, #0066CC)`}}),(0,o.jsxs)("div",{className:"hub-progress-header",children:[(0,o.jsx)("h2",{className:"hub-progress-title",style:{color:n.text.primary},children:"Seu Progresso"}),(0,o.jsx)("p",{className:"hub-progress-subtitle",style:{color:n.text.secondary},children:"Continue assim!"})]}),(0,o.jsxs)("div",{className:"hub-progress-stats",children:[(0,o.jsxs)("div",{className:"hub-stat-card",style:{background:n.bg.tertiary,border:`1px solid ${n.border.primary}`},children:[(0,o.jsxs)("div",{className:"hub-stat-value",style:{color:n.text.primary},children:["N\xedvel ",t.currentLevel]}),(0,o.jsx)("div",{className:"hub-stat-label",style:{color:n.text.secondary},children:"Atual"})]}),(0,o.jsxs)("div",{className:"hub-stat-card",style:{background:n.bg.tertiary,border:`1px solid ${n.border.primary}`},children:[(0,o.jsx)("div",{className:"hub-stat-value hub-stat-highlight",style:{color:n.brand.blue},children:t.totalXP}),(0,o.jsx)("div",{className:"hub-stat-label",style:{color:n.text.secondary},children:"Total XP"})]}),(0,o.jsxs)("div",{className:"hub-stat-card",style:{background:n.bg.tertiary,border:`1px solid ${n.border.primary}`},children:[(0,o.jsx)("div",{className:"hub-stat-value",style:{color:n.text.primary},children:t.xpToNextLevel}),(0,o.jsx)("div",{className:"hub-stat-label",style:{color:n.text.secondary},children:"Para Pr\xf3ximo"})]})]}),(0,o.jsx)("div",{className:"hub-progress-bar-section",children:(0,o.jsx)(G,{currentXP:t.totalXP,xpToNextLevel:t.xpToNextLevel,level:t.currentLevel,showLevel:!1})}),(0,o.jsxs)("div",{className:"hub-achievements",children:[(0,o.jsxs)("div",{className:"hub-achievement",children:[(0,o.jsx)("svg",{className:"hub-achievement-icon",style:{color:n.brand.red},viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:(0,o.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67z"})}),(0,o.jsx)("span",{className:"hub-achievement-value",style:{color:n.text.primary},children:t.currentStreak}),(0,o.jsx)("span",{className:"hub-achievement-label",style:{color:n.text.secondary},children:"dias sequ\xeancia"})]}),(0,o.jsxs)("div",{className:"hub-achievement",children:[(0,o.jsx)("svg",{className:"hub-achievement-icon",style:{color:n.brand.blue},viewBox:"0 0 24 24",fill:"currentColor",width:"20",height:"20",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsx)("span",{className:"hub-achievement-value",style:{color:n.text.primary},children:t.totalActivities}),(0,o.jsx)("span",{className:"hub-achievement-label",style:{color:n.text.secondary},children:"atividades completas"})]})]})]})},Q=e=>{let{children:t,variant:n="primary",size:r="default",icon:s,iconPosition:i="left",disabled:a=!1,loading:c=!1,fullWidth:u=!1,onClick:d,style:h={},...p}=e;const m=l(),f={primary:{background:`linear-gradient(135deg, ${m.brand.blue}, #0066CC)`,color:"white",border:"none",boxShadow:`0 2px 8px ${m.brand.blue}33`},secondary:{background:m.bg.tertiary,color:m.text.primary,border:`1px solid ${m.border.primary}`,boxShadow:m.shadow.sm},success:{background:`linear-gradient(135deg, ${m.brand.green}, #059669)`,color:"white",border:"none",boxShadow:`0 2px 8px ${m.brand.green}33`},danger:{background:"linear-gradient(135deg, #ef4444, #dc2626)",color:"white",border:"none",boxShadow:"0 2px 8px rgba(239, 68, 68, 0.33)"},warning:{background:`linear-gradient(135deg, ${m.brand.orange}, #D97706)`,color:"white",border:"none",boxShadow:`0 2px 8px ${m.brand.orange}33`},ghost:{background:"transparent",color:m.text.secondary,border:`1px solid ${m.border.primary}`,boxShadow:"none"},link:{background:"none",color:m.brand.blue,border:"none",boxShadow:"none",textDecoration:"underline"}},g={display:"inline-flex",alignItems:"center",justifyContent:"center",gap:s?"0.5rem":0,fontWeight:"600",borderRadius:"0.75rem",cursor:a||c?"not-allowed":"pointer",transition:"all 0.2s ease",fontFamily:"inherit",opacity:a?.5:1,width:u?"100%":"auto",...{small:{padding:"0.5rem 1rem",fontSize:"0.85rem"},default:{padding:"0.75rem 1.5rem",fontSize:"0.95rem"},large:{padding:"1rem 2rem",fontSize:"1rem"},xl:{padding:"1.25rem 2.5rem",fontSize:"1.1rem"}}[r],...f[n],...h};return(0,o.jsxs)("button",{style:g,onClick:e=>{a||c||null===d||void 0===d||d(e)},onMouseEnter:e=>{a||c||("link"===n?e.target.style.opacity="0.8":"ghost"===n?(e.target.style.background=m.bg.secondary,e.target.style.borderColor=m.border.secondary):(e.target.style.transform="translateY(-1px)",e.target.style.filter="brightness(1.05)"))},onMouseLeave:e=>{a||c||("link"===n?e.target.style.opacity="1":"ghost"===n?(e.target.style.background="transparent",e.target.style.borderColor=m.border.primary):(e.target.style.transform="translateY(0)",e.target.style.filter="brightness(1)"))},disabled:a||c,...p,children:[c&&(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{animation:"spin 1s linear infinite"},children:[(0,o.jsx)("path",{d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),(0,o.jsx)("path",{d:"M9 12l2 2 4-4"})]}),!c&&s&&"left"===i&&s,t,!c&&s&&"right"===i&&s]})},X=e=>{let{children:t,index:n,onClick:r,disabled:s=!1}=e;const i=l();return(0,o.jsxs)("button",{onClick:r,disabled:s,style:{width:"100%",padding:"1rem",margin:"0.5rem 0",background:i.bg.secondary,border:`2px solid ${i.border.primary}`,borderRadius:"0.75rem",cursor:s?"not-allowed":"pointer",transition:"all 0.2s ease",textAlign:"left",color:i.text.primary,fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.75rem"},onMouseEnter:e=>{s||(e.target.style.borderColor=i.brand.green,e.target.style.background=i.border.secondary)},onMouseLeave:e=>{s||(e.target.style.borderColor=i.border.primary,e.target.style.background=i.bg.secondary)},children:[(0,o.jsxs)("span",{style:{fontWeight:"600",color:i.text.muted,minWidth:"1.5rem"},children:[String.fromCharCode(65+n),")"]}),t]})},Y=e=>{let{isTrue:t,onClick:n,disabled:r=!1}=e;const s={padding:"1rem 2rem",border:"none",borderRadius:"0.75rem",fontWeight:"600",cursor:r?"not-allowed":"pointer",transition:"all 0.2s ease",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",opacity:r?.5:1},i={...s,background:"#10b981",color:"white"},a={...s,background:"#ef4444",color:"white"};return(0,o.jsx)("button",{onClick:n,disabled:r,style:t?i:a,onMouseEnter:e=>{r||(e.target.style.transform="scale(1.05)")},onMouseLeave:e=>{r||(e.target.style.transform="scale(1)")},children:t?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M20 6L9 17l-5-5"})}),"Verdadeiro"]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})}),"Falso"]})})},J=e=>{let{children:t,color:n,onClick:r,disabled:s=!1,comingSoon:i=!1}=e;const a=l();return i?(0,o.jsx)("button",{disabled:!0,style:{width:"100%",padding:"0.875rem 1.5rem",background:a.bg.tertiary,color:a.text.muted,border:`1px solid ${a.border.primary}`,borderRadius:"12px",cursor:"not-allowed",fontWeight:"600",fontSize:"0.95rem"},children:t}):(0,o.jsx)("button",{onClick:r,disabled:s,style:{width:"100%",padding:"0.875rem 1.5rem",border:"none",borderRadius:"12px",fontWeight:"600",fontSize:"0.95rem",cursor:s?"not-allowed":"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",background:n,color:"white",boxShadow:`0 2px 8px ${n}33`,opacity:s?.5:1},onMouseEnter:e=>{s||(e.target.style.transform="translateY(-1px)",e.target.style.filter="brightness(1.05)")},onMouseLeave:e=>{s||(e.target.style.transform="translateY(0)",e.target.style.filter="brightness(1)")},children:t})},Z=e=>{let{progress:t,onNavigate:n,foundationStories:r,foundationWordMatches:s,totalQuizzes:i}=e;const a=l(),c=r||[],u=s||[],d=i||1,h=[{id:"lessons",title:"Li\xe7\xf5es B\xe1sicas",description:"8 s\xe9ries fundamentais",detail:"Fundamentos do ingl\xeas",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"})}),gradient:"linear-gradient(135deg, #0082FF, #0066CC)",shadowColor:"rgba(0, 130, 255, 0.33)",count:`${t.completedLessons} de 80 completas`,buttonText:"\ud83d\udcda Continuar B\xe1sico",onClick:()=>n("lessons")},{id:"lessons-a2",title:"Li\xe7\xf5es 2",description:"3 s\xe9ries avan\xe7adas",detail:"Ingl\xeas intermedi\xe1rio",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),gradient:"linear-gradient(135deg, #8b5cf6, #7c3aed)",shadowColor:"rgba(139, 92, 246, 0.33)",count:`${t.completedA2Lessons||0} de 30 completas`,buttonText:"\ud83d\ude80 Explorar Li\xe7\xf5es 2",onClick:()=>n("lessons-a2"),isNew:!0},{id:"stories",title:"Jogos de Hist\xf3ria",description:"Complete hist\xf3rias interativas",detail:"Hist\xf3rias em ingl\xeas",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),gradient:"linear-gradient(135deg, #D32F2F, #B71C1C)",shadowColor:"rgba(211, 47, 47, 0.33)",count:t.completedStories===c.length?"Todas completas! \ud83c\udf89":`${t.completedStories} de ${c.length} completas`,buttonText:t.completedStories===c.length?"\ud83d\udcd6 Revisar Hist\xf3rias":"\ud83c\udfae Come\xe7ar a Jogar",onClick:()=>n("story-completion")},{id:"wordmatch",title:"Combine Palavras",description:"Ingl\xeas com Portugu\xeas",detail:"Vocabul\xe1rio essencial",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),gradient:"linear-gradient(135deg, #F59E0B, #D97706)",shadowColor:"rgba(245, 158, 11, 0.33)",count:t.completedWordMatches===u.length?"Todos completos! \ud83c\udf89":`${t.completedWordMatches} de ${u.length} completos`,buttonText:t.completedWordMatches===u.length?"\ud83c\udfaf Revisar Rounds":"\ud83c\udfaf Come\xe7ar a Combinar",onClick:()=>n("word-match")},{id:"quiz",title:"Quiz R\xe1pido",description:"Perguntas cronometradas",detail:"Teste seus conhecimentos",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),gradient:"linear-gradient(135deg, #10b981, #059669)",shadowColor:"rgba(16, 185, 129, 0.33)",count:t.completedQuizzes===d?"Todos completos! \ud83c\udf89":`${t.completedQuizzes} de ${d} completos`,buttonText:t.completedQuizzes===d?"\ud83c\udfaf Revisar Quizzes":"\u26a1 Come\xe7ar Quiz",onClick:()=>n("quiz")},{id:"study",title:"Centro de Estudos",description:"Gram\xe1tica, conceitos e curiosidades",detail:"Leitura tradicional com XP",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"})}),gradient:"linear-gradient(135deg, #8b5cf6, #7c3aed)",shadowColor:"rgba(139, 92, 246, 0.33)",count:`${t.studyStats.completedSections} de ${t.studyStats.totalSections} se\xe7\xf5es lidas`,buttonText:0===t.studyStats.completedSections?"\ud83d\udcda Come\xe7ar a Estudar":t.studyStats.completedSections===t.studyStats.totalSections?"\ud83c\udf89 Todos os Guias Completos!":"\ud83d\udcd6 Continuar Estudando",onClick:()=>n("study-center"),extra:t.studyStats.completedGuides>0&&(0,o.jsxs)("div",{style:{color:"#10b981",fontSize:"0.85rem",marginTop:"0.5rem"},children:["\ud83c\udfc6 ",t.studyStats.completedGuides," guia",t.studyStats.completedGuides>1?"s":""," completo",t.studyStats.completedGuides>1?"s":"","!"]}),isNew:!0}],p=[{id:"voice",title:"Pr\xe1tica de Voz",description:"IA para pron\xfancia",detail:"Feedback inteligente",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c1.66 0 3 1.34 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})}),buttonText:"\ud83c\udf99\ufe0f Praticar Fala",features:"Grave sua voz \u2022 Feedback de pron\xfancia \u2022 Ganhe confian\xe7a"},{id:"future",title:"Nova Atividade",description:"Mais divers\xe3o em breve",detail:"Aguarde novidades",icon:(0,o.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),buttonText:"\ud83c\udfae Aguarde",features:"Nova atividade \u2022 Mais XP \u2022 Mais divers\xe3o"}];return(0,o.jsxs)("section",{className:"hub-activities-section",children:[(0,o.jsx)("h2",{className:"hub-activities-title",style:{color:a.text.primary},children:"\ud83c\udfaf Suas Atividades"}),(0,o.jsxs)("div",{className:"hub-activities-grid",children:[h.map(e=>(0,o.jsxs)("div",{className:"hub-activity-card",onClick:e.onClick,style:{background:a.bg.secondary,border:`1px solid ${a.border.primary}`,boxShadow:a.shadow.md,position:"relative"},children:[e.isNew&&(0,o.jsx)("div",{className:"hub-new-badge",style:{position:"absolute",top:"1rem",right:"1rem",background:"linear-gradient(135deg, #F59E0B, #D97706)",color:"white",fontSize:"0.75rem",fontWeight:"700",padding:"0.25rem 0.75rem",borderRadius:"12px",textTransform:"uppercase",letterSpacing:"0.025em",boxShadow:"0 2px 8px rgba(245, 158, 11, 0.3)",animation:"hub-pulse 2s infinite"},children:"NOVO!"}),(0,o.jsx)("div",{className:"hub-activity-icon",style:{background:e.gradient,boxShadow:`0 4px 16px ${e.shadowColor}`,marginTop:e.isNew?"1rem":"0"},children:e.icon}),(0,o.jsxs)("div",{className:"hub-activity-content",children:[(0,o.jsx)("h3",{className:"hub-activity-title",style:{color:a.text.primary},children:e.title}),(0,o.jsx)("p",{className:"hub-activity-description",style:{color:a.text.secondary},children:e.description}),(0,o.jsxs)("div",{className:"hub-activity-stats",children:[(0,o.jsx)("p",{className:"hub-activity-detail",style:{color:a.text.secondary},children:e.detail}),(0,o.jsx)("p",{className:"hub-activity-count",style:{color:e.gradient.includes("#0082FF")?a.brand.blue:e.gradient.includes("#D32F2F")?a.brand.red:e.gradient.includes("#F59E0B")?a.brand.orange:e.gradient.includes("#10b981")?"#10b981":"#8b5cf6"},children:e.count}),e.extra]})]}),(0,o.jsx)(J,{onClick:e.onClick,color:e.gradient,children:e.buttonText})]},e.id)),p.map(e=>(0,o.jsxs)("div",{className:"hub-activity-card hub-activity-disabled",style:{background:a.bg.tertiary,border:`1px solid ${a.border.primary}`,boxShadow:a.shadow.md},children:[(0,o.jsx)("div",{className:"hub-activity-icon",style:{background:`linear-gradient(135deg, ${a.text.muted}, #6B7280)`,boxShadow:`0 4px 16px ${a.text.muted}33`},children:e.icon}),(0,o.jsxs)("div",{className:"hub-activity-content",children:[(0,o.jsx)("h3",{className:"hub-activity-title",style:{color:a.text.primary},children:e.title}),(0,o.jsx)("p",{className:"hub-activity-description",style:{color:a.text.secondary},children:e.description}),(0,o.jsxs)("div",{className:"hub-activity-stats",children:[(0,o.jsx)("p",{className:"hub-activity-detail",style:{color:a.text.secondary},children:e.detail}),(0,o.jsx)("div",{className:"hub-coming-soon-badge",style:{background:"linear-gradient(135deg, #F59E0B, #D97706)"},children:"Em Breve!"})]})]}),(0,o.jsx)(J,{disabled:!0,comingSoon:!0,children:e.buttonText}),(0,o.jsx)("div",{className:"hub-activity-features",style:{color:a.text.muted},children:e.features})]},e.id))]})]})},ee=e=>{let{studentData:t,onNavigate:n}=e;const r=(e=>{if(Array.isArray(e)&&e.length>0){return e.every(e=>e&&"string"===typeof e.id&&e.id.length>0)?e:e.map((e,t)=>`quiz-${t+1}`)}return["quiz-1"]})(V),s=r.length,i=(()=>{if(!t||!t.progress)return{totalXP:0,currentLevel:1,currentStreak:0,completedLessons:0,completedA2Lessons:0,completedStories:0,completedWordMatches:0,completedQuizzes:0,totalActivities:0,xpToNextLevel:50,progressPercent:0,studyStats:{completedSections:0,totalSections:22,completedGuides:0,availableGuides:8}};const e=t.totalXP||0,n=L(e),s=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return!t.startsWith("story-")&&!t.startsWith("wordmatch-")&&!t.startsWith("quiz-")&&!t.startsWith("a2-")&&n.completed}).length,i=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("a2-")&&n.completed}).length,o=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("story-")&&n.completed}).length,a=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("wordmatch-")&&n.completed}).length,l=r.filter(e=>{try{const n=(e=>{const n=String(e||""),r=(null===t||void 0===t?void 0:t.progress)||{};if(void 0!==r[n])return r[n];if(!n.startsWith("quiz-")&&void 0!==r[`quiz-${n}`])return r[`quiz-${n}`];if(n.startsWith("quiz-")){const e=n.slice(5);if(void 0!==r[e])return r[e]}})(e);return!0===n||!0===(null===n||void 0===n?void 0:n.completed)||!0===(null===n||void 0===n?void 0:n.passed)}catch(n){return!1}}).length,c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={overview:{sections:[{}],disabled:!1},suffixes:{sections:[{},{},{}],disabled:!1},"phrasal-verbs":{sections:[{},{},{}],disabled:!1},"verb-tenses":{sections:[{},{},{}],disabled:!1},prepositions:{sections:[{},{},{}],disabled:!1},conditionals:{sections:[{},{},{}],disabled:!1},"modal-verbs":{sections:[{},{},{}],disabled:!1},"reported-speech":{sections:[{},{},{}],disabled:!1},"irregular-verbs":{disabled:!0},"false-friends":{disabled:!0},pronunciation:{disabled:!0}};let n=0,r=0;Object.entries(t).forEach(t=>{let[s,i]=t;i.sections&&!i.disabled&&(n+=i.sections.length,i.sections.forEach((t,n)=>{var i;null!==(i=e[`${s}-section-${n+1}`])&&void 0!==i&&i.completed&&r++}))});const s=Object.entries(t).filter(t=>{let[n,r]=t;if(r.disabled||!r.sections)return!1;const s=r.sections.length;return r.sections.filter((t,r)=>{var s;return null===(s=e[`${n}-section-${r+1}`])||void 0===s?void 0:s.completed}).length===s&&s>0}).length;return{totalSections:n,completedSections:r,completedGuides:s,availableGuides:Object.values(t).filter(e=>!e.disabled).length}}(t.studyProgress||{}),u=s+i+o+a+l+c.completedSections,d=O(e),h=M(e);return{totalXP:e,currentLevel:n,currentStreak:(e=>{if(!e||0===e.length)return 0;const t=e.map(e=>e.timestamp.toDate().toDateString()).filter((e,t,n)=>n.indexOf(e)===t).sort();if(0===t.length)return 0;let n=1;const r=(new Date).toDateString(),s=t[t.length-1],i=new Date(Date.now()-864e5).toDateString();if(s!==r&&s!==i)return 0;for(let o=t.length-2;o>=0;o--){const e=new Date(t[o]).getTime();if(1!==(new Date(t[o+1]).getTime()-e)/36e8)break;n++}return n})(t.xpHistory||[]),completedLessons:s,completedA2Lessons:i,completedStories:o,completedWordMatches:a,completedQuizzes:l,totalActivities:u,xpToNextLevel:d,progressPercent:h,studyStats:c}})();return(0,o.jsxs)("div",{className:"hub-container",children:[(0,o.jsx)($,{}),(0,o.jsx)(K,{progress:i}),(0,o.jsx)(Z,{progress:i,onNavigate:n,foundationStories:q,foundationWordMatches:F,totalQuizzes:s})]})},te=e=>{let{user:t,onBack:n,onSeriesSelect:s}=e;const[i,a]=(0,r.useState)({}),[c,u]=(0,r.useState)(!0),d=l(),h=[{id:"foundation",title:"Foundation",description:"Domine os fundamentos do ingl\xeas",color:"#196de3",totalLessons:10,icon:"foundation"},{id:"sports",title:"Sports",description:"Futebol, Olimp\xedadas e paix\xe3o brasileira",color:"#27ae60",totalLessons:10,icon:"sports"},{id:"culture",title:"Culture",description:"Tradi\xe7\xf5es brasileiras e cultura global",color:"#9b59b6",totalLessons:10,icon:"culture"},{id:"travel",title:"Travel",description:"Explore o mundo com ingl\xeas",color:"#3498db",totalLessons:10,icon:"travel"},{id:"food",title:"Food",description:"Do a\xe7a\xed \xe0 culin\xe1ria internacional",color:"#e67e22",totalLessons:10,icon:"food"},{id:"movies",title:"Movies",description:"Cinema, entretenimento e narrativas",color:"#bf3d30",totalLessons:10,icon:"movies"},{id:"gaming",title:"Gaming",description:"Videogames e entretenimento digital",color:"#34495e",totalLessons:10,icon:"gaming"},{id:"business",title:"Business",description:"Ingl\xeas profissional e corporativo",color:"#2c5282",totalLessons:10,icon:"business"},{id:"portal",title:"Portal",description:"T\xf3picos avan\xe7ados e conte\xfado especial",color:"#f39c12",totalLessons:10,icon:"portal",comingSoon:!0}],p=e=>{let{type:t,className:n="w-7 h-7"}=e;const r={className:`${n} text-white`,fill:"currentColor",viewBox:"0 0 24 24"};switch(t){case"foundation":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})});case"sports":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M7 4V2C7 1.45 7.45 1 8 1s1 .45 1 1v2h6V2c0-.55.45-1 1-1s1 .45 1 1v2h1c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h1z"})});case"culture":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})});case"travel":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29z"})});case"food":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.20-1.10-6.12.81z"})});case"movies":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})});case"gaming":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"})});case"business":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2z"})});default:return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}};(0,r.useEffect)(()=>{(async()=>{try{const e=await g(t.username);if(e.success&&e.student&&e.student.progress){const t={};for(const n of h){if(n.comingSoon){t[n.id]={completedLessons:0,totalXP:0};continue}const r=Object.entries(e.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(n.id)}).reduce((e,t)=>{let[n,r]=t;return r.completed&&(e.completedLessons+=1,e.totalXP+=r.xpEarned||0),e},{completedLessons:0,totalXP:0});t[n.id]=r}a(t)}else{const e={};h.forEach(t=>{e[t.id]={completedLessons:0,totalXP:0}}),a(e)}}catch(e){console.error("Error loading series progress:",e);const t={};h.forEach(e=>{t[e.id]={completedLessons:0,totalXP:0}}),a(t)}finally{u(!1)}})()},[t.username]);if(c)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:d.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 rounded-full animate-spin mx-auto mb-4",style:{borderColor:`${d.border.primary}`,borderTopColor:d.brand.blue}}),(0,o.jsx)("p",{style:{color:d.text.secondary},className:"font-medium",children:"Carregando s\xe9ries..."})]})});const m={totalCompleted:Object.values(i).reduce((e,t)=>e+t.completedLessons,0),totalXP:Object.values(i).reduce((e,t)=>e+t.totalXP,0),seriesStarted:Object.values(i).filter(e=>e.completedLessons>0).length},f=h.filter(e=>!e.comingSoon);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Dark Mode Series Selector */\n        .series-container {\n          max-width: 1000px;\n          margin: 0 auto;\n        }\n\n        /* Loading Spinner */\n        .loading-spinner {\n          width: 48px;\n          height: 48px;\n          border: 3px solid ${d.border.primary};\n          border-top: 3px solid ${d.brand.blue};\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Stats Card */\n        .stats-card {\n          background: ${d.bg.secondary};\n          border: 1px solid ${d.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          margin-bottom: 2rem;\n          box-shadow: ${d.shadow.md};\n        }\n\n        .stats-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${d.text.primary};\n          text-align: center;\n          margin-bottom: 0.5rem;\n          letter-spacing: -0.01em;\n        }\n\n        .stats-subtitle {\n          color: ${d.text.secondary};\n          text-align: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .stats-grid {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 1.5rem;\n          text-align: center;\n        }\n\n        .stat-item {\n          padding: 1rem;\n          background: ${d.bg.tertiary};\n          border-radius: 12px;\n          border: 1px solid ${d.border.primary};\n          transition: all 0.2s ease;\n        }\n\n        .stat-item:hover {\n          background: ${d.border.secondary};\n          transform: translateY(-2px);\n        }\n\n        .stat-value {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${d.text.primary};\n          margin-bottom: 0.25rem;\n        }\n\n        .stat-label {\n          font-size: 0.8rem;\n          color: ${d.text.secondary};\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n          font-weight: 500;\n        }\n\n        /* Series Grid */\n        .series-grid {\n          display: grid;\n          grid-template-columns: 1fr;\n          gap: 1.5rem;\n        }\n\n        @media (min-width: 768px) {\n          .series-grid {\n            grid-template-columns: repeat(2, 1fr);\n          }\n        }\n\n        @media (min-width: 1024px) {\n          .series-grid {\n            grid-template-columns: repeat(3, 1fr);\n          }\n        }\n\n        /* Series Card - Elegant Dark Mode */\n        .series-card {\n          background: ${d.bg.secondary};\n          border: 1px solid ${d.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          box-shadow: ${d.shadow.md};\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          cursor: pointer;\n          position: relative;\n          overflow: hidden;\n        }\n\n        .series-card:hover {\n          transform: translateY(-4px);\n          box-shadow: ${d.shadow.lg};\n          border-color: ${d.border.secondary};\n        }\n\n        .series-card.coming-soon {\n          opacity: 0.7;\n          cursor: not-allowed;\n          background: ${d.bg.tertiary};\n        }\n\n        .series-card.coming-soon:hover {\n          transform: none;\n          box-shadow: ${d.shadow.md};\n        }\n\n        /* Series Header */\n        .series-header {\n          display: flex;\n          align-items: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .series-icon {\n          width: 56px;\n          height: 56px;\n          border-radius: 14px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-right: 1rem;\n          transition: all 0.3s ease;\n          flex-shrink: 0;\n        }\n\n        .series-card:hover .series-icon {\n          transform: scale(1.05);\n        }\n\n        .series-info {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .series-title {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: ${d.text.primary};\n          margin-bottom: 0.25rem;\n          letter-spacing: -0.01em;\n        }\n\n        .series-description {\n          font-size: 0.9rem;\n          color: ${d.text.secondary};\n          line-height: 1.4;\n        }\n\n        .coming-soon-badge {\n          background: linear-gradient(135deg, ${d.brand.orange}, #D97706);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          margin-left: 0.5rem;\n        }\n\n        /* Progress Section */\n        .progress-section {\n          margin-bottom: 1.5rem;\n        }\n\n        .progress-bar {\n          background: ${d.bg.tertiary};\n          height: 6px;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 1rem;\n        }\n\n        .progress-fill {\n          height: 100%;\n          border-radius: 10px;\n          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n\n        .progress-stats {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n        }\n\n        .progress-text {\n          font-size: 0.9rem;\n          color: ${d.text.secondary};\n        }\n\n        .progress-number {\n          font-weight: 600;\n          color: ${d.text.primary};\n        }\n\n        .xp-badge {\n          background: ${d.bg.tertiary};\n          color: ${d.brand.orange};\n          font-size: 0.8rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          border: 1px solid ${d.border.primary};\n        }\n\n        /* Action Button */\n        .series-button {\n          width: 100%;\n          padding: 0.875rem 1.5rem;\n          border: none;\n          border-radius: 12px;\n          font-weight: 600;\n          font-size: 0.95rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n        }\n\n        .series-button.available {\n          background: linear-gradient(135deg, ${d.brand.blue}, #0066CC);\n          color: white;\n          box-shadow: 0 2px 8px ${d.brand.blue}33;\n        }\n\n        .series-button.coming-soon {\n          background: ${d.bg.tertiary};\n          color: ${d.text.muted};\n          border: 1px solid ${d.border.primary};\n          cursor: not-allowed;\n        }\n\n        .series-button.available:hover {\n          transform: translateY(-1px);\n          filter: brightness(1.05);\n        }\n\n        .series-button.available:active {\n          transform: translateY(0);\n        }\n\n        .button-arrow {\n          width: 16px;\n          height: 16px;\n          transition: transform 0.2s ease;\n        }\n\n        .series-button.available:hover .button-arrow {\n          transform: translateX(2px);\n        }\n\n        /* Coming Soon Card Special Styling */\n        .coming-soon-content {\n          text-align: center;\n          padding: 1rem 0;\n        }\n\n        .coming-soon-title {\n          font-size: 1rem;\n          font-weight: 600;\n          color: ${d.brand.orange};\n          margin-bottom: 0.5rem;\n        }\n\n        .coming-soon-description {\n          font-size: 0.9rem;\n          color: ${d.text.secondary};\n        }\n\n        /* Responsive Adjustments */\n        @media (max-width: 767px) {\n          .stats-card {\n            padding: 1.5rem;\n          }\n\n          .stats-grid {\n            gap: 1rem;\n          }\n\n          .series-card {\n            padding: 1.5rem;\n          }\n\n          .series-header {\n            margin-bottom: 1rem;\n          }\n\n          .series-icon {\n            width: 48px;\n            height: 48px;\n          }\n\n          .series-title {\n            font-size: 1.125rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"series-container",children:[(0,o.jsxs)("div",{className:"stats-card",children:[(0,o.jsx)("h2",{className:"stats-title",children:"Escolha sua S\xe9rie"}),(0,o.jsxs)("p",{className:"stats-subtitle",children:[f.length," s\xe9ries de li\xe7\xf5es dispon\xedveis"]}),(0,o.jsxs)("div",{className:"stats-grid",children:[(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("div",{className:"stat-value",children:m.totalCompleted}),(0,o.jsx)("div",{className:"stat-label",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsx)("div",{className:"stat-value",children:m.totalXP}),(0,o.jsx)("div",{className:"stat-label",children:"XP Total"})]}),(0,o.jsxs)("div",{className:"stat-item",children:[(0,o.jsxs)("div",{className:"stat-value",children:[m.seriesStarted,"/",f.length]}),(0,o.jsx)("div",{className:"stat-label",children:"S\xe9ries Iniciadas"})]})]})]}),(0,o.jsx)("div",{className:"series-grid",children:h.map(e=>{const t=((e,t)=>{const n=i[e];return n?Math.round(n.completedLessons/t*100):0})(e.id,e.totalLessons),n=i[e.id]||{completedLessons:0,totalXP:0};return(0,o.jsxs)("div",{onClick:()=>(e=>{e.comingSoon||s(e.id,e.title)})(e),className:"series-card "+(e.comingSoon?"coming-soon":""),children:[(0,o.jsxs)("div",{className:"series-header",children:[(0,o.jsx)("div",{className:"series-icon",style:{background:e.comingSoon?`linear-gradient(135deg, ${d.text.muted}, #6B7280)`:`linear-gradient(135deg, ${e.color}, ${e.color}dd)`,boxShadow:e.comingSoon?`0 2px 8px ${d.text.muted}33`:`0 2px 8px ${e.color}33`},children:e.comingSoon?(0,o.jsx)("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6z"})}):(0,o.jsx)(p,{type:e.icon})}),(0,o.jsxs)("div",{className:"series-info",children:[(0,o.jsxs)("h3",{className:"series-title",children:[e.title,e.comingSoon&&(0,o.jsx)("span",{className:"coming-soon-badge",children:"Em Breve"})]}),(0,o.jsx)("p",{className:"series-description",children:e.description})]})]}),e.comingSoon?(0,o.jsxs)("div",{className:"coming-soon-content",children:[(0,o.jsx)("div",{className:"coming-soon-title",children:"\ud83d\ude80 Conte\xfado Avan\xe7ado em Desenvolvimento"}),(0,o.jsx)("div",{className:"coming-soon-description",children:"Aguarde novidades incr\xedveis!"})]}):(0,o.jsxs)("div",{className:"progress-section",children:[(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:`${t}%`,background:t>0?`linear-gradient(90deg, ${d.brand.blue}, #0066CC)`:`linear-gradient(90deg, ${e.color}, ${e.color}dd)`}})}),(0,o.jsxs)("div",{className:"progress-stats",children:[(0,o.jsxs)("div",{className:"progress-text",children:[(0,o.jsxs)("span",{className:"progress-number",children:[n.completedLessons,"/",e.totalLessons]})," ","li\xe7\xf5es \u2022 ",t,"% completo"]}),n.totalXP>0&&(0,o.jsxs)("div",{className:"xp-badge",children:[n.totalXP," XP"]})]})]}),(0,o.jsxs)("button",{className:"series-button "+(e.comingSoon?"coming-soon":"available"),disabled:e.comingSoon,children:[(0,o.jsx)("span",{children:e.comingSoon?"Aguarde o lan\xe7amento":0===t?"Come\xe7ar agora":100===t?"Revisar s\xe9rie":"Continuar"}),!e.comingSoon&&(0,o.jsx)("svg",{className:"button-arrow",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id)})})]})]})},ne=e=>{let{user:t,seriesId:s,seriesTitle:i,onBack:a,onLessonSelect:c}=e;const[u,d]=(0,r.useState)([]),[h,p]=(0,r.useState)({}),[m,f]=(0,r.useState)(!0),y=l(),v={foundation:{color:"#196de3",gradient:"from-blue-500 to-blue-600"},sports:{color:"#27ae60",gradient:"from-green-500 to-green-600"},culture:{color:"#9b59b6",gradient:"from-purple-500 to-purple-600"},travel:{color:"#3498db",gradient:"from-sky-500 to-sky-600"},food:{color:"#e67e22",gradient:"from-orange-500 to-orange-600"},movies:{color:"#bf3d30",gradient:"from-red-500 to-red-600"},gaming:{color:"#34495e",gradient:"from-slate-600 to-slate-700"},business:{color:"#2c5282",gradient:"from-blue-800 to-blue-900"},portal:{color:"#f39c12",gradient:"from-amber-500 to-amber-600"}},b=v[s]||v.foundation;(0,r.useEffect)(()=>{(async()=>{try{let r=[];try{switch(s){case"foundation":const{FOUNDATION_LESSONS:e}=await n.e(568).then(n.bind(n,568));r=e;break;case"gaming":try{const{GAMING_LESSONS:e}=await n.e(852).then(n.bind(n,852));r=e}catch{console.log("Gaming lessons file not found, using placeholder"),r=w(s)}break;case"food":try{const{FOOD_LESSONS:e}=await n.e(483).then(n.bind(n,483));r=e}catch{console.log("Food lessons file not found, using placeholder"),r=w(s)}break;case"movies":try{const{MOVIE_LESSONS:e}=await n.e(429).then(n.bind(n,429));r=e}catch{console.log("Movie lessons file not found, using placeholder"),r=w(s)}break;case"travel":try{const{TRAVEL_LESSONS:e}=await n.e(767).then(n.bind(n,767));r=e}catch{console.log("Travel lessons file not found, using placeholder"),r=w(s)}break;case"sports":try{const{SPORTS_LESSONS:e}=await n.e(558).then(n.bind(n,558));r=e}catch{console.log("Sports lessons file not found, using placeholder"),r=w(s)}break;case"business":const{BUSINESS_LESSONS:t}=await n.e(289).then(n.bind(n,289));r=t;break;case"culture":try{const{CULTURE_LESSONS:e}=await n.e(387).then(n.bind(n,387));r=e}catch{console.log("Culture lessons file not found, using placeholder"),r=w(s)}break;case"portal":try{const{PORTAL_LESSONS:e}=await n.e(165).then(n.bind(n,165));r=e}catch{console.log("Portal lessons file not found, using placeholder"),r=w(s)}break;default:r=w(s)}}catch(e){console.error("Error loading lesson data:",e),r=w(s)}d(r);const i=await g(t.username);if(i.success&&i.student&&i.student.progress){const e=Object.entries(i.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(s)}).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{});p(e)}else p({})}catch(e){console.error("Error loading lesson data:",e),d([]),p({})}finally{f(!1)}})()},[s,t.username]);const w=e=>{const t=["2:15","3:42","4:18","3:56","3:29","4:03","3:51","4:27","3:38","5:12"],n={foundation:[{title:"Basic Greetings",desc:"Hello, how are you?",file:"audio-01-greetings.mp3"},{title:"Family Members",desc:"Mother, father, sister",file:"audio-02-family.mp3"},{title:"Daily Routine",desc:"Morning to evening activities",file:"audio-03-routine.mp3"},{title:"Food & Drinks",desc:"Pizza, coffee, restaurant",file:"audio-04-food.mp3"},{title:"Weather & Clothes",desc:"Sunny, rainy, jacket",file:"audio-05-weather.mp3"},{title:"Shopping",desc:"Supermarket, prices, payment",file:"audio-06-shopping.mp3"},{title:"Hobbies",desc:"Reading, guitar, photography",file:"audio-07-hobbies.mp3"},{title:"Transportation",desc:"Bus, car, walking",file:"audio-08-transportation.mp3"},{title:"Health & Body",desc:"Exercise, doctor, healthy",file:"audio-09-health.mp3"},{title:"Future Plans",desc:"Travel, new job, dreams",file:"audio-10-future.mp3"}],sports:[{title:"Football Basics",desc:"Soccer, goal, team",file:"audio-01-football.mp3"},{title:"Basketball Game",desc:"Court, ball, score",file:"audio-02-basketball.mp3"},{title:"Swimming Pool",desc:"Water, stroke, lanes",file:"audio-03-swimming.mp3"},{title:"Tennis Match",desc:"Racket, serve, court",file:"audio-04-tennis.mp3"},{title:"Running Marathon",desc:"Race, finish line, time",file:"audio-05-running.mp3"},{title:"Gym Workout",desc:"Weights, exercise, muscle",file:"audio-06-gym.mp3"},{title:"Cycling Tour",desc:"Bike, road, pedal",file:"audio-07-cycling.mp3"},{title:"Volleyball Game",desc:"Net, spike, team",file:"audio-08-volleyball.mp3"},{title:"Golf Course",desc:"Club, hole, green",file:"audio-09-golf.mp3"},{title:"Olympic Games",desc:"Medal, champion, record",file:"audio-10-olympics.mp3"}],travel:[{title:"Airport Check-in",desc:"Passport, flight, gate",file:"audio-01-airport.mp3"},{title:"Hotel Booking",desc:"Room, reservation, key",file:"audio-02-hotel.mp3"},{title:"City Sightseeing",desc:"Tourist, map, guide",file:"audio-03-sightseeing.mp3"},{title:"Restaurant Order",desc:"Menu, waiter, bill",file:"audio-04-restaurant.mp3"},{title:"Train Journey",desc:"Platform, ticket, seat",file:"audio-05-train.mp3"},{title:"Beach Vacation",desc:"Sand, waves, relaxing",file:"audio-06-beach.mp3"},{title:"Mountain Hiking",desc:"Trail, summit, backpack",file:"audio-07-mountain.mp3"},{title:"City Shopping",desc:"Store, souvenir, bargain",file:"audio-08-shopping.mp3"},{title:"Cultural Museum",desc:"Art, history, exhibition",file:"audio-09-museum.mp3"},{title:"Return Home",desc:"Memories, photos, stories",file:"audio-10-return.mp3"}],food:[{title:"Brazilian Cuisine",desc:"Feijoada, a\xe7a\xed, p\xe3o",file:"audio-01-brazilian.mp3"},{title:"Italian Kitchen",desc:"Pizza, pasta, gelato",file:"audio-02-italian.mp3"},{title:"Breakfast Time",desc:"Coffee, bread, eggs",file:"audio-03-breakfast.mp3"},{title:"Cooking Recipe",desc:"Ingredients, oven, timer",file:"audio-04-cooking.mp3"},{title:"Healthy Eating",desc:"Vegetables, fruits, vitamins",file:"audio-05-healthy.mp3"},{title:"Fast Food",desc:"Burger, fries, delivery",file:"audio-06-fastfood.mp3"},{title:"Dinner Party",desc:"Guests, wine, celebration",file:"audio-07-dinner.mp3"},{title:"Street Food",desc:"Market, vendor, spicy",file:"audio-08-street.mp3"},{title:"Dessert Time",desc:"Cake, chocolate, sweet",file:"audio-09-dessert.mp3"},{title:"Food Safety",desc:"Fresh, clean, storage",file:"audio-10-safety.mp3"}],movies:[{title:"Cinema Experience",desc:"Screen, popcorn, tickets",file:"audio-01-cinema.mp3"},{title:"Action Movies",desc:"Hero, fight, adventure",file:"audio-02-action.mp3"},{title:"Comedy Films",desc:"Funny, laugh, jokes",file:"audio-03-comedy.mp3"},{title:"Horror Stories",desc:"Scary, ghost, afraid",file:"audio-04-horror.mp3"},{title:"Romance Drama",desc:"Love, couple, heart",file:"audio-05-romance.mp3"},{title:"Documentary",desc:"Real, facts, learning",file:"audio-06-documentary.mp3"},{title:"Animation Fun",desc:"Cartoon, children, colorful",file:"audio-07-animation.mp3"},{title:"Sci-Fi Future",desc:"Space, robot, technology",file:"audio-08-scifi.mp3"},{title:"Movie Reviews",desc:"Critics, rating, opinion",file:"audio-09-reviews.mp3"},{title:"Film Festival",desc:"Awards, premiere, red carpet",file:"audio-10-festival.mp3"}],business:[{title:"Job Interview",desc:"Questions, resume, professional",file:"audio-01-interview.mp3"},{title:"Office Meeting",desc:"Conference, presentation, team",file:"audio-02-meeting.mp3"},{title:"Email Writing",desc:"Formal, subject, attachment",file:"audio-03-email.mp3"},{title:"Phone Calls",desc:"Client, schedule, appointment",file:"audio-04-phone.mp3"},{title:"Negotiation",desc:"Deal, contract, agreement",file:"audio-05-negotiation.mp3"},{title:"Project Management",desc:"Deadline, task, progress",file:"audio-06-project.mp3"},{title:"Financial Report",desc:"Budget, profit, analysis",file:"audio-07-financial.mp3"},{title:"Marketing Strategy",desc:"Brand, customer, campaign",file:"audio-08-marketing.mp3"},{title:"Workplace Culture",desc:"Colleague, environment, respect",file:"audio-09-culture.mp3"},{title:"Career Growth",desc:"Promotion, skills, future",file:"audio-10-career.mp3"}]};return(n[e]||n.foundation).map((n,r)=>({id:`${e}-${String(r+1).padStart(2,"0")}`,title:n.title,description:n.desc,duration:t[r]||"3:30",audioFile:`audio/a1-${e}/${n.file}`,questions:[{question:`What is the main topic of "${n.title}"?`,options:[n.desc,"Something else","Not sure","Different topic"],correct:0}]}))},x=e=>{var t,n;if(0===e)return!0;const r=null===(t=u[e-1])||void 0===t?void 0:t.id;return(null===(n=h[r])||void 0===n?void 0:n.completed)||!1};if(m)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:y.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-12 h-12 border-4 border-t-4 rounded-full animate-spin mx-auto mb-6",style:{borderColor:y.border.primary,borderTopColor:y.brand.blue}}),(0,o.jsx)("p",{style:{color:y.text.secondary},className:"font-medium text-lg",children:"Carregando li\xe7\xf5es..."})]})});const k=(()=>{const e=u.filter(e=>{var t;return null===(t=h[e.id])||void 0===t?void 0:t.completed}).length;return{completedCount:e,totalXP:Object.values(h).reduce((e,t)=>e+(t.xpEarned||0),0),completionPercent:u.length>0?Math.round(e/u.length*100):0}})();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* Dark Mode Lessons Container */\n        .lessons-container {\n          max-width: 1000px;\n          margin: 0 auto;\n        }\n\n        /* Loading Spinner */\n        .loading-spinner {\n          width: 48px;\n          height: 48px;\n          border: 3px solid ${y.border.primary};\n          border-top: 3px solid ${y.brand.blue};\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n          margin: 0 auto;\n        }\n\n        @keyframes spin {\n          0% { transform: rotate(0deg); }\n          100% { transform: rotate(360deg); }\n        }\n\n        /* Series Header Card */\n        .series-header-card {\n          background: linear-gradient(135deg, ${b.color}dd 0%, ${b.color} 100%);\n          border-radius: 20px;\n          padding: 2rem;\n          margin-bottom: 2rem;\n          color: white;\n          position: relative;\n          overflow: hidden;\n          box-shadow: 0 8px 32px ${b.color}33;\n        }\n\n        .series-header-card::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.1) 1px, transparent 1px);\n          background-size: 20px 20px;\n          opacity: 0.3;\n        }\n\n        .series-header-content {\n          position: relative;\n          z-index: 1;\n        }\n\n        .series-icon {\n          width: 64px;\n          height: 64px;\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n          border-radius: 16px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin: 0 auto 1.5rem;\n        }\n\n        .series-title {\n          font-size: 2rem;\n          font-weight: 600;\n          text-align: center;\n          margin-bottom: 0.5rem;\n          letter-spacing: -0.01em;\n        }\n\n        .series-subtitle {\n          text-align: center;\n          font-size: 1rem;\n          opacity: 0.9;\n          margin-bottom: 1.5rem;\n        }\n\n        .series-stats {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 1rem;\n          margin-top: 1.5rem;\n        }\n\n        .stat-pill {\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n          border-radius: 50px;\n          padding: 0.75rem 1rem;\n          text-align: center;\n        }\n\n        .stat-value {\n          font-size: 1.5rem;\n          font-weight: 600;\n          margin-bottom: 0.25rem;\n        }\n\n        .stat-label {\n          font-size: 0.8rem;\n          opacity: 0.8;\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n        }\n\n        /* Lesson Cards */\n        .lessons-grid {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n        }\n\n        .lesson-card {\n          background: ${y.bg.secondary};\n          border: 1px solid ${y.border.primary};\n          border-radius: 16px;\n          padding: 1.5rem;\n          box-shadow: ${y.shadow.sm};\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n          cursor: pointer;\n          position: relative;\n        }\n\n        .lesson-card:hover {\n          transform: translateY(-2px);\n          box-shadow: ${y.shadow.md};\n          border-color: ${y.border.secondary};\n        }\n\n        .lesson-card.locked {\n          opacity: 0.6;\n          cursor: not-allowed;\n          background: ${y.bg.tertiary};\n        }\n\n        .lesson-card.locked:hover {\n          transform: none;\n          box-shadow: ${y.shadow.sm};\n        }\n\n        .lesson-card.completed {\n          background: ${y.isDark?`${y.brand.blue}11`:"#f0f9ff"};\n          border-color: ${y.brand.blue}66;\n        }\n\n        /* Lesson Content Layout */\n        .lesson-content {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n        }\n\n        .lesson-number {\n          width: 48px;\n          height: 48px;\n          border-radius: 12px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          font-size: 1.125rem;\n          flex-shrink: 0;\n          transition: all 0.3s ease;\n        }\n\n        .lesson-number.not-started {\n          background: ${y.bg.tertiary};\n          color: ${y.text.secondary};\n          border: 2px solid ${y.border.primary};\n        }\n\n        .lesson-number.completed {\n          background: linear-gradient(135deg, ${y.brand.blue}, #0066CC);\n          color: white;\n          box-shadow: 0 2px 8px ${y.brand.blue}33;\n        }\n\n        .lesson-number.locked {\n          background: ${y.bg.tertiary};\n          color: ${y.text.muted};\n          border: 2px solid ${y.border.primary};\n        }\n\n        .lesson-card:hover .lesson-number:not(.locked) {\n          transform: scale(1.05);\n        }\n\n        .lesson-info {\n          flex: 1;\n          min-width: 0;\n        }\n\n        .lesson-title {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: ${y.text.primary};\n          margin-bottom: 0.25rem;\n          letter-spacing: -0.01em;\n        }\n\n        .lesson-description {\n          color: ${y.text.secondary};\n          font-size: 0.95rem;\n          margin-bottom: 0.75rem;\n          line-height: 1.4;\n        }\n\n        .lesson-meta {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          flex-wrap: wrap;\n        }\n\n        .lesson-duration {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          font-size: 0.85rem;\n          color: ${y.text.secondary};\n        }\n\n        .lesson-badges {\n          display: flex;\n          gap: 0.5rem;\n          margin-left: auto;\n        }\n\n        .score-badge {\n          background: linear-gradient(135deg, ${y.brand.blue}, #0066CC);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        .xp-badge {\n          background: linear-gradient(135deg, ${y.brand.orange}, #D97706);\n          color: white;\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        .lock-badge {\n          background: ${y.bg.tertiary};\n          color: ${y.text.secondary};\n          font-size: 0.75rem;\n          font-weight: 600;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          border: 1px solid ${y.border.primary};\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n\n        /* Series Summary Card */\n        .series-summary {\n          background: ${y.bg.secondary};\n          border: 1px solid ${y.border.primary};\n          border-radius: 20px;\n          padding: 2rem;\n          margin-top: 2rem;\n          box-shadow: ${y.shadow.md};\n        }\n\n        .summary-title {\n          font-size: 1.5rem;\n          font-weight: 600;\n          color: ${y.text.primary};\n          text-align: center;\n          margin-bottom: 1rem;\n          letter-spacing: -0.01em;\n        }\n\n        .progress-bar-container {\n          margin-bottom: 1.5rem;\n        }\n\n        .progress-bar {\n          background: ${y.bg.tertiary};\n          height: 8px;\n          border-radius: 10px;\n          overflow: hidden;\n          margin-bottom: 0.75rem;\n        }\n\n        .progress-fill {\n          background: linear-gradient(90deg, ${y.brand.blue}, #0066CC);\n          height: 100%;\n          border-radius: 10px;\n          transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);\n          box-shadow: 0 0 8px ${y.brand.blue}33;\n        }\n\n        .progress-text {\n          text-align: center;\n          color: ${y.text.secondary};\n          font-size: 0.95rem;\n        }\n\n        /* Responsive Design */\n        @media (max-width: 767px) {\n          .series-header-card {\n            padding: 1.5rem;\n          }\n\n          .series-title {\n            font-size: 1.5rem;\n          }\n\n          .series-stats {\n            grid-template-columns: 1fr;\n            gap: 0.75rem;\n          }\n\n          .lesson-card {\n            padding: 1.25rem;\n          }\n\n          .lesson-content {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .lesson-badges {\n            margin-left: 0;\n          }\n\n          .series-summary {\n            padding: 1.5rem;\n          }\n        }\n      `}),(0,o.jsxs)("div",{className:"lessons-container",children:[(0,o.jsx)("div",{className:"series-header-card",children:(0,o.jsxs)("div",{className:"series-header-content",children:[(0,o.jsx)("div",{className:"series-icon",children:(0,o.jsx)("svg",{className:"w-8 h-8",fill:"white",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,o.jsx)("h1",{className:"series-title",children:i}),(0,o.jsxs)("p",{className:"series-subtitle",children:[u.length," li\xe7\xf5es dispon\xedveis"]}),(0,o.jsxs)("div",{className:"series-stats",children:[(0,o.jsxs)("div",{className:"stat-pill",children:[(0,o.jsxs)("div",{className:"stat-value",children:[k.completedCount,"/",u.length]}),(0,o.jsx)("div",{className:"stat-label",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"stat-pill",children:[(0,o.jsx)("div",{className:"stat-value",children:k.totalXP}),(0,o.jsx)("div",{className:"stat-label",children:"XP Ganho"})]}),(0,o.jsxs)("div",{className:"stat-pill",children:[(0,o.jsxs)("div",{className:"stat-value",children:[k.completionPercent,"%"]}),(0,o.jsx)("div",{className:"stat-label",children:"Completada"})]})]})]})}),(0,o.jsx)("div",{className:"lessons-grid",children:u.map((e,t)=>{const n=x(t),r=(e=>{const t=h[e.id];return t?{status:t.completed?"completed":"in-progress",score:t.score||0,xp:t.xpEarned||0}:{status:"not-started",score:0,xp:0}})(e);return(0,o.jsx)("div",{onClick:()=>((e,t)=>{x(t)&&c(e,s)})(e,t),className:"lesson-card "+(n?"completed"===r.status?"completed":"":"locked"),children:(0,o.jsxs)("div",{className:"lesson-content",children:[(0,o.jsx)("div",{className:"lesson-number "+("completed"===r.status?"completed":n?"not-started":"locked"),children:"completed"===r.status?(0,o.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}):(0,o.jsx)("span",{children:t+1})}),(0,o.jsxs)("div",{className:"lesson-info",children:[(0,o.jsx)("h3",{className:"lesson-title",children:e.title}),(0,o.jsx)("p",{className:"lesson-description",children:e.description}),(0,o.jsxs)("div",{className:"lesson-meta",children:[(0,o.jsxs)("div",{className:"lesson-duration",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,o.jsx)("span",{children:e.duration})]}),(0,o.jsxs)("div",{className:"lesson-badges",children:["completed"===r.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"score-badge",children:[(0,o.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),r.score,"%"]}),(0,o.jsxs)("div",{className:"xp-badge",children:[(0,o.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),"+",r.xp," XP"]})]}),!n&&(0,o.jsxs)("div",{className:"lock-badge",children:[(0,o.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2z"})}),"Bloqueada"]})]})]})]})]})},e.id)})}),(0,o.jsxs)("div",{className:"series-summary",children:[(0,o.jsx)("h3",{className:"summary-title",children:"Progresso da S\xe9rie"}),(0,o.jsxs)("div",{className:"progress-bar-container",children:[(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:k.completedCount/u.length*100+"%"}})}),(0,o.jsx)("div",{className:"progress-text",children:k.completedCount===u.length?"\ud83c\udf89 S\xe9rie completada com excel\xeancia!":`${u.length-k.completedCount} li\xe7\xf5es restantes para dominar ${i}`})]})]})]})]})},re=e=>{let{user:t,lesson:n,seriesId:s,onBack:i,onComplete:a}=e;const c=l(),u=(0,r.useRef)(null),[d,h]=(0,r.useState)(!1),[p,m]=(0,r.useState)(0),[f,g]=(0,r.useState)(0),[v,b]=(0,r.useState)(0),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)(1),[E,C]=(0,r.useState)({}),[T,N]=(0,r.useState)(!1),[_,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=u.current;if(!e)return;const t=()=>{g(e.duration),x(!0)},n=()=>{e.duration>0&&(m(e.currentTime),b(e.currentTime/e.duration*100))},r=()=>h(!1);return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",n),e.addEventListener("ended",r),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",r)}},[]);const j=e=>{if(!u.current||!w)return;const t=Math.max(0,Math.min(f,p+e));u.current.currentTime=t},A=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,P=Object.keys(E).length===n.questions.length;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:`\n        /* \ud83c\udf19 ELEGANT DARK MODE LESSON PLAYER */\n        .lesson-container {\n          min-height: 100vh;\n          background: ${c.bg.gradient};\n          width: 100%;\n          color: ${c.text.primary};\n        }\n        \n        .lesson-content {\n          max-width: 1000px;\n          margin: 0 auto;\n          padding: 0 1rem;\n        }\n        \n        @media (min-width: 768px) {\n          .lesson-content {\n            padding: 0 2rem;\n          }\n        }\n        \n        .header {\n          background: ${c.bg.secondary};\n          backdrop-filter: blur(20px);\n          border-bottom: 1px solid ${c.border.primary};\n          padding: 1rem;\n          width: 100%;\n          box-shadow: ${c.shadow.sm};\n        }\n        \n        .card {\n          background: ${c.bg.secondary};\n          backdrop-filter: blur(20px);\n          border-radius: 1.5rem;\n          padding: 1.5rem;\n          margin: 1.5rem 0;\n          box-shadow: ${c.shadow.md};\n          border: 1px solid ${c.border.primary};\n        }\n        \n        @media (min-width: 768px) {\n          .card {\n            padding: 2.5rem;\n            margin: 2rem 0;\n          }\n        }\n        \n        /* AUDIO CONTROLS - Dark Mode */\n        .audio-controls {\n          background: ${c.bg.secondary};\n          border-radius: 1.5rem;\n          padding: 1.5rem;\n          border: 2px solid ${c.border.primary};\n          margin-bottom: 1.5rem;\n          box-shadow: ${c.shadow.sm};\n        }\n        \n        .play-button {\n          width: 70px;\n          height: 70px;\n          border-radius: 50%;\n          background: linear-gradient(135deg, ${c.brand.blue}, #0066CC);\n          border: none;\n          color: white;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          box-shadow: 0 4px 16px ${c.brand.blue}33;\n        }\n        \n        .play-button:active {\n          transform: scale(0.95);\n        }\n        \n        .play-button:disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        .control-btn {\n          width: 58px;\n          height: 58px;\n          border-radius: 50%;\n          background: ${c.bg.tertiary};\n          border: 2px solid ${c.border.primary};\n          color: ${c.brand.blue};\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n        \n        .control-btn:active {\n          transform: scale(0.9);\n          background: ${c.border.secondary};\n        }\n        \n        .speed-btn {\n          padding: 0.3rem 0.45rem;\n          border-radius: 0.75rem;\n          border: 2px solid ${c.border.primary};\n          background: ${c.bg.tertiary};\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-weight: 600;\n          color: ${c.text.primary};\n        }\n        \n        .speed-btn.active {\n          background: ${c.brand.blue};\n          border-color: ${c.brand.blue};\n          color: white;\n        }\n        \n        .speed-btn:active {\n          transform: scale(0.95);\n        }\n        \n        .progress-bar {\n          background: ${c.bg.tertiary};\n          height: 8px;\n          border-radius: 4px;\n          cursor: pointer;\n          overflow: hidden;\n        }\n        \n        .progress-fill {\n          background: linear-gradient(90deg, ${c.brand.blue}, #0066CC);\n          height: 100%;\n          transition: width 0.1s ease;\n        }\n        \n        /* QUESTIONS - Dark Mode */\n        .question-card {\n          background: ${c.bg.secondary};\n          border-radius: 1rem;\n          padding: 1.5rem;\n          margin-bottom: 1.5rem;\n          border: 1px solid ${c.border.primary};\n          box-shadow: ${c.shadow.sm};\n        }\n        \n        .option-btn {\n          width: 100%;\n          text-align: left;\n          padding: 1rem 1.25rem;\n          background: ${c.bg.tertiary};\n          border: 2px solid ${c.border.primary};\n          border-radius: 0.75rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          margin: 0.5rem 0;\n          color: ${c.text.primary};\n        }\n        \n        .option-btn:hover {\n          background: ${c.border.secondary};\n        }\n        \n        .option-btn.selected {\n          background: ${c.brand.blue}1A;\n          border-color: ${c.brand.blue};\n          color: ${c.brand.blue};\n        }\n        \n        .submit-btn {\n          width: 100%;\n          padding: 1rem 2rem;\n          background: linear-gradient(135deg, ${c.brand.green}, #059669);\n          color: white;\n          border: none;\n          border-radius: 1rem;\n          font-size: 1.125rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n        \n        .submit-btn:disabled {\n          background: ${c.bg.tertiary};\n          color: ${c.text.muted};\n          cursor: not-allowed;\n        }\n        \n        .submit-btn:not(:disabled):active {\n          transform: scale(0.98);\n        }\n        \n        /* MODAL - Dark Mode */\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background: rgba(0, 0, 0, 0.7);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 1000;\n          padding: 1rem;\n        }\n        \n        .modal {\n          background: ${c.bg.secondary};\n          border: 1px solid ${c.border.primary};\n          border-radius: 1.5rem;\n          padding: 2rem;\n          max-width: 90vw;\n          width: 100%;\n          max-width: 500px;\n          max-height: 80vh;\n          overflow-y: auto;\n          position: relative;\n          box-shadow: ${c.shadow.lg};\n          color: ${c.text.primary};\n        }\n        \n        .modal-close {\n          position: absolute;\n          top: 1rem;\n          right: 1rem;\n          width: 2rem;\n          height: 2rem;\n          border-radius: 50%;\n          background: ${c.bg.tertiary};\n          border: none;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: ${c.text.secondary};\n        }\n        \n        /* Status Badge */\n        .status-badge {\n          display: inline-block;\n          padding: 0.25rem 0.75rem;\n          border-radius: 20px;\n          font-size: 0.85rem;\n          font-weight: 600;\n        }\n        \n        .status-badge.ready {\n          background: ${c.brand.green}22;\n          color: ${c.brand.green};\n          border: 1px solid ${c.brand.green}33;\n        }\n        \n        .status-badge.loading {\n          background: ${c.text.muted}22;\n          color: ${c.text.muted};\n        }\n        \n        /* Perfect Animation */\n        .perfect-animation {\n          position: fixed;\n          top: 50%;\n          left: 50%;\n          transform: translate(-50%, -50%);\n          font-size: 3rem;\n          font-weight: 900;\n          color: #fbbf24;\n          text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);\n          z-index: 1001;\n          pointer-events: none;\n          animation: perfectPop 3s ease-out forwards;\n        }\n        \n        @keyframes perfectPop {\n          0% { transform: translate(-50%, -50%) scale(0) rotate(-12deg); opacity: 0; }\n          20% { transform: translate(-50%, -50%) scale(1.4) rotate(-12deg); opacity: 1; }\n          40% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          70% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 1; }\n          100% { transform: translate(-50%, -50%) scale(1) rotate(-12deg); opacity: 0; }\n        }\n      `}),(0,o.jsxs)("div",{className:"lesson-container",children:[(0,o.jsx)("div",{className:"header",children:(0,o.jsx)("div",{className:"lesson-content",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("button",{onClick:i,className:"flex items-center transition-colors",style:{color:c.text.secondary,background:"none",border:"none",cursor:"pointer"},onMouseEnter:e=>e.target.style.color=c.text.primary,onMouseLeave:e=>e.target.style.color=c.text.secondary,children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar"]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"font-semibold text-lg",style:{color:c.text.primary},children:n.title}),(0,o.jsx)("div",{className:"text-sm",style:{color:c.text.secondary},children:"Li\xe7\xe3o de Ingl\xeas"})]}),(0,o.jsx)("div",{className:"w-16"})]})})}),(0,o.jsxs)("div",{className:"lesson-content",children:[(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"text-5xl mb-4",children:"\ud83c\udfa7"}),(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:{color:c.text.primary},children:"Ou\xe7a e Aprenda"}),(0,o.jsx)("p",{style:{color:c.text.secondary},children:"Ou\xe7a o \xe1udio e responda as perguntas"})]}),(0,o.jsx)("audio",{ref:u,preload:"metadata",children:(0,o.jsx)("source",{src:n.audioFile,type:"audio/mpeg"})}),(0,o.jsxs)("div",{className:"audio-controls",children:[(0,o.jsx)("div",{className:"text-center mb-4",children:(0,o.jsx)("div",{className:"status-badge "+(w?"ready":"loading"),children:w?"\u2705 \xc1udio Pronto":"\u23f3 Carregando..."})}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex justify-between text-sm mb-2",style:{color:c.text.secondary},children:[(0,o.jsx)("span",{children:A(p)}),(0,o.jsxs)("span",{className:"font-medium",style:{color:c.brand.blue},children:[Math.round(v),"%"]}),(0,o.jsx)("span",{children:A(f)})]}),(0,o.jsx)("div",{className:"progress-bar",onClick:e=>{if(!u.current||!w)return;const t=e.currentTarget.getBoundingClientRect(),n=(e.clientX-t.left)/t.width;u.current.currentTime=n*f},children:(0,o.jsx)("div",{className:"progress-fill",style:{width:`${v}%`}})})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-6 mb-6",children:[(0,o.jsx)("button",{className:"control-btn",onClick:()=>j(-10),disabled:!w,children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.334 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})}),(0,o.jsx)("div",{className:"text-xs",children:"-10s"})]})}),(0,o.jsx)("button",{className:"play-button",onClick:async()=>{if(w&&u.current)try{d?(u.current.pause(),h(!1)):(await u.current.play(),h(!0))}catch(e){console.error("Audio error:",e)}},disabled:!w,children:d?(0,o.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,o.jsx)("svg",{className:"w-8 h-8 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M8 5v14l11-7z"})})}),(0,o.jsx)("button",{className:"control-btn",onClick:()=>j(10),disabled:!w,children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})}),(0,o.jsx)("div",{className:"text-xs",children:"+10s"})]})})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-sm font-medium mb-3",style:{color:c.text.secondary},children:"Velocidade"}),(0,o.jsx)("div",{className:"flex justify-center space-x-2",children:[.5,.75,1,1.25,1.5].map(e=>(0,o.jsxs)("button",{onClick:()=>(e=>{u.current&&w&&(u.current.playbackRate=e,S(e))})(e),disabled:!w,className:"speed-btn "+(k===e?"active":""),children:[e,"x"]},e))})]})]})]}),(0,o.jsxs)("div",{className:"card",children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"text-4xl mb-3",children:"\u2753"}),(0,o.jsx)("h3",{className:"text-xl font-semibold",style:{color:c.text.primary},children:"Responda as Perguntas"}),(0,o.jsxs)("p",{style:{color:c.text.secondary},className:"mt-2",children:[Object.keys(E).length,"/",n.questions.length," respondidas"]})]}),(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsx)("div",{className:"progress-bar",children:(0,o.jsx)("div",{className:"progress-fill",style:{width:Object.keys(E).length/n.questions.length*100+"%"}})})}),(0,o.jsx)("div",{className:"space-y-6",children:n.questions.map((e,t)=>(0,o.jsxs)("div",{className:"question-card",children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsxs)("div",{className:"flex items-center mb-3",children:[(0,o.jsx)("span",{className:"text-sm font-bold px-3 py-1 rounded-full mr-3",style:{background:`${c.brand.blue}22`,color:c.brand.blue},children:t+1}),(0,o.jsx)("span",{className:"text-xs uppercase",style:{color:c.text.muted},children:"Question"})]}),(0,o.jsx)("h4",{className:"text-lg font-semibold",style:{color:c.text.primary},children:e.question})]}),(0,o.jsx)("div",{className:"space-y-2",children:e.options.map((e,n)=>(0,o.jsxs)("button",{onClick:()=>C({...E,[t]:n}),className:"option-btn "+(E[t]===n?"selected":""),children:[(0,o.jsxs)("span",{className:"font-bold mr-3",style:{color:c.text.muted},children:[String.fromCharCode(97+n),")"]}),(0,o.jsx)("span",{className:"flex-1",children:e}),E[t]===n&&(0,o.jsx)("span",{style:{color:c.brand.blue},className:"text-xl ml-2",children:"\u2713"})]},n))})]},t))}),(0,o.jsx)("div",{className:"mt-8",children:(0,o.jsx)("button",{className:"submit-btn",onClick:async()=>{try{let e=0;const r={};n.questions.forEach((t,n)=>{const s=E[n],i=s===t.correct;i&&e++,r[n]={question:t.question,userAnswer:void 0!==s?t.options[s]:"N\xe3o respondeu",correctAnswer:t.options[t.correct],isCorrect:i}});const i=Math.round(e/n.questions.length*100),o=await D(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:n.questions.length,perfectScore:100===i}),a={completed:!0,score:i,xpEarned:o.xpEarned,correctAnswers:e,totalQuestions:n.questions.length,completedAt:new Date,seriesName:s};await y(t.username,n.id,a),I({score:i,correctCount:e,totalQuestions:n.questions.length,xpEarned:o.xpEarned,leveledUp:o.leveledUp,newLevel:o.level,detailedResults:r}),N(!0)}catch(e){console.error("Error completing lesson:",e)}},disabled:!P,children:P?"\ud83c\udfaf Verificar Respostas!":`Responda mais ${n.questions.length-Object.keys(E).length} pergunta${n.questions.length-Object.keys(E).length!==1?"s":""}`})})]})]}),T&&_&&(0,o.jsx)("div",{className:"modal-overlay",onClick:e=>e.target===e.currentTarget&&N(!1),children:(0,o.jsxs)("div",{className:"modal",children:[(0,o.jsx)("button",{className:"modal-close",onClick:()=>N(!1),children:(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(()=>{const e=(t=_.score)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea dominou esta li\xe7\xe3o!"}:t>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3tima compreens\xe3o!"}:t>=70?{emoji:"\ud83d\udc4d",title:"Bom Trabalho!",message:"Continue praticando!"}:{emoji:"\ud83d\udcaa",title:"Continue Tentando!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!"};var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"text-5xl mb-4",children:e.emoji}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:c.text.primary},children:e.title}),(0,o.jsx)("p",{style:{color:c.text.secondary},children:e.message})]}),(0,o.jsxs)("div",{className:"text-white rounded-xl p-4 mb-6 text-center",style:{background:`linear-gradient(135deg, ${c.brand.blue}, ${c.brand.green})`},children:[(0,o.jsxs)("div",{className:"text-3xl font-bold mb-1",children:[_.score,"%"]}),(0,o.jsxs)("div",{className:"text-sm mb-1",children:[_.correctCount,"/",_.totalQuestions," corretas"]}),(0,o.jsxs)("div",{className:"text-xs opacity-90",children:["+",_.xpEarned," XP"]}),_.leveledUp&&(0,o.jsxs)("div",{className:"text-sm font-bold mt-2 bg-purple-600 rounded px-3 py-1 inline-block",children:["\ud83c\udf89 Level ",_.newLevel,"!"]})]}),_.detailedResults&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("h3",{className:"font-semibold mb-3 text-center",style:{color:c.text.primary},children:"Suas Respostas"}),(0,o.jsx)("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:Object.entries(_.detailedResults).map(e=>{let[t,n]=e;return(0,o.jsx)("div",{className:"p-3 rounded-lg border-l-4",style:{background:n.isCorrect?`${c.brand.green}11`:`${c.brand.red}11`,borderLeftColor:n.isCorrect?c.brand.green:c.brand.red},children:(0,o.jsxs)("div",{className:"flex items-start text-sm",children:[(0,o.jsx)("span",{className:"mr-2 font-bold",style:{color:n.isCorrect?c.brand.green:c.brand.red},children:n.isCorrect?"\u2713":"\u2717"}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("div",{className:"font-medium mb-1",style:{color:c.text.primary},children:["Q",parseInt(t)+1]}),n.isCorrect?(0,o.jsx)("div",{style:{color:c.brand.green},children:"Correto!"}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{color:c.brand.red},className:"mb-1",children:["Sua: ",n.userAnswer]}),(0,o.jsxs)("div",{style:{color:c.brand.green},children:["Correto: ",n.correctAnswer]})]})]})]})},t)})})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[_.score<100&&(0,o.jsx)("button",{onClick:()=>{C({}),N(!1),u.current&&(u.current.currentTime=0,m(0),b(0),h(!1))},className:"w-full py-3 rounded-xl font-medium text-white",style:{background:c.brand.red},children:"\ud83d\udd04 Tentar Novamente"}),(0,o.jsx)("button",{onClick:()=>{a({lessonId:n.id,score:_.score,answers:E,correctAnswers:_.correctCount,totalQuestions:_.totalQuestions,xpEarned:_.xpEarned})},className:"w-full py-3 rounded-xl font-medium text-white",style:{background:c.brand.blue},children:"\ud83c\udf89 Continuar"})]})]})})()]})}),T&&_&&100===_.score&&(0,o.jsx)("div",{className:"perfect-animation",children:"\u2605 PERFEITO! \u2605"})]})]})},se=e=>{let{story:t,index:n,isCompleted:r,isActive:s,onSelect:i}=e;l();return(0,o.jsxs)("button",{onClick:i,className:"story-tab "+(s?"active":r?"completed":""),children:[(0,o.jsx)("span",{className:"story-icon",children:t.icon}),(0,o.jsx)("div",{className:"story-tab-title",children:t.title}),(0,o.jsx)("div",{className:"story-tab-category",children:t.category}),r&&(0,o.jsx)("div",{className:"story-completion-indicator",children:"\u2705"})]})},ie=e=>{let{completedStories:t,currentStoryIndex:n,onStorySelect:r}=e;const s=l(),i=q,a=Math.round(t.size/i.length*100);return(0,o.jsxs)("div",{className:"story-selector",children:[(0,o.jsxs)("div",{className:"story-progress-overview",children:[(0,o.jsx)("h2",{className:"story-progress-title",children:"\ud83d\udcd6 Suas Hist\xf3rias"}),(0,o.jsx)("p",{className:"story-progress-subtitle",children:"Complete hist\xf3rias interativas em ingl\xeas"}),(0,o.jsxs)("div",{className:"story-progress-stats",children:[(0,o.jsxs)("div",{className:"story-stat-pill",children:["\ud83d\udcda ",t.size," de ",i.length," Completas"]}),(0,o.jsxs)("div",{className:"story-stat-pill",children:["\ud83c\udfaf ",a,"% Completadas"]})]}),(0,o.jsx)("div",{className:"story-progress-bar-container",children:(0,o.jsx)(H,{value:a,max:100,color:s.brand.red,showText:!1,animated:!0})})]}),(0,o.jsx)("div",{className:"story-stories-grid",children:i.map((e,s)=>(0,o.jsx)(se,{story:e,index:s,isCompleted:t.has(e.id),isActive:s===n,onSelect:()=>r(s)},e.id))})]})},oe=e=>{let{user:t,storyIndex:n,completedStories:s,onComplete:i}=e;const[a,c]=(0,r.useState)({}),[u,d]=(0,r.useState)(0),h=(l(),q[n]),p=h.story.filter(e=>"blank"===e.type),m=p.length,f=Object.keys(a).length,g=f===m,v=()=>u<p.length?p[u]:null;return(0,o.jsxs)("div",{className:"story-game",children:[(0,o.jsxs)("div",{className:"story-header",children:[(0,o.jsx)("h1",{className:"story-title",children:h.title}),(0,o.jsxs)("p",{className:"story-subtitle",children:[h.category," \u2022 ",h.difficulty]}),(0,o.jsx)("div",{className:"story-progress-pills",children:(0,o.jsxs)("div",{className:"story-progress-pill",children:[f,"/",m," Preenchidas"]})})]}),(0,o.jsxs)("div",{className:"story-content",children:[(0,o.jsx)("div",{className:"story-text",children:h.story.map((e,t)=>{if("text"===e.type)return(0,o.jsx)("span",{children:e.content},t);{var n;const r=(null===(n=v())||void 0===n?void 0:n.id)===e.id,s=void 0!==a[e.id]?e.options[a[e.id]]:"____";return(0,o.jsx)("span",{className:`story-blank ${void 0!==a[e.id]?"filled":""} ${r?"active":""}`,onClick:()=>(e=>{d(e)})(p.findIndex(t=>t.id===e.id)),children:s},t)}})}),v()&&(0,o.jsxs)("div",{className:"story-options-section",children:[(0,o.jsx)("h3",{className:"story-options-title",children:"Escolha a melhor op\xe7\xe3o:"}),(0,o.jsx)("div",{className:"story-options-grid",children:v().options.map((e,t)=>(0,o.jsx)("button",{onClick:()=>((e,t)=>{const n={...a,[e]:t};c(n),u<p.length-1&&!a[e]&&setTimeout(()=>{d(u+1)},500)})(v().id,t),className:"story-option-button "+(a[v().id]===t?"selected":""),children:e},t))})]}),(0,o.jsx)("div",{className:"story-complete-section",children:(0,o.jsx)(Q,{variant:g?"success":"secondary",size:"large",fullWidth:!0,onClick:async()=>{console.log("\ud83c\udfaf Starting story completion check...");let e=0;p.forEach(t=>{a[t.id]===t.correct&&e++});const n=Math.round(e/m*100),r=s.has(h.id);try{console.log("\ud83c\udf1f Awarding XP for story completion...");const s=await D(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:m,perfectScore:100===n}),o={completed:!0,score:n,xpEarned:s.xpEarned,correctAnswers:e,totalQuestions:m,completedAt:new Date,storyId:h.id,storyTitle:h.title,storyCategory:h.category,difficulty:h.difficulty,userAnswers:a},l=`story-${h.id}`,c=await y(t.username,l,o);c&&c.success&&console.log("\u2705 Story progress saved successfully!"),i({score:n,correctCount:e,totalBlanks:m,xpEarned:s.xpEarned,leveledUp:s.leveledUp,newLevel:s.level,storyId:h.id,storyTitle:h.title,newCompletion:!r})}catch(o){console.error("\u274c Error in story completion:",o),i({score:n,correctCount:e,totalBlanks:m,xpEarned:0,storyId:h.id,storyTitle:h.title,newCompletion:!r})}},disabled:!g,icon:g?(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M22 11.08V12a10 10 0 11-5.93-9.14"}),(0,o.jsx)("path",{d:"M22 4L12 14.01l-3-3"})]}):(0,o.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("path",{d:"M12 8v4l2 2"})]}),children:g?"\ud83d\udcd6 Completar Hist\xf3ria!":`Preencha mais ${m-f} espa\xe7os`})})]})]})},ae=e=>{let{isOpen:t,onClose:n,title:r,children:s,size:i="default",showCloseButton:a=!0,closeOnOverlayClick:c=!0}=e;const u=l();if(!t)return null;return(0,o.jsx)("div",{className:"modal-overlay",onClick:e=>{c&&e.target===e.currentTarget&&n()},style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"1rem",backdropFilter:"blur(4px)"},children:(0,o.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),style:{background:u.bg.secondary,border:`1px solid ${u.border.primary}`,borderRadius:"1rem",padding:"2rem",width:"100%",maxHeight:"85vh",overflowY:"auto",boxShadow:u.shadow.lg,color:u.text.primary,position:"relative",...{small:{maxWidth:"400px"},default:{maxWidth:"600px"},large:{maxWidth:"800px"},full:{maxWidth:"95vw"}}[i]},children:[(r||a)&&(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:r?"1.5rem":"1rem"},children:[r&&(0,o.jsx)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600",color:u.text.primary},children:r}),a&&(0,o.jsx)("button",{onClick:n,style:{background:"none",border:"none",cursor:"pointer",padding:"0.5rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center",color:u.text.secondary,transition:"all 0.2s ease",marginLeft:r?"1rem":0},onMouseEnter:e=>{e.target.style.background=u.bg.tertiary,e.target.style.color=u.text.primary},onMouseLeave:e=>{e.target.style.background="none",e.target.style.color=u.text.secondary},"aria-label":"Close modal",children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M18 6L6 18M6 6l12 12"})})})]}),(0,o.jsx)("div",{className:"modal-body",children:s})]})})},le=e=>{let{isOpen:t,onClose:n,title:r,emoji:s,subtitle:i,children:a,actions:l}=e;return(0,o.jsxs)(ae,{isOpen:t,onClose:n,size:"default",children:[(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[s&&(0,o.jsx)("div",{style:{fontSize:"3.5rem",marginBottom:"1rem"},children:s}),r&&(0,o.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"600",margin:"0 0 0.5rem",color:"inherit"},children:r}),i&&(0,o.jsx)("p",{style:{fontSize:"1rem",margin:0,opacity:.8},children:i})]}),a,l&&(0,o.jsx)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap",marginTop:"1.5rem"},children:l})]})},ce=e=>{let{results:t,completedStories:n,currentStoryIndex:r,totalStories:s,onRetry:i,onNext:a,onBackToStories:c,onBackToHub:u}=e;const d=l(),h=(p=t.score)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea dominou esta hist\xf3ria!",color:"#10b981"}:p>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3tima narrativa!",color:"#10b981"}:p>=70?{emoji:"\ud83d\udc4d",title:"Bom Trabalho!",message:"Bom trabalho com o contexto!",color:"#F59E0B"}:p>=60?{emoji:"\ud83d\udcaa",title:"Continue!",message:"Voc\xea est\xe1 melhorando!",color:"#F59E0B"}:{emoji:"\ud83e\udd17",title:"Tente Novamente!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!",color:"#ef4444"};var p;const m=n.size===s;return(0,o.jsxs)(o.Fragment,{children:[100===t.score&&(0,o.jsx)("div",{className:"story-perfect-animation",children:"\u2b50 PERFEITO! \u2b50"}),(0,o.jsx)(le,{isOpen:!0,onClose:c,title:m?"Parab\xe9ns!":h.title,emoji:m?"\ud83c\udfc6":h.emoji,subtitle:m?"Voc\xea completou todas as hist\xf3rias!":h.message,actions:(()=>{if(m)return[(0,o.jsx)(Q,{variant:"primary",onClick:u,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),children:"\ud83c\udfe0 Voltar para o Portal"},"hub"),(0,o.jsx)(Q,{variant:"secondary",onClick:c,icon:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 4v6h6M23 20v-6h-6"}),(0,o.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.64A9 9 0 0 1 3.51 15"})]}),children:"\ud83d\udcd6 Ler Hist\xf3rias Novamente"},"retry-all")];const e=[];return t.score<100&&e.push((0,o.jsx)(Q,{variant:"secondary",onClick:i,icon:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 4v6h6M23 20v-6h-6"}),(0,o.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.64A9 9 0 0 1 3.51 15"})]}),children:"\ud83d\udd04 Tentar Novamente"},"retry")),r<s-1&&e.push((0,o.jsx)(Q,{variant:"primary",onClick:a,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M5 12h14M12 5l7 7-7 7"})}),children:"\u27a1\ufe0f Pr\xf3xima Hist\xf3ria"},"next")),e.push((0,o.jsx)(Q,{variant:"secondary",onClick:c,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"\ud83d\udcda Outras Hist\xf3rias"},"back-stories")),e.push((0,o.jsx)(Q,{variant:"secondary",onClick:u,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),children:"\ud83c\udfe0 Voltar ao Hub"},"hub")),e})(),children:m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{style:{fontSize:"1.1rem",marginBottom:"1.5rem",color:d.text.secondary},children:[s," hist\xf3rias conquistadas! Voc\xea \xe9 um mestre da narrativa! \ud83c\udf1f"]}),(0,o.jsxs)("div",{style:{background:`linear-gradient(135deg, ${d.brand.red}, #B71C1C)`,color:"white",margin:"0 0 1.5rem",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[(0,o.jsx)("div",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"\ud83c\udf89 TODAS AS HIST\xd3RIAS COMPLETAS! \ud83c\udf89"}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:["Total: ",n.size,"/",s," hist\xf3rias"]})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{background:d.isDark?"rgba(16, 185, 129, 0.1)":"#ecfdf5",border:`1px solid ${d.border.primary}`,borderRadius:"0.75rem",padding:"1.5rem",marginBottom:"1.5rem",textAlign:"center"},children:[(0,o.jsxs)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:h.color,marginBottom:"0.5rem"},children:[t.score,"%"]}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",color:d.text.secondary,lineHeight:1.5},children:[t.correctCount,"/",t.totalBlanks," corretas",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{style:{color:h.color,fontWeight:"600"},children:["+",t.xpEarned||0," XP ganho!"]}),t.leveledUp&&(0,o.jsxs)("div",{style:{color:"#F59E0B",fontWeight:"600",marginTop:"0.5rem",fontSize:"1rem"},children:["\ud83c\udf89 N\xedvel ",t.newLevel,"!"]})]})]}),(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"1rem",background:d.bg.tertiary,borderRadius:"0.5rem"},children:[(0,o.jsxs)("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:['"',t.storyTitle,'"']}),(0,o.jsxs)("div",{style:{fontSize:"0.85rem",color:d.text.secondary},children:["Hist\xf3ria ",r+1," de ",s]})]})]})})]})},ue=e=>{let{user:t,onBack:n}=e;const[s,i]=(0,r.useState)("selector"),[a,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(new Set),[m,f]=(0,r.useState)(!0);l();(0,r.useEffect)(()=>{y()},[t.username]);const y=async()=>{try{var e;console.log("\ud83d\udcd6 Loading story progress for:",t.username);const n=await g(t.username);if(n.success&&null!==(e=n.student)&&void 0!==e&&e.progress){const e=Object.keys(n.student.progress).filter(e=>e.startsWith("story-")&&n.student.progress[e].completed).map(e=>e.replace("story-",""));console.log("\u2705 Found completed stories:",e),p(new Set(e))}}catch(n){console.error("\u274c Error loading story progress:",n)}finally{f(!1)}},v=()=>{i("selector"),d(null)};return m?(0,o.jsx)("div",{className:"story-loading-container",children:(0,o.jsxs)("div",{className:"story-loading-content",children:[(0,o.jsx)("div",{className:"story-loading-spinner"}),(0,o.jsx)("p",{className:"story-loading-text",children:"Carregando suas hist\xf3rias..."})]})}):(0,o.jsxs)("div",{className:"story-player-container",children:["selector"===s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ie,{completedStories:h,currentStoryIndex:a,onStorySelect:e=>{c(e),i("game")}}),(0,o.jsx)("div",{className:"story-back-section",children:(0,o.jsx)(Q,{variant:"secondary",onClick:n,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"Voltar ao Hub"})})]}),"game"===s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(oe,{user:t,storyIndex:a,completedStories:h,onComplete:e=>{d(e),i("results"),e.newCompletion&&p(t=>new Set([...t,e.storyId]))}}),(0,o.jsx)("div",{className:"story-back-section",children:(0,o.jsx)(Q,{variant:"secondary",onClick:v,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"Voltar \xe0s Hist\xf3rias"})})]}),"results"===s&&u&&(0,o.jsx)(ce,{results:u,completedStories:h,currentStoryIndex:a,totalStories:15,onRetry:()=>{i("game"),d(null)},onNext:()=>{a<14?(c(a+1),i("game"),d(null)):v()},onBackToStories:v,onBackToHub:n})]})},de=e=>{let{round:t,index:n,isCompleted:r,isActive:s,onSelect:i}=e;l();return(0,o.jsxs)("button",{onClick:i,className:"wordmatch-round-tab "+(s?"active":r?"completed":""),children:[(0,o.jsx)("span",{className:"wordmatch-round-icon",children:t.icon}),(0,o.jsx)("div",{className:"wordmatch-round-title",children:t.title}),(0,o.jsxs)("div",{className:"wordmatch-round-info",children:[t.words.length," pares"]}),r&&(0,o.jsx)("div",{className:"wordmatch-completion-indicator",children:"\u2705"})]})},he=e=>{let{completedRounds:t,currentRound:n,onRoundSelect:r}=e;const s=l(),i=F,a=Math.round(t.size/i.length*100);return(0,o.jsxs)("div",{className:"wordmatch-selector",children:[(0,o.jsxs)("div",{className:"wordmatch-progress-overview",children:[(0,o.jsx)("h2",{className:"wordmatch-progress-title",children:"\ud83c\udfae Combine Palavras"}),(0,o.jsx)("p",{className:"wordmatch-progress-subtitle",children:"Combine palavras em ingl\xeas com suas tradu\xe7\xf5es em portugu\xeas!"}),(0,o.jsxs)("div",{className:"wordmatch-progress-stats",children:[(0,o.jsxs)("div",{className:"wordmatch-stat-pill",children:["\ud83d\udcda ",t.size," de ",i.length," Completos"]}),(0,o.jsxs)("div",{className:"wordmatch-stat-pill",children:["\ud83c\udfaf ",a,"% Completados"]})]}),(0,o.jsx)("div",{className:"wordmatch-progress-bar-container",children:(0,o.jsx)(H,{value:a,max:100,color:s.brand.orange,showText:!1,animated:!0})})]}),(0,o.jsx)("div",{className:"wordmatch-rounds-grid",children:i.map((e,s)=>(0,o.jsx)(de,{round:e,index:s,isCompleted:t.has(e.id),isActive:s===n,onSelect:()=>r(s)},e.id))})]})},pe=e=>{let{user:t,roundIndex:n,completedRounds:s,onComplete:i}=e;const[a,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)([]),[m,f]=(0,r.useState)([]),g=l(),v=F[n];(0,r.useEffect)(()=>{v&&(w(),c([]),d(null))},[n]);const b=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},w=()=>{if(v){const e=v.words.map(e=>{let[t]=e;return t}),t=v.words.map(e=>{let[,t]=e;return t});p(b(e)),f(b(t)),console.log("\ud83c\udfb2 Words shuffled for extra challenge!")}},x=(e,t)=>{const n=`${e}-${t}`;if(a.some(t=>t.includes(e)))return;if(!u||u.key===n)return void d((null===u||void 0===u?void 0:u.key)===n?null:{word:e,lang:t,key:n});const r=v.words.find(t=>{let[n,r]=t;return u.word===n&&e===r||u.word===r&&e===n});if(r){const e=[...a,r];c(e),d(null),e.length===v.words.length?setTimeout(()=>k(e.length),800):setTimeout(()=>w(),500)}else d(null),setTimeout(()=>w(),300)},k=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.length;const n=Math.round(e/v.words.length*100),r=s.has(v.id);try{console.log("\ud83c\udf1f Awarding XP for word match completion...");const s=await D(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:v.words.length,perfectScore:100===n}),o={completed:!0,score:n,xpEarned:s.xpEarned,correctMatches:e,totalPairs:v.words.length,completedAt:new Date,roundId:v.id,roundTitle:v.title},a=await y(t.username,`wordmatch-${v.id}`,o);a&&a.success&&console.log("\u2705 Word match progress saved successfully!"),i({score:n,matches:e,total:v.words.length,xpEarned:s.xpEarned,leveledUp:s.leveledUp,newLevel:s.level,roundId:v.id,roundTitle:v.title,newCompletion:!r})}catch(o){console.error("\u274c Error in word match completion:",o),i({score:n,matches:e,total:v.words.length,xpEarned:0,roundId:v.id,roundTitle:v.title,newCompletion:!r})}};return(0,o.jsxs)("div",{className:"wordmatch-game",children:[(0,o.jsxs)("div",{className:"wordmatch-header",children:[(0,o.jsxs)("h1",{className:"wordmatch-title",children:[v.icon," ",v.title]}),(0,o.jsxs)("p",{className:"wordmatch-subtitle",children:["Combine ",v.words.length," pares de palavras"]}),(0,o.jsx)("div",{className:"wordmatch-progress-pills",children:(0,o.jsxs)("div",{className:"wordmatch-progress-pill",children:[a.length,"/",v.words.length," Combinadas"]})})]}),(0,o.jsxs)("div",{className:"wordmatch-content",children:[(0,o.jsx)("div",{className:"wordmatch-progress-section",children:(0,o.jsx)(H,{value:a.length/v.words.length*100,max:100,color:g.brand.orange,size:"large",text:`${a.length} de ${v.words.length} combinados`,animated:!0})}),(0,o.jsxs)("div",{className:"wordmatch-words-grid",children:[(0,o.jsxs)("div",{className:"wordmatch-words-column",children:[(0,o.jsx)("div",{className:"wordmatch-column-header",children:"\ud83c\uddfa\ud83c\uddf8 English"}),(0,o.jsx)("div",{className:"wordmatch-word-list",children:h.map(e=>{const t=a.some(t=>t.includes(e)),n=(null===u||void 0===u?void 0:u.word)===e;return(0,o.jsx)("button",{onClick:()=>x(e,"en"),disabled:t,className:"wordmatch-word-button "+(t?"matched":n?"selected":""),children:e},e)})})]}),(0,o.jsxs)("div",{className:"wordmatch-words-column",children:[(0,o.jsx)("div",{className:"wordmatch-column-header",children:"\ud83c\udde7\ud83c\uddf7 Portugu\xeas"}),(0,o.jsx)("div",{className:"wordmatch-word-list",children:m.map(e=>{const t=a.some(t=>t.includes(e)),n=(null===u||void 0===u?void 0:u.word)===e;return(0,o.jsx)("button",{onClick:()=>x(e,"pt"),disabled:t,className:"wordmatch-word-button "+(t?"matched":n?"selected":""),children:e},e)})})]})]}),(0,o.jsxs)("div",{className:"wordmatch-instructions",children:["Clique em uma palavra em ingl\xeas e depois em sua tradu\xe7\xe3o em portugu\xeas!",(0,o.jsx)("br",{}),(0,o.jsx)("strong",{children:"As palavras mudam de posi\xe7\xe3o ap\xf3s cada tentativa para mais desafio! \ud83c\udfaf"})]})]})]})},me=e=>{let{results:t,completedRounds:n,currentRound:r,totalRounds:s,onRetry:i,onNext:a,onBackToRounds:c,onBackToHub:u}=e;const d=l(),h=(p=t.score)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea dominou essas palavras!",color:"#F59E0B"}:p>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3timo vocabul\xe1rio!",color:"#F59E0B"}:p>=70?{emoji:"\ud83d\udc4d",title:"Bom Trabalho!",message:"Continue praticando!",color:"#F59E0B"}:p>=60?{emoji:"\ud83d\udcaa",title:"Continue!",message:"Voc\xea est\xe1 melhorando!",color:"#F59E0B"}:{emoji:"\ud83e\udd17",title:"Tente Novamente!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!",color:"#ef4444"};var p;const m=n.size===s;return(0,o.jsxs)(o.Fragment,{children:[100===t.score&&(0,o.jsx)("div",{className:"wordmatch-perfect-animation",children:"\u2b50 PERFEITO! \u2b50"}),(0,o.jsx)(le,{isOpen:!0,onClose:c,title:m?"Parab\xe9ns!":h.title,emoji:m?"\ud83c\udfc6":h.emoji,subtitle:m?"Voc\xea completou todos os rounds!":h.message,actions:(()=>{if(m)return[(0,o.jsx)(Q,{variant:"primary",onClick:u,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),children:"\ud83c\udfe0 Voltar para o Portal"},"hub"),(0,o.jsx)(Q,{variant:"secondary",onClick:c,icon:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 4v6h6M23 20v-6h-6"}),(0,o.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.64A9 9 0 0 1 3.51 15"})]}),children:"\ud83c\udfae Jogar Rounds Novamente"},"retry-all")];const e=[];return t.score<100&&e.push((0,o.jsx)(Q,{variant:"secondary",onClick:i,icon:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 4v6h6M23 20v-6h-6"}),(0,o.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.64A9 9 0 0 1 3.51 15"})]}),children:"\ud83d\udd04 Tentar Novamente"},"retry")),r<s-1&&e.push((0,o.jsx)(Q,{variant:"primary",onClick:a,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M5 12h14M12 5l7 7-7 7"})}),children:"\u27a1\ufe0f Pr\xf3ximo Round"},"next")),e.push((0,o.jsx)(Q,{variant:"secondary",onClick:c,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"\ud83c\udfae Outros Rounds"},"back-rounds")),e.push((0,o.jsx)(Q,{variant:"secondary",onClick:u,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),children:"\ud83c\udfe0 Voltar ao Hub"},"hub")),e})(),children:m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{style:{fontSize:"1.1rem",marginBottom:"1.5rem",color:d.text.secondary},children:[s," rounds conquistados! Voc\xea \xe9 um mestre das palavras! \ud83c\udf1f"]}),(0,o.jsxs)("div",{style:{background:`linear-gradient(135deg, ${d.brand.orange}, #ea580c)`,color:"white",margin:"0 0 1.5rem",borderRadius:"12px",padding:"1.5rem",textAlign:"center"},children:[(0,o.jsx)("div",{style:{fontSize:"1.25rem",fontWeight:"600"},children:"\ud83c\udf89 TODOS OS ROUNDS COMPLETOS! \ud83c\udf89"}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",marginTop:"0.5rem"},children:["Total: ",n.size,"/",s," rounds"]})]})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{background:d.isDark?"rgba(245, 158, 11, 0.1)":"#fef3c7",border:`1px solid ${d.border.primary}`,borderRadius:"0.75rem",padding:"1.5rem",marginBottom:"1.5rem",textAlign:"center"},children:[(0,o.jsxs)("div",{style:{fontSize:"2.5rem",fontWeight:"700",color:h.color,marginBottom:"0.5rem"},children:[t.score,"%"]}),(0,o.jsxs)("div",{style:{fontSize:"0.9rem",color:d.text.secondary,lineHeight:1.5},children:[t.matches,"/",t.total," palavras combinadas",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{style:{color:h.color,fontWeight:"600"},children:["+",t.xpEarned||0," XP ganho!"]}),t.leveledUp&&(0,o.jsxs)("div",{style:{color:"#F59E0B",fontWeight:"600",marginTop:"0.5rem",fontSize:"1rem"},children:["\ud83c\udf89 N\xedvel ",t.newLevel,"!"]})]})]}),(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"1rem",padding:"1rem",background:d.bg.tertiary,borderRadius:"0.5rem"},children:[(0,o.jsxs)("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:['"',t.roundTitle,'"']}),(0,o.jsxs)("div",{style:{fontSize:"0.85rem",color:d.text.secondary},children:["Round ",r+1," de ",s]})]})]})})]})},fe=e=>{let{user:t,onBack:n}=e;const[s,i]=(0,r.useState)("selector"),[a,c]=(0,r.useState)(0),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(new Set),[m,f]=(0,r.useState)(!0);l();(0,r.useEffect)(()=>{y()},[t.username]);const y=async()=>{try{var e;console.log("\ud83c\udfae Loading word match progress for:",t.username);const n=await g(t.username);if(n.success&&null!==(e=n.student)&&void 0!==e&&e.progress){const e=Object.keys(n.student.progress).filter(e=>e.startsWith("wordmatch-")&&n.student.progress[e].completed).map(e=>e.replace("wordmatch-",""));console.log("\u2705 Found completed rounds:",e),p(new Set(e))}}catch(n){console.error("\u274c Error loading word match progress:",n)}finally{f(!1)}},v=()=>{i("selector"),d(null)};return m?(0,o.jsx)("div",{className:"wordmatch-loading-container",children:(0,o.jsxs)("div",{className:"wordmatch-loading-content",children:[(0,o.jsx)("div",{className:"wordmatch-loading-spinner"}),(0,o.jsx)("p",{className:"wordmatch-loading-text",children:"Carregando palavras..."})]})}):(0,o.jsxs)("div",{className:"wordmatch-player-container",children:["selector"===s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(he,{completedRounds:h,currentRound:a,onRoundSelect:e=>{c(e),i("game")}}),(0,o.jsx)("div",{className:"wordmatch-back-section",children:(0,o.jsx)(Q,{variant:"secondary",onClick:n,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"Voltar ao Hub"})})]}),"game"===s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(pe,{user:t,roundIndex:a,completedRounds:h,onComplete:e=>{d(e),i("results"),e.newCompletion&&p(t=>new Set([...t,e.roundId]))}}),(0,o.jsx)("div",{className:"wordmatch-back-section",children:(0,o.jsx)(Q,{variant:"secondary",onClick:v,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"Voltar aos Rounds"})})]}),"results"===s&&u&&(0,o.jsx)(me,{results:u,completedRounds:h,currentRound:a,totalRounds:15,onRetry:()=>{i("game"),d(null)},onNext:()=>{a<14?(c(a+1),i("game"),d(null)):v()},onBackToRounds:v,onBackToHub:n})]})},ge=e=>{let{quiz:t,isCompleted:n,onSelect:r}=e;l();return(0,o.jsxs)("div",{className:"quiz-card "+(n?"completed":""),onClick:r,children:[n&&(0,o.jsx)("div",{className:"quiz-completion-badge",children:"\u2705"}),(0,o.jsx)("div",{className:"quiz-card-icon-container",children:(0,o.jsx)("span",{className:"quiz-card-icon",children:t.icon})}),(0,o.jsxs)("div",{className:"quiz-card-content",children:[(0,o.jsx)("h3",{className:"quiz-card-title",children:t.title}),(0,o.jsx)("p",{className:"quiz-card-description",children:t.description}),(0,o.jsxs)("div",{className:"quiz-card-stats",children:[(0,o.jsxs)("div",{className:"quiz-stat",children:[(0,o.jsx)("span",{className:"quiz-stat-icon",children:"\u2753"}),(0,o.jsxs)("div",{className:"quiz-stat-info",children:[(0,o.jsx)("span",{className:"quiz-stat-value",children:t.questions.length}),(0,o.jsx)("span",{className:"quiz-stat-label",children:"perguntas"})]})]}),(0,o.jsxs)("div",{className:"quiz-stat",children:[(0,o.jsx)("span",{className:"quiz-stat-icon",children:"\u23f1\ufe0f"}),(0,o.jsxs)("div",{className:"quiz-stat-info",children:[(0,o.jsxs)("span",{className:"quiz-stat-value",children:[t.timeLimit,"s"]}),(0,o.jsx)("span",{className:"quiz-stat-label",children:"tempo"})]})]}),(0,o.jsxs)("div",{className:"quiz-stat",children:[(0,o.jsx)("span",{className:"quiz-stat-icon",children:"\u2b50"}),(0,o.jsxs)("div",{className:"quiz-stat-info",children:[(0,o.jsx)("span",{className:"quiz-stat-value",children:"\u2b50".repeat(t.difficulty)}),(0,o.jsx)("span",{className:"quiz-stat-label",children:"n\xedvel"})]})]})]})]}),(0,o.jsx)("div",{className:"quiz-card-action",children:(0,o.jsx)("button",{className:"quiz-start-button",children:n?"\ud83d\udd04 Tentar Novamente":"\u26a1 Come\xe7ar Quiz"})})]})},ye=e=>{let{completedQuizzes:t,onQuizSelect:n}=e;const r=l(),s=Math.round(t.size/V.length*100);return(0,o.jsxs)("div",{className:"quiz-selector",children:[(0,o.jsxs)("div",{className:"quiz-progress-overview",children:[(0,o.jsx)("h2",{className:"quiz-progress-title",children:"\ud83c\udfaf Quiz R\xe1pido"}),(0,o.jsx)("p",{className:"quiz-progress-subtitle",children:"Teste seus conhecimentos com perguntas cronometradas!"}),(0,o.jsxs)("div",{className:"quiz-progress-stats",children:[(0,o.jsxs)("div",{className:"quiz-stat-pill",children:["\ud83d\udcda ",t.size," de ",V.length," Completos"]}),(0,o.jsxs)("div",{className:"quiz-stat-pill",children:["\ud83c\udfaf ",s,"% Completados"]})]}),(0,o.jsx)("div",{className:"quiz-progress-bar-container",children:(0,o.jsx)(H,{value:s,max:100,color:r.brand.blue,showText:!1,animated:!0})})]}),(0,o.jsx)("div",{className:"quiz-grid",children:V.map(e=>(0,o.jsx)(ge,{quiz:e,isCompleted:t.has(e.id),onSelect:()=>n(e)},e.id))})]})},ve=e=>{let{user:t,quiz:n,onComplete:s}=e;const[i,a]=(0,r.useState)(0),[c,u]=(0,r.useState)({}),[d,h]=(0,r.useState)(n.timeLimit),[p,m]=(0,r.useState)(!0),[f,g]=(0,r.useState)(""),v=(0,r.useRef)(null),b=(l(),n.questions[i]);(0,r.useEffect)(()=>(p&&d>0?v.current=setTimeout(()=>{h(d-1)},1e3):p&&0===d&&k(),()=>{v.current&&clearTimeout(v.current)}),[d,p]);const w=e=>{if(!p||!b)return;const t=b.id;u(n=>{const r={...n,[t]:e};return setTimeout(()=>{S(r)},500),r})},x=()=>{f.trim()&&(w(f.trim()),g(""))},k=()=>{const e=b.id;u(t=>{const n={...t,[e]:null};return setTimeout(()=>{S(n)},100),n})},S=e=>{i<n.questions.length-1?(a(i+1),h(n.timeLimit),g("")):E(e)},E=async e=>{m(!1);const r=C(e);try{const e=await D(t.username,"LESSON_COMPLETE",{correctAnswers:r.correctCount,totalQuestions:n.questions.length,perfectScore:100===r.percentage,difficulty:n.difficulty});await y(t.username,`quiz-${n.id}`,{completed:!0,score:r.percentage,xpEarned:e.xpEarned,correctAnswers:r.correctCount,totalQuestions:n.questions.length,totalPoints:r.totalPoints,maxPoints:r.maxPoints,difficulty:n.difficulty,completedAt:new Date,quizTitle:n.title}),s({...r,xpEarned:e.xpEarned,levelUp:e.leveledUp,newLevel:e.level})}catch(i){console.error("Error saving quiz results:",i),s(r)}},C=e=>{let t=0,r=0;const s=n.questions.reduce((e,t)=>e+t.points,0),i=n.questions.map((n,s)=>{const i=e[n.id];let o=!1,a="",l="";if(null===i||void 0===i||""===i)o=!1,a="N\xe3o respondeu","multiple-choice"===n.type?l=n.options[n.correct]:"true-false"===n.type?l=n.correct?"Verdadeiro":"Falso":"fill-blank"===n.type&&(l=n.answer);else if("multiple-choice"===n.type){const e=parseInt(i),t=parseInt(n.correct);o=e===t,a=n.options[e]||`Resposta inv\xe1lida (${i})`,l=n.options[t]}else if("true-false"===n.type){const e=!0===i||"true"===i,t=!0===n.correct;o=e===t,a=e?"Verdadeiro":"Falso",l=t?"Verdadeiro":"Falso"}else if("fill-blank"===n.type){o=String(i).trim().toLowerCase()===String(n.answer).trim().toLowerCase(),a=String(i).trim(),l=String(n.answer).trim()}return o&&(t++,r+=n.points),{question:n.question,userAnswer:a,correctAnswer:l,isCorrect:o,points:o?n.points:0,type:n.type}});return{percentage:Math.round(t/n.questions.length*100),correctCount:t,totalQuestions:n.questions.length,totalPoints:r,maxPoints:s,questionResults:i}};return(0,o.jsxs)("div",{className:"quiz-game",children:[(0,o.jsxs)("div",{className:"quiz-game-header",children:[(0,o.jsx)("h2",{className:"quiz-game-title",children:n.title}),(0,o.jsxs)("div",{className:"quiz-progress-indicator",children:["Pergunta ",i+1," de ",n.questions.length]})]}),(0,o.jsx)(W,{timeLeft:d,totalTime:n.timeLimit,dangerThreshold:5,showTime:!0}),b&&(0,o.jsxs)("div",{className:"quiz-question-card",children:[(0,o.jsx)("h3",{className:"quiz-question-text",children:b.question}),"multiple-choice"===b.type&&(0,o.jsx)("div",{className:"quiz-options",children:b.options.map((e,t)=>(0,o.jsx)(X,{index:t,onClick:()=>w(t),children:e},t))}),"true-false"===b.type&&(0,o.jsxs)("div",{className:"quiz-true-false",children:[(0,o.jsx)(Y,{isTrue:!0,onClick:()=>w(!0)}),(0,o.jsx)(Y,{isTrue:!1,onClick:()=>w(!1)})]}),"fill-blank"===b.type&&(0,o.jsxs)("div",{className:"quiz-fill-blank",children:[(0,o.jsx)("div",{className:"quiz-fill-input-container",children:(0,o.jsx)("input",{type:"text",value:f,onChange:e=>g(e.target.value),onKeyPress:e=>"Enter"===e.key&&x(),className:"quiz-fill-input",placeholder:"Digite aqui...",autoFocus:!0})}),(0,o.jsx)(Q,{variant:"success",onClick:x,disabled:!f.trim(),children:"Enviar Resposta"})]})]})]})},be=e=>{let{questionNumber:t,result:n}=e;const r=l();return(0,o.jsxs)("div",{className:"quiz-question-review",style:{border:"2px solid "+(n.isCorrect?"#10b981":"#ef4444"),background:n.isCorrect?r.isDark?"rgba(16, 185, 129, 0.1)":"#ecfdf5":r.isDark?"rgba(239, 68, 68, 0.1)":"#fef2f2",borderRadius:"0.75rem",padding:"1rem",marginBottom:"0.75rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",marginBottom:"0.75rem"},children:[(0,o.jsx)("span",{style:{fontSize:"1.25rem",marginTop:"0.125rem",flexShrink:0},children:n.isCorrect?"\u2705":"\u274c"}),(0,o.jsx)("div",{style:{flex:1},children:(0,o.jsxs)("p",{style:{fontWeight:"600",fontSize:"0.9rem",color:r.text.primary,lineHeight:1.4,margin:0},children:[t,". ",n.question]})}),(0,o.jsxs)("span",{style:{background:n.points>0?"#10b981":"#ef4444",color:"white",fontSize:"0.75rem",fontWeight:"600",padding:"0.25rem 0.5rem",borderRadius:"0.375rem",flexShrink:0},children:[n.points," pts"]})]}),(0,o.jsxs)("div",{style:{fontSize:"0.85rem",lineHeight:1.4,marginLeft:"2rem"},children:[(0,o.jsxs)("p",{style:{color:r.text.secondary,margin:"0 0 0.25rem"},children:[(0,o.jsx)("strong",{children:"Sua resposta:"})," ",n.userAnswer]}),!n.isCorrect&&(0,o.jsxs)("p",{style:{color:"#10b981",fontWeight:"500",margin:0},children:[(0,o.jsx)("strong",{children:"Resposta correta:"})," ",n.correctAnswer]})]})]})},we=e=>{let{quiz:t,results:n,onRetry:r,onBackToQuizzes:s,onBackToHub:i}=e;const a=l(),c=(u=n.percentage)>=90?{emoji:"\ud83c\udfc6",title:"Perfeito!",message:"Voc\xea \xe9 um mestre!",color:"#10b981"}:u>=80?{emoji:"\ud83c\udf89",title:"Excelente!",message:"\xd3timo conhecimento!",color:"#10b981"}:u>=70?{emoji:"\ud83d\udc4d",title:"Muito Bom!",message:"Continue assim!",color:"#F59E0B"}:u>=60?{emoji:"\ud83d\udcda",title:"Bom!",message:"Continue estudando!",color:"#F59E0B"}:{emoji:"\ud83d\udcaa",title:"Continue Tentando!",message:"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!",color:"#ef4444"};var u;const d=[(0,o.jsx)(Q,{variant:"primary",onClick:r,icon:(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("path",{d:"M1 4v6h6M23 20v-6h-6"}),(0,o.jsx)("path",{d:"M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.64A9 9 0 0 1 3.51 15"})]}),children:"\ud83d\udd04 Tentar Novamente"},"retry"),(0,o.jsx)(Q,{variant:"secondary",onClick:s,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"\ud83d\udcda Outros Quizzes"},"quizzes"),(0,o.jsx)(Q,{variant:"secondary",onClick:i,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),children:"\ud83c\udfe0 Voltar ao Hub"},"hub")];return(0,o.jsxs)(le,{isOpen:!0,onClose:s,title:c.title,emoji:c.emoji,subtitle:c.message,actions:d,children:[(0,o.jsxs)("div",{className:"quiz-results-summary",style:{background:a.isDark?"rgba(16, 185, 129, 0.1)":"#ecfdf5",border:`1px solid ${a.border.primary}`,borderRadius:"0.75rem",padding:"1.5rem",marginBottom:"1.5rem",textAlign:"center"},children:[(0,o.jsxs)("div",{className:"quiz-results-percentage",style:{fontSize:"2.5rem",fontWeight:"700",color:c.color,marginBottom:"0.5rem"},children:[n.percentage,"%"]}),(0,o.jsxs)("div",{className:"quiz-results-details",style:{fontSize:"0.9rem",color:a.text.secondary,lineHeight:1.5},children:[n.correctCount,"/",n.totalQuestions," corretas \u2022 ",n.totalPoints,"/",n.maxPoints," pontos",(0,o.jsx)("br",{}),(0,o.jsxs)("span",{style:{color:c.color,fontWeight:"600"},children:["+",n.xpEarned||0," XP ganho!"]}),n.levelUp&&(0,o.jsxs)("div",{style:{color:"#F59E0B",fontWeight:"600",marginTop:"0.5rem",fontSize:"1rem"},children:["\ud83c\udf89 N\xedvel ",n.newLevel,"!"]})]})]}),(0,o.jsxs)("div",{className:"quiz-results-review",children:[(0,o.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:a.text.primary,marginBottom:"1rem",textAlign:"center"},children:"\ud83d\udccb Revis\xe3o Detalhada"}),(0,o.jsx)("div",{className:"quiz-review-container",style:{maxHeight:"300px",overflowY:"auto",padding:"0.5rem"},children:n.questionResults.map((e,t)=>(0,o.jsx)(be,{questionNumber:t+1,result:e},t))})]})]})},xe=e=>{let{user:t,onBack:n}=e;const[s,i]=(0,r.useState)("selector"),[a,c]=(0,r.useState)(null),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(new Set),[m,f]=(0,r.useState)(!0);l();(0,r.useEffect)(()=>{y()},[t.username]);const y=async()=>{try{var e;const n=await g(t.username);if(n.success&&null!==(e=n.student)&&void 0!==e&&e.progress){const e=Object.keys(n.student.progress).filter(e=>e.startsWith("quiz-")&&n.student.progress[e].completed).map(e=>e.replace("quiz-",""));p(new Set(e))}}catch(n){console.error("Error loading progress:",n)}f(!1)},v=()=>{i("selector"),c(null),d(null)};return m?(0,o.jsx)("div",{className:"quiz-loading-container",children:(0,o.jsxs)("div",{className:"quiz-loading-content",children:[(0,o.jsx)("div",{className:"quiz-loading-spinner"}),(0,o.jsx)("p",{className:"quiz-loading-text",children:"Carregando quizzes..."})]})}):(0,o.jsxs)("div",{className:"quiz-player-container",children:["selector"===s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ye,{completedQuizzes:h,onQuizSelect:e=>{c(e),i("game")}}),(0,o.jsx)("div",{className:"quiz-back-section",children:(0,o.jsx)(Q,{variant:"secondary",onClick:n,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"Voltar ao Hub"})})]}),"game"===s&&a&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ve,{user:t,quiz:a,onComplete:e=>{d(e),i("results"),p(e=>new Set([...e,a.id]))}}),(0,o.jsx)("div",{className:"quiz-back-section",children:(0,o.jsx)(Q,{variant:"secondary",onClick:v,icon:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),children:"Voltar aos Quizzes"})})]}),"results"===s&&u&&(0,o.jsx)(we,{quiz:a,results:u,onRetry:()=>{i("game"),d(null)},onBackToQuizzes:v,onBackToHub:n})]})},ke={...{overview:{title:"Vis\xe3o Geral do Centro de Estudos",subtitle:"Seu guia completo para dominar o ingl\xeas",content:'\n## \ud83c\udfaf **Bem-vindo ao Centro de Estudos!**\n\nEste \xe9 seu **centro de comando** para dominar conceitos fundamentais do ingl\xeas. \nAqui voc\xea encontra explica\xe7\xf5es claras, exemplos pr\xe1ticos e dicas espec\xedficas \npara brasileiros que querem falar ingl\xeas como um nativo.\n\n### **\ud83d\udcda O que voc\xea vai encontrar:**\n\n**\ud83d\udd24 Sufixos em Ingl\xeas** - Aprenda a formar palavras como um pro\n**\ud83d\udd25 Phrasal Verbs** - Domine os verbos que confundem brasileiros  \n**\u23f0 Tempos Verbais** - Entenda quando usar cada tempo verbal\n**\ud83d\udccd Preposi\xe7\xf5es** - At, On, In e outras que sempre confundem\n**\ud83c\udfaf Condicionais** - If clauses do zero ao avan\xe7ado\n**\ud83d\udcaa Modal Verbs** - Can, Could, Should, Must e companhia\n**\ud83d\udde3\ufe0f Reported Speech** - Como relatar o que outros disseram\n\n### **\ud83c\udfae Como funciona o sistema de XP:**\n\n- **+15 XP** por cada se\xe7\xe3o completa\n- **+50 XP b\xf4nus** ao completar um guia inteiro\n- **+25 XP extra** pelo primeiro guia dominado\n\n> **\ud83d\udca1 Dica do Professor Alex**: Leia com aten\xe7\xe3o, pratique os exemplos e marque como "lido" para ganhar XP. Seu objetivo \xe9 dominar todos os guias e se tornar um mestre do ingl\xeas!\n\n**Bora come\xe7ar sua jornada? Escolha um guia na barra lateral e comece a estudar! \ud83d\ude80**\n    '},suffixes:{title:"Sufixos em Ingl\xeas",subtitle:"Como formar palavras como um nativo",sections:[{title:"Sufixos para formar substantivos",content:'\n## \ud83d\udcdd **Sufixos para Substantivos**\n\nOs sufixos s\xe3o **termina\xe7\xf5es** que transformam uma palavra em outra. \nDominar sufixos \xe9 como ter um **superpoder** no ingl\xeas!\n\n### **-TION / -SION** (mais comum)\n**Significado**: A\xe7\xe3o ou resultado  \n**Exemplos**:\n- *create* \u2192 *creation* (cria\xe7\xe3o)\n- *decide* \u2192 *decision* (decis\xe3o)  \n- *celebrate* \u2192 *celebration* (celebra\xe7\xe3o)\n\n### **-NESS** (de adjetivos)\n**Significado**: Estado ou qualidade  \n**Exemplos**:\n- *happy* \u2192 *happiness* (felicidade)\n- *dark* \u2192 *darkness* (escurid\xe3o)\n- *useful* \u2192 *usefulness* (utilidade)\n\n### **-MENT** (de verbos)\n**Significado**: Resultado da a\xe7\xe3o  \n**Exemplos**:\n- *develop* \u2192 *development* (desenvolvimento)\n- *govern* \u2192 *government* (governo)\n- *manage* \u2192 *management* (gest\xe3o)\n\n> **\ud83d\udca1 Dica**: Se voc\xea conhece o verbo, pode "adivinhar" o substantivo!\n        '},{title:"Sufixos para formar adjetivos",content:"\n## \ud83c\udfa8 **Sufixos para Adjetivos**\n\n### **-FUL** (cheio de)\n**Significado**: Cheio de, com muita qualidade  \n**Exemplos**:\n- *care* \u2192 *careful* (cuidadoso)\n- *help* \u2192 *helpful* (prestativo)\n- *beauty* \u2192 *beautiful* (bonito)\n\n### **-LESS** (sem, falta de)\n**Significado**: Sem, aus\xeancia de  \n**Exemplos**:\n- *care* \u2192 *careless* (descuidado)\n- *help* \u2192 *helpless* (desamparado)\n- *hope* \u2192 *hopeless* (sem esperan\xe7a)\n\n### **-IVE** (que tem tend\xeancia)\n**Significado**: Que faz, que tem tend\xeancia  \n**Exemplos**:\n- *create* \u2192 *creative* (criativo)\n- *attract* \u2192 *attractive* (atraente)\n- *compete* \u2192 *competitive* (competitivo)\n\n### **-ABLE / -IBLE** (que pode ser)\n**Significado**: Que pode ser feito  \n**Exemplos**:\n- *read* \u2192 *readable* (leg\xedvel)\n- *comfort* \u2192 *comfortable* (confort\xe1vel)\n- *ResponS**ible*** (respons\xe1vel)\n\n> **\u26a0\ufe0f Pegadinha**: *-ful* vs *-less* s\xe3o opostos!\n        "},{title:"Sufixos para formar verbos e adv\xe9rbios",content:"\n## \u26a1 **Sufixos para Verbos**\n\n### **-IZE / -ISE** (tornar, fazer)\n**Significado**: Tornar algo, fazer virar  \n**Exemplos**:\n- *modern* \u2192 *modernize* (modernizar)\n- *real* \u2192 *realize* (realizar, perceber)\n- *special* \u2192 *specialize* (especializar)\n\n### **-EN** (tornar)\n**Significado**: Fazer ficar, tornar  \n**Exemplos**:\n- *wide* \u2192 *widen* (alargar)\n- *deep* \u2192 *deepen* (aprofundar)\n- *bright* \u2192 *brighten* (iluminar)\n\n---\n\n## \ud83c\udfc3 **Sufixos para Adv\xe9rbios**\n\n### **-LY** (de forma, maneira)\n**Significado**: De forma, de maneira  \n**Exemplos**:\n- *quick* \u2192 *quickly* (rapidamente)\n- *careful* \u2192 *carefully* (cuidadosamente)\n- *beautiful* \u2192 *beautifully* (belamente)\n\n### **-WARD** (dire\xe7\xe3o)\n**Significado**: Em dire\xe7\xe3o a  \n**Exemplos**:\n- *for* \u2192 *forward* (para frente)\n- *back* \u2192 *backward* (para tr\xe1s)\n- *up* \u2192 *upward* (para cima)\n\n---\n\n## \ud83c\udfaf **Dica de Ouro para Brasileiros**\n\n**Padr\xe3o portugu\xeas \u2192 ingl\xeas**:\n- *-\xc7\xc3O* \u2192 *-TION* (*celebra\xe7\xe3o* = *celebration*)\n- *-DADE* \u2192 *-TY* (*felicidade* = *happiness*, mas *cidade* = *city*)\n- *-MENTE* \u2192 *-LY* (*rapidamente* = *quickly*)\n\n> **\ud83d\ude80 Pratique**: Pegue 5 palavras que voc\xea usa no portugu\xeas e tente formar vers\xf5es em ingl\xeas com sufixos!\n        "}]},"phrasal-verbs":{title:"Phrasal Verbs Essenciais",subtitle:"Os verbos que mais confundem brasileiros",sections:[{title:"Phrasal Verbs com GET",content:"\n## \ud83c\udfaf **GET - O Verbo Mais Vers\xe1til**\n\n*GET* \xe9 o **camale\xe3o** dos verbos ingleses. Com preposi\xe7\xf5es diferentes, vira praticamente qualquer coisa!\n\n### **GET UP** (levantar)\n- *I get up at 7 AM every day.* (Eu levanto \xe0s 7 todo dia)\n- *Get up! We're late!* (Levanta! Estamos atrasados!)\n\n### **GET OUT** (sair)\n- *Get out of the car.* (Saia do carro)\n- *I need to get out more.* (Preciso sair mais)\n\n### **GET ON** (entrar em transporte / se dar bem)\n- *Get on the bus.* (Entre no \xf4nibus)\n- *We get on really well.* (N\xf3s nos damos muito bem)\n\n### **GET OFF** (descer de transporte / sair do trabalho)\n- *Get off at the next stop.* (Des\xe7a na pr\xf3xima parada)\n- *What time do you get off work?* (Que horas voc\xea sai do trabalho?)\n\n### **GET OVER** (superar)\n- *I can't get over how beautiful Rio is!* (N\xe3o consigo superar como o Rio \xe9 lindo!)\n- *She got over her ex-boyfriend.* (Ela superou o ex-namorado)\n\n> **\ud83d\udca1 Dica do Alex**: *GET* = \"conseguir/ficar/chegar\". A preposi\xe7\xe3o muda tudo!\n        "},{title:"Phrasal Verbs com PUT",content:"\n## \ud83c\udfaf **PUT - Colocar em A\xe7\xe3o**\n\n### **PUT ON** (vestir / colocar)\n- *Put on your jacket.* (Vista sua jaqueta)\n- *She put on makeup.* (Ela se maquiou)\n- *Put on some music.* (Coloque uma m\xfasica)\n\n### **PUT OFF** (adiar / desligar)\n- *Don't put off your studies.* (N\xe3o adie seus estudos)\n- *Put off the lights.* (Apague as luzes)\n\n### **PUT UP** (pendurar / hospedar)\n- *Put up the picture on the wall.* (Pendure o quadro na parede)\n- *Can you put me up tonight?* (Voc\xea pode me hospedar hoje?)\n\n### **PUT DOWN** (colocar no ch\xe3o / criticar)\n- *Put down your phone.* (Largue o telefone)\n- *Don't put yourself down.* (N\xe3o se diminua)\n\n### **PUT TOGETHER** (montar)\n- *I need to put together this desk.* (Preciso montar esta mesa)\n- *Put together a presentation.* (Monte uma apresenta\xe7\xe3o)\n\n> **\u26a0\ufe0f Pegadinha**: *PUT ON* \u2260 *PUT IN*. *Put on* = vestir, *Put in* = inserir\n        "},{title:"Phrasal Verbs essenciais do dia a dia",content:"\n## \ud83d\udd25 **Top Phrasal Verbs Brasileiros Precisam Saber**\n\n### **TURN ON / TURN OFF** (ligar / desligar)\n- *Turn on the TV.* (Ligue a TV)\n- *Turn off your phone.* (Desligue o telefone)\n\n### **GIVE UP** (desistir)\n- *Don't give up on your dreams.* (N\xe3o desista dos seus sonhos)\n- *I gave up smoking.* (Eu parei de fumar)\n\n### **LOOK FOR** (procurar)\n- *I'm looking for my keys.* (Estou procurando minhas chaves)\n- *She's looking for a job.* (Ela est\xe1 procurando emprego)\n\n### **PICK UP** (pegar / buscar)\n- *Pick up the phone.* (Atenda o telefone)\n- *Can you pick me up?* (Voc\xea pode me buscar?)\n\n### **TAKE OFF** (decolar / tirar roupa)\n- *The plane takes off at 3 PM.* (O avi\xe3o decola \xe0s 15h)\n- *Take off your shoes.* (Tire os sapatos)\n\n### **COME BACK** (voltar)\n- *Come back soon!* (Volte logo!)\n- *When will you come back?* (Quando voc\xea vai voltar?)\n\n### **FIND OUT** (descobrir)\n- *I found out the truth.* (Descobri a verdade)\n- *Let's find out together.* (Vamos descobrir juntos)\n\n---\n\n## \ud83c\udfae **Desafio do Dia**\n\n**Use estes phrasal verbs em frases sobre sua rotina**:\n1. What time do you *get up*?\n2. When do you *turn off* your phone?\n3. What are you *looking for* in life?\n\n> **\ud83d\ude80 Pro Tip**: Memorize phrasal verbs em **contexto**, n\xe3o isolados!\n        "}]}},...{"verb-tenses":{title:"Tempos Verbais em Ingl\xeas",subtitle:"Guia completo dos tempos mais usados",sections:[{title:"Present Simple vs Present Continuous",content:'\n## \ud83d\udd50 **Present Simple vs Present Continuous**\n\n### **Present Simple** - Rotinas e Fatos\n**Uso**: Rotinas, h\xe1bitos, fatos gerais, hor\xe1rios\n\n**Estrutura**: \n- **Afirmativa**: I/You/We/They + verb | He/She/It + verb + **s**\n- **Negativa**: don\'t/doesn\'t + verb\n- **Interrogativa**: Do/Does + sujeito + verb?\n\n**Exemplos**:\n- *I **work** from 9 AM to 5 PM every day.* (rotina)\n- *She **studies** English at Cultura Inglesa.* (h\xe1bito)\n- *S\xe3o Paulo **has** 12 million people.* (fato)\n\n### **Present Continuous** - A\xe7\xf5es Acontecendo Agora\n**Uso**: A\xe7\xf5es em progresso, planos futuros pr\xf3ximos\n\n**Estrutura**: am/is/are + verb + **ing**\n\n**Exemplos**:\n- *I **am studying** right now.* (agora)\n- *She **is working** on a project.* (em progresso)\n- *We **are meeting** tomorrow.* (futuro pr\xf3ximo)\n\n---\n\n## \u26a0\ufe0f **Erros Comuns dos Brasileiros**\n\n\u274c **ERRO**: *I am work at a bank.*\n\u2705 **CORRETO**: *I work at a bank.* (rotina = Simple)\n\n\u274c **ERRO**: *I study now.*\n\u2705 **CORRETO**: *I am studying now.* (agora = Continuous)\n\n\ud83d\udca1 **Dica do Professor Alex**: Se voc\xea pode colocar "sempre" na frase em portugu\xeas, use Simple. Se pode colocar "agora/neste momento", use Continuous!\n        '},{title:"Past Simple vs Present Perfect",content:'\n## \ud83d\udcc5 **Past Simple vs Present Perfect**\n\n### **Past Simple** - Passado Terminado\n**Uso**: A\xe7\xe3o terminada em tempo espec\xedfico do passado\n\n**Estrutura**: \n- **Regular**: verb + **ed**\n- **Irregular**: forma espec\xedfica (went, ate, saw...)\n\n**Exemplos**:\n- *I **visited** Rio de Janeiro **last year**.* (tempo espec\xedfico)\n- *She **studied** at USP **when she was 20**.* (momento definido)\n- *We **went** to the shopping **yesterday**.* (tempo passado claro)\n\n### **Present Perfect** - Passado Conectado ao Presente\n**Uso**: Experi\xeancia de vida, a\xe7\xe3o iniciada no passado que continua, resultado presente\n\n**Estrutura**: have/has + past participle\n\n**Exemplos**:\n- *I **have visited** 5 Brazilian states.* (experi\xeancia)\n- *She **has studied** English **for 3 years**.* (continua)\n- *We **have finished** the trabalho de casa.* (resultado agora)\n\n---\n\n## \ud83c\udfaf **Palavras-Chave que Indicam o Tempo**\n\n### **Past Simple**\n- yesterday, last week/month/year\n- in 1990, when I was young\n- two days ago, a moment ago\n\n### **Present Perfect**  \n- ever, never, already, yet\n- for, since, recently, lately\n- so far, up to now, just\n\n---\n\n## \u26a0\ufe0f **Erro MAIS Comum dos Brasileiros**\n\n\u274c **ERRO**: *I have been there yesterday.*\n\u2705 **CORRETO**: *I was there yesterday.* (yesterday = Past Simple)\n\n\u274c **ERRO**: *I already went to Paris.*\n\u2705 **CORRETO**: *I have already been to Paris.* (already = Present Perfect)\n\n\ud83d\udca1 **Macete**: Se voc\xea pode responder "quando?" com um momento espec\xedfico, use Past Simple!\n        '},{title:"Future: Will vs Going To",content:"\n## \ud83d\udd2e **Future: Will vs Going To**\n\n### **Will** - Decis\xf5es Espont\xe2neas e Previs\xf5es\n**Uso**: Decis\xf5es no momento, promessas, previs\xf5es baseadas em opini\xe3o\n\n**Estrutura**: will + verb (base form)\n\n**Exemplos**:\n- *I **will help** you!* (decis\xe3o espont\xe2nea)\n- *It **will rain** tomorrow.* (previs\xe3o/opini\xe3o)\n- *I **will call** you later.* (promessa)\n\n### **Going To** - Planos e Previs\xf5es com Evid\xeancia\n**Uso**: Planos j\xe1 decididos, previs\xf5es baseadas em evid\xeancia\n\n**Estrutura**: am/is/are + going to + verb\n\n**Exemplos**:\n- *I **am going to study** medicine.* (plano decidido)\n- *Look at those clouds! It **is going to rain**.* (evid\xeancia)\n- *We **are going to travel** next month.* (plano feito)\n\n---\n\n## \ud83c\udfad **Situa\xe7\xf5es Pr\xe1ticas**\n\n### **Cen\xe1rio 1**: Telefone tocando\n- **Will**: *I'll answer it!* (decis\xe3o espont\xe2nea)\n\n### **Cen\xe1rio 2**: Falando sobre faculdade\n- **Going To**: *I'm going to study engineering.* (plano)\n\n### **Cen\xe1rio 3**: C\xe9u nublado no Brasil\n- **Going To**: *It's going to rain.* (evid\xeancia visual - vejo as nuvens!)\n- **Will**: *I think it will rain.* (opini\xe3o - acho que vai chover)\n\n---\n\n## \ud83d\udcdd **Pr\xe1tica R\xe1pida**\n\nComplete com **will** ou **going to**:\n\n1. A: \"I forgot my wallet!\" B: \"Don't worry, I _____ pay.\"\n2. Look! The baby _____ fall!\n3. I _____ visit my grandmother next weekend. (j\xe1 planejado)\n\n**Respostas**: 1) will (espont\xe2neo) 2) is going to (evid\xeancia) 3) am going to (plano)\n        "}]},prepositions:{title:"Preposi\xe7\xf5es em Ingl\xeas",subtitle:"As preposi\xe7\xf5es que mais confundem brasileiros",sections:[{title:"Preposi\xe7\xf5es de Tempo: At, On, In",content:"\n## \u23f0 **Preposi\xe7\xf5es de Tempo: AT, ON, IN**\n\n### **AT** - Hor\xe1rio Espec\xedfico\n**Uso**: Horas, momentos espec\xedficos, feriados\n\n**Exemplos**:\n- *at 3 o'clock* (\xe0s 3 horas)\n- *at midnight* (\xe0 meia-noite)\n- *at Christmas* (no Natal)\n- *at the moment* (no momento)\n- *at noon* (ao meio-dia)\n\n### **ON** - Dias e Datas\n**Uso**: Dias da semana, datas espec\xedficas\n\n**Exemplos**:\n- *on Monday* (na segunda-feira)\n- *on January 15th* (no dia 15 de janeiro)\n- *on my birthday* (no meu anivers\xe1rio)\n- *on New Year's Day* (no Ano Novo)\n- *on weekends* (nos fins de semana)\n\n### **IN** - Per\xedodos Longos\n**Uso**: Meses, anos, esta\xe7\xf5es, per\xedodos\n\n**Exemplos**:\n- *in January* (em janeiro)\n- *in 2024* (em 2024)\n- *in summer* (no ver\xe3o)\n- *in the morning* (de manh\xe3)\n- *in the future* (no futuro)\n\n---\n\n## \u26a0\ufe0f **Erros T\xedpicos dos Brasileiros**\n\n\u274c **ERRO**: *in Monday* \n\u2705 **CORRETO**: *on Monday*\n\n\u274c **ERRO**: *at January*\n\u2705 **CORRETO**: *in January*\n\n\u274c **ERRO**: *on 3 o'clock*\n\u2705 **CORRETO**: *at 3 o'clock*\n\n\ud83d\udca1 **Macete Visual**:\n- **AT** = \ud83c\udfaf pontinho (hor\xe1rio exato)\n- **ON** = \ud83d\udcc5 superf\xedcie (dia espec\xedfico) \n- **IN** = \ud83d\udce6 dentro (per\xedodo amplo)\n        "},{title:"Preposi\xe7\xf5es de Local: At, On, In",content:"\n## \ud83d\udccd **Preposi\xe7\xf5es de Local: AT, ON, IN**\n\n### **AT** - Ponto Espec\xedfico\n**Uso**: Endere\xe7os, locais espec\xedficos, eventos\n\n**Exemplos**:\n- *at home* (em casa)\n- *at school* (na escola)\n- *at the airport* (no aeroporto)\n- *at 123 Main Street* (na rua Main, 123)\n- *at the party* (na festa)\n\n### **ON** - Superf\xedcie, Ruas\n**Uso**: Superf\xedcies, ruas, andares\n\n**Exemplos**:\n- *on the table* (na mesa)\n- *on Main Street* (na rua Main)\n- *on the second floor* (no segundo andar)\n- *on the wall* (na parede)\n- *on the bus* (no \xf4nibus - superf\xedcie)\n\n### **IN** - Espa\xe7os Fechados\n**Uso**: Cidades, pa\xedses, espa\xe7os fechados\n\n**Exemplos**:\n- *in Brazil* (no Brasil)\n- *in S\xe3o Paulo* (em S\xe3o Paulo)\n- *in the car* (no carro - dentro)\n- *in the room* (no quarto)\n- *in the box* (na caixa)\n\n---\n\n## \ud83d\ude97 **Transporte: Regra Especial**\n\n**IN** (dentro do ve\xedculo):\n- *in the car* (no carro)\n- *in a taxi* (no t\xe1xi)\n- *in the plane* (no avi\xe3o)\n\n**ON** (p\xfablico/superf\xedcie):\n- *on the bus* (no \xf4nibus)\n- *on the train* (no trem)\n- *on the subway* (no metr\xf4)\n\n---\n\n## \ud83c\udfaf **Teste R\xe1pido**\n\n1. I live _____ Brazil.\n2. The meeting is _____ 2 PM.\n3. Your book is _____ the table.\n4. I'll see you _____ Monday.\n\n**Respostas**: 1) in 2) at 3) on 4) on\n        "},{title:"Outras Preposi\xe7\xf5es Importantes",content:"\n## \ud83c\udfaf **Outras Preposi\xe7\xf5es Essenciais**\n\n### **FOR vs SINCE** (Dura\xe7\xe3o vs Ponto Inicial)\n\n**FOR** = per\xedodo de tempo (quanto tempo?)\n- *I've studied English **for** 3 years.* (durante 3 anos)\n- *I lived there **for** a long time.* (por muito tempo)\n\n**SINCE** = ponto inicial (desde quando?)\n- *I've studied English **since** 2021.* (desde 2021)\n- *I haven't seen him **since** Monday.* (desde segunda)\n\n### **BY vs UNTIL** (Prazo vs Continuidade)\n\n**BY** = prazo limite (at\xe9/antes de)\n- *Finish this **by** 5 PM.* (termine antes das 5)\n- *I'll be there **by** tomorrow.* (at\xe9 amanh\xe3)\n\n**UNTIL** = continuidade at\xe9 um ponto\n- *I'll wait **until** 5 PM.* (vou esperar at\xe9 as 5)\n- *Don't leave **until** I call.* (n\xe3o saia at\xe9 eu ligar)\n\n### **BETWEEN vs AMONG** (Entre)\n\n**BETWEEN** = entre 2 coisas espec\xedficas\n- *The book is **between** the pen and paper.* (entre 2 objetos)\n- *Choose **between** coffee and tea.* (entre 2 op\xe7\xf5es)\n\n**AMONG** = entre 3+ ou grupo\n- *He was **among** the best students.* (entre v\xe1rios)\n- *Divide this **among** the team.* (entre o grupo)\n\n---\n\n## \u26a0\ufe0f **Confus\xf5es Comuns**\n\n\u274c **ERRO**: *I study English since 3 years.*\n\u2705 **CORRETO**: *I've studied English for 3 years.*\n\n\u274c **ERRO**: *Wait until I am ready.*\n\u2705 **CORRETO**: *Wait until I'm ready.* (until + presente)\n\n\ud83d\udca1 **Dica**: FOR responde \"quanto tempo?\", SINCE responde \"desde quando?\"\n        "}]},conditionals:{title:"Condicionais em Ingl\xeas",subtitle:"Zero, First, Second e Third Conditional",sections:[{title:"Zero e First Conditional",content:"\n## \ud83c\udf21\ufe0f **Zero Conditional - Fatos e Verdades**\n\n**Uso**: Fatos cient\xedficos, verdades universais, situa\xe7\xf5es sempre verdadeiras\n\n**Estrutura**: If + presente, presente\n\n**Exemplos**:\n- *If you heat water to 100\xb0C, it boils.* (fato cient\xedfico)\n- *If I drink coffee at night, I can't sleep.* (sempre acontece)\n- *When it rains, the streets get wet.* (verdade universal)\n\n---\n\n## \ud83c\udfaf **First Conditional - Situa\xe7\xf5es Reais Futuras**\n\n**Uso**: Situa\xe7\xf5es poss\xedveis/prov\xe1veis no futuro\n\n**Estrutura**: If + presente, will + verbo\n\n**Exemplos**:\n- *If it rains tomorrow, I will stay home.* (poss\xedvel)\n- *If you study hard, you will pass the exam.* (prov\xe1vel)\n- *If she arrives early, we will start the meeting.* (real)\n\n### **Outras Formas do First Conditional**:\n- *If you're hungry, **we can** order pizza.* (possibilidade)\n- *If he calls, **please tell** him I'm busy.* (imperativo)\n- *If you finish early, **you may** leave.* (permiss\xe3o)\n\n---\n\n## \u26a0\ufe0f **Erros Comuns dos Brasileiros**\n\n\u274c **ERRO**: *If I will have time, I will call you.*\n\u2705 **CORRETO**: *If I have time, I will call you.*\n\n\ud83d\udca1 **Regra de Ouro**: Nunca use WILL na cl\xe1usula IF (First Conditional)!\n        "},{title:"Second Conditional - Situa\xe7\xf5es Imagin\xe1rias",content:'\n## \ud83d\udcad **Second Conditional - Situa\xe7\xf5es Hipot\xe9ticas**\n\n**Uso**: Situa\xe7\xf5es imagin\xe1rias, improv\xe1veis, hipot\xe9ticas no presente/futuro\n\n**Estrutura**: If + past simple, would + verbo\n\n**Exemplos**:\n- *If I **won** the lottery, I **would travel** around the world.* (improv\xe1vel)\n- *If I **were** rich, I **would help** many people.* (hipot\xe9tico)\n- *If you **lived** in Japan, you **would learn** Japanese quickly.* (imagin\xe1rio)\n\n### **"If I were you..." - Conselho**\n- *If I were you, I would study more.* (se eu fosse voc\xea)\n- *If I were in your position, I would quit.* (no seu lugar)\n\n\u26a0\ufe0f **Importante**: Use "were" para todas as pessoas (I/he/she/it were)\n\n---\n\n## \ud83c\udfad **Situa\xe7\xf5es Pr\xe1ticas**\n\n### **Sonhos e Desejos**:\n- *If I had more time, I would learn piano.*\n- *If we lived near the beach, we would swim every day.*\n\n### **Dando Conselhos**:\n- *If I were you, I wouldn\'t do that.*\n- *What would you do if you were me?*\n\n---\n\n## \u26a0\ufe0f **Erros T\xedpicos**\n\n\u274c **ERRO**: *If I would have money, I would buy a car.*\n\u2705 **CORRETO**: *If I had money, I would buy a car.*\n\n\ud83d\udca1 **Dica**: Second Conditional = situa\xe7\xe3o IRREAL, ent\xe3o use passado!\n        '},{title:"Third Conditional - Passado Imagin\xe1rio",content:"\n## \ud83d\udd70\ufe0f **Third Conditional - Arrependimentos do Passado**\n\n**Uso**: Situa\xe7\xf5es passadas que N\xc3O aconteceram, arrependimentos, cr\xedticas\n\n**Estrutura**: If + past perfect, would have + past participle\n\n**Exemplos**:\n- *If I **had studied** harder, I **would have passed** the exam.* (mas n\xe3o estudei)\n- *If she **had left** earlier, she **wouldn't have been** late.* (mas n\xe3o saiu)\n- *If we **had known** about the party, we **would have come**.* (mas n\xe3o sab\xedamos)\n\n### **Express\xf5es de Arrependimento**:\n- *I wish I had studied more.* (queria ter estudado mais)\n- *If only I had listened to you!* (se ao menos eu tivesse te ouvido!)\n- *I should have called her.* (eu deveria ter ligado)\n\n---\n\n## \ud83d\udcdd **Resumo dos 4 Condicionais**\n\n| Tipo | Situa\xe7\xe3o | Estrutura | Exemplo |\n|------|----------|-----------|---------|\n| **Zero** | Fatos/Sempre | If + presente, presente | If you heat ice, it melts |\n| **First** | Real/Poss\xedvel | If + presente, will | If it rains, I'll stay home |\n| **Second** | Irreal/Hipot\xe9tico | If + past, would | If I were rich, I'd travel |\n| **Third** | Passado irreal | If + past perfect, would have | If I had known, I would have come |\n\n---\n\n## \ud83d\udca1 **Pr\xe1tica Di\xe1ria**\n\n**Segunda-feira**: Pratique Zero + First (situa\xe7\xf5es reais)\n**Ter\xe7a-feira**: Pratique Second (sonhos e conselhos)  \n**Quarta-feira**: Pratique Third (arrependimentos)\n**Quinta-feira**: Mixed conditionals\n**Sexta-feira**: Revise todos + create suas pr\xf3prias frases!\n        "}]},"modal-verbs":{title:"Modal Verbs - Verbos Modais",subtitle:"Can, Could, Should, Must, May, Might...",sections:[{title:"Can, Could, Be Able To",content:'\n## \ud83d\udcaa **Habilidade: CAN, COULD, BE ABLE TO**\n\n### **CAN** - Habilidade Presente/Geral\n**Uso**: Habilidade atual, possibilidade, permiss\xe3o informal\n\n**Exemplos**:\n- *I **can** speak Portuguese and English.* (habilidade)\n- *Can you help me with this Portuguese translation?* (pedido)\n- *You **can** use WhatsApp during break.* (permiss\xe3o)\n- *It **can** be very hot in Minas Gerais.* (possibilidade)\n\n### **COULD** - Habilidade Passada/Cortesia\n**Uso**: Habilidade no passado, pedido mais cort\xeas, possibilidade\n\n**Exemplos**:\n- *When I was young, I **could** run very fast.* (passado)\n- *Could you please help me?* (cort\xeas)\n- *It **could** rain later.* (possibilidade)\n- *I **couldn\'t** sleep last night.* (n\xe3o consegui)\n\n### **BE ABLE TO** - Alternativa Completa\n**Uso**: Todos os tempos verbais, situa\xe7\xf5es espec\xedficas\n\n**Exemplos**:\n- *I **will be able to** help you tomorrow.* (futuro)\n- *I **have been able to** learn a lot.* (present perfect)\n- *I **was able to** fix the computer.* (consegui - situa\xe7\xe3o espec\xedfica)\n\n---\n\n## \u26a0\ufe0f **Erros Comuns**\n\n\u274c **ERRO**: *I can to swim.*\n\u2705 **CORRETO**: *I can swim.* (modal + verbo base)\n\n\ud83d\udca1 **Lembre-se**: Modals nunca usam TO, exceto "be able to"!\n        '},{title:"Should, Must, Have To",content:"\n## \ud83d\udccb **Obriga\xe7\xe3o e Conselho: SHOULD, MUST, HAVE TO**\n\n### **SHOULD** - Conselho/Recomenda\xe7\xe3o\n**Uso**: Conselhos, o que \xe9 certo fazer\n\n**Exemplos**:\n- *You **should** study more.* (conselho)\n- *We **should** leave early.* (recomenda\xe7\xe3o)\n- *You **shouldn't** eat so much sugar.* (n\xe3o deveria)\n- *Should I call her?* (pedindo conselho)\n\n### **MUST** - Obriga\xe7\xe3o Forte (Opini\xe3o)\n**Uso**: Obriga\xe7\xe3o interna, regras pessoais, certeza\n\n**Exemplos**:\n- *I **must** finish this today.* (obriga\xe7\xe3o pessoal)\n- *You **must** be tired.* (certeza - deve estar)\n- *Students **must** wear uniforms.* (regra)\n- *I **must not** be late.* (proibi\xe7\xe3o forte)\n\n### **HAVE TO** - Obriga\xe7\xe3o Externa\n**Uso**: Obriga\xe7\xe3o imposta por outros, necessidade\n\n**Exemplos**:\n- *I **have to** work tomorrow.* (trabalho exige)\n- *Do you **have to** wear a tie?* (regra da empresa?)\n- *She **doesn't have to** come.* (n\xe3o \xe9 obrigat\xf3rio)\n- *I **had to** leave early yesterday.* (passado)\n\n---\n\n## \u26a0\ufe0f **Cuidado com DON'T HAVE TO**\n\n**MUSTN'T** = proibido \u274c\n**DON'T HAVE TO** = n\xe3o obrigat\xf3rio (opcional) \u2705\n        "},{title:"May, Might, Would, Will",content:"\n## \ud83c\udfb2 **Possibilidade e Cortesia: MAY, MIGHT, WOULD, WILL**\n\n### **MAY** - Possibilidade/Permiss\xe3o Formal\n**Uso**: Possibilidade 50%, permiss\xe3o formal\n\n**Exemplos**:\n- *It **may** rain today.* (pode chover - 50% chance)\n- ***May** I come in?* (posso entrar? - formal)\n- *You **may** leave now.* (pode sair - permiss\xe3o)\n\n### **MIGHT** - Possibilidade Menor\n**Uso**: Possibilidade menor (30%), mais incerto\n\n**Exemplos**:\n- *I **might** go to the party.* (talvez v\xe1 - n\xe3o tenho certeza)\n- *She **might** call later.* (pode ser que ligue)\n- *It **might** be expensive.* (pode ser caro)\n\n### **WOULD** - Cortesia/Hipot\xe9tico\n**Uso**: Pedidos corteses, situa\xe7\xf5es hipot\xe9ticas\n\n**Exemplos**:\n- ***Would** you help me?* (voc\xea me ajudaria? - cort\xeas)\n- *I **would** like some coffee.* (eu gostaria)\n- ***Would** you mind closing the door?* (se importaria?)\n\n### **WILL** - Decis\xf5es/Promessas\n**Uso**: Decis\xf5es espont\xe2neas, promessas, ofertas\n\n**Exemplos**:\n- *I **will** help you!* (eu vou te ajudar - promessa)\n- ***Will** you marry me?* (quer se casar? - pedido)\n- *The phone is ringing. I **will** answer it.* (decis\xe3o espont\xe2nea)\n\n---\n\n## \ud83d\udcca **Graus de Possibilidade**\n\n**100%**: *will definitely* (certamente vai)\n**90%**: *will probably* (provavelmente vai)  \n**70%**: *will* (vai)\n**50%**: *may* (pode)\n**30%**: *might* (talvez)\n**10%**: *might not* (talvez n\xe3o)\n**0%**: *won't* (n\xe3o vai)\n\n---\n\n## \ud83d\udca1 **Dicas de Uso Natural**\n\n### **Conversa\xe7\xe3o Casual**:\n- *I might be late.* (talvez eu me atrase)\n- *Would you like some coffee?* (gostaria de caf\xe9?)\n\n### **Situa\xe7\xf5es Formais**:\n- *May I ask a question?* (posso fazer uma pergunta?)\n- *You may begin the exam.* (podem come\xe7ar a prova)\n        "}]},"reported-speech":{title:"Reported Speech - Discurso Indireto",subtitle:"Como relatar o que outros disseram",sections:[{title:"Mudan\xe7as B\xe1sicas no Reported Speech",content:'\n## \ud83d\udde3\ufe0f **Reported Speech - O que \xe9?**\n\n**Reported Speech** (Discurso Indireto) \xe9 quando relatamos o que algu\xe9m disse, sem usar as palavras exatas.\n\n**Direct Speech**: *She said, "I am happy."*\n**Reported Speech**: *She said (that) she was happy.*\n\n---\n\n## \ud83d\udd04 **Mudan\xe7as de Tempo Verbal**\n\n### **Regra Geral**: Se o verbo introdut\xf3rio est\xe1 no passado (said, told, asked), os tempos "retrocedem"\n\n| **Direct Speech** | **Reported Speech** |\n|-------------------|---------------------|\n| Present Simple \u2192 | Past Simple |\n| Present Continuous \u2192 | Past Continuous |\n| Past Simple \u2192 | Past Perfect |\n| Present Perfect \u2192 | Past Perfect |\n| Will \u2192 | Would |\n| Can \u2192 | Could |\n| May \u2192 | Might |\n| Must \u2192 | Had to |\n\n**Exemplos**:\n- *"I **work** here."* \u2192 *He said he **worked** there.*\n- *"I **am working**."* \u2192 *She said she **was working**.*\n- *"I **will call** you."* \u2192 *He said he **would call** me.*\n\n---\n\n## \ud83d\udc65 **Mudan\xe7as de Pronomes**\n\n**Regra**: Adapte os pronomes ao contexto\n\n- *"**I** am tired."* \u2192 *He said **he** was tired.*\n- *"**You** are smart."* \u2192 *She told me **I** was smart.*\n- *"**We** are ready."* \u2192 *They said **they** were ready.*\n\n---\n\n## \ud83d\udccd **Mudan\xe7as de Tempo e Local**\n\n| **Direct** | **Reported** |\n|------------|--------------|\n| today \u2192 | that day |\n| yesterday \u2192 | the day before |\n| tomorrow \u2192 | the next day |\n| now \u2192 | then |\n| here \u2192 | there |\n| this \u2192 | that |\n| these \u2192 | those |\n\n**Exemplo**:\n- *"I will come **here tomorrow**."* \n- \u2192 *He said he would come **there the next day**.*\n        '},{title:"Verbos Introdut\xf3rios e Perguntas",content:'\n## \ud83d\udce2 **Verbos Introdut\xf3rios**\n\n### **SAY vs TELL**\n\n**SAY** (n\xe3o precisa mencionar para quem)\n- *He **said** (that) he was tired.*\n- *She **said** (that) she would call.*\n\n**TELL** (sempre menciona para quem)\n- *He **told me** (that) he was tired.*\n- *She **told us** (that) she would call.*\n\n### **Outros Verbos Introdut\xf3rios**\n- **explain**: *He explained that he was late.*\n- **admit**: *She admitted that she had made a mistake.*\n- **promise**: *They promised that they would help.*\n- **suggest**: *He suggested that we should leave.*\n- **warn**: *She warned me that it was dangerous.*\n\n---\n\n## \u2753 **Reported Questions**\n\n### **Yes/No Questions** \u2192 use **IF/WHETHER**\n\n**Direct**: *"Are you coming?"*\n**Reported**: *He asked if/whether I was coming.*\n\n**Direct**: *"Can you help me?"*  \n**Reported**: *She asked if I could help her.*\n\n### **WH-Questions** \u2192 mantenha a palavra WH\n\n**Direct**: *"Where do you live?"*\n**Reported**: *He asked where I lived.*\n\n**Direct**: *"What time is it?"*\n**Reported**: *She asked what time it was.*\n\n\u26a0\ufe0f **Importante**: Em reported questions, use ordem afirmativa (n\xe3o interrogativa)\n\n\u274c **ERRO**: *He asked where did I live.*\n\u2705 **CORRETO**: *He asked where I lived.*\n\n---\n\n## \ud83d\udcac **Reported Commands**\n\n### **Affirmative Commands** \u2192 use **TO**\n**Direct**: *"Open the door!"*\n**Reported**: *He told me to open the door.*\n\n### **Negative Commands** \u2192 use **NOT TO**\n**Direct**: *"Don\'t be late!"*\n**Reported**: *She told us not to be late.*\n\n### **Requests** \u2192 use **ASK**\n**Direct**: *"Please help me."*\n**Reported**: *He asked me to help him.*\n        '},{title:"Casos Especiais e Pr\xe1tica",content:'\n## \ud83c\udfaf **Casos que N\xc3O Mudam o Tempo**\n\n### **1. Verdades Universais**\n**Direct**: *"The Earth is round."*\n**Reported**: *He said the Earth **is** round.* (pode manter presente)\n\n### **2. Situa\xe7\xf5es Ainda Verdadeiras**\n**Direct**: *"I live in S\xe3o Paulo."* (ainda mora l\xe1)\n**Reported**: *She said she **lives** in S\xe3o Paulo.* (pode manter presente)\n\n### **3. Verbo Introdut\xf3rio no Presente**\n**Direct**: *"I am hungry."*\n**Reported**: *He **says** he **is** hungry.* (tempo n\xe3o muda)\n\n---\n\n## \ud83c\udfad **Situa\xe7\xf5es Pr\xe1ticas Comuns**\n\n### **No Trabalho**:\n- *"I\'ll finish it tomorrow."* \n\u2192 *He said he would finish it the next day.*\n\n### **Na Escola**:\n- *"When is the test?"*\n\u2192 *She asked when the test was.*\n\n### **Entre Amigos**:\n- *"Can you come to my party?"*\n\u2192 *He asked if I could come to his party.*\n\n---\n\n## \ud83d\udcdd **Pr\xe1tica - Transforme em Reported Speech**\n\n**1.** *"I am studying English."* (John said)\n**2.** *"Where do you work?"* (She asked me)\n**3.** *"Don\'t forget your keys!"* (Mom told me)\n**4.** *"I will call you tomorrow."* (He promised)\n**5.** *"Are you free tonight?"* (She asked)\n\n---\n\n## \u2705 **Respostas**:\n\n1. *John said (that) he was studying English.*\n2. *She asked me where I worked.*\n3. *Mom told me not to forget my keys.*\n4. *He promised (that) he would call me the next day.*\n5. *She asked if I was free that night.*\n\n---\n\n## \ud83d\udca1 **Dica Final para Brasileiros**\n\n**Erro comum**: Traduzir direto do portugu\xeas\n\u274c *He said me that...* (do portugu\xeas "ele me disse que")\n\u2705 *He told me that...* OU *He said that...*\n\n**Lembre-se**: \n- **SAY** + objeto \u2192 use TO: *He said TO me*\n- **TELL** + pessoa diretamente: *He told me*\n        '}]}}},Se=[{id:"overview",title:"\ud83d\udcda Vis\xe3o Geral",icon:"\ud83d\udcda",sections:1},{id:"suffixes",title:"\ud83d\udd24 Sufixos em Ingl\xeas",icon:"\ud83d\udd24",sections:3},{id:"phrasal-verbs",title:"\ud83d\udd25 Phrasal Verbs",icon:"\ud83d\udd25",sections:3},{id:"verb-tenses",title:"\u23f0 Tempos Verbais",icon:"\u23f0",sections:3,new:!0},{id:"prepositions",title:"\ud83d\udccd Preposi\xe7\xf5es",icon:"\ud83d\udccd",sections:3,new:!0},{id:"conditionals",title:"\ud83c\udfaf Condicionais",icon:"\ud83c\udfaf",sections:3,new:!0},{id:"modal-verbs",title:"\ud83d\udcaa Modal Verbs",icon:"\ud83d\udcaa",sections:3,new:!0},{id:"reported-speech",title:"\ud83d\udde3\ufe0f Reported Speech",icon:"\ud83d\udde3\ufe0f",sections:3,new:!0},{id:"irregular-verbs",title:"\ud83d\udcdd Verbos Irregulares",icon:"\ud83d\udcdd",disabled:!0},{id:"false-friends",title:"\u26a0\ufe0f False Friends",icon:"\u26a0\ufe0f",disabled:!0},{id:"pronunciation",title:"\ud83c\udfb5 Pron\xfancia",icon:"\ud83c\udfb5",disabled:!0}],Ee=15,Ce=50,Te=e=>{let{currentGuideData:t,currentProgress:n,overallStats:r,onBack:s}=e;l();return(0,o.jsx)("header",{className:"study-header",children:(0,o.jsxs)("div",{className:"study-header-content",children:[(0,o.jsxs)("button",{onClick:s,className:"study-back-button",children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M19 12H5m7 7-7-7 7-7"})}),(0,o.jsx)("span",{children:"Hub"})]}),(0,o.jsxs)("div",{className:"study-header-title",children:[(0,o.jsx)("div",{className:"study-icon-badge",children:"\ud83c\udfae"}),(0,o.jsxs)("div",{className:"study-header-text",children:[(0,o.jsx)("h1",{className:"study-title",children:"Centro de Quests"}),(0,o.jsx)("p",{className:"study-subtitle",children:t.title})]})]}),(0,o.jsxs)("div",{className:"study-stats-pills",children:[(0,o.jsxs)("div",{className:"study-stat-pill",children:[(0,o.jsx)("div",{className:"study-stat-icon",children:"\ud83d\udcda"}),(0,o.jsxs)("div",{className:"study-stat-value",children:[r.completedSections,"/",r.totalSections]}),(0,o.jsx)("div",{className:"study-stat-label",children:"Se\xe7\xf5es"})]}),(0,o.jsxs)("div",{className:"study-stat-pill",children:[(0,o.jsx)("div",{className:"study-stat-icon",children:"\ud83c\udfc6"}),(0,o.jsxs)("div",{className:"study-stat-value",children:[r.completedGuides,"/",r.availableGuides]}),(0,o.jsx)("div",{className:"study-stat-label",children:"Quests"})]}),(0,o.jsxs)("div",{className:"study-stat-pill",children:[(0,o.jsx)("div",{className:"study-stat-icon",children:"\u26a1"}),(0,o.jsx)("div",{className:"study-stat-value",children:r.totalXP}),(0,o.jsx)("div",{className:"study-stat-label",children:"XP"})]}),(0,o.jsxs)("div",{className:"study-stat-pill",children:[(0,o.jsx)("div",{className:"study-stat-icon",children:"\ud83d\udcca"}),(0,o.jsxs)("div",{className:"study-stat-value",children:[r.overallPercentage,"%"]}),(0,o.jsx)("div",{className:"study-stat-label",children:"Total"})]})]})]})})},Ne=e=>{let{currentGuide:t,studyProgress:n,guides:r,onGuideChange:s,onCompleteGuide:i,getGuideProgress:a,currentProgress:c}=e;const u=l(),d=e=>{const t=a(e);return 15*(t.total-t.completed)+(t.total>1?50:0)},h=e=>{let{completed:t,total:n,guideId:r}=e;const s=n>0?t/n*100:0,i=t===n&&n>0;return(0,o.jsxs)("div",{className:"study-guide-progress",children:[(0,o.jsx)("div",{className:"study-progress-bar",children:(0,o.jsx)("div",{className:"study-progress-fill",style:{width:`${s}%`,background:i?"linear-gradient(90deg, #10b981, #059669)":"linear-gradient(90deg, #8b5cf6, #7c3aed)"}})}),(0,o.jsx)("div",{className:"study-progress-text",children:i?(0,o.jsx)("span",{style:{color:"#10b981",fontWeight:"600"},children:"\ud83c\udfc6 Dominado!"}):(0,o.jsxs)("span",{children:[s.toFixed(0),"% \u2022 ",t,"/",n," se\xe7\xf5es"]})})]})};return(0,o.jsxs)("aside",{className:"study-sidebar",style:{background:u.bg.secondary,border:`1px solid ${u.border.primary}`,boxShadow:u.shadow.lg},children:[(0,o.jsxs)("div",{className:"study-sidebar-header",children:[(0,o.jsx)("div",{className:"study-sidebar-icon",children:"\ud83c\udfae"}),(0,o.jsx)("h3",{className:"study-sidebar-title",style:{color:u.text.primary},children:"Central de Miss\xf5es"}),(0,o.jsx)("p",{className:"study-sidebar-subtitle",style:{color:u.text.secondary},children:"Escolha sua pr\xf3xima aventura"})]}),(0,o.jsx)("div",{className:"study-guides-list",children:r.map(e=>{const n=a(e.id),r=t===e.id,i=n.completed===n.total&&n.total>0,l=d(e.id);return(0,o.jsx)("div",{className:`study-guide-item ${r?"active":""} ${e.disabled?"disabled":""}`,children:(0,o.jsxs)("button",{onClick:()=>{e.disabled||s(e.id)},disabled:e.disabled,className:"study-guide-button "+(r?"active":""),style:{background:r?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"transparent",color:r?"white":e.disabled?u.text.muted:u.text.primary,border:`2px solid ${r?"transparent":u.border.primary}`},children:[(0,o.jsxs)("div",{className:"study-guide-header",children:[(0,o.jsx)("div",{className:"study-guide-icon",style:{background:r?"rgba(255, 255, 255, 0.2)":e.disabled?u.bg.tertiary:"rgba(139, 92, 246, 0.1)",color:r?"white":e.disabled?u.text.muted:"#8b5cf6"},children:e.icon}),(0,o.jsxs)("div",{className:"study-guide-info",children:[(0,o.jsxs)("div",{className:"study-guide-name",children:[(0,o.jsx)("span",{children:e.title}),e.new&&(0,o.jsx)("span",{className:"new-badge",children:"NEW"}),i&&(0,o.jsx)("span",{style:{fontSize:"0.8rem"},children:"\u2705"})]}),(0,o.jsxs)("div",{className:"study-guide-status",style:{color:r?"rgba(255, 255, 255, 0.8)":u.text.secondary},children:[e.disabled?(0,o.jsx)("span",{className:"study-coming-soon",children:"\ud83d\udd12 Em breve"}):n.total>0?(0,o.jsxs)("span",{children:["\ud83d\udcda ",n.completed,"/",n.total," se\xe7\xf5es"]}):(0,o.jsx)("span",{children:"\ud83d\udcd6 Guia \xfanico"}),!e.disabled&&!i&&l>0&&(0,o.jsxs)("span",{className:"study-xp-indicator",style:{color:r?"#10b981":"#8b5cf6",marginLeft:"0.5rem",fontSize:"0.65rem",fontWeight:"600"},children:["+",l," XP"]})]})]}),r&&(0,o.jsx)("div",{className:"study-active-indicator",children:(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"white",children:(0,o.jsx)("path",{d:"M9 5l7 7-7 7"})})})]}),!e.disabled&&n.total>1&&(0,o.jsx)(h,{completed:n.completed,total:n.total,guideId:e.id})]})},e.id)})}),c.completed<c.total&&c.total>0&&(0,o.jsxs)("div",{className:"study-sidebar-actions",children:[(0,o.jsxs)("button",{onClick:()=>i(t),className:"study-unlock-button",children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsx)("span",{children:"\ud83c\udfc6 Dominar Quest Completa"})]}),(0,o.jsxs)("div",{className:"study-complete-hint",style:{color:u.text.secondary},children:["Completa todas as se\xe7\xf5es + b\xf4nus XP de ",d(t)," pontos!"]})]}),(0,o.jsxs)("div",{className:"study-sidebar-tips",children:[(0,o.jsx)("div",{className:"study-tip-icon",children:"\ud83d\udca1"}),(0,o.jsxs)("div",{className:"study-tip-content",children:[(0,o.jsx)("h4",{className:"study-tip-title",style:{color:u.text.primary},children:"Dica"}),(0,o.jsx)("p",{className:"study-tip-text",style:{color:u.text.secondary},children:"Complete se\xe7\xf5es para ganhar XP e subir de n\xedvel! Domine guias inteiros para b\xf4nus \xe9picos! \ud83c\udfae"})]})]})]})},_e=e=>{var t;let{currentGuideData:n,currentSection:r,currentSectionKey:s,isSectionCompleted:i,isTransitioning:a,onSectionChange:c,onMarkAsRead:u}=e;const d=l(),h=n.sections&&n.sections.length>1,p=h?n.sections.length:1,m=0===r,f=r===p-1,g=h?Math.round((r+1)/p*100):100,y=h?(null===(t=n.sections[r])||void 0===t?void 0:t.content)||"":n.content||"",v=(e=>{if(!e)return"2-3";const t=e.split(/\s+/).length,n=Math.max(2,Math.round(t/200));return n<=3?"2-3":n<=5?"3-5":`${n-1}-${n}`})(y);return(0,o.jsx)("main",{className:"study-content-area",children:(0,o.jsxs)("div",{className:"study-content-card",style:{background:d.bg.secondary,border:`1px solid ${d.border.primary}`,boxShadow:d.shadow.lg,opacity:a?.7:1,transform:a?"translateY(8px)":"translateY(0)"},children:[h&&(0,o.jsxs)("div",{className:"study-section-navigation",children:[(0,o.jsxs)("div",{className:"study-section-nav-header",children:[(0,o.jsx)("h3",{className:"study-nav-title",children:"\ud83d\udcd6 Navega\xe7\xe3o"}),(0,o.jsxs)("div",{className:"study-section-counter",style:{color:d.text.secondary},children:[r+1,"/",p," \u2022 ",g,"%"]})]}),(0,o.jsx)("div",{className:"study-section-buttons",children:n.sections.map((e,t)=>{const n=e.title||`Se\xe7\xe3o ${t+1}`,s=t===r;return(0,o.jsx)("button",{onClick:()=>c(t),className:"study-section-btn "+(s?"active":""),style:{background:s?"linear-gradient(135deg, #8b5cf6, #7c3aed)":"transparent",color:s?"white":d.text.primary,border:`2px solid ${s?"transparent":d.border.primary}`},children:(0,o.jsxs)("div",{className:"study-section-btn-content",children:[(0,o.jsx)("span",{className:"study-section-number",children:t+1}),(0,o.jsx)("span",{className:"study-section-label",children:n.length>20?`${n.slice(0,20)}...`:n})]})},t)})})]}),(0,o.jsx)("article",{className:"study-content-body",style:{color:d.text.primary,opacity:a?.5:1},children:(0,o.jsx)("div",{className:"study-formatted-content",dangerouslySetInnerHTML:{__html:(b=y,b?b.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,"<code>$1</code>").replace(/^## (.*$)/gm,"<h2>$1</h2>").replace(/^### (.*$)/gm,"<h3>$1</h3>").replace(/^> (.*$)/gm,"<blockquote>$1</blockquote>").replace(/\n/g,"<br>"):"")}})}),(0,o.jsxs)("div",{className:"study-action-section",children:[(0,o.jsx)("div",{className:"study-mark-read-section",children:i?(0,o.jsxs)("div",{className:"study-completed-badge",children:[(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,o.jsx)("span",{children:"\ud83c\udf89 Se\xe7\xe3o Dominada!"}),(0,o.jsxs)("span",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700",marginLeft:"0.5rem"},children:["+",Ee," XP"]})]}):(0,o.jsxs)("button",{onClick:u,className:"study-mark-read-btn",style:{background:"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none"},children:[(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}),(0,o.jsx)("span",{children:"\u2705 Marcar como Lido"}),(0,o.jsxs)("span",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"700",marginLeft:"0.5rem"},children:["+",Ee," XP"]})]})}),(0,o.jsx)("div",{className:"study-reading-info",children:(0,o.jsxs)("div",{className:"study-reading-time",children:[(0,o.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,o.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,o.jsx)("path",{d:"M12 6v6l4 2"})]}),(0,o.jsxs)("span",{children:["\u23f1\ufe0f ",v," min de leitura"]}),(0,o.jsxs)("span",{style:{marginLeft:"1rem",color:d.brand.blue,fontSize:"0.75rem",fontWeight:"600"},children:["\ud83d\udcca ",g,"% do guia"]})]})})]}),h&&(0,o.jsxs)("div",{className:"study-bottom-navigation",children:[(0,o.jsxs)("button",{onClick:()=>c(r-1),disabled:m,className:"study-nav-btn",style:{background:"transparent",border:`2px solid ${d.border.primary}`,color:m?d.text.muted:d.text.primary,opacity:m?.4:1},children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M15 18l-6-6 6-6"})}),(0,o.jsx)("span",{children:"Anterior"})]}),(0,o.jsxs)("div",{className:"study-nav-progress",style:{color:d.text.secondary,background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)"},children:["\ud83c\udfaf ",r+1," de ",p]}),(0,o.jsxs)("button",{onClick:()=>c(r+1),disabled:f,className:"study-nav-btn",style:{background:"transparent",border:`2px solid ${d.border.primary}`,color:f?d.text.muted:d.text.primary,opacity:f?.4:1},children:[(0,o.jsx)("span",{children:"Pr\xf3xima"}),(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M9 18l6-6-6-6"})})]})]})]})});var b},Ie=e=>{var t;let{user:n,onBack:s}=e;const i=l(),[a,c]=(0,r.useState)("overview"),[u,d]=(0,r.useState)(0),[h,p]=(0,r.useState)({}),[m,f]=(0,r.useState)(!0),[y,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{k()},[n.username]);const k=async()=>{try{const e=await g(n.username);e.success&&e.student.studyProgress&&p(e.student.studyProgress)}catch(e){console.error("Failed to load study progress:",e)}f(!1)},S=e=>{const t=ke[e];if(null===t||void 0===t||!t.sections)return{completed:0,total:0,percentage:0};const n=t.sections.length,r=t.sections.filter((t,n)=>{var r;return null===(r=h[`${e}-section-${n+1}`])||void 0===r?void 0:r.completed}).length;return{completed:r,total:n,percentage:n>0?Math.round(r/n*100):0}};if(m)return(0,o.jsx)("div",{className:"study-loading-container",children:(0,o.jsxs)("div",{className:"study-loading-content",children:[(0,o.jsx)("div",{style:{width:"64px",height:"64px",border:`4px solid ${i.border.primary}`,borderTop:"4px solid #8b5cf6",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 1.5rem"}}),(0,o.jsx)("h3",{style:{color:i.text.primary,fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem"},children:"\ud83c\udfae Carregando Quests"}),(0,o.jsx)("p",{style:{color:i.text.secondary,fontSize:"1rem"},children:"Preparando sua aventura de aprendizado..."})]})});const E=ke[a]||ke.overview,C=S(a),T=(()=>{let e=0,t=0,n=0,r=0;return Se.forEach(s=>{var i;if(!s.disabled&&null!==(i=ke[s.id])&&void 0!==i&&i.sections){const i=S(s.id);e+=i.total,t+=i.completed;const o=i.completed*Ee;i.completed===i.total&&i.total>0?(n+=o+Ce,r++):n+=o}}),{totalSections:e,completedSections:t,totalXP:n,completedGuides:r,availableGuides:Se.filter(e=>!e.disabled).length,overallPercentage:e>0?Math.round(t/e*100):0}})(),N=`${a}-section-${u+1}`,_=null===(t=h[N])||void 0===t?void 0:t.completed;return(0,o.jsxs)("div",{className:"study-center-container",children:[(0,o.jsx)(Te,{currentGuideData:E,currentProgress:C,overallStats:T,onBack:s}),(0,o.jsxs)("div",{className:"study-main-layout",children:[(0,o.jsx)(Ne,{currentGuide:a,studyProgress:h,guides:Se,onGuideChange:e=>{e===a||y||(b(!0),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{c(e),d(0),b(!1)},300))},onCompleteGuide:async e=>{try{const t=ke[e];if(!t||!t.sections)return;let r=0;const s={...h},i=[];if(t.sections.forEach((t,n)=>{var o;const a=`${e}-section-${n+1}`;if(null===(o=s[a])||void 0===o||!o.completed){const t={completed:!0,completedAt:new Date,timeSpent:Math.floor(300*Math.random())+120,guideId:e,sectionId:`section-${n+1}`};s[a]=t,i.push({key:a,data:t}),r++}}),0===r)return;p(s);for(const e of i)await v(n.username,e.key,e.data);const o=r*Ee+Ce,a=await D(n.username,"STUDY_GUIDE_COMPLETE",{guideId:e,sectionsCompleted:r,bonusXP:o});x({type:"guide",xp:o,level:a.level,leveledUp:a.leveledUp,title:a.leveledUp?`\ud83d\ude80 N\xedvel ${a.level}!`:"\ud83c\udfc6 Quest Dominada!",message:a.leveledUp?"LEND\xc1RIO! Voc\xea subiu de n\xedvel dominando esta quest!":`${r} se\xe7\xf5es dominadas!`,sections:r,guideTitle:t.title})}catch(t){console.error("Failed to complete guide:",t)}},getGuideProgress:S,currentProgress:C}),(0,o.jsx)(_e,{currentGuideData:E,currentSection:u,currentSectionKey:N,isSectionCompleted:_,isTransitioning:y,onSectionChange:e=>{if(e===u)return;const t=document.querySelector(".study-content-area");t&&t.scrollIntoView({behavior:"smooth",block:"start"}),d(e)},onMarkAsRead:()=>(async(e,t)=>{try{var r,s;const i=`${e}-${t}`;if(null!==(r=h[i])&&void 0!==r&&r.completed)return;const o={completed:!0,completedAt:new Date,timeSpent:Math.floor(300*Math.random())+120,guideId:e,sectionId:t},a={...h,[i]:o};p(a),await v(n.username,i,o);const l=await D(n.username,"STUDY_SECTION_COMPLETE",{guideId:e,sectionId:t,timeSpent:o.timeSpent});x({type:"section",xp:l.xpEarned,level:l.level,leveledUp:l.leveledUp,title:l.leveledUp?`\ud83c\udf89 N\xedvel ${l.level}!`:"\u2b50 Se\xe7\xe3o Dominada!",message:l.leveledUp?"INCR\xcdVEL! Voc\xea subiu de n\xedvel!":`+${l.xpEarned} XP conquistados!`,guideTitle:(null===(s=ke[e])||void 0===s?void 0:s.title)||"Guia"})}catch(i){console.error("Failed to mark section as read:",i);const n={...h};delete n[`${e}-${t}`],p(n)}})(a,`section-${u+1}`)})]}),w&&(0,o.jsx)(ae,{isOpen:!0,onClose:()=>x(null),size:"default",showCloseButton:!1,children:(0,o.jsxs)("div",{className:"study-xp-celebration",children:[(0,o.jsx)("div",{className:"study-xp-icon",children:w.leveledUp?"\ud83d\ude80":"guide"===w.type?"\ud83c\udfc6":"\u2b50"}),(0,o.jsx)("h2",{className:"study-xp-title",children:w.title}),(0,o.jsx)("p",{className:"study-xp-message",children:w.message}),"guide"===w.type&&w.sections&&(0,o.jsxs)("div",{className:"study-xp-details",children:[(0,o.jsx)("div",{style:{marginBottom:"1rem",textAlign:"center"},children:(0,o.jsxs)("strong",{children:["\ud83c\udfaf Quest: ",w.guideTitle]})}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsxs)("span",{children:["\ud83d\udcda ",w.sections," se\xe7\xf5es dominadas"]}),(0,o.jsxs)("span",{children:["+",w.sections*Ee," XP"]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"0.5rem"},children:[(0,o.jsx)("span",{children:"\ud83c\udfc6 B\xf4nus de quest completa"}),(0,o.jsxs)("span",{children:["+",Ce," XP"]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",paddingTop:"0.5rem",borderTop:"2px solid rgba(255, 255, 255, 0.2)",fontWeight:"700",fontSize:"1.1rem"},children:[(0,o.jsx)("span",{children:"\u26a1 Total"}),(0,o.jsxs)("span",{children:["+",w.xp," XP"]})]})]}),(0,o.jsx)("div",{style:{marginTop:"2rem"},children:(0,o.jsxs)("button",{onClick:()=>x(null),style:{background:w.leveledUp?"linear-gradient(135deg, #fbbf24, #f59e0b)":"guide"===w.type?"linear-gradient(135deg, #10b981, #059669)":"linear-gradient(135deg, #8b5cf6, #7c3aed)",color:"white",border:"none",borderRadius:"12px",padding:"1rem 2rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"0.5rem"},onMouseEnter:e=>e.target.style.transform="translateY(-2px)",onMouseLeave:e=>e.target.style.transform="translateY(0)",children:[(0,o.jsx)("span",{children:"\ud83c\udfae"}),(0,o.jsx)("span",{children:"Continuar Aventura"})]})})]})})]})},je=e=>{let{user:t,onBack:n,onSeriesSelect:s}=e;const[i,a]=(0,r.useState)({}),[l,c]=(0,r.useState)(!0),u=[{id:"a2-travel",title:"Aventuras de Viagem",subtitle:"Explore o Mundo com Ingl\xeas",description:"Domine conversas de viagem, interc\xe2mbios culturais e experi\xeancias internacionais",icon:"\u2708\ufe0f",totalLessons:10,accent:"#0ea5e9",difficulty:"Intermedi\xe1rio",time:"5-6 horas"},{id:"a2-tvshows",title:"S\xe9ries e Cultura",subtitle:"Entretenimento que Ensina",description:"Mergulhe na cultura moderna atrav\xe9s de s\xe9ries populares, tend\xeancias e entretenimento",icon:"\ud83d\udcfa",totalLessons:10,accent:"#a855f7",difficulty:"Intermedi\xe1rio",time:"5-6 horas"},{id:"a2-dating",title:"Relacionamentos",subtitle:"Navegue o Romance Moderno",description:"Aprenda vocabul\xe1rio de relacionamentos, cultura de namoro e express\xf5es emocionais",icon:"\ud83d\udc95",totalLessons:10,accent:"#ec4899",difficulty:"Intermedi\xe1rio",time:"5-6 horas"}];(0,r.useEffect)(()=>{(async()=>{if(null!==t&&void 0!==t&&t.username)try{var e;const n=await g(t.username);if(n.success&&null!==(e=n.student)&&void 0!==e&&e.progress){const e={};for(const t of u){const r=Object.entries(n.student.progress||{}).filter(e=>{let[n]=e;return n.startsWith(t.id)}).reduce((e,t)=>{let[n,r]=t;return r.completed&&(e.completedLessons+=1,e.totalXP+=r.xpEarned||0),e},{completedLessons:0,totalXP:0});e[t.id]=r}a(e)}else{const e={};u.forEach(t=>{e[t.id]={completedLessons:0,totalXP:0}}),a(e)}}catch(n){console.error("Error loading series progress:",n);const e={};u.forEach(t=>{e[t.id]={completedLessons:0,totalXP:0}}),a(e)}finally{c(!1)}else c(!1)})()},[null===t||void 0===t?void 0:t.username]);if(l)return(0,o.jsx)("div",{className:"selector-container",children:(0,o.jsxs)("div",{className:"elegant-loading",children:[(0,o.jsx)("div",{className:"loading-pulse"}),(0,o.jsx)("h2",{className:"loading-title",children:"Preparando sua Jornada A2"}),(0,o.jsx)("p",{className:"loading-subtitle",children:"Organizando experi\xeancias sofisticadas de aprendizado..."})]})});const d={totalCompleted:Object.values(i).reduce((e,t)=>e+t.completedLessons,0),totalXP:Object.values(i).reduce((e,t)=>e+t.totalXP,0),seriesStarted:Object.values(i).filter(e=>e.completedLessons>0).length,totalAvailable:u.length};return(0,o.jsxs)("div",{className:"selector-container",children:[(0,o.jsxs)("div",{className:"selector-header",children:[(0,o.jsx)("button",{onClick:n,className:"lessons-back-btn",children:"\u2190 Voltar ao Hub"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,o.jsx)("h1",{className:"selector-title",children:"\ud83c\udf93 S\xe9ries A2"}),(0,o.jsx)("span",{className:"lesson-a2-level-badge",children:"N\xedvel Intermedi\xe1rio"})]}),(0,o.jsx)("p",{className:"selector-subtitle",children:"Escolha uma s\xe9rie para come\xe7ar a aprender conversa\xe7\xe3o avan\xe7ada em ingl\xeas"}),(0,o.jsxs)("div",{className:"compact-stats-grid",children:[(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsx)("span",{className:"stat-number",children:d.totalCompleted}),(0,o.jsx)("span",{className:"stat-label",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsx)("span",{className:"stat-number",children:d.totalXP}),(0,o.jsx)("span",{className:"stat-label",children:"XP Total"})]}),(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsxs)("span",{className:"stat-number",children:[d.seriesStarted,"/",d.totalAvailable]}),(0,o.jsx)("span",{className:"stat-label",children:"S\xe9ries Ativas"})]}),(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsx)("span",{className:"stat-number",children:"A2"}),(0,o.jsx)("span",{className:"stat-label",children:"N\xedvel Atual"})]})]})]}),(0,o.jsx)("div",{className:"compact-series-grid",children:u.map(e=>{const t=((e,t)=>{const n=i[e];return n?Math.round(n.completedLessons/t*100):0})(e.id,e.totalLessons),n=i[e.id]||{completedLessons:0,totalXP:0};return(0,o.jsxs)("div",{onClick:()=>(e=>{s(e.id,e.title)})(e),className:"compact-series-card",style:{borderLeftColor:e.accent},children:[(0,o.jsxs)("div",{className:"compact-series-header",children:[(0,o.jsx)("div",{className:"series-icon-compact",style:{backgroundColor:`${e.accent}20`},children:e.icon}),(0,o.jsxs)("div",{className:"series-info-compact",children:[(0,o.jsx)("h3",{className:"compact-series-title",children:e.title}),(0,o.jsx)("p",{className:"compact-series-subtitle",children:e.subtitle})]}),(0,o.jsx)("div",{className:"series-meta-compact",children:(0,o.jsx)("span",{className:"difficulty-badge",style:{backgroundColor:`${e.accent}15`,color:e.accent},children:e.difficulty})})]}),(0,o.jsx)("p",{className:"compact-series-description",children:e.description}),(0,o.jsxs)("div",{className:"compact-progress-section",children:[(0,o.jsxs)("div",{className:"progress-info",children:[(0,o.jsxs)("span",{className:"progress-text",children:[n.completedLessons,"/",e.totalLessons," li\xe7\xf5es \u2022 ",t,"% completo"]}),n.totalXP>0&&(0,o.jsxs)("span",{className:"xp-badge-compact",style:{backgroundColor:`${e.accent}20`,color:e.accent},children:["+",n.totalXP," XP"]})]}),(0,o.jsx)("div",{className:"compact-progress-bar",children:(0,o.jsx)("div",{className:"compact-progress-fill",style:{width:`${t}%`,backgroundColor:e.accent}})})]}),(0,o.jsx)("button",{className:"compact-series-btn",style:{backgroundColor:e.accent,color:"white"},children:0===t?(0,o.jsx)(o.Fragment,{children:"\ud83d\ude80 Come\xe7ar S\xe9rie"}):100===t?(0,o.jsx)(o.Fragment,{children:"\ud83c\udf89 Revisar S\xe9rie"}):(0,o.jsxs)(o.Fragment,{children:["\ud83d\udcd6 Continuar (",n.completedLessons,"/",e.totalLessons,")"]})}),(0,o.jsxs)("div",{className:"series-details-compact",children:[(0,o.jsx)("div",{className:"detail-item",children:(0,o.jsxs)("span",{children:["\u23f1 ",e.time]})}),(0,o.jsx)("div",{className:"detail-item",children:(0,o.jsxs)("span",{children:["\ud83d\udcda ",e.totalLessons," li\xe7\xf5es"]})}),(0,o.jsx)("div",{className:"detail-item",children:(0,o.jsxs)("span",{children:["\u2b50 At\xe9 ",15*e.totalLessons," XP"]})})]})]},e.id)})}),(0,o.jsx)("div",{className:"compact-info-footer",children:(0,o.jsxs)("div",{className:"footer-content",children:[(0,o.jsx)("h3",{children:"\ud83c\udfaf Sobre o N\xedvel A2"}),(0,o.jsxs)("p",{children:["O n\xedvel A2 \xe9 ",(0,o.jsx)("strong",{children:"intermedi\xe1rio"}),", onde voc\xea aprender\xe1 conversas mais complexas, t\xf3picos culturais e cen\xe1rios do mundo real para avan\xe7ar sua flu\xeancia em ingl\xeas."]}),(0,o.jsxs)("div",{className:"footer-features",children:[(0,o.jsx)("span",{children:"\ud83c\udfaf Cen\xe1rios Reais"}),(0,o.jsx)("span",{children:"\ud83c\udf0d Imers\xe3o Cultural"}),(0,o.jsx)("span",{children:"\ud83d\ude80 Dom\xednio Progressivo"})]})]})})]})},Ae=[{id:"a2-travel-01",title:"First International Flight",description:"Nervous excitement of international travel",duration:"43s",icon:"\u2708\ufe0f",audioFile:"/audio/audiosA2/travel/audio-01-first-international-flight.mp3",level:"A2",questions:[{question:"How early did she arrive at the airport?",options:["Two hours","Three hours","Four hours","One hour"],correct:1},{question:"How many times did she check her passport?",options:["Ten times","Fifteen times","Twenty times","Five times"],correct:2},{question:"How long was the flight to Miami?",options:["Six hours","Seven hours","Eight hours","Nine hours"],correct:2},{question:"What made her feel magical when landing?",options:["The airplane food","The movies","Palm trees through windows","The customs process"],correct:2},{question:"How did the trip change her?",options:["Made her tired","Gave her courage to explore","Made her afraid","Made her homesick"],correct:1}]},{id:"a2-travel-02",title:"Lost in Tokyo Adventure",description:"Getting lost leads to amazing discoveries",duration:"45s",icon:"\ud83d\uddfe",audioFile:"/audio/audiosA2/travel/audio-02-lost-tokyo-adventure.mp3",level:"A2",questions:[{question:"What was she trying to find initially?",options:["A ramen shop","Shibuya crossing","Her hotel","A train station"],correct:1},{question:"How did she end up in the wrong place?",options:["Wrong train exit","Wrong train","Wrong map","Wrong directions"],correct:0},{question:"How did she communicate with the shop owner?",options:["Perfect Japanese","English only","Smiles, gestures, and Google Translate","She didn't communicate"],correct:2},{question:"What did the owner teach her?",options:["Japanese phrases","How to use chopsticks","How to cook ramen","Local history"],correct:1},{question:"How does she describe this experience?",options:["Frustrating","Expensive","Most authentic and memorable","Disappointing"],correct:2}]},{id:"a2-travel-03",title:"European Backpacking Journey",description:"Three-month adventure across Europe",duration:"46s",icon:"\ud83c\udf92",audioFile:"/audio/audiosA2/travel/audio-03-european-backpacking.mp3",level:"A2",questions:[{question:"How long was her European trip?",options:["Two months","Three months","Four months","Six months"],correct:1},{question:"What type of transportation pass did she use?",options:["Flight pass","Bus pass","Eurail pass","Car rental"],correct:2},{question:"Where did her hostel group organize a beach day?",options:["Barcelona","London","Germany","Italy"],correct:0},{question:"What happened to her train in Germany?",options:["It was cancelled","It got delayed and she missed connection","It was too expensive","It was crowded"],correct:1},{question:"How did the trip change her personality?",options:["Made her homesick","Made her tired","Made her independent and confident","Made her confused"],correct:2}]},{id:"a2-travel-04",title:"Business Trip to New York",description:"Professional success and city exploration",duration:"44s",icon:"\ud83c\udfd9\ufe0f",audioFile:"/audio/audiosA2/travel/audio-04-business-trip-newyork.mp3",level:"A2",questions:[{question:"Where were her business meetings located?",options:["Brooklyn","Manhattan","Queens","Times Square"],correct:1},{question:"What did her company give her for the weekend?",options:["Extra money","Extra time to explore","Extra meetings","Flight upgrade"],correct:1},{question:"Which Broadway show did she watch?",options:["Hamilton","Chicago","The Lion King","Phantom of the Opera"],correct:2},{question:"How many different types of food did she try from trucks?",options:["Two","Three","Four","Five"],correct:1},{question:"How did she feel returning home?",options:["Exhausted","Confused","Proud of her achievements","Disappointed"],correct:2}]},{id:"a2-travel-05",title:"Disney World Family Magic",description:"Magical family vacation experience",duration:"47s",icon:"\ud83c\udff0",audioFile:"/audio/audiosA2/travel/audio-05-disney-world-family.mp3",level:"A2",questions:[{question:"How old is her daughter?",options:["Six years old","Seven years old","Eight years old","Nine years old"],correct:2},{question:"How many Disney parks did they visit?",options:["Three","Four","Five","Two"],correct:1},{question:"Which ride was the highlight for the family?",options:["It's a Small World","Pirates of the Caribbean","Space Mountain","Haunted Mansion"],correct:2},{question:"What did her daughter collect during the trip?",options:["Postcards","Autographs from characters","Souvenirs","Photos"],correct:1},{question:"What happened during the fireworks show?",options:["They left early","It was cancelled","Everyone cried happy tears","It was too loud"],correct:2}]},{id:"a2-travel-06",title:"Solo Adventure in Thailand",description:"Empowering solo travel experience",duration:"45s",icon:"\ud83c\uddf9\ud83c\udded",audioFile:"/audio/audiosA2/travel/audio-06-solo-thailand-adventure.mp3",level:"A2",questions:[{question:"How long did she spend in Thailand?",options:["One week","Two weeks","Three weeks","One month"],correct:1},{question:"Which cities did she visit?",options:["Only Bangkok","Bangkok and Chiang Mai","Bangkok, Chiang Mai, and southern islands","Only the islands"],correct:2},{question:"What did she learn to cook in Chiang Mai?",options:["Pad thai","Thai curry","Fried rice","Som tam"],correct:1},{question:"What activity did she do with elephants?",options:["Riding them","Feeding them at a sanctuary","Taking photos","Watching shows"],correct:1},{question:"How does she describe herself after returning?",options:["Tired","Confused","Completely transformed","Homesick"],correct:2}]},{id:"a2-travel-07",title:"Road Trip Through Argentina",description:"Epic journey through South America",duration:"42s",icon:"\ud83d\ude97",audioFile:"/audio/audiosA2/travel/audio-07-argentina-road-trip.mp3",level:"A2",questions:[{question:"Where did they start their road trip?",options:["Mendoza","Buenos Aires","Patagonia","Iguazu Falls"],correct:1},{question:"What dance did they learn at the estancia?",options:["Salsa","Bachata","Tango","Flamenco"],correct:2},{question:"How long was their journey?",options:["Two weeks","Three weeks","Four weeks","One month"],correct:1},{question:"What improved during their trip?",options:["Her driving skills","Her Spanish","Her cooking","Her dancing"],correct:1},{question:"What happened when they got lost?",options:["They found gas stations","They discovered hidden gems","They called for help","They turned around"],correct:1}]},{id:"a2-travel-08",title:"Amazon Rainforest Expedition",description:"Incredible eco-adventure in Brazil",duration:"48s",icon:"\ud83c\udf33",audioFile:"/audio/audiosA2/travel/audio-08-amazon-rainforest.mp3",level:"A2",questions:[{question:"How did they reach the deep jungle?",options:["By car","By plane only","By boat from Manaus","By helicopter"],correct:2},{question:"How many days did the expedition last?",options:["Three days","Four days","Five days","One week"],correct:2},{question:"Where did they sleep in the jungle?",options:["In tents","In hotels","In hammocks","In cabins"],correct:2},{question:"What animals did they spot during the day?",options:["Only birds","Pink dolphins, toucans, and monkeys","Only monkeys","Snakes and spiders"],correct:1},{question:"What inspired her about this experience?",options:["To travel more","To become more environmentally conscious","To study biology","To move to the Amazon"],correct:1}]},{id:"a2-travel-09",title:"Study Abroad in Canada",description:"Transformative international education",duration:"46s",icon:"\ud83c\udf41",audioFile:"/audio/audiosA2/travel/audio-09-study-abroad-canada.mp3",level:"A2",questions:[{question:"Which university did she attend?",options:["University of Montreal","University of Toronto","McGill University","York University"],correct:1},{question:"How many countries were represented in her residence?",options:["Twenty countries","Twenty-five countries","Over thirty countries","Fifteen countries"],correct:2},{question:"What was the lowest temperature she experienced?",options:["Minus ten degrees","Minus fifteen degrees","Minus twenty degrees","Minus thirty degrees"],correct:2},{question:"What organization did she join at university?",options:["Drama club","Sports team","International student association","Debate society"],correct:2},{question:"How did she feel about returning to Brazil?",options:["Sad and homesick","Confident and excited about future","Confused and lost","Tired and stressed"],correct:1}]},{id:"a2-travel-10",title:"Maldives Honeymoon Paradise",description:"Romantic paradise getaway",duration:"44s",icon:"\ud83c\udfdd\ufe0f",audioFile:"/audio/audiosA2/travel/audio-10-maldives-honeymoon.mp3",level:"A2",questions:[{question:"What type of accommodation did they stay in?",options:["Beach bungalow","Hotel room","Overwater villa","Penthouse suite"],correct:2},{question:"What could they see through their glass floor?",options:["Coral reefs","Tropical fish","Sea turtles","Dolphins"],correct:1},{question:"What sea creatures did they swim with?",options:["Dolphins","Sharks","Manta rays","Whales"],correct:2},{question:"Where was their private dinner located?",options:["In their room","At the restaurant","On the beach","On a boat"],correct:2},{question:"What did the resort staff surprise them with daily?",options:["Breakfast in bed","Champagne and tropical flowers","Free activities","Sunset tours"],correct:1}]}],Pe=[{id:"a2-tvshows-01",title:"Netflix Binge Party",description:"Korean series obsession and friendship",duration:"45s",icon:"\ud83d\udcfa",audioFile:"/audio/audiosA2/tvshows/audio-01-netflix-binge-party.mp3",level:"A2",questions:[{question:"What did they wear during the party?",options:["Costumes","Matching pajamas","Formal clothes","Korean outfits"],correct:1},{question:"What did Sarah make for everyone?",options:["Korean food","Drinking games","Name tags with characters","Popcorn"],correct:2},{question:"Why did the neighbor come over?",options:["To join the party","They were too loud","To borrow something","To complain about parking"],correct:1},{question:"What show are they planning to watch next?",options:["Kingdom","Squid Game again","Something American","A documentary"],correct:0},{question:"How does she feel about binge-watching parties?",options:["They're okay","They're her new favorite activity","They're expensive","They're tiring"],correct:1}]},{id:"a2-tvshows-02",title:"Friends Reunion Celebration",description:"Generational bonding through classic TV",duration:"42s",icon:"\u2615",audioFile:"/audio/audiosA2/tvshows/audio-02-friends-reunion-celebration.mp3",level:"A2",questions:[{question:"Who did she watch the reunion with?",options:["Her friends","Her mom","Her sister","Alone"],correct:1},{question:"What was the best moment for her?",options:["The trivia game recreation","The theme song","Celebrity guests","Behind-the-scenes footage"],correct:0},{question:"What surprise did her mom give her?",options:["Tickets to a show","Central Perk coffee mugs","A Friends poster","Season DVDs"],correct:1},{question:"What are they planning for summer?",options:["Visit New York","Rewatch all seasons","Meet the cast","Learn the theme song"],correct:1},{question:"How does she end her story?",options:["With a quote from Ross","With a quote from Chandler","With a quote from Joey","With her own words"],correct:1}]},{id:"a2-tvshows-03",title:"Stranger Things Adventure",description:"80s nostalgia and cultural phenomenon",duration:"47s",icon:"\ud83d\udd2e",audioFile:"/audio/audiosA2/tvshows/audio-03-stranger-things-adventure.mp3",level:"A2",questions:[{question:"What did they name their WhatsApp group?",options:["Stranger Things Fans","The Party","Hawkins Squad","Upside Down"],correct:1},{question:"What food did they serve at their themed party?",options:["Pizza","Eggo waffles","Ice cream","Popcorn"],correct:1},{question:"Which character did her friend dress up as?",options:["Eleven","Mike","Dustin","Lucas"],correct:2},{question:"What happened to strangers at the grocery store?",options:["They asked for autographs","They took photos with her friend","They ran away","They didn't notice"],correct:1},{question:"How has the show affected her music taste?",options:["She stopped listening to music","She only listens to 80s music now","She discovered new bands","She learned to play guitar"],correct:2}]},{id:"a2-tvshows-04",title:"Breaking Bad Study Group",description:"Education meets entertainment",duration:"44s",icon:"\u2697\ufe0f",audioFile:"/audio/audiosA2/tvshows/audio-04-breaking-bad-study-group.mp3",level:"A2",questions:[{question:"When did they watch Breaking Bad episodes?",options:["During study sessions","Every Friday night after studying","Instead of studying","During chemistry class"],correct:1},{question:"How did their professor incorporate the show?",options:["Showed episodes in class","Used Walter White references for chemistry","Dressed like Walter","Assigned show analysis"],correct:1},{question:"What did they start calling their homework?",options:["Experiments","Projects","Cooking","Research"],correct:2},{question:"What did their study room become?",options:["The classroom","The lab","The office","The library"],correct:1},{question:"What did the show prove to them?",options:["Chemistry is boring","TV is better than studying","Serious dramas can bring friends together","They should change majors"],correct:2}]},{id:"a2-tvshows-05",title:"The Office Happiness Boost",description:"Workplace comedy as comfort viewing",duration:"46s",icon:"\ud83c\udfe2",audioFile:"/audio/audiosA2/tvshows/audio-05-office-happiness-boost.mp3",level:"A2",questions:[{question:"What does she watch when feeling stressed?",options:["Jim's pranks on Dwight","Michael's meetings","Pam's art","Office parties"],correct:0},{question:"What monthly tradition did her office start?",options:["Pizza parties","Dundie Awards","Team building","Movie nights"],correct:1},{question:"What did they buy for their manager?",options:["Office supplies","A plant","World's Best Boss mug","A picture frame"],correct:2},{question:"Who in her family loves the show most now?",options:["Her siblings","Her parents","Her cousins","Her grandparents"],correct:1},{question:"What lesson does The Office teach according to her?",options:["Work is hard","Laughter is the best medicine","Love conquers all","Success matters most"],correct:1}]},{id:"a2-tvshows-06",title:"Game of Thrones Epic Experience",description:"Epic fantasy and viewing party culture",duration:"48s",icon:"\ud83d\udc09",audioFile:"/audio/audiosA2/tvshows/audio-06-game-thrones-epic.mp3",level:"A2",questions:[{question:"How long did she host viewing parties?",options:["One year","Five years","Eight years","Ten years"],correct:2},{question:"How did they prepare for episodes?",options:["Just watched","Dressed up and prepared feasts","Read books","Looked up spoilers"],correct:1},{question:"How did they react to the Red Wedding initially?",options:["They cheered","They sat in silence","They turned off the TV","They called friends"],correct:1},{question:"Where are they planning to travel?",options:["Ireland","Croatia","Spain","Iceland"],correct:1},{question:"What does she say about the show's lasting impact?",options:["It was just entertainment","It created lasting friendships and memories","It was too expensive","It was too long"],correct:1}]},{id:"a2-tvshows-07",title:"Money Heist Language Adventure",description:"Learning Spanish through entertainment",duration:"43s",icon:"\ud83c\uddea\ud83c\uddf8",audioFile:"/audio/audiosA2/tvshows/audio-07-money-heist-spanish.mp3",level:"A2",questions:[{question:"How has her subtitle usage changed?",options:["Still uses English","Uses Spanish","Watches without subtitles","Uses multiple languages"],correct:2},{question:"What did the show inspire her to join?",options:["Spanish cooking class","Spanish conversation club","Spanish dance group","Spanish film club"],correct:1},{question:"What phrase does she now use in class?",options:["Hola amigos","No es solo dinero, es dignidad","Bella ciao","Hasta la vista"],correct:1},{question:"What other shows has she completed?",options:["Only Money Heist","Elite and Money Heist Korea","Spanish news","Telenovelas"],correct:1},{question:"What learning method does she endorse?",options:["Traditional textbooks","Grammar drills","Learning through entertainment","Memorization"],correct:2}]},{id:"a2-tvshows-08",title:"The Crown Royal Fascination",description:"Historical drama and British culture",duration:"45s",icon:"\ud83d\udc51",audioFile:"/audio/audiosA2/tvshows/audio-08-crown-royal-fascination.mp3",level:"A2",questions:[{question:"What aspect of the show impresses her most?",options:["The acting","The cinematography and historical detail","The music","The length"],correct:1},{question:"Whose fashion has influenced her style?",options:["Queen Elizabeth","Princess Margaret","Princess Diana","Camilla"],correct:2},{question:"What do she and her grandmother do weekly?",options:["Cook together","Have Crown conversations","Shop for clothes","Watch other shows"],correct:1},{question:"What trip are they planning?",options:["Scotland","Ireland","London","Paris"],correct:2},{question:"What is she considering studying?",options:["Fashion design","Film production","European history","British literature"],correct:2}]},{id:"a2-tvshows-09",title:"Marvel Universe Excitement",description:"Superhero storytelling and creativity",duration:"41s",icon:"\ud83e\uddb8\u200d\u2640\ufe0f",audioFile:"/audio/audiosA2/tvshows/audio-09-marvel-universe-excitement.mp3",level:"A2",questions:[{question:"Which Marvel show impressed her with creativity?",options:["Loki","WandaVision","Falcon and Winter Soldier","Hawkeye"],correct:1},{question:"What have she and her friends planned for summer?",options:["Beach trips","Marvel movie marathon with costumes","Study sessions","Work internships"],correct:1},{question:"What event are they planning to attend?",options:["Movie premiere","Marvel convention","Comic-Con","Costume party"],correct:2},{question:"What has her little brother started doing?",options:["Watching more TV","Drawing superhero comics","Reading books","Playing video games"],correct:1},{question:"How does she describe Marvel's impact?",options:["Just entertainment","Expensive hobby","Imagination fuel that inspires creativity","Time waster"],correct:2}]},{id:"a2-tvshows-10",title:"Building Community Through TV",description:"International friendships through shared viewing",duration:"47s",icon:"\ud83c\udf0d",audioFile:"/audio/audiosA2/tvshows/audio-10-building-community-tv.mp3",level:"A2",questions:[{question:"How often does she host watch parties?",options:["Daily","Weekly","Monthly","Randomly"],correct:1},{question:"What special treat did someone bring for The Queen's Gambit?",options:["Chess-shaped cookies","Russian food","Wine","Popcorn"],correct:0},{question:"How many different countries are represented in her group?",options:["Three","Four","Five","Six"],correct:1},{question:"How has this experience helped her personally?",options:["Saved money","Improved English and learned about cultures","Got better at cooking","Made her famous"],correct:1},{question:"What does she call her apartment on Thursdays?",options:["Movie theater","Entertainment headquarters","International center","Study hall"],correct:1}]}],Re=[{id:"a2-dating-01",title:"Dating App Success Story",description:"Finding genuine love through modern technology",duration:"44s",icon:"\ud83d\udc95",audioFile:"/audio/audiosA2/dating/audio-01-dating-app-success.mp3",level:"A2",script:"I finally found love on a dating app after six months of terrible first dates! My current boyfriend and I matched on Bumble in January, and our first conversation lasted four hours because we discovered we both love Italian food and vintage movies. Our first date was at this cozy coffee shop downtown, and he brought me sunflowers because he remembered I mentioned them in my profile. What impressed me most was how genuine and funny he was - no pretending to be someone else! We've been together for eight months now, and he still sends me good morning texts every single day. My friends were skeptical about online dating, but this experience taught me that real connections can happen anywhere when you're open and authentic!",questions:[{question:"How long did she try dating apps before finding her boyfriend?",options:["Three months","Six months","One year","Two years"],correct:1},{question:"Which dating app did they meet on?",options:["Tinder","Bumble","Instagram","Facebook"],correct:1},{question:"What flowers did he bring on their first date?",options:["Roses","Tulips","Sunflowers","Daisies"],correct:2},{question:"How long have they been together now?",options:["Six months","Eight months","One year","Two years"],correct:1},{question:"What does he still do every day?",options:["Calls her","Sends good morning texts","Brings flowers","Takes her to dinner"],correct:1}]},{id:"a2-dating-02",title:"Meeting His Brazilian Family",description:"Cultural integration and family acceptance",duration:"46s",icon:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66",audioFile:"/audio/audiosA2/dating/audio-02-meeting-brazilian-family.mp3",level:"A2",script:"Meeting my boyfriend's Brazilian family for the first time was both exciting and terrifying! I spent weeks practicing Portuguese phrases and learning about Brazilian culture because I wanted to make a good impression. When we arrived at his family's house in S\xe3o Paulo, his mother immediately hugged me like I was already part of the family. His grandmother taught me how to make traditional chocolate truffles, and his little sister showed me Brazilian dances in the living room. The language barrier was challenging at first, but everyone was so patient and kind that I felt comfortable using my basic Portuguese. By the end of the weekend, his father was calling me 'daughter' and his mother was planning our next visit! This experience showed me that love and warmth transcend language differences.",questions:[{question:"What did she practice before meeting his family?",options:["Cooking recipes","Portuguese phrases","Brazilian dances","Family traditions"],correct:1},{question:"Where does his family live?",options:["Rio de Janeiro","S\xe3o Paulo","Bras\xedlia","Salvador"],correct:1},{question:"What did his grandmother teach her?",options:["Portuguese grammar","How to make traditional chocolate truffles","Brazilian songs","Family history"],correct:1},{question:"What did his father start calling her?",options:["Friend","Sweetheart","Daughter","Princess"],correct:2},{question:"What lesson did this experience teach her?",options:["Portuguese is easy","Families are complicated","Love transcends language differences","Culture is important"],correct:2}]},{id:"a2-dating-03",title:"Long Distance Love Success",description:"Maintaining connection across continents",duration:"47s",icon:"\ud83c\udf0d",audioFile:"/audio/audiosA2/dating/audio-03-long-distance-love.mp3",level:"A2",script:"My long-distance relationship with someone from Canada has been the most rewarding challenge of my life! We met during my exchange program in Toronto and maintained our connection for two years across different time zones. Every morning I wake up to sweet voice messages he recorded before going to bed, and we have virtual dinner dates where we cook the same recipe together over video call. The time difference means I'm starting my day when he's ending his, but we've learned to appreciate these special moments even more. We visit each other every few months, and each reunion feels like a celebration! Next month he's moving to Brazil permanently because he got a job offer in S\xe3o Paulo. This experience taught me that true love can overcome any distance when both people are committed!",questions:[{question:"How long have they maintained their long-distance relationship?",options:["One year","Two years","Three years","Six months"],correct:1},{question:"How do they have dinner dates?",options:["At restaurants","With friends","Cooking together over video call","Ordering delivery"],correct:2},{question:"How often do they visit each other?",options:["Every month","Every few months","Once a year","Every week"],correct:1},{question:"Why is he moving to Brazil?",options:["For vacation","To study","He got a job offer","To learn Portuguese"],correct:2},{question:"What lesson did this experience teach her?",options:["Distance doesn't matter","True love overcomes distance with commitment","Technology solves everything","Moving is easy"],correct:1}]},{id:"a2-dating-04",title:"Moving In Together Adventure",description:"Next steps in relationship commitment",duration:"45s",icon:"\ud83c\udfe0",audioFile:"/audio/audiosA2/dating/audio-04-moving-in-together.mp3",level:"A2",script:"Moving in together with my boyfriend was like starting an exciting new chapter of our relationship! We spent weekends visiting apartments in different neighborhoods until we found the perfect place with a beautiful balcony and space for both our hobbies. Combining our furniture was hilarious - his modern style and my vintage preferences created the most eclectic and cozy home imaginable! We established house rules like taking turns cooking dinner and having designated 'me time' spaces for when we need solitude. The first month had its challenges, like discovering he leaves dishes in the sink and I take forever to choose what to wear, but we learned to communicate and compromise. Now after six months of living together, I can't imagine coming home to anyone else!",questions:[{question:"What feature did their perfect apartment have?",options:["Big kitchen","Beautiful balcony","Swimming pool","Garage"],correct:1},{question:"How would she describe their furniture combination?",options:["Modern only","Vintage only","Eclectic and cozy","Minimalist"],correct:2},{question:"What house rule did they establish for dinner?",options:["Order takeout","Take turns cooking","Cook together always","Eat separately"],correct:1},{question:"What habit of his did she discover?",options:["Snores loudly","Wakes up early","Leaves dishes in sink","Watches TV late"],correct:2},{question:"How long have they been living together now?",options:["Three months","Six months","One year","Two years"],correct:1}]},{id:"a2-dating-05",title:"Learning Each Other's Languages",description:"Growing together through language exchange",duration:"43s",icon:"\ud83d\udde3\ufe0f",audioFile:"/audio/audiosA2/dating/audio-05-learning-languages.mp3",level:"A2",script:"Teaching my boyfriend Portuguese while he helps me improve my English has become our favorite bonding activity! Every evening we dedicate thirty minutes to language exchange - I explain Portuguese grammar while he corrects my English pronunciation. He's obsessed with learning Brazilian expressions and always asks me to teach him new slang words to impress my friends. Last week he surprised my family by greeting them with perfect Portuguese when we had dinner together! Meanwhile, my English has improved so much that I got promoted at work because I can now confidently participate in international meetings. We watch movies with subtitles in both languages and play word games that make learning feel like playing together. This shared learning journey has brought us closer and given us tools to explore the world together!",questions:[{question:"How much time do they dedicate to language exchange daily?",options:["Fifteen minutes","Thirty minutes","One hour","Two hours"],correct:1},{question:"What is he obsessed with learning?",options:["Grammar rules","Brazilian expressions","Writing skills","Literature"],correct:1},{question:"How did he surprise her family?",options:["Cooked Brazilian food","Sang in Portuguese","Greeted them in perfect Portuguese","Brought gifts"],correct:2},{question:"What happened to her at work because of improved English?",options:["She got fired","She got promoted","She changed jobs","She got a raise"],correct:1},{question:"What activities help them learn together?",options:["Only watching movies","Only playing games","Movies with subtitles and word games","Reading books"],correct:2}]},{id:"a2-dating-06",title:"Cultural Differences Discovery",description:"Embracing different worldviews in love",duration:"46s",icon:"\ud83c\udf0e",audioFile:"/audio/audiosA2/dating/audio-06-cultural-differences.mp3",level:"A2",script:"Navigating cultural differences with my international boyfriend has been such a beautiful learning experience! He's from Germany, and initially I was surprised by how direct and punctual he is - very different from Brazilian flexibility with time and indirect communication. I taught him about our Brazilian way of finding creative solutions and how we express affection through physical touch, while he showed me the value of planning ahead and being straightforward about feelings. Our dinner conversations became cultural exchange sessions where we share stories about our childhood traditions, family values, and social customs. The most amusing difference is food - he was shocked by how much rice and beans we eat, while I couldn't believe Germans eat bread for dinner! These differences have enriched our relationship and opened my mind to new perspectives about life, love, and family!",questions:[{question:"What nationality is her boyfriend?",options:["American","German","French","Italian"],correct:1},{question:"What Brazilian concept did she teach him?",options:["Samba dancing","Football passion","Brazilian way of finding creative solutions","Carnival traditions"],correct:2},{question:"What surprised him about Brazilian food habits?",options:["Eating late dinners","How much rice and beans they eat","Using lots of spices","Drinking coffee all day"],correct:1},{question:"What surprised her about German food habits?",options:["No breakfast","Eating bread for dinner","Drinking beer daily","Small portions"],correct:1},{question:"How do these differences affect their relationship?",options:["They cause problems","They're ignored","They enrich and open minds","They're confusing"],correct:2}]},{id:"a2-dating-07",title:"Anniversary Celebration Planning",description:"Commemorating relationship milestones",duration:"44s",icon:"\ud83c\udf89",audioFile:"/audio/audiosA2/dating/audio-07-anniversary-celebration.mp3",level:"A2",script:"Planning our first anniversary celebration was the most romantic project we've ever worked on together! We decided to recreate our very first date but with improvements based on everything we've learned about each other. Instead of the coffee shop where we first met, we're having a picnic in the botanical gardens with all his favorite foods and my favorite flowers. I'm preparing a photo album with pictures from every month we've been together, and he's writing me a song on his guitar about our adventures. We're also planning to plant a tree together as a symbol of our growing relationship - something that will continue to flourish just like our love! The best part is how excited we both are to celebrate this milestone and plan many more anniversaries in the future!",questions:[{question:"What are they recreating for their anniversary?",options:["Their wedding","Their first date","Their first trip","Their first fight"],correct:1},{question:"Where are they having their celebration?",options:["Coffee shop","Restaurant","Botanical gardens","Beach"],correct:2},{question:"What is she preparing as a gift?",options:["A song","A photo album","A painting","A book"],correct:1},{question:"What is he creating for her?",options:["A photo album","A song on guitar","A painting","A poem"],correct:1},{question:"What will they plant together as a symbol?",options:["Flowers","A tree","Vegetables","Herbs"],correct:1}]},{id:"a2-dating-08",title:"First Vacation Together",description:"Travel adventures as a couple",duration:"48s",icon:"\ud83c\udfd6\ufe0f",audioFile:"/audio/audiosA2/dating/audio-08-first-vacation-together.mp3",level:"A2",script:"Our first vacation together to Florian\xf3polis was absolutely magical and taught us so much about traveling as a couple! We spent a week exploring beautiful beaches, trying local seafood restaurants, and learning to surf together. The best part was discovering how well we complement each other - I'm the planner who researches activities while he's spontaneous and finds hidden local gems. When it rained for two days, instead of being disappointed, we turned it into a cozy indoor adventure with board games, movie marathons, and cooking regional dishes in our rental apartment kitchen. We took hundreds of photos, collected seashells, and even learned some local expressions from friendly islanders. By the end of the trip, we were already planning our next adventure together and talking about all the places we want to explore as a team!",questions:[{question:"Where did they go for their first vacation together?",options:["Rio de Janeiro","S\xe3o Paulo","Florian\xf3polis","Salvador"],correct:2},{question:"What new activity did they learn together?",options:["Cooking","Surfing","Dancing","Fishing"],correct:1},{question:"How do they complement each other while traveling?",options:["She plans, he finds hidden gems","He plans, she finds gems","They do everything together","They travel separately"],correct:0},{question:"What did they do when it rained for two days?",options:["Stayed in bed","Went shopping","Had indoor adventures with games and movies","Argued about plans"],correct:2},{question:"What were they doing by the end of the trip?",options:["Fighting about money","Planning their next adventure","Wanting to go home","Feeling tired of each other"],correct:1}]},{id:"a2-dating-09",title:"Meeting Each Other's Friends",description:"Social integration and group acceptance",duration:"45s",icon:"\ud83d\udc65",audioFile:"/audio/audiosA2/dating/audio-09-meeting-friends.mp3",level:"A2",script:"Introducing my boyfriend to my close friend group was nerve-wracking but turned out perfectly! I was worried because my friends are very protective of me and tend to be skeptical of new boyfriends. We organized a barbecue at my friend Ana's house so everyone could meet in a relaxed, casual environment. Within an hour, he was playing football with the guys and helping the girls prepare salads in the kitchen - completely natural and charming! My friend Carol, who's usually the toughest critic, whispered to me that she approved because he 'has kind eyes and makes you glow.' The evening ended with everyone exchanging Instagram accounts and making plans for future group activities. My friends told me later that they've never seen me so happy and confident in a relationship!",questions:[{question:"Why was she nervous about introducing him to her friends?",options:["Her friends are protective and skeptical","He's shy","Her friends don't like foreigners","They live far away"],correct:0},{question:"Where did they organize the meeting?",options:["Restaurant","Her apartment","Ana's house for barbecue","Park"],correct:2},{question:"What activities was he doing within an hour?",options:["Just talking","Playing football and helping in kitchen","Watching TV","Using his phone"],correct:1},{question:"Which friend is usually the toughest critic?",options:["Ana","Carol","Maria","Sandra"],correct:1},{question:"What did her friends say about her in this relationship?",options:["She's different","They've never seen her so happy and confident","She talks too much","She's acting strange"],correct:1}]},{id:"a2-dating-10",title:"Building Our Future Together",description:"Planning life dreams as a partnership",duration:"47s",icon:"\ud83d\udd2e",audioFile:"/audio/audiosA2/dating/audio-10-building-future.mp3",level:"A2",script:"Talking about our future plans together has been the most exciting and meaningful conversation topic in our relationship! We spend Sunday mornings in bed discussing our dreams - from the house we want to buy with a big garden for our future dog, to the countries we want to visit and the languages we want to learn together. He wants to start a small business while I'm considering pursuing a master's degree, and we're figuring out how to support each other's ambitions. We've started a shared savings account for our 'dream fund' and take turns contributing ideas to our vision board filled with photos of our goals. The most beautiful part is how our individual dreams have started weaving together into shared dreams that make us both excited about the future. Every conversation about tomorrow makes me fall in love with him and our possibilities all over again!",questions:[{question:"When do they usually have these future planning conversations?",options:["Sunday mornings in bed","During dinner","On weekends","Before sleep"],correct:0},{question:"What kind of house do they want to buy?",options:["Apartment downtown","House with big garden","Beach house","Mountain cabin"],correct:1},{question:"What is he considering for his career?",options:["Master's degree","Starting a small business","Traveling","New job"],correct:1},{question:"What have they created together for their goals?",options:["Business plan","Travel itinerary","Vision board","Investment portfolio"],correct:2},{question:"How do these conversations affect her feelings?",options:["Make her nervous","Make her fall in love all over again","Stress her out","Confuse her about the future"],correct:1}]}],Le=e=>{let{user:t,seriesId:n,seriesTitle:s,onBack:i,onLessonSelect:a}=e;const[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)({}),[h,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{(async()=>{try{let r=[];"a2-travel"===n?r=Ae||[]:"a2-tvshows"===n?r=Pe||[]:"a2-dating"===n&&(r=Re||[]);const s=r.filter(e=>{var t,n;return(null===(t=e.id)||void 0===t?void 0:t.startsWith("a2-"))&&(null===(n=e.audioFile)||void 0===n?void 0:n.includes("audiosA2"))});if(c(s),null!==t&&void 0!==t&&t.username){var e;const r=await g(t.username);if(r.success&&null!==(e=r.student)&&void 0!==e&&e.progress){const e=Object.entries(r.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(n)}).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{});d(e)}}}catch(r){console.error("Error loading lesson data:",r),c([])}finally{p(!1)}})()},[n,null===t||void 0===t?void 0:t.username]);if(h)return(0,o.jsx)("div",{className:"lessons-container",children:(0,o.jsxs)("div",{className:"elegant-loading",children:[(0,o.jsx)("div",{className:"loading-pulse"}),(0,o.jsx)("h2",{className:"loading-title",children:"Preparando suas Li\xe7\xf5es"}),(0,o.jsx)("p",{className:"loading-subtitle",children:"Organizando o conte\xfado perfeito para voc\xea..."})]})});const m=(()=>{const e=l.filter(e=>{var t;return null===(t=u[e.id])||void 0===t?void 0:t.completed}).length;return{completedCount:e,totalXP:Object.values(u).reduce((e,t)=>e+(t.xpEarned||0),0),completionPercent:l.length>0?Math.round(e/l.length*100):0}})(),f="a2-travel"===n?{icon:"\u2708\ufe0f",accent:"#0ea5e9",title:"Aventuras de Viagem"}:"a2-tvshows"===n?{icon:"\ud83d\udcfa",accent:"#a855f7",title:"S\xe9ries e Cultura"}:"a2-dating"===n?{icon:"\ud83d\udc95",accent:"#ec4899",title:"Relacionamentos"}:{icon:"\ud83c\udf93",accent:"#64748b",title:"Li\xe7\xf5es A2"};return(0,o.jsxs)("div",{className:"lessons-container",children:[(0,o.jsxs)("div",{className:"lessons-header",children:[(0,o.jsx)("button",{onClick:i,className:"lessons-back-btn",children:"\u2190 Voltar \xe0s S\xe9ries A2"}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,o.jsxs)("h1",{className:"lessons-title",children:[f.icon," ",f.title]}),(0,o.jsx)("span",{className:"lesson-a2-level-badge",style:{backgroundColor:f.accent},children:"A2"})]}),(0,o.jsxs)("p",{className:"selector-subtitle",children:["Escolha uma li\xe7\xe3o para come\xe7ar a aprender. ID da s\xe9rie: ",n]}),(0,o.jsxs)("div",{className:"compact-stats-grid",children:[(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsx)("span",{className:"stat-number",children:l.length}),(0,o.jsx)("span",{className:"stat-label",children:"Total de Li\xe7\xf5es"})]}),(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsx)("span",{className:"stat-number",children:m.completedCount}),(0,o.jsx)("span",{className:"stat-label",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsx)("span",{className:"stat-number",children:m.totalXP}),(0,o.jsx)("span",{className:"stat-label",children:"XP Ganho"})]}),(0,o.jsxs)("div",{className:"compact-stat",children:[(0,o.jsxs)("span",{className:"stat-number",children:[m.completionPercent,"%"]}),(0,o.jsx)("span",{className:"stat-label",children:"Progresso"})]})]}),(0,o.jsxs)("div",{className:"compact-progress-section",children:[(0,o.jsxs)("div",{className:"progress-info",children:[(0,o.jsx)("span",{className:"progress-text",children:"Progresso da S\xe9rie"}),(0,o.jsxs)("span",{className:"progress-percentage",children:[m.completionPercent,"%"]})]}),(0,o.jsx)("div",{className:"compact-progress-bar",children:(0,o.jsx)("div",{className:"compact-progress-fill",style:{width:`${m.completionPercent}%`,backgroundColor:f.accent}})})]})]}),(0,o.jsx)("div",{className:"compact-lessons-grid",children:l.map((e,t)=>{var r,s;const i=(e=>{var t,n;if(0===e)return!0;const r=null===(t=l[e-1])||void 0===t?void 0:t.id;return(null===(n=u[r])||void 0===n?void 0:n.completed)||!1})(t),c=(e=>{const t=u[e.id];return t?{status:t.completed?"completed":"in-progress",score:t.score||0,xp:t.xpEarned||0}:{status:"not-started",score:0,xp:0}})(e);return(0,o.jsxs)("div",{onClick:()=>i?(e=>{var t,r;null!==(t=e.id)&&void 0!==t&&t.startsWith("a2-")&&null!==(r=e.audioFile)&&void 0!==r&&r.includes("audiosA2")&&a(e,n)})(e):null,className:`compact-lesson-card ${i?"unlocked":"locked"} ${c.status}`,style:{borderLeftColor:f.accent,opacity:i?1:.6,cursor:i?"pointer":"not-allowed"},children:[(0,o.jsxs)("div",{className:"compact-lesson-header",children:[(0,o.jsx)("div",{className:`compact-lesson-number ${c.status}`,style:{backgroundColor:i?f.accent:"#94a3b8"},children:"completed"===c.status?(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}):(0,o.jsx)("span",{children:t+1})}),(0,o.jsxs)("div",{className:"compact-lesson-info",children:[(0,o.jsx)("h3",{className:"compact-lesson-title",children:e.title}),(0,o.jsx)("p",{className:"compact-lesson-description",children:e.description||"Li\xe7\xe3o de ingl\xeas n\xedvel A2"})]}),(0,o.jsx)("div",{className:"compact-lesson-status",children:i?"completed"===c.status?"\u2705":"\ud83d\udcda":"\ud83d\udd12"})]}),(0,o.jsxs)("div",{className:"compact-lesson-meta",children:[(0,o.jsxs)("div",{className:"meta-item",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",style:{color:f.accent},children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,o.jsx)("span",{children:e.duration||"4:00"})]}),(0,o.jsxs)("div",{className:"meta-item",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",style:{color:f.accent},children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,o.jsxs)("span",{children:[(null===(r=e.questions)||void 0===r?void 0:r.length)||0," perguntas"]})]}),(0,o.jsxs)("div",{className:"meta-item accent",children:[(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",style:{color:f.accent},children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsxs)("span",{children:["+",15*((null===(s=e.questions)||void 0===s?void 0:s.length)||0)," XP"]})]})]}),(0,o.jsx)("div",{className:"compact-lesson-footer",children:i?"completed"===c.status?(0,o.jsxs)("div",{className:"footer-completed",children:[(0,o.jsxs)("div",{className:"completion-stats-compact",children:[(0,o.jsxs)("span",{className:"score-badge-compact",style:{backgroundColor:`${f.accent}20`,color:f.accent},children:[c.score,"%"]}),(0,o.jsxs)("span",{className:"xp-badge-compact",style:{backgroundColor:`${f.accent}20`,color:f.accent},children:["+",c.xp," XP"]})]}),(0,o.jsx)("span",{className:"completion-text",style:{color:f.accent},children:"Excelente trabalho!"})]}):(0,o.jsxs)("div",{className:"footer-available",children:[(0,o.jsx)("span",{className:"start-text",children:"Pronto para aprender"}),(0,o.jsx)("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{color:f.accent},children:(0,o.jsx)("path",{d:"M9 5l7 7-7 7"})})]}):(0,o.jsx)("div",{className:"footer-locked",children:(0,o.jsx)("span",{children:"Complete a li\xe7\xe3o anterior para desbloquear"})})})]},e.id)})}),l.length>0&&(0,o.jsxs)("div",{className:"compact-series-summary",style:{borderLeftColor:f.accent},children:[(0,o.jsxs)("div",{className:"summary-content-compact",children:[(0,o.jsx)("div",{className:"summary-icon-compact",children:f.icon}),(0,o.jsxs)("div",{className:"summary-text-compact",children:[(0,o.jsx)("h3",{className:"summary-title-compact",children:m.completedCount===l.length?"\ud83c\udf89 S\xe9rie Completa!":l.length-m.completedCount+" li\xe7\xf5es restantes"}),(0,o.jsx)("p",{className:"summary-description-compact",children:m.completedCount===l.length?"Parab\xe9ns! Voc\xea dominou esta s\xe9rie A2. Suas habilidades em ingl\xeas melhoraram significativamente!":`Continue sua jornada para completar ${f.title} e desbloquear habilidades avan\xe7adas em ingl\xeas.`})]})]}),(0,o.jsxs)("div",{className:"summary-progress-compact",children:[(0,o.jsx)("div",{className:"compact-progress-bar",children:(0,o.jsx)("div",{className:"compact-progress-fill",style:{width:`${m.completionPercent}%`,backgroundColor:f.accent}})}),(0,o.jsxs)("span",{className:"summary-percentage",children:[m.completionPercent,"% completo"]})]})]})]})},Oe=[.75,1,1.25,1.5];function Me(e){const t=Math.max(0,Math.floor(Number(e||0)));return`${Math.floor(t/60)}:${String(t%60).padStart(2,"0")}`}const De=e=>{let{audioRef:t,lesson:n,seriesId:s,isPlaying:i,setIsPlaying:a,currentTime:l,duration:c,progress:u,audioLoaded:d,playbackRate:h,setPlaybackRate:p}=e;const m=(0,r.useMemo)(()=>function(e,t){var n,r;const s="/teacher-alex-academy",i=(null===e||void 0===e?void 0:e.audioFile)||(null===e||void 0===e?void 0:e.audio)||"";if(i&&/^https?:\/\//.test(i))return i;if(i&&i.includes("/"))return`${s}/${i.replace(/^\//,"")}`;const o="a2-tvshows"===t?"tvshows":"a2-dating"===t?"dating":"travel",a=((null===e||void 0===e||null===(n=e.id)||void 0===n||null===(r=n.match(/(\d+)$/))||void 0===r?void 0:r[1])||1)-1;return`${s}/audio/audiosA2/${o}/audio-${String(a+1).padStart(2,"0")}-lesson.mp3`}(n,s),[n,s]),f=function(e){return{"a2-travel":{primary:"#0ea5e9"},"a2-tvshows":{primary:"#a855f7"},"a2-dating":{primary:"#ec4899"}}[e]||{primary:"#3b82f6"}}(s);(0,r.useEffect)(()=>{const e=null===t||void 0===t?void 0:t.current;if(e)try{e.pause(),e.currentTime=0,a(!1)}catch(n){console.error("Audio reset error:",n)}},[m,t,a]),(0,r.useEffect)(()=>{const e=null===t||void 0===t?void 0:t.current;if(e)try{e.playbackRate=Number(h||1)}catch(n){console.error("Audio config error:",n)}},[t,h]);const g=e=>{const n=null===t||void 0===t?void 0:t.current;if(n&&d)try{const t=Math.max(0,Math.min(c,l+e));n.currentTime=t}catch(r){console.error("Skip error:",r)}};return(0,o.jsxs)("div",{className:"elegant-audio-player",style:{"--theme-color":f.primary},children:[(0,o.jsx)("audio",{ref:t,preload:"metadata",src:m}),(0,o.jsxs)("div",{className:"player-container",children:[(0,o.jsx)("div",{className:"lesson-info",children:(0,o.jsx)("h4",{children:(null===n||void 0===n?void 0:n.title)||"Audio Lesson"})}),(0,o.jsxs)("div",{className:"time-display",children:[(0,o.jsx)("span",{className:"current-time",children:Me(l)}),(0,o.jsx)("span",{className:"separator",children:"/"}),(0,o.jsx)("span",{className:"total-time",children:Me(c)})]}),(0,o.jsx)("div",{className:"progress-section",children:(0,o.jsxs)("div",{className:"progress-bar",onClick:e=>{const n=null===t||void 0===t?void 0:t.current;if(!n||!d)return;const r=e.currentTarget.getBoundingClientRect(),s=(e.clientX-r.left)/r.width*c;try{n.currentTime=Math.max(0,Math.min(c,s))}catch(e){console.error("Progress click error:",e)}},children:[(0,o.jsx)("div",{className:"progress-fill",style:{width:`${Math.max(0,Math.min(100,u||0))}%`}}),(0,o.jsx)("div",{className:"progress-thumb",style:{left:`${Math.max(0,Math.min(100,u||0))}%`}})]})}),(0,o.jsxs)("div",{className:"main-controls",children:[(0,o.jsxs)("div",{className:"control-group",children:[(0,o.jsx)("button",{className:"control-btn skip-btn",onClick:()=>g(-10),disabled:!d,"aria-label":"Voltar 10 segundos",children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12,5V1L7,6L12,11V7A6,6 0 0,1 18,13A6,6 0 0,1 12,19A6,6 0 0,1 6,13H4A8,8 0 0,0 12,21A8,8 0 0,0 20,13A8,8 0 0,0 12,5M8,13A0.5,0.5 0 0,0 8.5,13.5H9.5V15H8V16H10V12H8.5A0.5,0.5 0 0,0 8,12.5V13M12.5,12H11V16H12.5A1.5,1.5 0 0,0 14,14.5V13.5A1.5,1.5 0 0,0 12.5,12M12.5,13V15H12V13H12.5Z"})})}),(0,o.jsx)("span",{className:"skip-label",children:"-10s"})]}),(0,o.jsx)("button",{className:"control-btn play-btn",onClick:async()=>{const e=null===t||void 0===t?void 0:t.current;if(e&&d)try{if(i)e.pause(),a(!1);else{e.muted=!1,e.volume=1;const t=e.play();void 0!==t?(await t,a(!0)):a(!0)}}catch(n){console.error("Play/pause error:",n),"NotAllowedError"===n.name?console.warn("Autoplay blocked by browser policy"):"AbortError"===n.name&&e.load()}},disabled:!d,"aria-label":i?"Pausar":"Reproduzir",children:i?(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M14,19H18V5H14M6,19H10V5H6V19Z"})}):(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M8,5.14V19.14L19,12.14L8,5.14Z"})})}),(0,o.jsxs)("div",{className:"control-group",children:[(0,o.jsx)("button",{className:"control-btn skip-btn",onClick:()=>g(10),disabled:!d,"aria-label":"Avan\xe7ar 10 segundos",children:(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12,5V1L17,6L12,11V7A6,6 0 0,0 6,13A6,6 0 0,0 12,19A6,6 0 0,0 18,13H20A8,8 0 0,1 12,21A8,8 0 0,1 4,13A8,8 0 0,1 12,5M10,13A0.5,0.5 0 0,1 10.5,12.5H12V12H10V13M8,15H10V16H8V15M10.5,15A0.5,0.5 0 0,1 10,15.5V14.5A0.5,0.5 0 0,1 10.5,14H12.5A1.5,1.5 0 0,1 14,15.5V15.5A1.5,1.5 0 0,1 12.5,17H11V16H12.5V15H10.5Z"})})}),(0,o.jsx)("span",{className:"skip-label",children:"+10s"})]})]}),(0,o.jsx)("div",{className:"speed-section",children:(0,o.jsx)("div",{className:"speed-buttons",children:Oe.map(e=>(0,o.jsx)("button",{className:"speed-btn "+(Number(h)===e?"active":""),onClick:()=>p(e),"aria-label":`Velocidade ${e}x`,children:(0,o.jsxs)("span",{children:[e,"x"]})},e))})})]})]})},ze=e=>{let{user:t,lesson:n,seriesId:s,onBack:i,onComplete:a}=e;const l=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0),[p,m]=(0,r.useState)(0),[f,g]=(0,r.useState)(0),[v,b]=(0,r.useState)(!1),[w,x]=(0,r.useState)(1),[k,S]=(0,r.useState)({}),[E,C]=(0,r.useState)(!1),[T,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{if(S({}),C(!1),u(!1),b(!1),h(0),g(0),x(1),l.current)try{l.current.pause(),l.current.currentTime=0,l.current.load()}catch(e){console.error("Audio reset error:",e)}},[null===n||void 0===n?void 0:n.id]),(0,r.useEffect)(()=>{const e=l.current;if(!e)return;const t=()=>{m(e.duration||0),b(!0)},n=()=>{if(!e.duration)return;const t=e.currentTime||0,n=e.duration||0;h(t),g(n>0?t/n*100:0)},r=()=>{u(!1)},s=e=>{console.error("Audio error:",e)};return e.addEventListener("loadedmetadata",t),e.addEventListener("timeupdate",n),e.addEventListener("ended",r),e.addEventListener("error",s),()=>{e.removeEventListener("loadedmetadata",t),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",r),e.removeEventListener("error",s)}},[null===n||void 0===n?void 0:n.id]);if(!n||!n.questions||!Array.isArray(n.questions))return(0,o.jsx)("div",{className:"lesson-a2-container",children:(0,o.jsxs)("div",{className:"lesson-a2-header",children:[(0,o.jsx)("button",{onClick:i,className:"lessons-back-btn",children:"\u2190 Back to Lessons"}),(0,o.jsx)("h1",{style:{color:"red",textAlign:"center",margin:"2rem 0"},children:"\u274c Erro: Dados da li\xe7\xe3o inv\xe1lidos"}),(0,o.jsx)("p",{style:{textAlign:"center",color:"#666"},children:"A li\xe7\xe3o n\xe3o possui perguntas v\xe1lidas. Tente outra li\xe7\xe3o."})]})});const _={"a2-travel":{icon:"\u2708\ufe0f",title:"Travel Adventures A2"},"a2-tvshows":{icon:"\ud83d\udcfa",title:"TV Shows & Culture A2"},"a2-dating":{icon:"\ud83d\udc95",title:"Dating & Relationships A2"}}[s]||{icon:"\ud83c\udf93",title:"A2 Lessons"},I=Object.keys(k).length,j=I===n.questions.length;return(0,o.jsxs)("div",{className:"lesson-a2-container",children:[(0,o.jsxs)("div",{className:"lesson-a2-header",children:[(0,o.jsxs)("div",{className:"lesson-a2-breadcrumb",children:[(0,o.jsx)("button",{onClick:i,className:"lessons-back-btn",children:"\u2190 Back to Lessons"}),(0,o.jsx)("span",{children:"/"}),(0,o.jsx)("span",{children:_.title})]}),(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},children:[(0,o.jsxs)("h1",{className:"lesson-a2-title",children:[_.icon," ",n.title]}),(0,o.jsx)("span",{className:"lesson-a2-level-badge",children:"A2"})]}),(0,o.jsxs)("div",{className:"lesson-a2-meta",children:[(0,o.jsxs)("div",{className:"lesson-a2-meta-item-small",children:["\u23f1 ",n.duration||"4:00"]}),(0,o.jsxs)("div",{className:"lesson-a2-meta-item-small",children:["\u2753 ",n.questions.length," questions"]}),(0,o.jsxs)("div",{className:"lesson-a2-meta-item-small",children:["\u2b50 Up to ",15*n.questions.length," XP"]})]})]}),(0,o.jsx)(De,{audioRef:l,lesson:n,seriesId:s,isPlaying:c,setIsPlaying:u,currentTime:d,duration:p,progress:f,audioLoaded:v,playbackRate:w,setPlaybackRate:x}),(0,o.jsxs)("div",{className:"lesson-a2-questions-section",children:[(0,o.jsxs)("div",{className:"lesson-a2-questions-header",children:[(0,o.jsx)("h2",{className:"lesson-a2-questions-title",children:"Questions"}),(0,o.jsxs)("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:[I,"/",n.questions.length," answered (",Math.round(I/n.questions.length*100),"%)"]})]}),(0,o.jsx)("div",{className:"lesson-a2-progress",style:{marginBottom:"1.5rem"},children:(0,o.jsx)("div",{className:"lesson-a2-progress-fill",style:{width:I/n.questions.length*100+"%"}})}),(0,o.jsx)("div",{className:"lesson-a2-question-card",children:n.questions.map((e,t)=>(0,o.jsxs)("div",{className:"lesson-a2-question",children:[(0,o.jsxs)("div",{style:{fontWeight:"600",marginBottom:"0.75rem",fontSize:"1.1rem"},children:["Q",t+1,": ",e.question]}),(0,o.jsx)("div",{className:"lesson-a2-options",children:e.options.map((e,n)=>(0,o.jsxs)("button",{className:"lesson-a2-option "+(k[t]===n?"selected":""),onClick:()=>((e,t)=>{S({...k,[e]:t})})(t,n),children:[String.fromCharCode(97+n),") ",e]},n))})]},t))}),(0,o.jsx)("button",{className:"lesson-a2-submit",onClick:async()=>{try{if(!n||!n.questions||!Array.isArray(n.questions))return console.error("Invalid lesson data:",n),void alert("Erro: dados da li\xe7\xe3o inv\xe1lidos");const e=n.questions;if(0===e.length)return console.error("No questions found in lesson"),void alert("Erro: nenhuma pergunta encontrada na li\xe7\xe3o");console.log("\ud83d\udd0d Debug answers object:",k),console.log("\ud83d\udd0d Debug questions array:",e);let r=0;const i={};e.forEach((e,t)=>{const n=k[t],s=void 0!==n&&n===e.correct;s&&r++,console.log(`\ud83d\udd0d Question ${t}: userAnswer=${n}, correct=${e.correct}, isCorrect=${s}`),i[t]={question:e.question,userAnswer:void 0!==n?e.options[n]:"N\xe3o respondeu",correctAnswer:e.options[e.correct],isCorrect:s}});const o=Math.max(1,e.length),a=Math.max(0,r),l=Math.round(a/o*100);console.log("\ud83d\udd0d Pre-XP calculation debug:",{correctCount:r,finalCorrectCount:a,totalQuestions:o,score:l,answersKeys:Object.keys(k),questionsLength:e.length});const c={correctAnswers:a,totalQuestions:o,perfectScore:100===l,lessonType:"A2"};console.log("\ud83d\udd0d XP data being sent:",c);const u=await D(t.username,"LESSON_COMPLETE",c);console.log("\ud83d\udcb0 XP result received:",u);const d=u&&"number"===typeof u.xpEarned&&!isNaN(u.xpEarned)&&isFinite(u.xpEarned)?u.xpEarned:0;console.log("\ud83d\udd0d Validated XP earned:",d);const h={completed:!0,score:l,xpEarned:d,correctAnswers:a,totalQuestions:o,completedAt:new Date,seriesName:s||"unknown",lessonType:"A2"};console.log("\ud83d\udcbe Saving progress data:",h),await y(t.username,n.id,h);const p={score:l,correctCount:a,totalQuestions:o,xpEarned:d,leveledUp:(null===u||void 0===u?void 0:u.leveledUp)||!1,newLevel:(null===u||void 0===u?void 0:u.level)||1,detailedResults:i};N(p),C(!0),console.log("\u2705 Lesson completed successfully")}catch(e){console.error("\u274c Error completing lesson:",e),alert("Erro ao salvar progresso. Tente novamente.")}},disabled:!j,children:j?"\ud83c\udfaf Submit Answers":`Answer ${n.questions.length-I} more questions`})]}),"// Fixed Results Modal with detailed question review",E&&T&&(0,o.jsx)("div",{className:"lesson-a2-results-modal",children:(0,o.jsx)("div",{className:"lesson-a2-results-content",children:(0,o.jsxs)("div",{className:"lesson-results-container",children:[(0,o.jsx)("div",{className:"lesson-results-emoji",children:T.score>=90?"\ud83c\udf89":T.score>=70?"\ud83d\udc4f":"\ud83d\udcaa"}),(0,o.jsx)("h2",{className:"lesson-results-title",children:T.score>=90?"Excelente!":T.score>=70?"Bom Trabalho!":"Continue Tentando!"}),(0,o.jsx)("p",{className:"lesson-results-message",children:T.score>=90?"Voc\xea dominou esta li\xe7\xe3o A2!":T.score>=70?"\xd3tima compreens\xe3o do n\xedvel A2!":"A pr\xe1tica leva \xe0 perfei\xe7\xe3o!"}),(0,o.jsxs)("div",{className:"lesson-score-circle",children:[(0,o.jsxs)("span",{className:"lesson-score-percentage",children:[T.score,"%"]}),(0,o.jsx)("span",{className:"lesson-score-label",children:"Score"})]}),(0,o.jsxs)("div",{className:"lesson-results-stats",children:[(0,o.jsxs)("div",{className:"lesson-stat-item",children:[(0,o.jsxs)("span",{className:"lesson-stat-value",children:["+",T.xpEarned]}),(0,o.jsx)("span",{className:"lesson-stat-label",children:"XP Ganho"})]}),(0,o.jsxs)("div",{className:"lesson-stat-item",children:[(0,o.jsx)("span",{className:"lesson-stat-value",children:T.correctCount}),(0,o.jsx)("span",{className:"lesson-stat-label",children:"Corretas"})]}),(0,o.jsxs)("div",{className:"lesson-stat-item",children:[(0,o.jsx)("span",{className:"lesson-stat-value",children:T.totalQuestions}),(0,o.jsx)("span",{className:"lesson-stat-label",children:"Total"})]})]}),(0,o.jsxs)("div",{className:"lesson-detailed-review",children:[(0,o.jsx)("h3",{className:"review-title",children:"\ud83d\udccb Revis\xe3o Detalhada das Quest\xf5es"}),(0,o.jsx)("div",{className:"questions-review-list",children:Object.entries(T.detailedResults).map(e=>{let[t,n]=e;return(0,o.jsxs)("div",{className:"question-review-item "+(n.isCorrect?"correct":"incorrect"),children:[(0,o.jsxs)("div",{className:"question-review-header",children:[(0,o.jsxs)("div",{className:"question-number",children:[(0,o.jsx)("span",{className:"status-icon "+(n.isCorrect?"correct":"incorrect"),children:n.isCorrect?"\u2705":"\u274c"}),(0,o.jsxs)("span",{className:"question-label",children:["Q",parseInt(t)+1]})]}),(0,o.jsx)("div",{className:"question-points",children:(0,o.jsxs)("span",{className:"points-badge "+(n.isCorrect?"earned":"missed"),children:[n.isCorrect?"+15":"0"," XP"]})})]}),(0,o.jsx)("div",{className:"question-text",children:n.question}),(0,o.jsxs)("div",{className:"answer-details",children:[(0,o.jsxs)("div",{className:"answer-row",children:[(0,o.jsx)("span",{className:"answer-label",children:"Sua resposta:"}),(0,o.jsx)("span",{className:"answer-value "+(n.isCorrect?"correct-answer":"wrong-answer"),children:n.userAnswer})]}),!n.isCorrect&&(0,o.jsxs)("div",{className:"answer-row",children:[(0,o.jsx)("span",{className:"answer-label",children:"Resposta correta:"}),(0,o.jsx)("span",{className:"answer-value correct-answer",children:n.correctAnswer})]})]}),n.isCorrect?(0,o.jsxs)("div",{className:"feedback-message success",children:[(0,o.jsx)("span",{className:"feedback-icon",children:"\ud83c\udfaf"}),(0,o.jsx)("span",{children:"Perfeito! Continue assim!"})]}):(0,o.jsxs)("div",{className:"feedback-message error",children:[(0,o.jsx)("span",{className:"feedback-icon",children:"\ud83d\udca1"}),(0,o.jsx)("span",{children:"Estude esta quest\xe3o para melhorar!"})]})]},t)})})]}),T.leveledUp&&(0,o.jsx)("div",{className:"level-up-banner",children:(0,o.jsxs)("div",{className:"level-up-content",children:[(0,o.jsx)("div",{className:"level-up-icon",children:"\ud83c\udf89"}),(0,o.jsxs)("div",{className:"level-up-text",children:[(0,o.jsx)("h4",{children:"Parab\xe9ns!"}),(0,o.jsxs)("p",{children:["Voc\xea subiu para o ",(0,o.jsxs)("strong",{children:["n\xedvel ",T.newLevel,"!"]})]})]})]})}),(0,o.jsxs)("div",{className:"lesson-results-actions",children:[T.score<100&&(0,o.jsx)("button",{className:"lesson-retry-button",onClick:()=>{S({}),C(!1),l.current&&(l.current.currentTime=0,h(0),g(0),u(!1))},children:"\ud83d\udd04 Tentar Novamente"}),(0,o.jsx)("button",{className:"lesson-continue-button",onClick:()=>{a({lessonId:n.id,score:T.score,xpEarned:T.xpEarned,completed:!0})},children:"Continuar \u2192"})]})]})})})]})},Fe=e=>{let{currentView:t,viewParams:n,user:r,studentData:s,onNavigate:i,onLessonComplete:a}=e;return"lesson-player"===t?(0,o.jsx)(re,{user:r,lesson:n.lesson,seriesId:n.seriesId,onBack:()=>i("lessons-list",{seriesId:n.seriesId,seriesTitle:n.seriesTitle}),onComplete:a}):"lesson-player-a2"===t?(0,o.jsx)(ze,{user:r,lesson:n.lesson,seriesId:n.seriesId,onBack:()=>i("lessons-list-a2",{seriesId:n.seriesId,seriesTitle:n.seriesTitle}),onComplete:a},`${n.seriesId}-${null===(l=n.lesson)||void 0===l?void 0:l.id}`):(0,o.jsxs)("main",{className:"portal-main-content",children:["hub"===t&&(0,o.jsx)(ee,{studentData:s,onNavigate:i}),"story-completion"===t&&(0,o.jsx)(ue,{user:r,onBack:()=>i("hub")}),"word-match"===t&&(0,o.jsx)(fe,{user:r,onBack:()=>i("hub")}),"lessons"===t&&(0,o.jsx)(te,{user:r,onBack:()=>i("hub"),onSeriesSelect:(e,t)=>{i("lessons-list",{seriesId:e,seriesTitle:t})}}),"lessons-a2"===t&&(0,o.jsx)(je,{user:r,onBack:()=>i("hub"),onSeriesSelect:(e,t)=>{i("lessons-list-a2",{seriesId:e,seriesTitle:t})}}),"quiz"===t&&(0,o.jsx)(xe,{user:r,onBack:()=>i("hub")}),"study-center"===t&&(0,o.jsx)(Ie,{user:r,onBack:()=>i("hub")}),"lessons-list"===t&&(0,o.jsx)(ne,{user:r,seriesId:n.seriesId,seriesTitle:n.seriesTitle,onBack:()=>i("lessons"),onLessonSelect:(e,t)=>{i("lesson-player",{lesson:e,seriesId:t,seriesTitle:n.seriesTitle})}}),"lessons-list-a2"===t&&(0,o.jsx)(Le,{user:r,seriesId:n.seriesId,seriesTitle:n.seriesTitle,onBack:()=>i("lessons-a2"),onLessonSelect:(e,t)=>{i("lesson-player-a2",{lesson:e,seriesId:t,seriesTitle:n.seriesTitle})}})]});var l},qe=e=>{let{onLogout:t}=e;return(0,o.jsx)("footer",{className:"portal-footer",children:(0,o.jsx)("div",{className:"portal-footer-content",children:(0,o.jsxs)("button",{onClick:t,className:"portal-logout-button",children:[(0,o.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:(0,o.jsx)("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4m7 14l5-5-5-5m5 5H9"})}),(0,o.jsx)("span",{children:"Sair"})]})})})},Ve=e=>{let{user:t,onLogout:n}=e;const[s,i]=(0,r.useState)("hub"),[a,c]=(0,r.useState)({}),[u,d]=(0,r.useState)(null),[h,p]=(0,r.useState)(!0);l();(0,r.useEffect)(()=>{m(),f()},[]);const m=async()=>{try{console.log("\ud83d\udcca Loading student data for:",t.username);const e=await g(t.username);e.success?(d(e.student),console.log("\u2705 Student data loaded successfully")):console.error("\u274c Failed to load student data:",e.error)}catch(e){console.error("\u274c Error loading student data:",e)}finally{p(!1)}},f=()=>{const e=e=>{e.state&&e.state.view?(i(e.state.view),c(e.state.params||{}),"hub"===e.state.view&&m()):(i("hub"),c({}),m())};return window.addEventListener("popstate",e),window.history.replaceState({view:"hub",params:{}},"",""),()=>window.removeEventListener("popstate",e)},v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(e),c(t),"hub"===e&&m(),window.history.pushState({view:e,params:t},"",""),setTimeout(()=>window.scrollTo({top:0,behavior:"smooth"}),0)};if(h)return(0,o.jsx)("div",{className:"portal-loading-container",children:(0,o.jsxs)("div",{className:"portal-loading-content",children:[(0,o.jsx)("div",{className:"portal-loading-spinner"}),(0,o.jsx)("p",{className:"portal-loading-text",children:"Carregando sua academia..."})]})});const b=(()=>{if(!u||!u.progress)return{totalXP:0,currentLevel:1,completedLessons:0,totalActivities:0};const e=u.totalXP||0,t=u.level||1,n=Object.entries(u.progress||{}).filter(e=>{let[t,n]=e;return!t.startsWith("story-")&&!t.startsWith("wordmatch-")&&!t.startsWith("quiz-")&&n.completed}).length,r=Object.entries(u.progress||{}).filter(e=>{let[t,n]=e;return n.completed}).length;return{totalXP:e,currentLevel:t,completedLessons:n,totalActivities:r}})();return(0,o.jsxs)("div",{className:"studentportal-container",children:[(0,o.jsx)(x,{currentView:s,user:t,studentData:u,progress:b,onNavigateToHub:()=>v("hub"),onGetPageTitle:()=>{var e;switch(s){case"hub":return"Sua Jornada";case"lessons":return"Escolher S\xe9rie";case"lessons-list":return a.seriesTitle||"Li\xe7\xf5es";case"lesson-player":return(null===(e=a.lesson)||void 0===e?void 0:e.title)||"Aprendendo";case"story-completion":return"Hist\xf3rias";case"word-match":return"Combine Palavras";case"quiz":return"Quiz R\xe1pido";case"study-center":return"Centro de Estudos";default:return"Aprendendo"}}}),(0,o.jsx)(Fe,{currentView:s,viewParams:a,user:t,studentData:u,onNavigate:v,onLessonComplete:async e=>{var n;try{var r;if(console.log("\ud83c\udf93 StudentPortal handling lesson completion:",e),null!==(r=a.seriesId)&&void 0!==r&&r.startsWith("a2-")){console.log("\u2705 A2 lesson - progress already saved by LessonPlayerA2, just navigating..."),await m();return void v("lessons-list-a2",{seriesId:a.seriesId,seriesTitle:a.seriesTitle})}const n=50+10*(e.correctAnswers||0),s={completed:!0,score:e.score||0,xpEarned:n,correctAnswers:e.correctAnswers||0,totalQuestions:e.totalQuestions||1,completedAt:new Date,seriesName:a.seriesId||"unknown"};if(!e.lessonId||!a.seriesId)return void console.error("\u274c Missing required IDs for progress saving");const i=await y(t.username,e.lessonId,s);i&&i.success&&(await m(),console.log("\u2705 A1 Lesson progress saved successfully"))}catch(i){console.error("\u274c Error saving lesson progress:",i)}const s=null===(n=a.seriesId)||void 0===n?void 0:n.startsWith("a2-");v(s?"lessons-list-a2":"lessons-list",{seriesId:a.seriesId,seriesTitle:a.seriesTitle})}}),(0,o.jsx)(qe,{onLogout:n})]})},Ue=()=>{const[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)(!0),c=l();(0,r.useEffect)(()=>{const e=(0,i.Yk)(e=>{e?console.log("\u2705 User is logged in:",e):(console.log("\ud83d\udc4b User is logged out"),t(null)),a(!1)});return()=>e()},[]);const u=e=>{console.log("\ud83c\udf89 Login successful in App:",e),t(e)},d=async()=>{const{logout:e}=await Promise.resolve().then(n.bind(n,719));await e(),t(null)};return s?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:c.bg.gradient,color:c.text.primary},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderBottomColor:c.brand.blue}}),(0,o.jsx)("p",{style:{color:c.text.secondary},children:"Loading Teacher Alex's Academy..."})]})}):e?"teacher"===e.role?(0,o.jsx)(w,{user:e,onLogout:d}):"student"===e.role?(0,o.jsx)(Ve,{user:e,onLogout:d}):(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:c.bg.gradient},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-4",style:{color:c.text.primary},children:"Unknown user role"}),(0,o.jsx)("button",{onClick:d,className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:c.brand.red},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Logout"})]})}):(0,o.jsx)(h,{onLoginSuccess:u})};const Be=function(){return(0,o.jsx)(c,{children:(0,o.jsx)(Ue,{})})};s.createRoot(document.getElementById("root")).render((0,o.jsx)(r.StrictMode,{children:(0,o.jsx)(Be,{})}))})();
//# sourceMappingURL=main.5061546b.js.map