/*! For license information please see main.1ea9557c.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(o(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope");var N=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var T=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function j(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case N:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case k:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}var L=Array.isArray,R=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},M=[],F=-1;function V(e){return{current:e}}function U(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var B=V(null),$=V(null),H=V(null),q=V(null);function W(e,t){switch(z(H,t),z($,e),z(B,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?sd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=id(t=sd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(B),z(B,e)}function G(){U(B),U($),U(H)}function K(e){null!==e.memoizedState&&z(q,e);var t=B.current,n=id(t,e.type);t!==n&&(z($,e),z(B,n))}function Q(e){$.current===e&&(U(B),U($)),q.current===e&&(U(q),Kd._currentValue=O)}var Y=Object.prototype.hasOwnProperty,X=r.unstable_scheduleCallback,J=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,oe=r.unstable_LowPriority,ae=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(pe(e)/me|0)|0},pe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,o=e.pingedLanes;e=e.warmLanes;var a=134217727&r;return 0!==a?0!==(r=a&~i)?s=ve(r):0!==(o&=a)?s=ve(o):n||0!==(n=a&~e)&&(s=ve(n)):0!==(a=r&~i)?s=ve(a):0!==o?s=ve(o):n||0!==(n=r&~e)&&(s=ve(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ke(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function _e(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ce(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Te(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:ch(e.type)}var Pe=Math.random().toString(36).slice(2),je="__reactFiber$"+Pe,Le="__reactProps$"+Pe,Re="__reactContainer$"+Pe,De="__reactEvents$"+Pe,Oe="__reactListeners$"+Pe,Me="__reactHandles$"+Pe,Fe="__reactResources$"+Pe,Ve="__reactMarker$"+Pe;function Ue(e){delete e[je],delete e[Le],delete e[De],delete e[Oe],delete e[Me]}function ze(e){var t=e[je];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Re]||n[je]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=bd(e);null!==e;){if(n=e[je])return n;e=bd(e)}return t}n=(e=n).parentNode}return null}function Be(e){if(e=e[je]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function qe(e){e[Ve]=!0}var We=new Set,Ge={};function Ke(e,t){Qe(e,t),Qe(e+"Capture",t)}function Qe(e,t){for(Ge[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Ye,Xe,Je=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,Y.call(et,s)||!Y.call(Ze,s)&&(Je.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Ye)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ye=t&&t[1]||"",Xe=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ye+e+Xe}var it=!1;function ot(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(s){var r=s}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(o){r=o}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),o=i[0],a=i[1];if(o&&a){var l=o.split("\n"),c=a.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function at(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return ot(e.type,!1);case 11:return ot(e.type.render,!1);case 1:return ot(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=at(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var pt=/[\n"\\]/g;function mt(e){return e.replace(pt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,o,a){e.name="",null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.type=o:e.removeAttribute("type"),null!=t?"number"===o?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==o&&"reset"!==o||e.removeAttribute("value"),null!=t?vt(e,o,ct(t)):null!=n?vt(e,o,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.name=""+ct(a):e.removeAttribute("name")}function yt(e,t,n,r,s,i,o,a){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,a||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=a?e.checked:!!r,e.defaultChecked=!!r,null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.name=o)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(o(92));if(L(r)){if(1<r.length)throw Error(o(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function _t(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(o(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Et(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&Et(e,i,t[i])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function Pt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var jt=null,Lt=null;function Rt(e){var t=Be(e);if(t&&(e=t.stateNode)){var n=e[Le]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Le]||null;if(!s)throw Error(o(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Dt=!1;function Ot(e,t,n){if(Dt)return e(t,n);Dt=!0;try{return e(t)}finally{if(Dt=!1,(null!==jt||null!==Lt)&&(zc(),jt&&(t=jt,e=Lt,Lt=jt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Le]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Ft)try{var Ut={};Object.defineProperty(Ut,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Ut,Ut),window.removeEventListener("test",Ut,Ut)}catch(Lh){Vt=!1}var zt=null,Bt=null,$t=null;function Ht(){if($t)return $t;var e,t,n=Bt,r=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===s[i-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Gt(){return!1}function Kt(e){function t(t,n,r,s,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Wt:Gt,this.isPropagationStopped=Gt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Qt,Yt,Xt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Kt(Jt),en=h({},Jt,{view:0,detail:0}),tn=Kt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xt&&(Xt&&"mousemove"===e.type?(Qt=e.screenX-Xt.screenX,Yt=e.screenY-Xt.screenY):Yt=Qt=0,Xt=e),Qt)},movementY:function(e){return"movementY"in e?e.movementY:Yt}}),rn=Kt(nn),sn=Kt(h({},nn,{dataTransfer:0})),on=Kt(h({},en,{relatedTarget:0})),an=Kt(h({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Kt(h({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Kt(h({},Jt,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function pn(){return fn}var mn=Kt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pn,charCode:function(e){return"keypress"===e.type?qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Kt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Kt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pn})),vn=Kt(h({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Kt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Kt(h({},Jt,{newState:0,oldState:0})),xn=[9,13,27,32],kn=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var En=Ft&&"TextEvent"in window&&!Sn,_n=Ft&&(!kn||Sn&&8<Sn&&11>=Sn),Cn=String.fromCharCode(32),Nn=!1;function Tn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var An=!1;var Pn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Pn[e.type]:"textarea"===t}function Ln(e,t,n,r){jt?Lt?Lt.push(r):Lt=[r]:jt=r,0<(t=Hu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Rn=null,Dn=null;function On(e){Ou(e,0)}function Mn(e){if(ht($e(e)))return e}function Fn(e,t){if("change"===e)return t}var Vn=!1;if(Ft){var Un;if(Ft){var zn="oninput"in document;if(!zn){var Bn=document.createElement("div");Bn.setAttribute("oninput","return;"),zn="function"===typeof Bn.oninput}Un=zn}else Un=!1;Vn=Un&&(!document.documentMode||9<document.documentMode)}function $n(){Rn&&(Rn.detachEvent("onpropertychange",Hn),Dn=Rn=null)}function Hn(e){if("value"===e.propertyName&&Mn(Dn)){var t=[];Ln(t,Dn,e,Pt(e)),Ot(On,t)}}function qn(e,t,n){"focusin"===e?($n(),Dn=n,(Rn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&$n()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(Dn)}function Gn(e,t){if("click"===e)return Mn(t)}function Kn(e,t){if("input"===e||"change"===e)return Mn(t)}var Qn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yn(e,t){if(Qn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Y.call(t,s)||!Qn(e[s],t[s]))return!1}return!0}function Xn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Xn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Xn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,or=!1;function ar(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;or||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Yn(ir,r)||(ir=r,0<(r=Hu(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),pr=hr("animationiteration"),mr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),Ke(t,[e])}xr.push("scrollEnd");var Sr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var _r=[],Cr=0,Nr=0;function Tr(){for(var e=Cr,t=Nr=Cr=0;t<e;){var n=_r[t];_r[t++]=null;var r=_r[t];_r[t++]=null;var s=_r[t];_r[t++]=null;var i=_r[t];if(_r[t++]=null,null!==r&&null!==s){var o=r.pending;null===o?s.next=s:(s.next=o.next,o.next=s),r.pending=s}0!==i&&jr(n,s,i)}}function Ir(e,t,n,r){_r[Cr++]=e,_r[Cr++]=t,_r[Cr++]=n,_r[Cr++]=r,Nr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ar(e,t,n,r){return Ir(e,t,n,r),Lr(e)}function Pr(e,t){return Ir(e,null,null,t),Lr(e)}function jr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-fe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Lr(e){if(50<jc)throw jc=0,Lc=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Rr={};function Dr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(e,t,n,r){return new Dr(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Or(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Vr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ur(e,t,n,r,s,i){var a=0;if(r=e,"function"===typeof e)Mr(e)&&(a=1);else if("string"===typeof e)a=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,B.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case N:return(e=Or(31,n,t,s)).elementType=N,e.lanes=i,e;case g:return zr(n.children,s,i,t);case y:a=8,s|=24;break;case v:return(e=Or(12,n,t,2|s)).elementType=v,e.lanes=i,e;case S:return(e=Or(13,n,t,s)).elementType=S,e.lanes=i,e;case E:return(e=Or(19,n,t,s)).elementType=E,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:a=10;break e;case w:a=9;break e;case k:a=11;break e;case _:a=14;break e;case C:a=16,r=null;break e}a=29,n=Error(o(130,null===e?"null":typeof e,"")),r=null}return(t=Or(a,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return(e=Or(7,e,r,t)).lanes=n,e}function Br(e,t,n){return(e=Or(6,e,null,t)).lanes=n,e}function $r(e,t,n){return(t=Or(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],qr=0,Wr=null,Gr=0,Kr=[],Qr=0,Yr=null,Xr=1,Jr="";function Zr(e,t){Hr[qr++]=Gr,Hr[qr++]=Wr,Wr=e,Gr=t}function es(e,t,n){Kr[Qr++]=Xr,Kr[Qr++]=Jr,Kr[Qr++]=Yr,Yr=e;var r=Xr;e=Jr;var s=32-fe(r)-1;r&=~(1<<s),n+=1;var i=32-fe(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xr=1<<32-fe(t)+s|n<<s|r,Jr=i+e}else Xr=1<<i|n<<s|r,Jr=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Wr;)Wr=Hr[--qr],Hr[qr]=null,Gr=Hr[--qr],Hr[qr]=null;for(;e===Yr;)Yr=Kr[--Qr],Kr[Qr]=null,Jr=Kr[--Qr],Kr[Qr]=null,Xr=Kr[--Qr],Kr[Qr]=null}var rs=null,ss=null,is=!1,os=null,as=!1,ls=Error(o(519));function cs(e){throw ms(Er(Error(o(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[je]=e,t[Le]=r,n){case"dialog":Mu("cancel",t),Mu("close",t);break;case"iframe":case"object":case"embed":Mu("load",t);break;case"video":case"audio":for(n=0;n<Ru.length;n++)Mu(Ru[n],t);break;case"source":Mu("error",t);break;case"img":case"image":case"link":Mu("error",t),Mu("load",t);break;case"details":Mu("toggle",t);break;case"input":Mu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Mu("invalid",t);break;case"textarea":Mu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Yu(t.textContent,n)?(null!=r.popover&&(Mu("beforetoggle",t),Mu("toggle",t)),null!=r.onScroll&&Mu("scroll",t),null!=r.onScrollEnd&&Mu("scrollend",t),null!=r.onClick&&(t.onclick=Xu),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(as=!1);case 27:case 3:return void(as=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=yd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,fd(e.type)?(e=vd,vd=null,ss=e):ss=n):ss=rs?yd(e.stateNode.nextSibling):null;return!0}function fs(){ss=rs=null,is=!1}function ps(){var e=os;return null!==e&&(null===bc?bc=e:bc.push.apply(bc,e),os=null),e}function ms(e){null===os?os=[e]:os.push(e)}var gs=V(null),ys=null,vs=null;function bs(e,t,n){z(gs,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=gs.current,U(gs)}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ks(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var a=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),xs(i.return,n,e),r||(a=null);break e}i=l.next}}else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),xs(a,n,e),a=null}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}function Ss(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var a=s.alternate;if(null===a)throw Error(o(387));if(null!==(a=a.memoizedProps)){var l=s.type;Qn(s.pendingProps.value,a.value)||(null!==e?e.push(l):e=[l])}}else if(s===q.current){if(null===(a=s.alternate))throw Error(o(387));a.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Kd):e=[Kd])}s=s.return}null!==e&&ks(t,e,n,r),t.flags|=262144}function Es(e){for(e=e.firstContext;null!==e;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function _s(e){ys=e,vs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Cs(e){return Ts(ys,e)}function Ns(e,t){return null===ys&&_s(e),Ts(e,t)}function Ts(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vs){if(null===e)throw Error(o(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return n}var Is="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},As=r.unstable_scheduleCallback,Ps=r.unstable_NormalPriority,js={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ls(){return{controller:new Is,data:new Map,refCount:0}}function Rs(e){e.refCount--,0===e.refCount&&As(Ps,function(){e.controller.abort()})}var Ds=null,Os=0,Ms=0,Fs=null;function Vs(){if(0===--Os&&null!==Ds){null!==Fs&&(Fs.status="fulfilled");var e=Ds;Ds=null,Ms=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Us=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ds){var n=Ds=[];Os=0,Ms=Iu(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Os++,t.then(Vs,Vs)}(0,t),null!==Us&&Us(e,t)};var zs=V(null);function Bs(){var e=zs.current;return null!==e?e:rc.pooledCache}function $s(e,t){z(zs,null===t?zs.current:t.pool)}function Hs(){var e=Bs();return null===e?null:{parent:js._currentValue,pool:e}}var qs=Error(o(460)),Ws=Error(o(474)),Gs=Error(o(542)),Ks={then:function(){}};function Qs(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Ys(){}function Xs(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Ys,Ys),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Ys,Ys);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(o(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw Js=t,qs}}var Js=null;function Zs(){if(null===Js)throw Error(o(459));var e=Js;return Js=null,e}function ei(e){if(e===qs||e===Gs)throw Error(o(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&nc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Lr(e),jr(e,null,n),t}return Ir(e,r,t,n),Lr(e)}function oi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}function ai(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fs)throw Fs}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(o=0,u=c=l=null,a=i;;){var f=-536870913&a.lane,p=f!==a.lane;if(p?(ic&f)===f:(r&f)===f){0!==f&&f===Ms&&(li=!0),null!==u&&(u=u.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var m=e,g=a;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(y,d,f):m)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=a.callback)&&(e.flags|=64,p&&(e.flags|=8192),null===(p=s.callbacks)?s.callbacks=[f]:p.push(f))}else p={lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,o|=f;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(p=a).next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),fc|=o,e.lanes=o,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var fi=V(null),pi=V(0);function mi(e,t){z(pi,e=dc),z(fi,t),dc=e|t.baseLanes}function gi(){z(pi,dc),z(fi,fi.current)}function yi(){dc=pi.current,U(fi),U(pi)}var vi=0,bi=null,wi=null,xi=null,ki=!1,Si=!1,Ei=!1,_i=0,Ci=0,Ni=null,Ti=0;function Ii(){throw Error(o(321))}function Ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function Pi(e,t,n,r,s,i){return vi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Wo:Go,Ei=!1,i=n(r,s),Ei=!1,Si&&(i=Li(t,n,r,s)),ji(e),i}function ji(e){R.H=qo;var t=null!==wi&&null!==wi.next;if(vi=0,xi=wi=bi=null,ki=!1,Ci=0,Ni=null,t)throw Error(o(300));null===e||Na||null!==(e=e.dependencies)&&Es(e)&&(Na=!0)}function Li(e,t,n,r){bi=e;var s=0;do{if(Si&&(Ni=null),Ci=0,Si=!1,25<=s)throw Error(o(301));if(s+=1,xi=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}R.H=Ko,i=t(n,r)}while(Si);return i}function Ri(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Ui(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Di(){var e=0!==_i;return _i=0,e}function Oi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Mi(e){if(ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ki=!1}vi=0,xi=wi=bi=null,Si=!1,Ci=_i=0,Ni=null}function Fi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?bi.memoizedState=xi=e:xi=xi.next=e,xi}function Vi(){if(null===wi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===xi?bi.memoizedState:xi.next;if(null!==t)xi=t,wi=e;else{if(null===e){if(null===bi.alternate)throw Error(o(467));throw Error(o(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===xi?bi.memoizedState=xi=e:xi=xi.next=e}return xi}function Ui(e){var t=Ci;return Ci+=1,null===Ni&&(Ni=[]),e=Xs(Ni,e,t),t=bi,null===(null===xi?t.memoizedState:xi.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Wo:Go),e}function zi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ui(e);if(e.$$typeof===x)return Cs(e)}throw Error(o(438,String(e)))}function Bi(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=T;return t.index++,n}function $i(e,t){return"function"===typeof t?t(e):t}function Hi(e){return qi(Vi(),wi,e)}function qi(e,t,n){var r=e.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var a=s.next;s.next=i.next,i.next=a}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=a=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ic&h)===h:(vi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ms&&(d=!0);else{if((vi&f)===f){u=u.next,f===Ms&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,a=i):c=c.next=h,bi.lanes|=f,fc|=f}h=u.action,Ei&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,a=i):c=c.next=f,bi.lanes|=h,fc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?a=i:c.next=l,!Qn(i,e.memoizedState)&&(Na=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=a,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Wi(e){var t=Vi(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{i=e(i,a.action),a=a.next}while(a!==s);Qn(i,t.memoizedState)||(Na=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Gi(e,t,n){var r=bi,s=Vi(),i=is;if(i){if(void 0===n)throw Error(o(407));n=n()}else n=t();var a=!Qn((wi||s).memoizedState,n);if(a&&(s.memoizedState=n,Na=!0),s=s.queue,yo(2048,8,Yi.bind(null,r,s,e),[e]),s.getSnapshot!==t||a||null!==xi&&1&xi.memoizedState.tag){if(r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qi.bind(null,r,s,n,t),null),null===rc)throw Error(o(349));i||0!==(124&vi)||Ki(r,t,n)}return n}function Ki(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Qi(e,t,n,r){t.value=n,t.getSnapshot=r,Xi(t)&&Ji(e)}function Yi(e,t,n){return n(function(){Xi(t)&&Ji(e)})}function Xi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch(r){return!0}}function Ji(e){var t=Pr(e,2);null!==t&&Oc(t,e,2)}function Zi(e){var t=Fi();if("function"===typeof e){var n=e;if(e=n(),Ei){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:e},t}function eo(e,t,n,r){return e.baseState=n,qi(e,wi,"function"===typeof r?r:$i)}function to(e,t,n,r,s){if(Bo(e))throw Error(o(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==R.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,no(t,i)):(i.next=n.next,t.pending=n.next=i)}}function no(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=R.T,o={};R.T=o;try{var a=n(s,r),l=R.S;null!==l&&l(o,a),ro(e,t,a)}catch(c){io(e,t,c)}finally{R.T=i}}else try{ro(e,t,i=n(s,r))}catch(u){io(e,t,u)}}function ro(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){so(e,t,n)},function(n){return io(e,t,n)}):so(e,t,n)}function so(e,t,n){t.status="fulfilled",t.value=n,oo(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,no(e,n)))}function io(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oo(t),t=t.next}while(t!==r)}e.action=null}function oo(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function ao(e,t){return t}function lo(e,t){if(is){var n=rc.formState;if(null!==n){e:{var r=bi;if(is){if(ss){t:{for(var s=ss,i=as;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=yd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=yd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Fi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:t},n.queue=r,n=Vo.bind(null,bi,r),r.dispatch=n,r=Zi(!1),i=zo.bind(null,bi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Fi()).queue=s,n=to.bind(null,bi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function co(e){return uo(Vi(),wi,e)}function uo(e,t,n){if(t=qi(e,t,ao)[0],e=Hi($i)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Ui(t)}catch(o){if(o===qs)throw Gs;throw o}else r=t;var s=(t=Vi()).queue,i=s.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,po(9,{destroy:void 0,resource:void 0},ho.bind(null,s,n),null)),[r,i,e]}function ho(e,t){e.action=t}function fo(e){var t=Vi(),n=wi;if(null!==n)return uo(t,n,e);Vi(),t=t.memoizedState;var r=(n=Vi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function po(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function mo(){return Vi().memoizedState}function go(e,t,n,r){var s=Fi();r=void 0===r?null:r,bi.flags|=e,s.memoizedState=po(1|t,{destroy:void 0,resource:void 0},n,r)}function yo(e,t,n,r){var s=Vi();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&Ai(r,wi.memoizedState.deps)?s.memoizedState=po(t,i,n,r):(bi.flags|=e,s.memoizedState=po(1|t,i,n,r))}function vo(e,t){go(8390656,8,e,t)}function bo(e,t){yo(2048,8,e,t)}function wo(e,t){return yo(4,2,e,t)}function xo(e,t){return yo(4,4,e,t)}function ko(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function So(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,yo(4,4,ko.bind(null,t,e),n)}function Eo(){}function _o(e,t){var n=Vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Co(e,t){var n=Vi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ai(t,r[1]))return r[0];if(r=e(),Ei){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function No(e,t,n){return void 0===n||0!==(1073741824&vi)?e.memoizedState=t:(e.memoizedState=n,e=Dc(),bi.lanes|=e,fc|=e,n)}function To(e,t,n,r){return Qn(n,t)?n:null!==fi.current?(e=No(e,n,r),Qn(e,t)||(Na=!0),e):0===(42&vi)?(Na=!0,e.memoizedState=n):(e=Dc(),bi.lanes|=e,fc|=e,t)}function Io(e,t,n,r,s){var i=D.p;D.p=0!==i&&8>i?i:8;var o=R.T,a={};R.T=a,zo(e,!1,t,n);try{var l=s(),c=R.S;if(null!==c&&c(a,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Rc());else Uo(e,t,r,Rc())}catch(u){Uo(e,t,{then:function(){},status:"rejected",reason:u},Rc())}finally{D.p=i,R.T=o}}function Ao(){}function Po(e,t,n,r){if(5!==e.tag)throw Error(o(476));var s=jo(e).queue;Io(e,s,t,O,null===n?Ao:function(){return Lo(e),n(r)})}function jo(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:O},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Lo(e){Uo(e,jo(e).next.queue,{},Rc())}function Ro(){return Cs(Kd)}function Do(){return Vi().memoizedState}function Oo(){return Vi().memoizedState}function Mo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Rc(),r=ii(t,e=si(n),n);return null!==r&&(Oc(r,t,n),oi(r,t,n)),t={cache:Ls()},void(e.payload=t)}t=t.return}}function Fo(e,t,n){var r=Rc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},Bo(e)?$o(t,n):null!==(n=Ar(e,t,n,r))&&(Oc(n,e,r),Ho(n,t,r))}function Vo(e,t,n){Uo(e,t,n,Rc())}function Uo(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(Bo(e))$o(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Qn(a,o))return Ir(e,t,s,0),null===rc&&Tr(),!1}catch(l){}if(null!==(n=Ar(e,t,s,r)))return Oc(n,e,r),Ho(n,t,r),!0}return!1}function zo(e,t,n,r){if(r={lane:2,revertLane:Iu(),action:r,hasEagerState:!1,eagerState:null,next:null},Bo(e)){if(t)throw Error(o(479))}else null!==(t=Ar(e,n,r,2))&&Oc(t,e,2)}function Bo(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function $o(e,t){Si=ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ho(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}var qo={readContext:Cs,use:zi,useCallback:Ii,useContext:Ii,useEffect:Ii,useImperativeHandle:Ii,useLayoutEffect:Ii,useInsertionEffect:Ii,useMemo:Ii,useReducer:Ii,useRef:Ii,useState:Ii,useDebugValue:Ii,useDeferredValue:Ii,useTransition:Ii,useSyncExternalStore:Ii,useId:Ii,useHostTransitionStatus:Ii,useFormState:Ii,useActionState:Ii,useOptimistic:Ii,useMemoCache:Ii,useCacheRefresh:Ii},Wo={readContext:Cs,use:zi,useCallback:function(e,t){return Fi().memoizedState=[e,void 0===t?null:t],e},useContext:Cs,useEffect:vo,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,go(4194308,4,ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return go(4194308,4,e,t)},useInsertionEffect:function(e,t){go(4,2,e,t)},useMemo:function(e,t){var n=Fi();t=void 0===t?null:t;var r=e();if(Ei){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Fi();if(void 0!==n){var s=n(t);if(Ei){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fo.bind(null,bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fi().memoizedState=e},useState:function(e){var t=(e=Zi(e)).queue,n=Vo.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Eo,useDeferredValue:function(e,t){return No(Fi(),e,t)},useTransition:function(){var e=Zi(!1);return e=Io.bind(null,bi,e.queue,!0,!1),Fi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bi,s=Fi();if(is){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===rc)throw Error(o(349));0!==(124&ic)||Ki(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,vo(Yi.bind(null,r,i,e),[e]),r.flags|=2048,po(9,{destroy:void 0,resource:void 0},Qi.bind(null,r,i,n,t),null),n},useId:function(){var e=Fi(),t=rc.identifierPrefix;if(is){var n=Jr;t="\xab"+t+"R"+(n=(Xr&~(1<<32-fe(Xr)-1)).toString(32)+n),0<(n=_i++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ti++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ro,useFormState:lo,useActionState:lo,useOptimistic:function(e){var t=Fi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=zo.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Fi().memoizedState=Mo.bind(null,bi)}},Go={readContext:Cs,use:zi,useCallback:_o,useContext:Cs,useEffect:bo,useImperativeHandle:So,useInsertionEffect:wo,useLayoutEffect:xo,useMemo:Co,useReducer:Hi,useRef:mo,useState:function(){return Hi($i)},useDebugValue:Eo,useDeferredValue:function(e,t){return To(Vi(),wi.memoizedState,e,t)},useTransition:function(){var e=Hi($i)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Gi,useId:Do,useHostTransitionStatus:Ro,useFormState:co,useActionState:co,useOptimistic:function(e,t){return eo(Vi(),0,e,t)},useMemoCache:Bi,useCacheRefresh:Oo},Ko={readContext:Cs,use:zi,useCallback:_o,useContext:Cs,useEffect:bo,useImperativeHandle:So,useInsertionEffect:wo,useLayoutEffect:xo,useMemo:Co,useReducer:Wi,useRef:mo,useState:function(){return Wi($i)},useDebugValue:Eo,useDeferredValue:function(e,t){var n=Vi();return null===wi?No(n,e,t):To(n,wi.memoizedState,e,t)},useTransition:function(){var e=Wi($i)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:Ui(e),t]},useSyncExternalStore:Gi,useId:Do,useHostTransitionStatus:Ro,useFormState:fo,useActionState:fo,useOptimistic:function(e,t){var n=Vi();return null!==wi?eo(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:Oo},Qo=null,Yo=0;function Xo(e){var t=Yo;return Yo+=1,null===Qo&&(Qo=[]),Xs(Qo,e,t)}function Jo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Zo(e,t){if(t.$$typeof===f)throw Error(o(525));throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ea(e){return(0,e._init)(e._payload)}function ta(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Br(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===C&&ea(i)===t.type)?(Jo(t=s(t,n.props),n),t.return=e,t):(Jo(t=Ur(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$r(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Br(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return Jo(n=Ur(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case m:return(t=$r(t,e.mode,n)).return=e,t;case C:return h(e,t=(0,t._init)(t._payload),n)}if(L(t)||A(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Xo(t),n);if(t.$$typeof===x)return h(e,Ns(e,t),n);Zo(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case m:return n.key===s?u(e,t,n,r):null;case C:return f(e,t,n=(s=n._init)(n._payload),r)}if(L(n)||A(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Xo(n),r);if(n.$$typeof===x)return f(e,t,Ns(e,n),r);Zo(e,n)}return null}function y(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case m:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case C:return y(e,t,n,r=(0,r._init)(r._payload),s)}if(L(r)||A(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return y(e,t,n,Xo(r),s);if(r.$$typeof===x)return y(e,t,n,Ns(t,r),s);Zo(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===C&&ea(b)===c.type){n(l,c.sibling),Jo(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):(Jo(d=Ur(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return a(l);case m:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=$r(u,l.mode,d)).return=l,l=d}return a(l);case C:return v(l,c,u=(b=u._init)(u._payload),d)}if(L(u))return function(s,o,a,l){for(var c=null,u=null,d=o,p=o=0,m=null;null!==d&&p<a.length;p++){d.index>p?(m=d,d=null):m=d.sibling;var g=f(s,d,a[p],l);if(null===g){null===d&&(d=m);break}e&&d&&null===g.alternate&&t(s,d),o=i(g,o,p),null===u?c=g:u.sibling=g,u=g,d=m}if(p===a.length)return n(s,d),is&&Zr(s,p),c;if(null===d){for(;p<a.length;p++)null!==(d=h(s,a[p],l))&&(o=i(d,o,p),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,p),c}for(d=r(d);p<a.length;p++)null!==(m=y(d,s,p,a[p],l))&&(e&&null!==m.alternate&&d.delete(null===m.key?p:m.key),o=i(m,o,p),null===u?c=m:u.sibling=m,u=m);return e&&d.forEach(function(e){return t(s,e)}),is&&Zr(s,p),c}(l,c,u,d);if(A(u)){if("function"!==typeof(b=A(u)))throw Error(o(150));return function(s,a,l,c){if(null==l)throw Error(o(151));for(var u=null,d=null,p=a,m=a=0,g=null,v=l.next();null!==p&&!v.done;m++,v=l.next()){p.index>m?(g=p,p=null):g=p.sibling;var b=f(s,p,v.value,c);if(null===b){null===p&&(p=g);break}e&&p&&null===b.alternate&&t(s,p),a=i(b,a,m),null===d?u=b:d.sibling=b,d=b,p=g}if(v.done)return n(s,p),is&&Zr(s,m),u;if(null===p){for(;!v.done;m++,v=l.next())null!==(v=h(s,v.value,c))&&(a=i(v,a,m),null===d?u=v:d.sibling=v,d=v);return is&&Zr(s,m),u}for(p=r(p);!v.done;m++,v=l.next())null!==(v=y(p,s,m,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?m:v.key),a=i(v,a,m),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),is&&Zr(s,m),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Xo(u),d);if(u.$$typeof===x)return v(l,c,Ns(l,u),d);Zo(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Br(u,l.mode,d)).return=l,l=d),a(l)):n(l,c)}return function(e,t,n,r){try{Yo=0;var s=v(e,t,n,r);return Qo=null,s}catch(o){if(o===qs||o===Gs)throw o;var i=Or(29,o,null,e.mode);return i.lanes=r,i.return=e,i}}}var na=ta(!0),ra=ta(!1),sa=V(null),ia=null;function oa(e){var t=e.alternate;z(ua,1&ua.current),z(sa,e),null===ia&&(null===t||null!==fi.current||null!==t.memoizedState)&&(ia=e)}function aa(e){if(22===e.tag){if(z(ua,ua.current),z(sa,e),null===ia){var t=e.alternate;null!==t&&null!==t.memoizedState&&(ia=e)}}else la()}function la(){z(ua,ua.current),z(sa,sa.current)}function ca(e){U(sa),ia===e&&(ia=null),U(ua)}var ua=V(0);function da(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||gd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var fa={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Oc(t,e,r),oi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Oc(t,e,r),oi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Oc(t,e,n),oi(t,e,n))}};function pa(e,t,n,r,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!Yn(n,r)||!Yn(s,i))}function ma(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&fa.enqueueReplaceState(t,t.state,null)}function ga(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var ya="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function va(e){ya(e)}function ba(e){console.error(e)}function wa(e){ya(e)}function xa(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function ka(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Sa(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){xa(e,t)},n}function Ea(e){return(e=si(e)).tag=3,e}function _a(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){ka(t,n,r)}}var o=n.stateNode;null!==o&&"function"===typeof o.componentDidCatch&&(e.callback=function(){ka(t,n,r),"function"!==typeof s&&(null===Ec?Ec=new Set([this]):Ec.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ca=Error(o(461)),Na=!1;function Ta(e,t,n,r){t.child=null===e?ra(t,null,n,r):na(t,e.child,n,r)}function Ia(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var o={};for(var a in r)"ref"!==a&&(o[a]=r[a])}else o=r;return _s(t),r=Pi(e,t,n,o,i,s),a=Di(),null===e||Na?(is&&a&&ts(t),t.flags|=1,Ta(e,t,r,s),t.child):(Oi(e,t,s),Qa(e,t,s))}function Aa(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Mr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Ur(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Pa(e,t,i,r,s))}if(i=e.child,!Ya(e,s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:Yn)(o,r)&&e.ref===t.ref)return Qa(e,t,s)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function Pa(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Yn(i,r)&&e.ref===t.ref){if(Na=!1,t.pendingProps=r=i,!Ya(e,s))return t.lanes=e.lanes,Qa(e,t,s);0!==(131072&e.flags)&&(Na=!0)}}return Da(e,t,n,r,s)}function ja(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return La(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,La(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&$s(0,null!==i?i.cachePool:null),null!==i?mi(t,i):gi(),aa(t)}else null!==i?($s(0,i.cachePool),mi(t,i),la(),t.memoizedState=null):(null!==e&&$s(0,null),gi(),la());return Ta(e,t,s,n),t.child}function La(e,t,n,r){var s=Bs();return s=null===s?null:{parent:js._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&$s(0,null),gi(),aa(t),null!==e&&Ss(e,t,r,!0),null}function Ra(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(o(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Da(e,t,n,r,s){return _s(t),n=Pi(e,t,n,r,void 0,s),r=Di(),null===e||Na?(is&&r&&ts(t),t.flags|=1,Ta(e,t,n,s),t.child):(Oi(e,t,s),Qa(e,t,s))}function Oa(e,t,n,r,s,i){return _s(t),t.updateQueue=null,n=Li(t,r,n,s),ji(e),r=Di(),null===e||Na?(is&&r&&ts(t),t.flags|=1,Ta(e,t,n,i),t.child):(Oi(e,t,i),Qa(e,t,i))}function Ma(e,t,n,r,s){if(_s(t),null===t.stateNode){var i=Rr,o=n.contextType;"object"===typeof o&&null!==o&&(i=Cs(o)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=fa,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),o=n.contextType,i.context="object"===typeof o&&null!==o?Cs(o):Rr,i.state=t.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(ha(t,n,o,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(o=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),o!==i.state&&fa.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var a=t.memoizedProps,l=ga(n,a);i.props=l;var c=i.context,u=n.contextType;o=Rr,"object"===typeof u&&null!==u&&(o=Cs(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,a=t.pendingProps!==a,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a||c!==o)&&ma(t,i,r,o),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,a||h!==c||ti?("function"===typeof d&&(ha(t,n,d,r),c=t.memoizedState),(l=ti||pa(t,n,l,r,h,c,o))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=o,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=ga(n,o=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Rr,"object"===typeof c&&null!==c&&(l=Cs(c)),(c="function"===typeof(a=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==d||h!==l)&&ma(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var f=t.memoizedState;o!==d||h!==f||ti||null!==e&&null!==e.dependencies&&Es(e.dependencies)?("function"===typeof a&&(ha(t,n,a,r),f=t.memoizedState),(u=ti||pa(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Es(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ra(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=na(t,e.child,null,s),t.child=na(t,null,n,s)):Ta(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Qa(e,t,s),e}function Fa(e,t,n,r){return fs(),t.flags|=256,Ta(e,t,n,r),t.child}var Va={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ua(e){return{baseLanes:e,cachePool:Hs()}}function za(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gc),e}function Ba(e,t,n){var r,s=t.pendingProps,i=!1,a=0!==(128&t.flags);if((r=a)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ua.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?oa(t):la(),is){var l,c=ss;if(l=c){e:{for(l=c,c=as;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Xr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=Or(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gd(c)?t.lanes=32:t.lanes=536870912,null;ca(t)}return c=s.children,s=s.fallback,i?(la(),c=Ha({mode:"hidden",children:c},i=t.mode),s=zr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=Ua(n),i.childLanes=za(e,r,n),t.memoizedState=Va,s):(oa(t),$a(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(a)256&t.flags?(oa(t),t.flags&=-257,t=qa(e,t,n)):null!==t.memoizedState?(la(),t.child=e.child,t.flags|=128,t=null):(la(),i=s.fallback,c=t.mode,s=Ha({mode:"visible",children:s.children},c),(i=zr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,na(t,e.child,null,n),(s=t.child).memoizedState=Ua(n),s.childLanes=za(e,r,n),t.memoizedState=Va,t=i);else if(oa(t),gd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(o(419))).stack="",s.digest=r,ms({value:s,source:null,stack:null}),t=qa(e,t,n)}else if(Na||Ss(e,t,n,!1),r=0!==(n&e.childLanes),Na||r){if(null!==(r=rc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Te(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Pr(e,s),Oc(r,e,s),Ca;"$?"===c.data||Gc(),t=qa(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=yd(c.nextSibling),rs=t,is=!0,os=null,as=!1,null!==e&&(Kr[Qr++]=Xr,Kr[Qr++]=Jr,Kr[Qr++]=Yr,Xr=e.id,Jr=e.overflow,Yr=t),(t=$a(t,s.children)).flags|=4096);return t}return i?(la(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fr(u,i):(i=zr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=Ua(n):(null!==(l=c.cachePool)?(u=js._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hs(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=za(e,r,n),t.memoizedState=Va,s):(oa(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function $a(e,t){return(t=Ha({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Ha(e,t){return(e=Or(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function qa(e,t,n){return na(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Wa(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Ga(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ka(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Ta(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Wa(e,n,t);else if(19===e.tag)Wa(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(ua,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===da(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Ga(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===da(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Ga(t,!0,n,null,i);break;case"together":Ga(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),fc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ss(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ya(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Es(e))}function Xa(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Na=!0;else{if(!Ya(e,n)&&0===(128&t.flags))return Na=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),bs(0,js,e.memoizedState.cache),fs();break;case 27:case 5:K(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(oa(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(oa(t),null!==(e=Qa(e,t,n))?e.sibling:null);oa(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ss(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,ja(e,t,n);case 24:bs(0,js,e.memoizedState.cache)}return Qa(e,t,n)}(e,t,n);Na=0!==(131072&e.flags)}else Na=!1,is&&0!==(1048576&t.flags)&&es(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===k){t.tag=11,t=Ia(null,t,r,e,n);break e}if(s===_){t.tag=14,t=Aa(null,t,r,e,n);break e}}throw t=j(r)||r,Error(o(306,t,""))}Mr(r)?(e=ga(r,e),t.tag=1,t=Ma(null,t,r,e,n)):(t.tag=0,t=Da(null,t,r,e,n))}return t;case 0:return Da(e,t,t.type,t.pendingProps,n);case 1:return Ma(e,t,r=t.type,s=ga(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(o(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var a=t.memoizedState;if(r=a.cache,bs(0,js,r),r!==i.cache&&ks(t,[js],n,!0),ci(),r=a.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:a.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Fa(e,t,r,n);break e}if(r!==s){ms(s=Er(Error(o(424)),t)),t=Fa(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=yd(e.firstChild),rs=t,is=!0,os=null,as=!0,n=ra(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===s){t=Qa(e,t,n);break e}Ta(e,t,r,n)}t=t.child}return t;case 26:return Ra(e,t),null===e?(n=Td(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=rd(H.current).createElement(n))[je]=t,r[Le]=e,ed(r,n,e),qe(r),t.stateNode=r):t.memoizedState=Td(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return K(t),null===e&&is&&(r=t.stateNode=wd(t.type,t.pendingProps,H.current),rs=t,as=!0,s=ss,fd(t.type)?(vd=s,ss=yd(r.firstChild)):ss=s),Ta(e,t,t.pendingProps.children,n),Ra(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=yd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,as))?(t.stateNode=r,rs=t,ss=yd(r.firstChild),as=!1,s=!0):s=!1),s||cs(t)),K(t),s=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,r=i.children,od(s,i)?r=null:null!==a&&od(s,a)&&(t.flags|=32),null!==t.memoizedState&&(s=Pi(e,t,Ri,null,null,n),Kd._currentValue=s),Ra(e,t),Ta(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=yd(e.nextSibling)))return null}return e}(n,t.pendingProps,as))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Ba(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=na(t,null,r,n):Ta(e,t,r,n),t.child;case 11:return Ia(e,t,t.type,t.pendingProps,n);case 7:return Ta(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ta(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bs(0,t.type,r.value),Ta(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,_s(t),r=r(s=Cs(s)),t.flags|=1,Ta(e,t,r,n),t.child;case 14:return Aa(e,t,t.type,t.pendingProps,n);case 15:return Pa(e,t,t.type,t.pendingProps,n);case 19:return Ka(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Ha(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return ja(e,t,n);case 24:return _s(t),r=Cs(js),null===e?(null===(s=Bs())&&(s=rc,i=Ls(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),bs(0,js,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,js,r)):(r=i.cache,bs(0,js,r),r!==s.cache&&ks(t,[js],n,!0))),Ta(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function Ja(e){e.flags|=4}function Za(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!zd(t)){if(null!==(t=sa.current)&&((4194048&ic)===ic?null!==ia:(62914560&ic)!==ic&&0===(536870912&ic)||t!==ia))throw Js=Ks,Ws;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function nl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function rl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return nl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ws(js),G(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Ja(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ps())),nl(t),null;case 26:return n=t.memoizedState,null===e?(Ja(t),null!==n?(nl(t),Za(t,n)):(nl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Ja(t),nl(t),Za(t,n)):(nl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Ja(t),nl(t),t.flags&=-16777217),null;case 27:Q(t),n=H.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}e=B.current,hs(t)?us(t):(e=wd(s,r,n),t.stateNode=e,Ja(t))}return nl(t),null;case 5:if(Q(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return nl(t),null}if(e=B.current,hs(t))us(t);else{switch(s=rd(H.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[je]=t,e[Le]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(ed(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Ja(t)}}return nl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Ja(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=H.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[je]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Yu(e.nodeValue,n)))||cs(t)}else(e=rd(e).createTextNode(r))[je]=t,t.stateNode=e}return nl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[je]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;nl(t),s=!1}else s=ps(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(ca(t),t):(ca(t),null)}if(ca(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),el(t,t.updateQueue),nl(t),null;case 4:return G(),null===e&&Uu(t.stateNode.containerInfo),nl(t),null;case 10:return ws(t.type),nl(t),null;case 19:if(U(ua),null===(s=t.memoizedState))return nl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)tl(s,!1);else{if(0!==hc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=da(e))){for(t.flags|=128,tl(s,!1),e=i.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Vr(n,e),n=n.sibling;return z(ua,1&ua.current|2),t.child}e=e.sibling}null!==s.tail&&te()>kc&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=da(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return nl(t),null}else 2*te()-s.renderingStartTime>kc&&536870912!==n&&(t.flags|=128,r=!0,tl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=ua.current,z(ua,r?1&e|2:1&e),t):(nl(t),null);case 22:case 23:return ca(t),yi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(nl(t),6&t.subtreeFlags&&(t.flags|=8192)):nl(t),null!==(n=t.updateQueue)&&el(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&U(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(js),nl(t),null;case 25:case 30:return null}throw Error(o(156,t.tag))}function sl(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(js),G(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Q(t),null;case 13:if(ca(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return U(ua),null;case 4:return G(),null;case 10:return ws(t.type),null;case 22:case 23:return ca(t),yi(),null!==e&&U(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(js),null;default:return null}}function il(e,t){switch(ns(t),t.tag){case 3:ws(js),G();break;case 26:case 27:case 5:Q(t);break;case 4:G();break;case 13:ca(t);break;case 19:U(ua);break;case 10:ws(t.type);break;case 22:case 23:ca(t),yi(),null!==e&&U(zs);break;case 24:ws(js)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,o=n.inst;r=i(),o.destroy=r}n=n.next}while(n!==s)}}catch(a){uu(t,t.return,a)}}function al(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var o=r.inst,a=o.destroy;if(void 0!==a){o.destroy=void 0,s=t;var l=n,c=a;try{c()}catch(u){uu(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){uu(e,e.return,r)}}}function cl(e,t,n){n.props=ga(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){uu(e,t,s)}}function dl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){uu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){uu(e,t,i)}else n.current=null}function hl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){uu(e,e.return,s)}}function fl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,a=null,l=null,c=null,u=null,d=null;for(p in n){var h=n[p];if(n.hasOwnProperty(p)&&null!=h)switch(p){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(p)||Ju(e,t,p,null,r,h)}}for(var f in r){var p=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=p||null!=h))switch(f){case"type":i=p;break;case"name":s=p;break;case"checked":u=p;break;case"defaultChecked":d=p;break;case"value":a=p;break;case"defaultValue":l=p;break;case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(o(137,t));break;default:p!==h&&Ju(e,t,f,p,r,h)}}return void gt(e,a,l,c,u,d,i,s);case"select":for(i in p=a=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":p=c;default:r.hasOwnProperty(i)||Ju(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":a=i;default:i!==c&&Ju(e,t,s,i,r,c)}return t=l,n=a,r=p,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in p=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Ju(e,t,l,null,r,s)}for(a in r)if(s=r[a],i=n[a],r.hasOwnProperty(a)&&(null!=s||null!=i))switch(a){case"value":f=s;break;case"defaultValue":p=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(o(91));break;default:s!==i&&Ju(e,t,a,s,r,i)}return void wt(e,f,p);case"option":for(var m in n)if(f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Ju(e,t,m,null,r,f);for(c in r)if(f=r[c],p=n[c],r.hasOwnProperty(c)&&f!==p&&(null!=f||null!=p))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Ju(e,t,c,f,r,p);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Ju(e,t,g,null,r,f);for(u in r)if(f=r[u],p=n[u],r.hasOwnProperty(u)&&f!==p&&(null!=f||null!=p))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(o(137,t));break;default:Ju(e,t,u,f,r,p)}return;default:if(Ct(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&Zu(e,t,y,void 0,r,f);for(d in r)f=r[d],p=n[d],!r.hasOwnProperty(d)||f===p||void 0===f&&void 0===p||Zu(e,t,d,f,r,p);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Ju(e,t,v,null,r,f);for(h in r)f=r[h],p=n[h],!r.hasOwnProperty(h)||f===p||null==f&&null==p||Ju(e,t,h,f,r,p)}(r,e.type,n,t),r[Le]=t}catch(s){uu(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&fd(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&fd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xu));else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,n),e=e.sibling;null!==e;)gl(e,t,n),e=e.sibling}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&fd(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);ed(t,r,n),t[je]=e,t[Le]=n}catch(i){uu(e,e.return,i)}}var bl=!1,wl=!1,xl=!1,kl="function"===typeof WeakSet?WeakSet:Set,Sl=null;function El(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ml(e,n),4&r&&ol(5,n);break;case 1:if(Ml(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(o){uu(n,n.return,o)}else{var s=ga(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(a){uu(n,n.return,a)}}64&r&&ll(n),512&r&&ul(n,n.return);break;case 3:if(Ml(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(o){uu(n,n.return,o)}}break;case 27:null===t&&4&r&&vl(n);case 26:case 5:Ml(e,n),null===t&&4&r&&hl(n),512&r&&ul(n,n.return);break;case 12:Ml(e,n);break;case 13:Ml(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||bl)){t=null!==t&&null!==t.memoizedState||wl,s=bl;var i=wl;bl=r,(wl=t)&&!i?Vl(e,n,0!==(8772&n.subtreeFlags)):Ml(e,n),bl=s,wl=i}break;case 30:break;default:Ml(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ue(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Cl=null,Nl=!1;function Tl(e,t,n){for(n=n.child;null!==n;)Il(e,t,n),n=n.sibling}function Il(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:wl||dl(n,t),Tl(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:wl||dl(n,t);var r=Cl,s=Nl;fd(n.type)&&(Cl=n.stateNode,Nl=!1),Tl(e,t,n),xd(n.stateNode),Cl=r,Nl=s;break;case 5:wl||dl(n,t);case 6:if(r=Cl,s=Nl,Cl=null,Tl(e,t,n),Nl=s,null!==(Cl=r))if(Nl)try{(9===Cl.nodeType?Cl.body:"HTML"===Cl.nodeName?Cl.ownerDocument.body:Cl).removeChild(n.stateNode)}catch(o){uu(n,t,o)}else try{Cl.removeChild(n.stateNode)}catch(o){uu(n,t,o)}break;case 18:null!==Cl&&(Nl?(pd(9===(e=Cl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Nh(e)):pd(Cl,n.stateNode));break;case 4:r=Cl,s=Nl,Cl=n.stateNode.containerInfo,Nl=!0,Tl(e,t,n),Cl=r,Nl=s;break;case 0:case 11:case 14:case 15:wl||al(2,n,t),wl||al(4,n,t),Tl(e,t,n);break;case 1:wl||(dl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&cl(n,t,r)),Tl(e,t,n);break;case 21:Tl(e,t,n);break;case 22:wl=(r=wl)||null!==n.memoizedState,Tl(e,t,n),wl=r;break;default:Tl(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Nh(e)}catch(n){uu(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new kl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new kl),t;default:throw Error(o(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function jl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 27:if(fd(l.type)){Cl=l.stateNode,Nl=!1;break e}break;case 5:Cl=l.stateNode,Nl=!1;break e;case 3:case 4:Cl=l.stateNode.containerInfo,Nl=!0;break e}l=l.return}if(null===Cl)throw Error(o(160));Il(i,a,s),Cl=null,Nl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Ll=null;function Rl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jl(t,e),Dl(e),4&r&&(al(3,e,e.return),ol(3,e),al(5,e,e.return));break;case 1:jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),64&r&&bl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Ll;if(jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ve]||i[je]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),ed(i,r,n),i[je]=e,qe(i),r=i;break e;case"link":var a=Vd("link","href",s).get(r+(n.href||""));if(a)for(var l=0;l<a.length;l++)if((i=a[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){a.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(a=Vd("meta","content",s).get(r+(n.content||"")))for(l=0;l<a.length;l++)if((i=a[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){a.splice(l,1);break t}ed(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(o(468,r))}i[je]=e,qe(i),r=i}e.stateNode=r}else Ud(s,e.type,e.stateNode);else e.stateNode=Rd(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?Ud(s,e.type,e.stateNode):Rd(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&fl(e,e.memoizedProps,n.memoizedProps)}break;case 27:jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),null!==n&&4&r&&fl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jl(t,e),Dl(e),512&r&&(wl||null===n||dl(n,n.return)),32&e.flags){s=e.stateNode;try{kt(s,"")}catch(p){uu(e,e.return,p)}}4&r&&null!=e.stateNode&&fl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(xl=!0);break;case 6:if(jl(t,e),Dl(e),4&r){if(null===e.stateNode)throw Error(o(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){uu(e,e.return,p)}}break;case 3:if(Fd=null,s=Ll,Ll=Ed(t.containerInfo),jl(t,e),Ll=s,Dl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Nh(t.containerInfo)}catch(p){uu(e,e.return,p)}xl&&(xl=!1,Ol(e));break;case 4:r=Ll,Ll=Ed(e.stateNode.containerInfo),jl(t,e),Dl(e),Ll=r;break;case 12:default:jl(t,e),Dl(e);break;case 13:jl(t,e),Dl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(xc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=bl,d=wl;if(bl=u||s,wl=d||c,jl(t,e),wl=d,bl=u,Dl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||bl||wl||Fl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){uu(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){uu(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:jl(t,e),Dl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Dl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(o(160));switch(n.tag){case 27:var s=n.stateNode;yl(e,ml(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(kt(i,""),n.flags&=-33),yl(e,ml(e),i);break;case 3:case 4:var a=n.stateNode.containerInfo;gl(e,ml(e),a);break;default:throw Error(o(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ol(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ol(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Ml(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)El(e,t.alternate,t),t=t.sibling}function Fl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:al(4,t,t.return),Fl(t);break;case 1:dl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&cl(t,t.return,n),Fl(t);break;case 27:xd(t.stateNode);case 26:case 5:dl(t,t.return),Fl(t);break;case 22:null===t.memoizedState&&Fl(t);break;default:Fl(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,o=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(s,i,n),ol(4,i);break;case 1:if(Vl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var a=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],a)}catch(c){uu(r,r.return,c)}}n&&64&o&&ll(i),ul(i,i.return);break;case 27:vl(i);case 26:case 5:Vl(s,i,n),n&&null===r&&4&o&&hl(i),ul(i,i.return);break;case 12:Vl(s,i,n);break;case 13:Vl(s,i,n),n&&4&o&&Al(s,i);break;case 22:null===i.memoizedState&&Vl(s,i,n),ul(i,i.return);break;case 30:break;default:Vl(s,i,n)}t=t.sibling}}function Ul(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Rs(n))}function zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rs(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)$l(e,t,n,r),t=t.sibling}function $l(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&s&&ol(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rs(e)));break;case 12:if(2048&s){Bl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,o=i.id,a=i.onPostCommit;"function"===typeof a&&a(o,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,o=t.alternate,null!==t.memoizedState?2&i._visibility?Bl(e,t,n,r):ql(e,t):2&i._visibility?Bl(e,t,n,r):(i._visibility|=2,Hl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&Ul(o,t);break;case 24:Bl(e,t,n,r),2048&s&&zl(t.alternate,t)}}function Hl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,o=t,a=n,l=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:Hl(i,o,a,l,s),ol(8,o);break;case 23:break;case 22:var u=o.stateNode;null!==o.memoizedState?2&u._visibility?Hl(i,o,a,l,s):ql(i,o):(u._visibility|=2,Hl(i,o,a,l,s)),s&&2048&c&&Ul(o.alternate,o);break;case 24:Hl(i,o,a,l,s),s&&2048&c&&zl(o.alternate,o);break;default:Hl(i,o,a,l,s)}t=t.sibling}}function ql(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:ql(n,r),2048&s&&Ul(r.alternate,r);break;case 24:ql(n,r),2048&s&&zl(r.alternate,r);break;default:ql(n,r)}t=t.sibling}}var Wl=8192;function Gl(e){if(e.subtreeFlags&Wl)for(e=e.child;null!==e;)Kl(e),e=e.sibling}function Kl(e){switch(e.tag){case 26:Gl(e),e.flags&Wl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(o(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=Id(n.href),i=e.querySelector(Ad(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Hd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void qe(i);i=e.ownerDocument||e,n=Pd(n),(s=kd.get(s))&&Od(n,s),qe(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ed(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Hd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ll,e.memoizedState,e.memoizedProps);break;case 5:default:Gl(e);break;case 3:case 4:var t=Ll;Ll=Ed(e.stateNode.containerInfo),Gl(e),Ll=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Wl,Wl=16777216,Gl(e),Wl=t):Gl(e))}}function Ql(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Yl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 0:case 11:case 15:Yl(e),2048&e.flags&&al(9,e,e.return);break;case 3:case 12:default:Yl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Jl(e)):Yl(e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Sl=r,Zl(r,e)}Ql(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:al(8,t,t.return),Jl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Jl(t));break;default:Jl(t)}e=e.sibling}}function Zl(e,t){for(;null!==Sl;){var n=Sl;switch(n.tag){case 0:case 11:case 15:al(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Rs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Sl=r;else e:for(n=e;null!==Sl;){var s=(r=Sl).sibling,i=r.return;if(_l(r),r===n){Sl=null;break e}if(null!==s){s.return=i,Sl=s;break e}Sl=i}}}var ec={getCacheForType:function(e){var t=Cs(js),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},tc="function"===typeof WeakMap?WeakMap:Map,nc=0,rc=null,sc=null,ic=0,oc=0,ac=null,lc=!1,cc=!1,uc=!1,dc=0,hc=0,fc=0,pc=0,mc=0,gc=0,yc=0,vc=null,bc=null,wc=!1,xc=0,kc=1/0,Sc=null,Ec=null,_c=0,Cc=null,Nc=null,Tc=0,Ic=0,Ac=null,Pc=null,jc=0,Lc=null;function Rc(){if(0!==(2&nc)&&0!==ic)return ic&-ic;if(null!==R.T){return 0!==Ms?Ms:Iu()}return Ae()}function Dc(){0===gc&&(gc=0===(536870912&ic)||is?ke():536870912);var e=sa.current;return null!==e&&(e.flags|=32),gc}function Oc(e,t,n){(e!==rc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||($c(e,0),Uc(e,ic,gc,!1)),_e(e,n),0!==(2&nc)&&e===rc||(e===rc&&(0===(2&nc)&&(pc|=n),4===hc&&Uc(e,ic,gc,!1)),ku(e))}function Mc(e,t,n){if(0!==(6&nc))throw Error(o(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=r?function(e,t){var n=nc;nc|=2;var r=qc(),s=Wc();rc!==e||ic!==t?(Sc=null,kc=te()+500,$c(e,t)):cc=we(e,t);e:for(;;)try{if(0!==oc&&null!==sc){t=sc;var i=ac;t:switch(oc){case 1:oc=0,ac=null,Zc(e,t,i,1);break;case 2:case 9:if(Qs(i)){oc=0,ac=null,Jc(t);break}t=function(){2!==oc&&9!==oc||rc!==e||(oc=7),ku(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Qs(i)?(oc=0,ac=null,Jc(t)):(oc=0,ac=null,Zc(e,t,i,7));break;case 5:var a=null;switch(sc.tag){case 26:a=sc.memoizedState;case 5:case 27:var l=sc;if(!a||zd(a)){oc=0,ac=null;var c=l.sibling;if(null!==c)sc=c;else{var u=l.return;null!==u?(sc=u,eu(u)):sc=null}break t}}oc=0,ac=null,Zc(e,t,i,5);break;case 6:oc=0,ac=null,Zc(e,t,i,6);break;case 8:Bc(),hc=6;break e;default:throw Error(o(462))}}Yc();break}catch(d){Hc(e,d)}return vs=ys=null,R.H=r,R.A=s,nc=n,null!==sc?0:(rc=null,ic=0,Tr(),hc)}(e,t):Kc(e,t,!0),i=r;;){if(0===s){cc&&!r&&Uc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var a=0;else a=0!==(a=-536870913&e.pendingLanes)?a:536870912&a?536870912:0;if(0!==a){t=a;e:{var l=e;s=vc;var c=l.current.memoizedState.isDehydrated;if(c&&($c(l,a).flags|=256),2!==(a=Kc(l,a,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,s=4;break e}i=bc,bc=s,null!==i&&(null===bc?bc=i:bc.push.apply(bc,i))}s=a}if(i=!1,2!==s)continue}}if(1===s){$c(e,0),Uc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(o(345));case 4:if((4194048&t)!==t)break;case 6:Uc(r,t,gc,!lc);break e;case 2:bc=null;break;case 3:case 5:break;default:throw Error(o(329))}if((62914560&t)===t&&10<(s=xc+300-te())){if(Uc(r,t,gc,!lc),0!==be(r,0,!0))break e;r.timeoutHandle=ld(Fc.bind(null,r,n,bc,Sc,wc,t,gc,pc,yc,lc,i,2,-0,0),s)}else Fc(r,n,bc,Sc,wc,t,gc,pc,yc,lc,i,0,-0,0)}break}s=Kc(e,t,!1),i=!1}ku(e)}function Fc(e,t,n,r,s,i,a,l,c,u,d,h,f,p){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:$d},Kl(t),null!==(h=function(){if(null===Bd)throw Error(o(475));var e=Bd;return e.stylesheets&&0===e.count&&Wd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Wd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(nu.bind(null,e,t,i,n,r,s,a,l,c,d,1,f,p)),void Uc(e,i,a,!u);nu(e,t,i,n,r,s,a,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Qn(i(),s))return!1}catch(o){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Uc(e,t,n,r){t&=~mc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-fe(s),o=1<<i;r[i]=-1,s&=~o}0!==n&&Ce(e,n,t)}function zc(){return 0!==(6&nc)||(Su(0,!1),!1)}function Bc(){if(null!==sc){if(0===oc)var e=sc.return;else vs=ys=null,Mi(e=sc),Qo=null,Yo=0,e=sc;for(;null!==e;)il(e.alternate,e),e=e.return;sc=null}}function $c(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,cd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),rc=e,sc=n=Fr(e.current,null),ic=t,oc=0,ac=null,lc=!1,cc=we(e,t),uc=!1,yc=gc=mc=pc=fc=hc=0,bc=vc=null,wc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-fe(r),i=1<<s;t|=e[s],r&=~i}return dc=t,Tr(),n}function Hc(e,t){bi=null,R.H=qo,t===qs||t===Gs?(t=Zs(),oc=3):t===Ws?(t=Zs(),oc=4):oc=t===Ca?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,ac=t,null===sc&&(hc=1,xa(e,Er(t,e.current)))}function qc(){var e=R.H;return R.H=qo,null===e?qo:e}function Wc(){var e=R.A;return R.A=ec,e}function Gc(){hc=4,lc||(4194048&ic)!==ic&&null!==sa.current||(cc=!0),0===(134217727&fc)&&0===(134217727&pc)||null===rc||Uc(rc,ic,gc,!1)}function Kc(e,t,n){var r=nc;nc|=2;var s=qc(),i=Wc();rc===e&&ic===t||(Sc=null,$c(e,t)),t=!1;var o=hc;e:for(;;)try{if(0!==oc&&null!==sc){var a=sc,l=ac;switch(oc){case 8:Bc(),o=6;break e;case 3:case 2:case 9:case 6:null===sa.current&&(t=!0);var c=oc;if(oc=0,ac=null,Zc(e,a,l,c),n&&cc){o=0;break e}break;default:c=oc,oc=0,ac=null,Zc(e,a,l,c)}}Qc(),o=hc;break}catch(u){Hc(e,u)}return t&&e.shellSuspendCounter++,vs=ys=null,nc=r,R.H=s,R.A=i,null===sc&&(rc=null,ic=0,Tr()),o}function Qc(){for(;null!==sc;)Xc(sc)}function Yc(){for(;null!==sc&&!Z();)Xc(sc)}function Xc(e){var t=Xa(e.alternate,e,dc);e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Jc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Oa(n,t,t.pendingProps,t.type,void 0,ic);break;case 11:t=Oa(n,t,t.pendingProps,t.type.render,t.ref,ic);break;case 5:Mi(t);default:il(n,t),t=Xa(n,t=sc=Vr(t,dc),dc)}e.memoizedProps=e.pendingProps,null===t?eu(e):sc=t}function Zc(e,t,n,r){vs=ys=null,Mi(t),Qo=null,Yo=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ss(t,n,s,!0),null!==(n=sa.current)){switch(n.tag){case 13:return null===ia?Gc():null===n.alternate&&0===hc&&(hc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Ks?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),du(e,r,s)),!1;case 22:return n.flags|=65536,r===Ks?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),du(e,r,s)),!1}throw Error(o(435,n.tag))}return du(e,r,s),Gc(),!1}if(is)return null!==(t=sa.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ms(Er(e=Error(o(422),{cause:r}),n))):(r!==ls&&ms(Er(t=Error(o(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Er(r,n),ai(e,s=Sa(e.stateNode,r,s)),4!==hc&&(hc=2)),!1;var i=Error(o(520),{cause:r});if(i=Er(i,n),null===vc?vc=[i]:vc.push(i),4!==hc&&(hc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,ai(n,e=Sa(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ec||!Ec.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,_a(s=Ea(s),e,n,r),ai(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ic))return hc=1,xa(e,Er(n,e.current)),void(sc=null)}catch(i){if(null!==s)throw sc=s,i;return hc=1,xa(e,Er(n,e.current)),void(sc=null)}32768&t.flags?(is||1===r?e=!0:cc||0!==(536870912&ic)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=sa.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var n=rl(t.alternate,t,dc);if(null!==n)return void(sc=n);if(null!==(t=t.sibling))return void(sc=t);sc=t=e}while(null!==t);0===hc&&(hc=5)}function tu(e,t){do{var n=sl(e.alternate,e);if(null!==n)return n.flags&=32767,void(sc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(sc=e);sc=e=n}while(null!==e);hc=6,sc=null}function nu(e,t,n,r,s,i,a,l,c){e.cancelPendingCommit=null;do{au()}while(0!==_c);if(0!==(6&nc))throw Error(o(327));if(null!==t){if(t===e.current)throw Error(o(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var o=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var a=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=o&~n;0<n;){var u=31-fe(n),d=1<<u;a[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Ce(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(o&~t))}(e,n,i|=Nr,a,l,c),e===rc&&(sc=rc=null,ic=0),Nc=t,Cc=e,Tc=n,Ic=i,Ac=s,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,X(ie,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,s=D.p,D.p=2,a=nc,nc|=4;try{!function(e,t){if(e=e.containerInfo,td=nh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==i||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=a),f===i&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(nd={focusedElem:e,selectionRange:n},nh=!1,Sl=t;null!==Sl;)if(e=(t=Sl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,Sl=e;else for(;null!==Sl;){switch(i=(t=Sl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=ga(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))md(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":md(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(o(163))}if(null!==(e=t.sibling)){e.return=t.return,Sl=e;break}Sl=t.return}}(e,t)}finally{nc=a,D.p=s,R.T=r}}_c=1,ru(),su(),iu()}}function ru(){if(1===_c){_c=0;var e=Cc,t=Nc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=R.T,R.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{Rl(t,e);var i=nd,o=er(e.containerInfo),a=i.focusedElem,l=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&Zn(a.ownerDocument.documentElement,a)){if(null!==l&&tr(a)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in a)a.selectionStart=c,a.selectionEnd=Math.min(u,a.value.length);else{var d=a.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),p=a.textContent.length,m=Math.min(l.start,p),g=void 0===l.end?m:Math.min(l.end,p);!f.extend&&m>g&&(o=g,g=m,m=o);var y=Jn(a,m),v=Jn(a,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),m>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=a;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<d.length;a++){var w=d[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}nh=!!td,nd=td=null}finally{nc=s,D.p=r,R.T=n}}e.current=t,_c=2}}function su(){if(2===_c){_c=0;var e=Cc,t=Nc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=R.T,R.T=null;var r=D.p;D.p=2;var s=nc;nc|=4;try{El(e,t.alternate,t)}finally{nc=s,D.p=r,R.T=n}}_c=3}}function iu(){if(4===_c||3===_c){_c=0,ee();var e=Cc,t=Nc,n=Tc,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_c=5:(_c=0,Nc=Cc=null,ou(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Ec=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,s=D.p,D.p=2,R.T=null;try{for(var i=e.onRecoverableError,o=0;o<r.length;o++){var a=r[o];i(a.value,{componentStack:a.stack})}}finally{R.T=t,D.p=s}}0!==(3&Tc)&&au(),ku(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Lc?jc++:(jc=0,Lc=e):jc=0,Su(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Rs(t)))}function au(e){return ru(),su(),iu(),lu()}function lu(){if(5!==_c)return!1;var e=Cc,t=Ic;Ic=0;var n=Ie(Tc),r=R.T,s=D.p;try{D.p=32>n?32:n,R.T=null,n=Ac,Ac=null;var i=Cc,a=Tc;if(_c=0,Nc=Cc=null,Tc=0,0!==(6&nc))throw Error(o(331));var l=nc;if(nc|=4,Xl(i.current),$l(i,i.current,a,n),nc=l,Su(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{D.p=s,R.T=r,ou(e,t)}}function cu(e,t,n){t=Er(n,t),null!==(e=ii(e,t=Sa(e.stateNode,t,2),2))&&(_e(e,2),ku(e))}function uu(e,t,n){if(3===e.tag)cu(e,e,n);else for(;null!==t;){if(3===t.tag){cu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ec||!Ec.has(r))){e=Er(n,e),null!==(r=ii(t,n=Ea(2),2))&&(_a(n,r,t,e),_e(r,2),ku(r));break}}t=t.return}}function du(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(uc=!0,s.add(n),e=hu.bind(null,e,t,n),t.then(e,e))}function hu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,rc===e&&(ic&n)===n&&(4===hc||3===hc&&(62914560&ic)===ic&&300>te()-xc?0===(2&nc)&&$c(e,0):mc|=n,yc===ic&&(yc=0)),ku(e)}function fu(e,t){0===t&&(t=Se()),null!==(e=Pr(e,t))&&(_e(e,t),ku(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),fu(e,n)}function mu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),fu(e,n)}var gu=null,yu=null,vu=!1,bu=!1,wu=!1,xu=0;function ku(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),bu=!0,vu||(vu=!0,dd(function(){0!==(6&nc)?X(re,Eu):_u()}))}function Su(e,t){if(!wu&&bu){wu=!0;do{for(var n=!1,r=gu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var o=r.suspendedLanes,a=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=s&~(o&~a))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Tu(r,i))}else i=ic,0===(3&(i=be(r,r===rc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,i)||(n=!0,Tu(r,i));r=r.next}}while(n);wu=!1}}function Eu(){_u()}function _u(){bu=vu=!1;var e=0;0!==xu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ad&&(ad=e,!0);return ad=null,!1}()&&(e=xu),xu=0);for(var t=te(),n=null,r=gu;null!==r;){var s=r.next,i=Cu(r,t);0===i?(r.next=null,null===n?gu=s:n.next=s,null===s&&(yu=n)):(n=r,(0!==e||0!==(3&i))&&(bu=!0)),r=s}Su(e,!1)}function Cu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var o=31-fe(i),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&r)||(s[o]=xe(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}if(n=ic,n=be(e,e===(t=rc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&J(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&J(r),Ie(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=ae}return r=Nu.bind(null,e),n=X(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&J(r),e.callbackPriority=2,e.callbackNode=null,2}function Nu(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(au()&&e.callbackNode!==n)return null;var r=ic;return 0===(r=be(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Mc(e,r,t),Cu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Nu.bind(null,e):null)}function Tu(e,t){if(au())return null;Mc(e,t,!0)}function Iu(){return 0===xu&&(xu=ke()),xu}function Au(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var ju=0;ju<xr.length;ju++){var Lu=xr[ju];kr(Lu.toLowerCase(),"on"+(Lu[0].toUpperCase()+Lu.slice(1)))}kr(fr,"onAnimationEnd"),kr(pr,"onAnimationIteration"),kr(mr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(gr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),Qe("onMouseEnter",["mouseout","mouseover"]),Qe("onMouseLeave",["mouseout","mouseover"]),Qe("onPointerEnter",["pointerout","pointerover"]),Qe("onPointerLeave",["pointerout","pointerover"]),Ke("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ke("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ke("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ke("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ke("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Du=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function Ou(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){ya(u)}s.currentTarget=null,i=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;i=a,s.currentTarget=c;try{i(s)}catch(u){ya(u)}s.currentTarget=null,i=l}}}}function Mu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(zu(t,e,2,!1),n.add(r))}function Fu(e,t,n){var r=0;t&&(r|=4),zu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Uu(e){if(!e[Vu]){e[Vu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Du.has(t)||Fu(t,!1,e),Fu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Fu("selectionchange",!1,t))}}function zu(e,t,n,r){switch(ch(t)){case 2:var s=rh;break;case 8:s=sh;break;default:s=ih}n=s.bind(null,t,n,e),s=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==a;){if(null===(o=ze(a)))return;if(5===(c=o.tag)||6===c||26===c||27===c){r=i=o;continue e}a=a.parentNode}}r=r.return}Ot(function(){var r=i,s=Pt(n),o=[];e:{var a=wr.get(e);if(void 0!==a){var c=Zt,u=e;switch(e){case"keypress":if(0===qt(n))break e;case"keydown":case"keyup":c=mn;break;case"focusin":u="focus",c=on;break;case"focusout":u="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case pr:case mr:c=an;break;case br:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==a?a+"Capture":null:a;d=[];for(var p,m=r;null!==m;){var g=m;if(p=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===p||null===f||null!=(g=Mt(m,f))&&d.push($u(m,g,p)),h)break;m=m.return}0<d.length&&(a=new c(a,u,null,n,s),o.push({event:a,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===At||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[Re])&&(c||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",m="pointer"),h=null==c?a:$e(c),p=null==u?a:$e(u),(a=new d(g,m+"leave",c,n,s)).target=h,a.relatedTarget=p,g=null,ze(s)===r&&((d=new d(f,m+"enter",u,n,s)).target=p,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,m=0,p=d=c;p;p=qu(p))m++;for(p=0,g=f;g;g=qu(g))p++;for(;0<m-p;)d=qu(d),m--;for(;0<p-m;)f=qu(f),p--;for(;m--;){if(d===f||null!==f&&d===f.alternate)break e;d=qu(d),f=qu(f)}d=null}else d=null;null!==c&&Wu(o,a,c,d,!1),null!==u&&null!==h&&Wu(o,h,u,d,!0)}if("select"===(c=(a=r?$e(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var y=Fn;else if(jn(a))if(Vn)y=Kn;else{y=Wn;var v=qn}else!(c=a.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==a.type&&"radio"!==a.type?r&&Ct(r.elementType)&&(y=Fn):y=Gn;switch(y&&(y=y(e,r))?Ln(o,y,n,s):(v&&v(e,a,r),"focusout"===e&&r&&"number"===a.type&&null!=r.memoizedProps.value&&vt(a,"number",a.value)),v=r?$e(r):window,e){case"focusin":(jn(v)||"true"===v.contentEditable)&&(rr=v,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(o,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":ar(o,n,s)}var b;if(kn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else An?Tn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(_n&&"ko"!==n.locale&&(An||"onCompositionStart"!==w?"onCompositionEnd"===w&&An&&(b=Ht()):(Bt="value"in(zt=s)?zt.value:zt.textContent,An=!0)),0<(v=Hu(r,w)).length&&(w=new cn(w,e,null,n,s),o.push({event:w,listeners:v}),b?w.data=b:null!==(b=In(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Nn=!0,Cn);case"textInput":return(e=t.data)===Cn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(An)return"compositionend"===e||!kn&&Tn(e,t)?(e=Ht(),$t=Bt=zt=null,An=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return _n&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Hu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,s),o.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Au((s[Le]||null).action),o=r.submitter;o&&null!==(t=(t=o[Le]||null)?Au(t.formAction):o.getAttribute("formAction"))&&(i=t,o=null);var a=new Zt("action","action",null,r,s);e.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==xu){var e=o?Pu(s,o):new FormData(s);Po(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(a.preventDefault(),e=o?Pu(s,o):new FormData(s),Po(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(o,e,r,n,s)}Ou(o,t)})}function $u(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Mt(e,n))&&r.unshift($u(e,s,i)),null!=(s=Mt(e,t))&&r.push($u(e,s,i))),3===e.tag)return r;e=e.return}return[]}function qu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Wu(e,t,n,r,s){for(var i=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(a=a.tag,null!==l&&l===r)break;5!==a&&26!==a&&27!==a||null===c||(l=c,s?null!=(c=Mt(n,i))&&o.unshift($u(n,c,l)):s||null!=(c=Mt(n,i))&&o.push($u(n,c,l))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Gu=/\r\n?/g,Ku=/\u0000|\uFFFD/g;function Qu(e){return("string"===typeof e?e:""+e).replace(Gu,"\n").replace(Ku,"")}function Yu(e,t){return t=Qu(t),Qu(e)===t}function Xu(){}function Ju(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":_t(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Ju(e,t,"name",s.name,s,null),Ju(e,t,"formEncType",s.formEncType,s,null),Ju(e,t,"formMethod",s.formMethod,s,null),Ju(e,t,"formTarget",s.formTarget,s,null)):(Ju(e,t,"encType",s.encType,s,null),Ju(e,t,"method",s.method,s,null),Ju(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Mu("beforetoggle",e),Mu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Nt.get(n)||n,r)}}function Zu(e,t,n,r,s,i){switch(n){case"style":_t(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(o(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(o(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Mu("scroll",e);break;case"onScrollEnd":null!=r&&Mu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Xu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ge.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Le]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function ed(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Mu("error",e),Mu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var a=n[r];if(null!=a)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,r,a,n,null)}}return i&&Ju(e,t,"srcSet",n.srcSet,n,null),void(s&&Ju(e,t,"src",n.src,n,null));case"input":Mu("invalid",e);var l=r=a=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":a=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(o(137,t));break;default:Ju(e,t,s,d,n,null)}}return yt(e,r,l,c,u,a,i,!1),void dt(e);case"select":for(i in Mu("invalid",e),s=a=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":a=l;break;case"multiple":s=l;default:Ju(e,t,i,l,n,null)}return t=r,n=a,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(a in Mu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(a)&&null!=(l=n[a]))switch(a){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(o(91));break;default:Ju(e,t,a,l,n,null)}return xt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Ju(e,t,c,s,n,null);return;case"dialog":Mu("beforetoggle",e),Mu("toggle",e),Mu("cancel",e),Mu("close",e);break;case"iframe":case"object":Mu("load",e);break;case"video":case"audio":for(s=0;s<Ru.length;s++)Mu(Ru[s],e);break;case"image":Mu("error",e),Mu("load",e);break;case"details":Mu("toggle",e);break;case"embed":case"source":case"link":Mu("error",e),Mu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Ju(e,t,u,s,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&Zu(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Ju(e,t,l,s,n,null))}var td=null,nd=null;function rd(e){return 9===e.nodeType?e:e.ownerDocument}function sd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function id(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ad=null;var ld="function"===typeof setTimeout?setTimeout:void 0,cd="function"===typeof clearTimeout?clearTimeout:void 0,ud="function"===typeof Promise?Promise:void 0,dd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ud?function(e){return ud.resolve(null).then(e).catch(hd)}:ld;function hd(e){setTimeout(function(){throw e})}function fd(e){return"head"===e}function pd(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var o=e.ownerDocument;if(1&n&&xd(o.documentElement),2&n&&xd(o.body),4&n)for(xd(n=o.head),o=n.firstChild;o;){var a=o.nextSibling,l=o.nodeName;o[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===o.rel.toLowerCase()||n.removeChild(o),o=a}}if(0===s)return e.removeChild(i),void Nh(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Nh(t)}function md(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":md(n),Ue(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function gd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var vd=null;function bd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function wd(e,t,n){switch(t=rd(n),e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}function xd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ue(e)}var kd=new Map,Sd=new Set;function Ed(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=D.d;D.d={f:function(){var e=_d.f(),t=zc();return e||t},r:function(e){var t=Be(e);null!==t&&5===t.tag&&"form"===t.type?Lo(t):_d.r(e)},D:function(e){_d.D(e),Nd("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Nd("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Cd;if(r&&e&&t){var s='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+mt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+mt(n.imageSizes)+'"]')):s+='[href="'+mt(e)+'"]';var i=s;switch(t){case"style":i=Id(e);break;case"script":i=jd(e)}kd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),kd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Ad(i))||"script"===t&&r.querySelector(Ld(i))||(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Cd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=jd(e)}if(!kd.has(i)&&(e=h({rel:"modulepreload",href:e},t),kd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Ld(i)))return}ed(r=n.createElement("link"),"link",e),qe(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,s=jd(e),i=r.get(s);i||((i=n.querySelector(Ld(s)))||(e=h({src:e,async:!0},t),(t=kd.get(s))&&Md(e,t),qe(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){_d.S(e,t,n);var r=Cd;if(r&&e){var s=He(r).hoistableStyles,i=Id(e);t=t||"default";var o=s.get(i);if(!o){var a={loading:0,preload:null};if(o=r.querySelector(Ad(i)))a.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=kd.get(i))&&Od(e,n);var l=o=r.createElement("link");qe(l),ed(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Dd(o,t,r)}o={type:"stylesheet",instance:o,count:1,state:a},s.set(i,o)}}},M:function(e,t){_d.M(e,t);var n=Cd;if(n&&e){var r=He(n).hoistableScripts,s=jd(e),i=r.get(s);i||((i=n.querySelector(Ld(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=kd.get(s))&&Md(e,t),qe(i=n.createElement("script")),ed(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Cd="undefined"===typeof document?null:document;function Nd(e,t,n){var r=Cd;if(r&&"string"===typeof t&&t){var s=mt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Sd.has(s)||(Sd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(ed(t=r.createElement("link"),"link",e),qe(t),r.head.appendChild(t)))}}function Td(e,t,n,r){var s,i,a,l,c=(c=H.current)?Ed(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Id(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Id(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Ad(e)))&&!u._p&&(d.instance=u,d.state.loading=5),kd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},kd.set(e,n),u||(s=c,i=e,a=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),ed(i,"link",a),qe(i),s.head.appendChild(i))))),t&&null===r)throw Error(o(528,""));return d}if(t&&null!==r)throw Error(o(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=jd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function Id(e){return'href="'+mt(e)+'"'}function Ad(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function jd(e){return'[src="'+mt(e)+'"]'}function Ld(e){return"script[async]"+e}function Rd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(n.href)+'"]');if(r)return t.instance=r,qe(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return qe(r=(e.ownerDocument||e).createElement("style")),ed(r,"style",s),Dd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Id(n.href);var i=e.querySelector(Ad(s));if(i)return t.state.loading|=4,t.instance=i,qe(i),i;r=Pd(n),(s=kd.get(s))&&Od(r,s),qe(i=(e.ownerDocument||e).createElement("link"));var a=i;return a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),ed(i,"link",r),t.state.loading|=4,Dd(i,n.precedence,e),t.instance=i;case"script":return i=jd(n.src),(s=e.querySelector(Ld(i)))?(t.instance=s,qe(s),s):(r=n,(s=kd.get(i))&&Md(r=h({},n),s),qe(s=(e=e.ownerDocument||e).createElement("script")),ed(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(o(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Dd(r,n.precedence,e));return t.instance}function Dd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,o=0;o<r.length;o++){var a=r[o];if(a.dataset.precedence===t)i=a;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Od(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Fd=null;function Vd(e,t,n){if(null===Fd){var r=new Map,s=Fd=new Map;s.set(n,r)}else(r=(s=Fd).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ve]||i[je]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var o=i.getAttribute(t)||"";o=e+o;var a=r.get(o);a?a.push(i):r.set(o,[i])}}return r}function Ud(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function zd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function $d(){}function Hd(){if(this.count--,0===this.count)if(this.stylesheets)Wd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var qd=null;function Wd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,qd=new Map,t.forEach(Gd,e),qd=null,Hd.call(e))}function Gd(e,t){if(!(4&t.state.loading)){var n=qd.get(e);if(n)var r=n.get(null);else{n=new Map,qd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var o=s[i];"LINK"!==o.nodeName&&"not all"===o.getAttribute("media")||(n.set(o.dataset.precedence,o),r=o)}r&&n.set(null,r)}o=(s=t.instance).getAttribute("data-precedence"),(i=n.get(o)||r)===r&&n.set(null,s),n.set(o,s),this.count++,r=Hd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Kd={$$typeof:x,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Qd(e,t,n,r,s,i,o,a){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=o,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function Yd(e,t,n,r,s,i,o,a,l,c,u,d){return e=new Qd(e,t,n,o,a,l,c,d),t=1,!0===i&&(t|=24),i=Or(3,null,null,t),e.current=i,i.stateNode=e,(t=Ls()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function Xd(e){return e?e=Rr:Rr}function Jd(e,t,n,r,s,i){s=Xd(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Oc(n,0,t),oi(n,e,t))}function Zd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function eh(e,t){Zd(e,t),(e=e.alternate)&&Zd(e,t)}function th(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Oc(t,0,67108864),eh(e,67108864)}}var nh=!0;function rh(e,t,n,r){var s=R.T;R.T=null;var i=D.p;try{D.p=2,ih(e,t,n,r)}finally{D.p=i,R.T=s}}function sh(e,t,n,r){var s=R.T;R.T=null;var i=D.p;try{D.p=8,ih(e,t,n,r)}finally{D.p=i,R.T=s}}function ih(e,t,n,r){if(nh){var s=oh(r);if(null===s)Bu(e,t,r,ah,n),vh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return dh=bh(dh,e,t,n,r,s),!0;case"dragenter":return hh=bh(hh,e,t,n,r,s),!0;case"mouseover":return fh=bh(fh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,bh(ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,mh.set(i,bh(mh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(vh(e,r),4&t&&-1<yh.indexOf(e)){for(;null!==s;){var i=Be(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var o=ve(i.pendingLanes);if(0!==o){var a=i;for(a.pendingLanes|=2,a.entangledLanes|=2;o;){var l=1<<31-fe(o);a.entanglements[1]|=l,o&=~l}ku(i),0===(6&nc)&&(kc=te()+500,Su(0,!1))}}break;case 13:null!==(a=Pr(i,2))&&Oc(a,0,2),zc(),eh(i,2)}if(null===(i=oh(r))&&Bu(e,t,r,ah,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function oh(e){return lh(e=Pt(e))}var ah=null;function lh(e){if(ah=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return ah=e,null}function ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case oe:return 32;case ae:return 268435456;default:return 32}default:return 32}}var uh=!1,dh=null,hh=null,fh=null,ph=new Map,mh=new Map,gh=[],yh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vh(e,t){switch(e){case"focusin":case"focusout":dh=null;break;case"dragenter":case"dragleave":hh=null;break;case"mouseover":case"mouseout":fh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(t.pointerId)}}function bh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Be(t))&&th(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function wh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}(e.priority,function(){if(13===n.tag){var e=Rc();e=Te(e);var t=Pr(n,e);null!==t&&Oc(t,0,e),eh(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function xh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=Be(n))&&th(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);At=r,n.target.dispatchEvent(r),At=null,t.shift()}return!0}function kh(e,t,n){xh(e)&&n.delete(t)}function Sh(){uh=!1,null!==dh&&xh(dh)&&(dh=null),null!==hh&&xh(hh)&&(hh=null),null!==fh&&xh(fh)&&(fh=null),ph.forEach(kh),mh.forEach(kh)}function Eh(e,t){e.blockedOn===t&&(e.blockedOn=null,uh||(uh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Sh)))}var _h=null;function Ch(e){_h!==e&&(_h=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_h===e&&(_h=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===lh(r||n))continue;break}var i=Be(n);null!==i&&(e.splice(t,3),t-=3,Po(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Nh(e){function t(t){return Eh(t,e)}null!==dh&&Eh(dh,e),null!==hh&&Eh(hh,e),null!==fh&&Eh(fh,e),ph.forEach(t),mh.forEach(t);for(var n=0;n<gh.length;n++){var r=gh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gh.length&&null===(n=gh[0]).blockedOn;)wh(n),null===n.blockedOn&&gh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],o=s[Le]||null;if("function"===typeof i)o||Ch(n);else if(o){var a=null;if(i&&i.hasAttribute("formAction")){if(s=i,o=i[Le]||null)a=o.formAction;else if(null!==lh(s))continue}else a=o.action;"function"===typeof a?n[r+1]=a:(n.splice(r,3),r-=3),Ch(n)}}}function Th(e){this._internalRoot=e}function Ih(e){this._internalRoot=e}Ih.prototype.render=Th.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Jd(t.current,Rc(),e,t,null,null)},Ih.prototype.unmount=Th.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Jd(e.current,2,null,e,null,null),zc(),t[Re]=null}},Ih.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var n=0;n<gh.length&&0!==t&&t<gh[n].priority;n++);gh.splice(n,0,e),0===n&&wh(e)}};var Ah=s.version;if("19.1.1"!==Ah)throw Error(o(527,Ah,"19.1.1"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(o(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jh.isDisabled&&jh.supportsFiber)try{ue=jh.inject(Ph),de=jh}catch(Rh){}}t.createRoot=function(e,t){if(!a(e))throw Error(o(299));var n=!1,r="",s=va,i=ba,l=wa;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Yd(e,1,!1,null,0,n,r,s,i,l,0,null),e[Re]=t.current,Uu(e),new Th(t)},t.hydrateRoot=function(e,t,n){if(!a(e))throw Error(o(299));var r=!1,s="",i=va,l=ba,c=wa,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Yd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=Xd(null),n=t.current,(s=si(r=Te(r=Rc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,_e(t,n),ku(t),e[Re]=t.current,Uu(e),new Ih(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},232:(e,t,n)=>{n.d(t,{MF:()=>ue,j6:()=>ie,xZ:()=>oe,om:()=>se,Sx:()=>he,Wp:()=>de,KO:()=>fe});var r=n(606),s=n(965),i=n(776);let o,a;const l=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||u.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(y(this),n),g(l.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(e.apply(y(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(y(this),t,...r);return u.set(i,t.sort?t.sort():[t]),g(i)}}function m(e){return"function"===typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});c.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,f):e);var t}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(g(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&l.set(t,e)}).catch(()=>{}),h.set(t,e),t}(e);if(d.has(e))return d.get(e);const t=m(e);return t!==e&&(d.set(e,t),h.set(t,e)),t}const y=e=>h.get(e);const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!v.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return w.set(t,i),i}f=(e=>({...e,get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(f);class k{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===t?.type}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const S="@firebase/app",E="0.14.0",_=new s.Vy("@firebase/app"),C="@firebase/app-compat",N="@firebase/analytics-compat",T="@firebase/analytics",I="@firebase/app-check-compat",A="@firebase/app-check",P="@firebase/auth",j="@firebase/auth-compat",L="@firebase/database",R="@firebase/data-connect",D="@firebase/database-compat",O="@firebase/functions",M="@firebase/functions-compat",F="@firebase/installations",V="@firebase/installations-compat",U="@firebase/messaging",z="@firebase/messaging-compat",B="@firebase/performance",$="@firebase/performance-compat",H="@firebase/remote-config",q="@firebase/remote-config-compat",W="@firebase/storage",G="@firebase/storage-compat",K="@firebase/firestore",Q="@firebase/ai",Y="@firebase/firestore-compat",X="firebase",J="[DEFAULT]",Z={[S]:"fire-core",[C]:"fire-core-compat",[T]:"fire-analytics",[N]:"fire-analytics-compat",[A]:"fire-app-check",[I]:"fire-app-check-compat",[P]:"fire-auth",[j]:"fire-auth-compat",[L]:"fire-rtdb",[R]:"fire-data-connect",[D]:"fire-rtdb-compat",[O]:"fire-fn",[M]:"fire-fn-compat",[F]:"fire-iid",[V]:"fire-iid-compat",[U]:"fire-fcm",[z]:"fire-fcm-compat",[B]:"fire-perf",[$]:"fire-perf-compat",[H]:"fire-rc",[q]:"fire-rc-compat",[W]:"fire-gcs",[G]:"fire-gcs-compat",[K]:"fire-fst",[Y]:"fire-fst-compat",[Q]:"fire-vertex","fire-js":"fire-js",[X]:"fire-js-all"},ee=new Map,te=new Map,ne=new Map;function re(e,t){try{e.container.addComponent(t)}catch(n){_.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function se(e){const t=e.name;if(ne.has(t))return _.debug(`There were multiple attempts to register component ${t}.`),!1;ne.set(t,e);for(const n of ee.values())re(n,e);for(const n of te.values())re(n,e);return!0}function ie(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function oe(e){return null!==e&&void 0!==e&&void 0!==e.settings}const ae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},le=new i.FA("app","Firebase",ae);class ce{constructor(e,t,n){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw le.create("app-deleted",{appName:this._name})}}const ue="12.0.0";function de(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const s={name:J,automaticDataCollectionEnabled:!0,...t},o=s.name;if("string"!==typeof o||!o)throw le.create("bad-app-name",{appName:String(o)});if(n||(n=(0,i.T9)()),!n)throw le.create("no-options");const a=ee.get(o);if(a){if((0,i.bD)(n,a.options)&&(0,i.bD)(s,a.config))return a;throw le.create("duplicate-app",{appName:o})}const l=new r.h1(o);for(const r of ne.values())l.addComponent(r);const c=new ce(n,s,l);return ee.set(o,c),c}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J;const t=ee.get(e);if(!t&&e===J&&(0,i.T9)())return de();if(!t)throw le.create("no-app",{appName:e});return t}function fe(e,t,n){let s=Z[e]??e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void _.warn(e.join(" "))}se(new r.uA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const pe="firebase-heartbeat-store";let me=null;function ge(){return me||(me=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=g(o);return r&&o.addEventListener("upgradeneeded",e=>{r(g(o.result),e.oldVersion,e.newVersion,g(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(pe)}catch(n){console.warn(n)}}}).catch(e=>{throw le.create("idb-open",{originalErrorMessage:e.message})})),me}async function ye(e,t){try{const n=(await ge()).transaction(pe,"readwrite"),r=n.objectStore(pe);await r.put(t,ve(e)),await n.done}catch(n){if(n instanceof i.g)_.warn(n.message);else{const e=le.create("idb-set",{originalErrorMessage:n?.message});_.warn(e.message)}}}function ve(e){return`${e.name}!${e.options.appId}`}class be{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new xe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=we();if(null==this._heartbeatsCache?.heartbeats&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){_.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==this._heartbeatsCache?.heartbeats||0===this._heartbeatsCache.heartbeats.length)return"";const e=we(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ke(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ke(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=(0,i.Uj)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(e){return _.warn(e),""}}}function we(){return(new Date).toISOString().substring(0,10)}class xe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,i.zW)()&&(0,i.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ge()).transaction(pe),n=await t.objectStore(pe).get(ve(e));return await t.done,n}catch(t){if(t instanceof i.g)_.warn(t.message);else{const e=le.create("idb-get",{originalErrorMessage:t?.message});_.warn(e.message)}}}(this.app);return e?.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ye(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){const t=await this.read();return ye(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function ke(e){return(0,i.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var Se;Se="",se(new r.uA("platform-logger",e=>new k(e),"PRIVATE")),se(new r.uA("heartbeat",e=>new be(e),"PRIVATE")),fe(S,E,Se),fe(S,E,"esm2020"),fe("fire-js","")},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,k={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,s,i,o){return r=o.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:o}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function N(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(){}function I(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(a){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,s,i,o)}}if(u)return o=o(e),u=""===i?"."+N(e,0):i,x(o)?(s="",null!=u&&(s=u.replace(C,"$&/")+"/"),I(o,t,s,"",function(e){return e})):null!=o&&(_(o)&&(l=o,c=s+(null==o.key||e&&e.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+u,o=E(l.type,c,void 0,0,0,l.props)),t.push(o)),1;u=0;var d,p=""===i?".":i+":";if(x(e))for(var m=0;m<e.length;m++)u+=I(i=e[m],t,s,a=p+N(i,m),o);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=I(i=i.value,t,s,a=p+N(i,m++),o);else if("object"===a){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(T,T):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function L(){}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var o=Array(i),a=0;a<i;a++)o[a]=arguments[a+2];r.children=o}return E(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:a,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var o=arguments.length-2;if(1===o)s.children=n;else if(1<o){for(var a=Array(o),l=0;l<o;l++)a[l]=arguments[l+2];s.children=a}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===s[r]&&(s[r]=o[r]);return E(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),s=k.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(L,j)}catch(i){j(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=k.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},606:(e,t,n)=>{n.d(t,{h1:()=>a,uA:()=>s});var r=n(776);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),n=e?.optional??!1;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(n)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(n)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){const n=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(n)??new Set;r.add(e),this.onInitCallbacks.set(n,r);const s=this.instances.get(n);return s&&e(s,n),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch{}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{n.d(t,{rJ:()=>Za,H9:()=>el,x7:()=>tc,GG:()=>rc,aU:()=>il,My:()=>Hl,P:()=>Ul,BN:()=>sc,mZ:()=>ic});var r,s,i=n(232),o=n(606),a=n(965),l=n(776),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function i(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,o=0;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var o={};function a(e){return-128<=e&&128>e?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return m(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var c=a(0),d=a(1),h=a(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function m(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(d)}function g(e,t){return e.add(m(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(c,c);if(p(e))return t=b(m(e),t),new v(m(t.g),m(t.h));if(p(t))return t=b(e,m(t)),new v(m(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=d,r=t;0>=r.l(e);)n=w(n),r=w(r);var s=x(n,1),i=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var o=i.add(r);0>=o.l(e)&&(s=s.add(n),i=o),r=x(r,1),n=x(n,1)}return t=g(e,s.j(t)),new v(s,t)}for(s=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(i=l(n)).j(t);p(o)||0<o.l(e);)o=(i=l(n-=r)).j(t);f(i)&&(i=d),s=s.add(i),e=g(e,o)}return new v(s,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(p(this))return-m(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+m(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var s=b(n,t).g,i=((0<(n=g(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?m(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?m(this).j(m(e)):m(m(this).j(e));if(p(e))return m(this.j(m(e)));if(0>this.l(h)&&0>e.l(h))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var o=this.i(r)>>>16,a=65535&this.i(r),u=e.i(s)>>>16,d=65535&e.i(s);n[2*r+2*s]+=a*d,y(n,2*r+2*s),n[2*r+2*s+1]+=o*d,y(n,2*r+2*s+1),n[2*r+2*s+1]+=a*u,y(n,2*r+2*s+1),n[2*r+2*s+2]+=o*u,y(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,s=u.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=l,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return m(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),s=c,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+o),n);8>o?(o=l(Math.pow(n,o)),s=s.j(o).add(l(a))):s=(s=s.j(r)).add(l(a))}return s},r=u.Integer=i}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,h,f,p,m,g,y,v,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function x(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function S(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function E(e){return/^[\s\xa0]*$/.test(e)}function _(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function C(e){return C[" "](e),e}C[" "]=function(){};var N=-1!=_().indexOf("Gecko")&&!(-1!=_().toLowerCase().indexOf("webkit")&&-1==_().indexOf("Edge"))&&!(-1!=_().indexOf("Trident")||-1!=_().indexOf("MSIE"))&&-1==_().indexOf("Edge");function T(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function I(e){const t={};for(const n in e)t[n]=e[n];return t}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<A.length;t++)n=A[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function j(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function L(e){s.setTimeout(()=>{throw e},0)}function R(){var e=V;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var D=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new O,e=>e.reset());class O{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let M,F=!1,V=new class{constructor(){this.h=this.g=null}add(e,t){const n=D.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},U=()=>{const e=s.Promise.resolve(void 0);M=()=>{e.then(z)}};var z=()=>{for(var e;e=R();){try{e.h.call(e.g)}catch(n){L(n)}var t=D;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}F=!1};function B(){this.s=this.s,this.C=this.C}function $(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}B.prototype.s=!1,B.prototype.ma=function(){this.s||(this.s=!0,this.N())},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},$.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function q(e,t){if($.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(N){e:{try{C(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:W[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&q.aa.h.call(this)}}x(q,$);var W={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function Q(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++K,this.da=this.fa=!1}function Y(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function J(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Y(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Z(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}X.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Z(e,t,r,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new Q(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var ee="closure_lm_"+(1e6*Math.random()|0),te={};function ne(e,t,n,r,s){if(r&&r.once)return se(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)ne(e,t[i],n,r,s);return null}return n=de(n),e&&e[G]?e.K(t,n,o(r)?!!r.capture:!!r,s):re(e,t,n,!1,r,s)}function re(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var a=o(s)?!!s.capture:!!s,l=ce(e);if(l||(e[ee]=l=new X(e)),(n=l.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=le;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)H||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(ae(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)se(e,t[i],n,r,s);return null}return n=de(n),e&&e[G]?e.L(t,n,o(r)?!!r.capture:!!r,s):re(e,t,n,!0,r,s)}function ie(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)ie(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=de(n),e&&e[G]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Z(i=e.g[t],n,r,s))&&(Y(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=ce(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Z(t,n,r,s)),(n=-1<e?t[e]:null)&&oe(n))}function oe(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[G])J(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ae(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(J(n,e),0==n.h&&(n.src=null,t[ee]=null)):Y(e)}}}function ae(e){return e in te?te[e]:te[e]="on"+e}function le(e,t){if(e.da)e=!0;else{t=new q(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&oe(e),e=n.call(r,t)}return e}function ce(e){return(e=e[ee])instanceof X?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function de(e){return"function"===typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){B.call(this),this.i=new X(this),this.M=this,this.F=null}function fe(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new $(t,e);else if(t instanceof $)t.target=t.target||e;else{var s=t;P(t=new $(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=pe(o,r,!0,t)&&s}if(s=pe(o=t.g=e,r,!0,t)&&s,s=pe(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=pe(o=t.g=n[i],r,!1,t)&&s}function pe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&J(e.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}function me(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ge(e){e.g=me(()=>{e.g=null,e.i&&(e.i=!1,ge(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}x(he,B),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,r){ie(this,e,t,n,r)},he.prototype.N=function(){if(he.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Y(n[r]);delete t.g[e],t.h--}}this.F=null},he.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class ye extends B{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ge(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ve(e){B.call(this),this.h=e,this.g={}}x(ve,B);var be=[];function we(e){T(e.g,function(e,t){this.g.hasOwnProperty(t)&&oe(e)},e),e.g={}}ve.prototype.N=function(){ve.aa.N.call(this),we(this)},ve.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xe=s.JSON.stringify,ke=s.JSON.parse,Se=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function Ee(){}function _e(e){return e.h||(e.h=e.i())}function Ce(){}Ee.prototype.h=null;var Ne={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Te(){$.call(this,"d")}function Ie(){$.call(this,"c")}x(Te,$),x(Ie,$);var Ae={},Pe=null;function je(){return Pe=Pe||new he}function Le(e){$.call(this,Ae.La,e)}function Re(e){const t=je();fe(t,new Le(t))}function De(e,t){$.call(this,Ae.STAT_EVENT,e),this.stat=t}function Oe(e){const t=je();fe(t,new De(t,e))}function Me(e,t){$.call(this,Ae.Ma,e),this.size=t}function Fe(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ve(){this.g=!0}function Ue(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return xe(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}Ae.La="serverreachability",x(Le,$),Ae.STAT_EVENT="statevent",x(De,$),Ae.Ma="timingevent",x(Me,$),Ve.prototype.xa=function(){this.g=!1},Ve.prototype.info=function(){};var ze,Be={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$e={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function He(){}function qe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new ve(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new We}function We(){this.i=null,this.g="",this.h=!1}x(He,Ee),He.prototype.g=function(){return new XMLHttpRequest},He.prototype.i=function(){return{}},ze=new He;var Ge={},Ke={};function Qe(e,t,n){e.L=1,e.v=xt(gt(t)),e.m=n,e.P=!0,Ye(e,null)}function Ye(e,t){e.F=Date.now(),Ze(e),e.A=gt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Dt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new We,e.g=Sn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ye(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(be[0]=s.toString()),s=be);for(var i=0;i<s.length;i++){var o=ne(n,s[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?I(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Re(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ke:(n=Number(t.substring(n,r)),isNaN(n)?Ge:(r+=1)+n>t.length?Ke:(t=t.slice(r,r+n),e.C=r+n,t))}function Ze(e){e.S=Date.now()+e.I,et(e,e.I)}function et(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Fe(c(e.ba,e),t)}function tt(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function nt(e){0==e.j.G||e.J||vn(e.j,e)}function rt(e){tt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,we(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function st(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ct(n.h,e)))if(!e.K&&ct(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;yn(n),an(n)}pn(n),Oe(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Fe(c(n.Za,n),6e3));if(1>=lt(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else wn(n,11)}else if((e.K||n.g==e)&&yn(n),!E(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(ut(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,wt(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((r=n).qa=kn(r,r.J?r.ia:null,r.W),o.K){dt(r.h,o);var a=o,l=r.L;l&&(a.I=l),a.B&&(tt(a),Ze(a)),r.g=o}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||wn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?wn(n,7):on(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Re()}catch(u){}}qe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},qe.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Re(),tt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=nn(this.g);e="";var i=r.length,o=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){rt(this),nt(this);var a="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(o&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Oe(12),rt(this),nt(this);break e}Ue(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Je(this,a),e==Ke){4==h&&(this.s=4,Oe(14),n=!1),Ue(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ge){this.s=4,Oe(15),Ue(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Ue(this.i,this.l,e,null),st(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=a.length||this.h.h||(this.s=1,Oe(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),mn(d),d.M=!0,Oe(11))}}else Ue(this.i,this.l,a,"[Invalid Chunked Response]"),rt(this),nt(this)}else Ue(this.i,this.l,a,null),st(this,a);4==h&&rt(this),this.o&&!this.J&&(4==h?vn(this.j,this):(this.o=!1,Ze(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(E(e[r]))continue;var n=j(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Oe(12)):(this.s=0,Oe(13)),rt(this),nt(this)}}}catch(h){}},qe.prototype.cancel=function(){this.J=!0,rt(this)},qe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Re(),Oe(17)),rt(this),this.s=2,nt(this)):et(this,this.S-e)};var it=class{constructor(e,t){this.g=e,this.map=t}};function ot(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function at(e){return!!e.h||!!e.g&&e.g.size>=e.j}function lt(e){return e.h?1:e.g?e.g.size:0}function ct(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function ut(e,t){e.g?e.g.add(t):e.h=t}function dt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ht(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return k(e.i)}function ft(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,o=0;o<s;o++)t.call(void 0,r[o],n&&n[o],e)}ot.prototype.cancel=function(){if(this.i=ht(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var pt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof mt){this.h=e.h,yt(this,e.j),this.o=e.o,this.g=e.g,vt(this,e.s),this.l=e.l;var t=e.i,n=new Pt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),bt(this,n),this.m=e.m}else e&&(t=String(e).match(pt))?(this.h=!1,yt(this,t[1]||"",!0),this.o=kt(t[2]||""),this.g=kt(t[3]||"",!0),vt(this,t[4]),this.l=kt(t[5]||"",!0),bt(this,t[6]||"",!0),this.m=kt(t[7]||"")):(this.h=!1,this.i=new Pt(null,this.h))}function gt(e){return new mt(e)}function yt(e,t,n){e.j=n?kt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function bt(e,t,n){t instanceof Pt?(e.i=t,function(e,t){t&&!e.j&&(jt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Lt(this,t),Dt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=St(t,It)),e.i=new Pt(t,e.h))}function wt(e,t,n){e.i.set(t,n)}function xt(e){return wt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function kt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function St(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Et),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Et(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}mt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(St(t,Ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(St(t,Ct,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(St(n,"/"==n.charAt(0)?Tt:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",St(n,At)),e.join("")};var _t,Ct=/[#\/\?@]/g,Nt=/[#\?:]/g,Tt=/[#\?]/g,It=/[#\?@]/g,At=/#/g;function Pt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function jt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Lt(e,t){jt(e),t=Ot(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Rt(e,t){return jt(e),t=Ot(e,t),e.g.has(t)}function Dt(e,t,n){Lt(e,t),0<n.length&&(e.i=null,e.g.set(Ot(e,t),k(n)),e.h+=n.length)}function Ot(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Ft(){this.g=new Se}function Vt(e,t,n){const r=n||"";try{ft(e,function(e,n){let s=e;o(e)&&(s=xe(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function Ut(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){he.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Bt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function $t(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function qt(e){let t="";return T(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Wt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):wt(e,t,n))}function Gt(e){he.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Pt.prototype).add=function(e,t){jt(this),this.i=null,e=Ot(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){jt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){jt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){jt(this);let t=[];if("string"===typeof e)Rt(this,e)&&(t=t.concat(this.g.get(Ot(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return jt(this),this.i=null,Rt(this,e=Ot(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.V(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")},x(Ut,Ee),Ut.prototype.g=function(){return new zt(this.l,this.j)},Ut.prototype.i=(_t={},function(){return _t}),x(zt,he),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$t(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Bt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$t(this):Ht(this),3==this.readyState&&Bt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,$t(this))},e.Qa=function(e){this.g&&(this.response=e,$t(this))},e.ga=function(){this.g&&$t(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),x(Gt,he);var Kt=/^https?$/i,Qt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),Zt(e)}function Xt(e){e.A||(e.A=!0,fe(e,"complete"),fe(e,"error"))}function Jt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))me(e.Ea,0,e);else if(fe(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var o=String(e.D).match(pt)[1]||null;!o&&s.self&&s.self.location&&(o=s.self.location.protocol.slice(0,-1)),i=!Kt.test(o?o.toLowerCase():"")}n=i}if(n)fe(e,"complete"),fe(e,"success");else{e.m=6;try{var a=2<tn(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",Xt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||fe(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function en(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function sn(e){this.Aa=0,this.i=[],this.j=new Ve,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new ot(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function on(e){if(ln(e),3==e.G){var t=e.U++,n=gt(e.I);if(wt(n,"SID",e.K),wt(n,"RID",t),wt(n,"TYPE","terminate"),dn(e,n),(t=new qe(e,e.j,t)).L=2,t.v=xt(gt(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=Sn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Ze(t)}xn(e)}function an(e){e.g&&(mn(e),e.g.cancel(),e.g=null)}function ln(e){an(e),e.u&&(s.clearTimeout(e.u),e.u=null),yn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function cn(e){if(!at(e.h)&&!e.s){e.s=!0;var t=e.Ga;M||U(),F||(M(),F=!0),V.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=gt(e.I);wt(r,"SID",e.K),wt(r,"RID",n),wt(r,"AID",e.T),dn(e,r),e.m&&e.o&&Wt(r,e.m,e.o),n=new qe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),ut(e.h,n),Qe(n,r,t)}function dn(e,t){e.H&&T(e.H,function(e,n){wt(t,n,e)}),e.l&&ft({},function(e,n){wt(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=s[a].g;const l=s[a].map;if(n-=t,0>n)t=Math.max(0,s[a].g-100),o=!1;else try{Vt(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;M||U(),F||(M(),F=!0),V.add(t,e),e.v=0}}function pn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Fe(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function mn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new qe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=gt(e.qa);wt(t,"RID","rpc"),wt(t,"SID",e.K),wt(t,"AID",e.T),wt(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&wt(t,"TO",e.ja),wt(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Wt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=xt(gt(t)),n.m=null,n.P=!0,Ye(n,e)}function yn(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function vn(e,t){var n=null;if(e.g==t){yn(e),mn(e),e.g=null;var r=2}else{if(!ct(e.h,t))return;n=t.D,dt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;fe(r=je(),new Me(r,n)),cn(e)}else fn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!(lt(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Fe(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&pn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:wn(e,5);break;case 4:wn(e,10);break;case 3:wn(e,6);break;default:wn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function wn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new mt(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||yt(r,"https"),xt(r),t?function(e,t){const n=new Ve;if(s.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ve;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else Oe(2);e.G=0,e.l&&e.l.sa(t),xn(e),ln(e)}function xn(e){if(e.G=0,e.ka=[],e.l){const t=ht(e.h);0==t.length&&0==e.i.length||(S(e.ka,t),S(e.ka,e.i),e.h.i.length=0,k(e.i),e.i.length=0),e.l.ra()}}function kn(e,t,n){var r=n instanceof mt?gt(n):new mt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),vt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new mt(null);r&&yt(o,r),t&&(o.g=t),i&&vt(o,i),n&&(o.l=n),r=o}return n=e.D,t=e.ya,n&&t&&wt(r,n,t),wt(r,"VER",e.la),dn(e,r),r}function Sn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Ut({eb:n})):new Gt(e.pa)).Ha(e.J),t}function En(){}function _n(){}function Cn(e,t){he.call(this),this.g=new sn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!E(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!E(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Nn(e){Te.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Tn(){Ie.call(this),this.status=1}function In(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ze.g(),this.v=this.o?_e(this.o):_e(ze),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Yt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Qt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Yt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,fe(this,"complete"),fe(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Jt(this):this.bb())},e.bb=function(){Jt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(_t){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(_t){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ke(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=sn.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Oe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=kn(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new qe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=I(i),P(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,s,t),wt(n=gt(this.I),"RID",e),wt(n,"CVER",22),this.D&&wt(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(qt(i)))+"&"+t:this.m&&Wt(n,this.m,i)),ut(this.h,s),this.Ua&&wt(n,"TYPE","init"),this.P?(wt(n,"$req",t),wt(n,"SID","null"),s.T=!0,Qe(s,n,null)):Qe(s,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||at(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Fe(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Oe(10),an(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,an(this),pn(this),Oe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Oe(2)):(this.j.info("Failed to ping google.com"),Oe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},_n.prototype.g=function(e,t){return new Cn(e,t)},x(Cn,he),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){on(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=xe(e),e=n);t.i.push(new it(t.Ya++,e)),3==t.G&&cn(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,on(this.g),delete this.g,Cn.aa.N.call(this)},x(Nn,Te),x(Tn,Ie),x(In,En),In.prototype.ua=function(){fe(this.g,"a")},In.prototype.ta=function(e){fe(this.g,new Nn(e))},In.prototype.sa=function(e){fe(this.g,new Tn)},In.prototype.ra=function(){fe(this.g,"b")},_n.prototype.createWebChannel=_n.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,v=w.createWebChannelTransport=function(){return new _n},y=w.getStatEventTarget=function(){return je()},g=w.Event=Ae,m=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Be.NO_ERROR=0,Be.TIMEOUT=8,Be.HTTP_ERROR=6,p=w.ErrorCode=Be,$e.COMPLETE="complete",f=w.EventType=$e,Ce.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",he.prototype.listen=he.prototype.K,h=w.WebChannel=Ce,w.FetchXmlHttpFactory=Ut,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,d=w.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore",k="4.9.0";class S{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}S.UNAUTHENTICATED=new S(null),S.GOOGLE_CREDENTIALS=new S("google-credentials-uid"),S.FIRST_PARTY=new S("first-party-uid"),S.MOCK_USER=new S("mock-user");let E="12.0.0";const _=new a.Vy("@firebase/firestore");function C(){return _.logLevel}function N(e){if(_.logLevel<=a.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(A);_.debug(`Firestore (${E}): ${e}`,...s)}}function T(e){if(_.logLevel<=a.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(A);_.error(`Firestore (${E}): ${e}`,...s)}}function I(e){if(_.logLevel<=a.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(A);_.warn(`Firestore (${E}): ${e}`,...s)}}function A(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,j(e,r,n)}function j(e,t,n){let r=`FIRESTORE (${E}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw T(r),new Error(r)}function L(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||j(t,s,r)}function R(e,t){return e}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class M{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(S.UNAUTHENTICATED))}shutdown(){}}class U{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class z{constructor(e){this.t=e,this.currentUser=S.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){L(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new M;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new M,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new M)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(L("string"==typeof t.accessToken,31837,{l:t}),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return L(null===e||"string"==typeof e,2055,{h:e}),new S(e)}}class B{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=S.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ${constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new B(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(S.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class H{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class q{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,i.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){L(void 0===this.o,3512);const n=e=>{null!=e.error&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.m;return this.m=e.token,N("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new H(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(L("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new H(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function W(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class G{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=W(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function K(e,t){return e<t?-1:e>t?1:0}function Q(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return J(n)===J(s)?K(n,s):J(n)?1:-1}return K(e.length,t.length)}const Y=55296,X=57343;function J(e){const t=e.charCodeAt(0);return t>=Y&&t<=X}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const ee="__name__";class te{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&P(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===te.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof te?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=te.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return K(e.length,t.length)}static compareSegments(e,t){const n=te.isNumericId(e),r=te.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?te.extractNumericId(e).compare(te.extractNumericId(t)):Q(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class ne extends te{construct(e,t,n){return new ne(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new O(D.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new ne(e)}static emptyPath(){return new ne([])}}const re=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class se extends te{construct(e,t,n){return new se(e,t,n)}static isValidIdentifier(e){return re.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),se.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===ee}static keyField(){return new se([ee])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new O(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new O(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new O(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new O(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new se(t)}static emptyPath(){return new se([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(ne.fromString(e))}static fromName(e){return new ie(ne.fromString(e).popFirst(5))}static empty(){return new ie(ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ne.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ne.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new ne(e.slice()))}}function oe(e,t,n){if(!n)throw new O(D.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function ae(e){if(!ie.isDocumentKey(e))throw new O(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function le(e){if(ie.isDocumentKey(e))throw new O(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ce(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ue(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":P(12329,{type:typeof e})}function de(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ue(e);throw new O(D.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function he(e,t){const n={typeString:e};return t&&(n.value=t),n}function fe(e,t){if(!ce(e))throw new O(D.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const o=e[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(void 0!==i&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new O(D.INVALID_ARGUMENT,n);return!0}const pe=-62135596800,me=1e6;class ge{static now(){return ge.fromMillis(Date.now())}static fromDate(e){return ge.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*me);return new ge(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pe)throw new O(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/me}_compareTo(e){return this.seconds===e.seconds?K(this.nanoseconds,e.nanoseconds):K(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ge._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fe(e,ge._jsonSchema))return new ge(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ge._jsonSchemaVersion="firestore/timestamp/1.0",ge._jsonSchema={type:he("string",ge._jsonSchemaVersion),seconds:he("number"),nanoseconds:he("number")};class ye{static fromTimestamp(e){return new ye(e)}static min(){return new ye(new ge(0,0))}static max(){return new ye(new ge(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ve=-1;class be{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}be.UNKNOWN_ID=-1;function we(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ye.fromTimestamp(1e9===r?new ge(n+1,0):new ge(n,r));return new ke(s,ie.empty(),t)}function xe(e){return new ke(e.readTime,e.key,ve)}class ke{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ke(ye.min(),ie.empty(),ve)}static max(){return new ke(ye.max(),ie.empty(),ve)}}function Se(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ie.comparator(e.documentKey,t.documentKey),0!==n?n:K(e.largestBatchId,t.largestBatchId))}const Ee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _e{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ce(e){if(e.code!==D.FAILED_PRECONDITION||e.message!==Ee)throw e;N("LocalStore","Unexpectedly lost primary lease")}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(e){return Ne.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,n)=>{t(e)})}static reject(e){return new Ne((t,n)=>{n(e)})}static waitFor(e){return new Ne((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ne.resolve(!1);for(const n of e)t=t.next(e=>e?Ne.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ne((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next(e=>{i[l]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ne((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Te(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ie(e){return"IndexedDbTransactionError"===e.name}class Ae{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ae.ce=-1;const Pe=-1;function je(e){return null==e}function Le(e){return 0===e&&1/e==-1/0}function Re(e){return"number"==typeof e&&Number.isInteger(e)&&!Le(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const De="\x01";function Oe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fe(t)),t=Me(e.get(n),t);return Fe(t)}function Me(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case De:n+="\x01\x11";break;default:n+=t}}return n}function Fe(e){return e+De+"\x01"}const Ve="remoteDocuments",Ue="owner",ze="mutationQueues",Be="mutations";const $e="documentMutations",He="remoteDocumentsV14",qe="remoteDocumentGlobal",We="targets",Ge="targetDocuments",Ke="targetGlobal",Qe="collectionParents",Ye="clientMetadata",Xe="bundles",Je="namedQueries",Ze="indexConfiguration",et="indexState",tt="indexEntries",nt="documentOverlays",rt="globals",st=[ze,Be,$e,Ve,We,Ue,Ke,Ge,Ye,qe,Qe,Xe,Je],it=[ze,Be,$e,He,We,Ue,Ke,Ge,Ye,qe,Qe,Xe,Je,nt],ot=it,at=[...ot,Ze,et,tt];function lt(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ct(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ut(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||ft.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ft.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ft.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ht(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ht(this.root,e,this.comparator,!1)}getReverseIterator(){return new ht(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ht(this.root,e,this.comparator,!0)}}class ht{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ft{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ft.RED,this.left=null!=r?r:ft.EMPTY,this.right=null!=s?s:ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ft(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ft.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P(43730,{key:this.key,value:this.value});if(this.right.isRed())throw P(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw P(27949);return e+(this.isRed()?0:1)}}ft.EMPTY=null,ft.RED=!0,ft.BLACK=!1,ft.EMPTY=new class{constructor(){this.size=0}get key(){throw P(57766)}get value(){throw P(16141)}get color(){throw P(16727)}get left(){throw P(29726)}get right(){throw P(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new ft(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mt(this.data.getIterator())}getIteratorFrom(e){return new mt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof pt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class mt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class gt{constructor(e){this.fields=e,e.sort(se.comparator)}static empty(){return new gt([])}unionWith(e){let t=new pt(se.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new gt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class yt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yt("Invalid base64 string: "+e):e}}(e);return new vt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new vt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return K(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const bt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wt(e){if(L(!!e,39018),"string"==typeof e){let t=0;const n=bt.exec(e);if(L(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:xt(e.seconds),nanos:xt(e.nanos)}}function xt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function kt(e){return"string"==typeof e?vt.fromBase64String(e):vt.fromUint8Array(e)}const St="server_timestamp",Et="__type__",_t="__previous_value__",Ct="__local_write_time__";function Nt(e){const t=(e?.mapValue?.fields||{})[Et]?.stringValue;return t===St}function Tt(e){const t=e.mapValue.fields[_t];return Nt(t)?Tt(t):t}function It(e){const t=wt(e.mapValue.fields[Ct].timestampValue);return new ge(t.seconds,t.nanos)}class At{constructor(e,t,n,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l,this.isUsingEmulator=c}}const Pt="(default)";class jt{constructor(e,t){this.projectId=e,this.database=t||Pt}static empty(){return new jt("","")}get isDefaultDatabase(){return this.database===Pt}isEqual(e){return e instanceof jt&&e.projectId===this.projectId&&e.database===this.database}}const Lt="__type__",Rt="__max__",Dt={mapValue:{fields:{__type__:{stringValue:Rt}}}},Ot="__vector__",Mt="value";function Ft(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nt(e)?4:tn(e)?9007199254740991:Zt(e)?10:11:P(28295,{value:e})}function Vt(e,t){if(e===t)return!0;const n=Ft(e);if(n!==Ft(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return It(e).isEqual(It(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=wt(e.timestampValue),r=wt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return kt(e.bytesValue).isEqual(kt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return xt(e.geoPointValue.latitude)===xt(t.geoPointValue.latitude)&&xt(e.geoPointValue.longitude)===xt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return xt(e.integerValue)===xt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=xt(e.doubleValue),r=xt(t.doubleValue);return n===r?Le(n)===Le(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Vt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lt(n)!==lt(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Vt(n[s],r[s])))return!1;return!0}(e,t);default:return P(52216,{left:e})}}function Ut(e,t){return void 0!==(e.values||[]).find(e=>Vt(e,t))}function zt(e,t){if(e===t)return 0;const n=Ft(e),r=Ft(t);if(n!==r)return K(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return K(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=xt(e.integerValue||e.doubleValue),r=xt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bt(e.timestampValue,t.timestampValue);case 4:return Bt(It(e),It(t));case 5:return Q(e.stringValue,t.stringValue);case 6:return function(e,t){const n=kt(e),r=kt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=K(n[s],r[s]);if(0!==e)return e}return K(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=K(xt(e.latitude),xt(t.latitude));return 0!==n?n:K(xt(e.longitude),xt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return $t(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=t.fields||{},s=n[Mt]?.arrayValue,i=r[Mt]?.arrayValue,o=K(s?.values?.length||0,i?.values?.length||0);return 0!==o?o:$t(s,i)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Dt.mapValue&&t===Dt.mapValue)return 0;if(e===Dt.mapValue)return 1;if(t===Dt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=Q(r[o],i[o]);if(0!==e)return e;const t=zt(n[r[o]],s[i[o]]);if(0!==t)return t}return K(r.length,i.length)}(e.mapValue,t.mapValue);default:throw P(23264,{he:n})}}function Bt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return K(e,t);const n=wt(e),r=wt(t),s=K(n.seconds,r.seconds);return 0!==s?s:K(n.nanos,r.nanos)}function $t(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=zt(n[s],r[s]);if(e)return e}return K(n.length,r.length)}function Ht(e){return qt(e)}function qt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=wt(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return kt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ie.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=qt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${qt(e.fields[s])}`;return n+"}"}(e.mapValue):P(61005,{value:e})}function Wt(e){switch(Ft(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Tt(e);return t?16+Wt(t):16;case 5:return 2*e.stringValue.length;case 6:return kt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Wt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ct(e.fields,(e,n)=>{t+=e.length+Wt(n)}),t}(e.mapValue);default:throw P(13486,{value:e})}}function Gt(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Kt(e){return!!e&&"integerValue"in e}function Qt(e){return!!e&&"arrayValue"in e}function Yt(e){return!!e&&"nullValue"in e}function Xt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jt(e){return!!e&&"mapValue"in e}function Zt(e){const t=(e?.mapValue?.fields||{})[Lt]?.stringValue;return t===Ot}function en(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ct(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=en(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=en(e.arrayValue.values[n]);return t}return{...e}}function tn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rt}class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=en(t)}setAll(e){let t=se.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=en(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Jt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ct(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new nn(en(this.value))}}function rn(e){const t=[];return ct(e.fields,(e,n)=>{const r=new se([e]);if(Jt(n)){const e=rn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new gt(t)}class sn{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new sn(e,0,ye.min(),ye.min(),ye.min(),nn.empty(),0)}static newFoundDocument(e,t,n,r){return new sn(e,1,t,ye.min(),n,r,0)}static newNoDocument(e,t){return new sn(e,2,t,ye.min(),ye.min(),nn.empty(),0)}static newUnknownDocument(e,t){return new sn(e,3,t,ye.min(),ye.min(),nn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ye.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class on{constructor(e,t){this.position=e,this.inclusive=t}}function an(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?ie.comparator(ie.fromName(o.referenceValue),n.key):zt(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ln(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vt(e.position[n],t.position[n]))return!1;return!0}class cn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function un(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dn{}class hn extends dn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new wn(e,t,n):"array-contains"===t?new En(e,n):"in"===t?new _n(e,n):"not-in"===t?new Cn(e,n):"array-contains-any"===t?new Nn(e,n):new hn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new xn(e,n):new kn(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(zt(t,this.value)):null!==t&&Ft(this.value)===Ft(t)&&this.matchesComparison(zt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fn extends dn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fn(e,t)}matches(e){return pn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pn(e){return"and"===e.op}function mn(e){return gn(e)&&pn(e)}function gn(e){for(const t of e.filters)if(t instanceof fn)return!1;return!0}function yn(e){if(e instanceof hn)return e.field.canonicalString()+e.op.toString()+Ht(e.value);if(mn(e))return e.filters.map(e=>yn(e)).join(",");{const t=e.filters.map(e=>yn(e)).join(",");return`${e.op}(${t})`}}function vn(e,t){return e instanceof hn?function(e,t){return t instanceof hn&&e.op===t.op&&e.field.isEqual(t.field)&&Vt(e.value,t.value)}(e,t):e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&vn(n,t.filters[r]),!0)}(e,t):void P(19439)}function bn(e){return e instanceof hn?function(e){return`${e.field.canonicalString()} ${e.op} ${Ht(e.value)}`}(e):e instanceof fn?function(e){return e.op.toString()+" {"+e.getFilters().map(bn).join(" ,")+"}"}(e):"Filter"}class wn extends hn{constructor(e,t,n){super(e,t,n),this.key=ie.fromName(n.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class xn extends hn{constructor(e,t){super(e,"in",t),this.keys=Sn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kn extends hn{constructor(e,t){super(e,"not-in",t),this.keys=Sn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Sn(e,t){return(t.arrayValue?.values||[]).map(e=>ie.fromName(e.referenceValue))}class En extends hn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qt(t)&&Ut(t.arrayValue,this.value)}}class _n extends hn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ut(this.value.arrayValue,t)}}class Cn extends hn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ut(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ut(this.value.arrayValue,t)}}class Nn extends hn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ut(this.value.arrayValue,e))}}class Tn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function In(e){return new Tn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function An(e){const t=R(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>yn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),je(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ht(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ht(e)).join(",")),t.Te=e}return t.Te}function Pn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!un(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ln(e.startAt,t.startAt)&&ln(e.endAt,t.endAt)}function jn(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ln{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rn(e,t,n,r,s,i,o,a){return new Ln(e,t,n,r,s,i,o,a)}function Dn(e){return new Ln(e)}function On(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Mn(e){return null!==e.collectionGroup}function Fn(e){const t=R(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new pt(se.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new cn(r,n))}),e.has(se.keyField().canonicalString())||t.Ie.push(new cn(se.keyField(),n))}return t.Ie}function Vn(e){const t=R(e);return t.Ee||(t.Ee=Un(t,Fn(e))),t.Ee}function Un(e,t){if("F"===e.limitType)return In(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new cn(e.field,t)});const n=e.endAt?new on(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new on(e.startAt.position,e.startAt.inclusive):null;return In(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zn(e,t){const n=e.filters.concat([t]);return new Ln(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Bn(e,t,n){return new Ln(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $n(e,t){return Pn(Vn(e),Vn(t))&&e.limitType===t.limitType}function Hn(e){return`${An(Vn(e))}|lt:${e.limitType}`}function qn(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>bn(e)).join(", ")}]`),je(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ht(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ht(e)).join(",")),`Target(${t})`}(Vn(e))}; limitType=${e.limitType})`}function Wn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ie.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Fn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=an(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Fn(e),t))&&!(e.endAt&&!function(e,t,n){const r=an(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Fn(e),t))}(e,t)}function Gn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Kn(e){return(t,n)=>{let r=!1;for(const s of Fn(e)){const e=Qn(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Qn(e,t,n){const r=e.field.isKeyField()?ie.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?zt(r,s):P(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P(19790,{direction:e.dir})}}class Yn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ct(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return ut(this.inner)}size(){return this.innerSize}}const Xn=new dt(ie.comparator);function Jn(){return Xn}const Zn=new dt(ie.comparator);function er(){let e=Zn;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function tr(e){let t=Zn;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function nr(){return sr()}function rr(){return sr()}function sr(){return new Yn(e=>e.toString(),(e,t)=>e.isEqual(t))}const ir=new dt(ie.comparator),or=new pt(ie.comparator);function ar(){let e=or;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const lr=new pt(K);function cr(){return lr}function ur(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Le(t)?"-0":t}}function dr(e){return{integerValue:""+e}}function hr(e,t){return Re(t)?dr(t):ur(e,t)}class fr{constructor(){this._=void 0}}function pr(e,t,n){return e instanceof yr?function(e,t){const n={fields:{[Et]:{stringValue:St},[Ct]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nt(t)&&(t=Tt(t)),t&&(n.fields[_t]=t),{mapValue:n}}(n,t):e instanceof vr?br(e,t):e instanceof wr?xr(e,t):function(e,t){const n=gr(e,t),r=Sr(n)+Sr(e.Ae);return Kt(n)&&Kt(e.Ae)?dr(r):ur(e.serializer,r)}(e,t)}function mr(e,t,n){return e instanceof vr?br(e,t):e instanceof wr?xr(e,t):n}function gr(e,t){return e instanceof kr?function(e){return Kt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class yr extends fr{}class vr extends fr{constructor(e){super(),this.elements=e}}function br(e,t){const n=Er(t);for(const r of e.elements)n.some(e=>Vt(e,r))||n.push(r);return{arrayValue:{values:n}}}class wr extends fr{constructor(e){super(),this.elements=e}}function xr(e,t){let n=Er(t);for(const r of e.elements)n=n.filter(e=>!Vt(e,r));return{arrayValue:{values:n}}}class kr extends fr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Sr(e){return xt(e.integerValue||e.doubleValue)}function Er(e){return Qt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class _r{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Tr{}function Ir(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vr(e.key,Cr.none()):new Rr(e.key,e.data,Cr.none());{const n=e.data,r=nn.empty();let s=new pt(se.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Dr(e.key,r,new gt(s.toArray()),Cr.none())}}function Ar(e,t,n){e instanceof Rr?function(e,t,n){const r=e.value.clone(),s=Mr(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dr?function(e,t,n){if(!Nr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Mr(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Or(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Pr(e,t,n,r){return e instanceof Rr?function(e,t,n,r){if(!Nr(e.precondition,t))return n;const s=e.value.clone(),i=Fr(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dr?function(e,t,n,r){if(!Nr(e.precondition,t))return n;const s=Fr(e.fieldTransforms,r,t),i=t.data;return i.setAll(Or(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Nr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function jr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=gr(r.transform,e||null);null!=s&&(null===n&&(n=nn.empty()),n.set(r.field,s))}return n||null}function Lr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vr&&t instanceof vr||e instanceof wr&&t instanceof wr?Z(e.elements,t.elements,Vt):e instanceof kr&&t instanceof kr?Vt(e.Ae,t.Ae):e instanceof yr&&t instanceof yr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rr extends Tr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dr extends Tr{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Or(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Mr(e,t,n){const r=new Map;L(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,mr(o,a,n[s]))}return r}function Fr(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,pr(e,i,t))}return r}class Vr extends Tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ur extends Tr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ar(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Pr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=rr();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=Ir(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(ye.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ar())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>Lr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>Lr(e,t))}}class Br{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){L(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ir;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Br(e,t,n,r)}}class $r{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hr{constructor(e,t){this.count=e,this.unchangedNames=t}}var qr,Wr;function Gr(e){switch(e){case D.OK:return P(64938);case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0;default:return P(15467,{code:e})}}function Kr(e){if(void 0===e)return T("GRPC error has no .code"),D.UNKNOWN;switch(e){case qr.OK:return D.OK;case qr.CANCELLED:return D.CANCELLED;case qr.UNKNOWN:return D.UNKNOWN;case qr.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case qr.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case qr.INTERNAL:return D.INTERNAL;case qr.UNAVAILABLE:return D.UNAVAILABLE;case qr.UNAUTHENTICATED:return D.UNAUTHENTICATED;case qr.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case qr.NOT_FOUND:return D.NOT_FOUND;case qr.ALREADY_EXISTS:return D.ALREADY_EXISTS;case qr.PERMISSION_DENIED:return D.PERMISSION_DENIED;case qr.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case qr.ABORTED:return D.ABORTED;case qr.OUT_OF_RANGE:return D.OUT_OF_RANGE;case qr.UNIMPLEMENTED:return D.UNIMPLEMENTED;case qr.DATA_LOSS:return D.DATA_LOSS;default:return P(39323,{code:e})}}(Wr=qr||(qr={}))[Wr.OK=0]="OK",Wr[Wr.CANCELLED=1]="CANCELLED",Wr[Wr.UNKNOWN=2]="UNKNOWN",Wr[Wr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wr[Wr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wr[Wr.NOT_FOUND=5]="NOT_FOUND",Wr[Wr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wr[Wr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wr[Wr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wr[Wr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wr[Wr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wr[Wr.ABORTED=10]="ABORTED",Wr[Wr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wr[Wr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wr[Wr.INTERNAL=13]="INTERNAL",Wr[Wr.UNAVAILABLE=14]="UNAVAILABLE",Wr[Wr.DATA_LOSS=15]="DATA_LOSS";let Qr=null;function Yr(){return new TextEncoder}const Xr=new r([4294967295,4294967295],0);function Jr(e){const t=Yr().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function Zr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,s],0),new r([i,o],0)]}class es{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ts(`Invalid padding: ${t}`);if(n<0)throw new ts(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new ts(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new ts(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare(Xr)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Jr(e),[n,r]=Zr(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new es(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Jr(e),[n,r]=Zr(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ts extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ns{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,rs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ns(ye.min(),r,new dt(K),Jn(),ar())}}class rs{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rs(n,t,ar(),ar(),ar())}}class ss{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class is{constructor(e,t){this.targetId=e,this.Ce=t}}class os{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class as{constructor(){this.ve=0,this.Fe=us(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ar(),t=ar(),n=ar();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P(38017,{changeType:s})}}),new rs(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=us()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,L(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ls{constructor(e){this.Ge=e,this.ze=new Map,this.je=Jn(),this.Je=cs(),this.He=cs(),this.Ye=new dt(K)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:P(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const s=r.target;if(jn(s))if(0===n){const e=new ie(s.path);this.et(t,e,sn.newNoDocument(e,ye.min()))}else L(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){const n=this.ut(e),s=n?this.ct(n,e,r):1;if(0!==s){this.it(t);const e=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}Qr?.lt(function(e,t,n,r,s){const i={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},o=t.unchangedNames;return o&&(i.bloomFilter={applied:0===s,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>r?.mightContain(e)??!1}),i}(r,e.Ce,this.Ge.ht(),n,s))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=kt(n).toUint8Array()}catch(e){if(e instanceof yt)return I("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new es(i,r,s)}catch(e){return I(e instanceof ts?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&jn(s.target)){const t=new ie(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,sn.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ar();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ns(e,t,this.Ye,this.je,n);return this.je=Jn(),this.Je=cs(),this.He=cs(),this.Ye=new dt(K),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new as,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pt(K),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pt(K),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||N("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new as),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function cs(){return new dt(ie.comparator)}function us(){return new dt(ie.comparator)}const ds={asc:"ASCENDING",desc:"DESCENDING"},hs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fs={and:"AND",or:"OR"};class ps{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ms(e,t){return e.useProto3Json||je(t)?t:{value:t}}function gs(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ys(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vs(e,t){return gs(e,t.toTimestamp())}function bs(e){return L(!!e,49232),ye.fromTimestamp(function(e){const t=wt(e);return new ge(t.seconds,t.nanos)}(e))}function ws(e,t){return xs(e,t).canonicalString()}function xs(e,t){const n=function(e){return new ne(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ks(e){const t=ne.fromString(e);return L(Bs(t),10190,{key:t.toString()}),t}function Ss(e,t){return ws(e.databaseId,t.path)}function Es(e,t){const n=ks(t);if(n.get(1)!==e.databaseId.projectId)throw new O(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new O(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ie(Ts(n))}function _s(e,t){return ws(e.databaseId,t)}function Cs(e){const t=ks(e);return 4===t.length?ne.emptyPath():Ts(t)}function Ns(e){return new ne(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ts(e){return L(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Is(e,t,n){return{name:Ss(e,t),fields:n.value.mapValue.fields}}function As(e,t){let n;if(t instanceof Rr)n={update:Is(e,t.key,t.value)};else if(t instanceof Vr)n={delete:Ss(e,t.key)};else if(t instanceof Dr)n={update:Is(e,t.key,t.data),updateMask:zs(t.fieldMask)};else{if(!(t instanceof Ur))return P(16599,{Vt:t.type});n={verify:Ss(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof yr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof kr)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw P(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P(27497)}(e,t.precondition)),n}function Ps(e,t){return{documents:[_s(e,t.path)]}}function js(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=_s(e,s);const i=function(e){if(0!==e.length)return Us(fn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Fs(e.field),direction:Ds(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ms(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function Ls(e){let t=Cs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){L(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Rs(e);return t instanceof fn&&mn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new cn(Vs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,je(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new on(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new on(n,t)}(n.endAt)),Rn(t,s,o,i,a,"F",l,c)}function Rs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vs(e.unaryFilter.field);return hn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vs(e.unaryFilter.field);return hn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vs(e.unaryFilter.field);return hn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vs(e.unaryFilter.field);return hn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return P(61313);default:return P(60726)}}(e):void 0!==e.fieldFilter?function(e){return hn.create(Vs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return P(58110);default:return P(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return fn.create(e.compositeFilter.filters.map(e=>Rs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P(1026)}}(e.compositeFilter.op))}(e):P(30097,{filter:e})}function Ds(e){return ds[e]}function Os(e){return hs[e]}function Ms(e){return fs[e]}function Fs(e){return{fieldPath:e.canonicalString()}}function Vs(e){return se.fromServerFormat(e.fieldPath)}function Us(e){return e instanceof hn?function(e){if("=="===e.op){if(Xt(e.value))return{unaryFilter:{field:Fs(e.field),op:"IS_NAN"}};if(Yt(e.value))return{unaryFilter:{field:Fs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xt(e.value))return{unaryFilter:{field:Fs(e.field),op:"IS_NOT_NAN"}};if(Yt(e.value))return{unaryFilter:{field:Fs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fs(e.field),op:Os(e.op),value:e.value}}}(e):e instanceof fn?function(e){const t=e.getFilters().map(e=>Us(e));return 1===t.length?t[0]:{compositeFilter:{op:Ms(e.op),filters:t}}}(e):P(54877,{filter:e})}function zs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Bs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $s{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ye.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ye.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:vt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Hs{constructor(e){this.yt=e}}function qs(e){const t=Ls({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Bn(t,t.limit,"L"):t}class Ws{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(xt(e.integerValue));else if("doubleValue"in e){const n=xt(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Le(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=wt(n)),t.xt(`${n.seconds||""}`),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(kt(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?tn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Zt(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):P(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){const n=e.fields||{};this.Ft(t,53);const r=Mt,s=n[r].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(xt(s)),this.Ot(r,t),this.Ct(n[r],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ie.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ws.Kt=new Ws;class Gs{constructor(){this.Cn=new Ks}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(ke.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(ke.min())}updateCollectionGroup(e,t,n){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class Ks{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pt(ne.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new pt(ne.comparator)).toArray()}}new Uint8Array(0);const Qs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ys=41943040;class Xs{static withCacheSize(e){return new Xs(e,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Xs.DEFAULT_COLLECTION_PERCENTILE=10,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xs.DEFAULT=new Xs(Ys,Xs.DEFAULT_COLLECTION_PERCENTILE,Xs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xs.DISABLED=new Xs(-1,0,0);class Js{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Js(0)}static cr(){return new Js(-1)}}const Zs="LruGarbageCollector",ei=1048576;function ti(e,t){let[n,r]=e,[s,i]=t;const o=K(n,s);return 0===o?K(r,i):o}class ni{constructor(e){this.Ir=e,this.buffer=new pt(ti),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ti(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ri{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){N(Zs,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ie(e)?N(Zs,"Ignoring IndexedDB error during garbage collection: ",e):await Ce(e)}await this.Vr(3e5)})}}class si{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(Ae.ce);const n=new ni(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(Qs)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(N("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qs):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,o,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(N("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),C()<=a.$b.DEBUG&&N("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${i-u}ms\n\tDetermined least recently used ${r} in `+(o-i)+"ms\n"+`\tRemoved ${s} targets in `+(l-o)+"ms\n"+`\tRemoved ${e} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ii(e,t){return new si(e,t)}class oi{constructor(){this.changes=new Yn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ne.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ai{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class li{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Pr(n.mutation,e,gt.empty(),ge.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ar()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ar();const r=nr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=er();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=nr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ar()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Jn();const i=sr(),o=sr();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Dr)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Pr(o.mutation,t,o.mutation.getFieldMask(),ge.now())):i.set(t.key,gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>o.set(e,new ai(t,i.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){const n=sr();let r=new dt((e,t)=>e-t),s=ar();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||gt.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||ar()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=rr();l.forEach(e=>{if(!s.has(e)){const r=Ir(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return Ne.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Mn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ne.resolve(nr());let o=ve,a=s;return i.next(t=>Ne.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Ne.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,ar())).next(e=>({batchId:o,changes:tr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(e=>{let t=er();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=er();return this.indexManager.getCollectionParents(e,s).next(o=>Ne.forEach(o,o=>{const a=function(e,t){return new Ln(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,sn.newInvalidDocument(r)))});let n=er();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Pr(i.mutation,r,gt.empty(),ge.now()),Wn(t,r)&&(n=n.insert(e,r))}),n})}}class ci{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:bs(e.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:qs(e.bundledQuery),readTime:bs(e.readTime)}}(t)),Ne.resolve()}}class ui{constructor(){this.overlays=new dt(ie.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const n=nr();return Ne.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ne.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,t,n){const r=nr(),s=t.length+1,i=new ie(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ne.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new dt((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=nr(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=nr(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ne.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $r(t,n));let s=this.qr.get(t);void 0===s&&(s=ar(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class di{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}class hi{constructor(){this.Qr=new pt(fi.$r),this.Ur=new pt(fi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new fi(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new fi(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ie(new ne([])),n=new fi(t,e),r=new fi(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ie(new ne([])),n=new fi(t,e),r=new fi(t,e+1);let s=ar();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new fi(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class fi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ie.comparator(e.key,t.key)||K(e.Yr,t.Yr)}static Kr(e,t){return K(e.Yr,t.Yr)||ie.comparator(e.key,t.key)}}class pi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pt(fi.$r)}checkEmpty(e){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new zr(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Zr=this.Zr.add(new fi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(i)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?Pe:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new fi(t,0),r=new fi(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pt(K);return t.forEach(e=>{const t=new fi(e,0),r=new fi(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ie.isDocumentKey(s)||(s=s.child(""));const i=new fi(new ie(s),0);let o=new pt(K);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},i),Ne.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){L(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(t.mutations,r=>{const s=new fi(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new fi(t,0),r=this.Zr.firstAfterOrEqual(n);return Ne.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class mi{constructor(e){this.ri=e,this.docs=new dt(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ne.resolve(n?n.document.mutableCopy():sn.newInvalidDocument(t))}getEntries(e,t){let n=Jn();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sn.newInvalidDocument(e))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Jn();const i=t.path,o=new ie(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Se(xe(o),n)<=0||(r.has(o.key)||Wn(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(e,t,n,r){P(9500)}ii(e,t){return Ne.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new gi(this)}getSize(e){return Ne.resolve(this.size)}}class gi extends oi{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class yi{constructor(e){this.persistence=e,this.si=new Yn(e=>An(e),Pn),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.oi=0,this._i=new hi,this.targetCount=0,this.ai=Js.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Js(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ne.waitFor(s).next(()=>r)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ne.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ne.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ne.resolve(n)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}class vi{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ae(0),this.li=!1,this.li=!0,this.hi=new di,this.referenceDelegate=e(this),this.Pi=new yi(this),this.indexManager=new Gs,this.remoteDocumentCache=function(e){return new mi(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Hs(t),this.Ii=new ci(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ui,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new pi(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){N("MemoryPersistence","Starting transaction:",e);const r=new bi(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class bi extends _e{constructor(e){super(),this.currentSequenceNumber=e}}class wi{constructor(e){this.persistence=e,this.Ri=new hi,this.Vi=null}static mi(e){return new wi(e)}get fi(){if(this.Vi)return this.Vi;throw P(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const r=ie.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ye.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class xi{constructor(e,t){this.persistence=e,this.pi=new Yn(e=>Oe(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ii(this,t)}static mi(e,t){return new xi(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ne.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ne.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,ye.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Wt(e.data.value)),t}br(e,t,n){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ne.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class ki{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ar(),r=ar();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ki(e,t.fromCache,n,r)}}class Si{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ei{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,l.nr)()?8:Te((0,l.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Si;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(C()<=a.$b.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",qn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(C()<=a.$b.DEBUG&&N("QueryEngine","Query:",qn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(C()<=a.$b.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",qn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(t))):Ne.resolve())}ys(e,t){if(On(t))return Ne.resolve(null);let n=Vn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Bn(t,null,"F"),n=Vn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ar(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Bn(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return On(t)||r.isEqual(ye.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Ne.resolve(null):(C()<=a.$b.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qn(t)),this.vs(e,i,t,we(r,ve)).next(e=>e))})}Ds(e,t){let n=new pt(Kn(e));return t.forEach((t,r)=>{Wn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return C()<=a.$b.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",qn(t)),this.ps.getDocumentsMatchingQuery(e,t,ke.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const _i="LocalStore",Ci=3e8;class Ni{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new dt(K),this.xs=new Yn(e=>An(e),Pn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new li(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Ti(e,t,n,r){return new Ni(e,t,n,r)}async function Ii(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=ar();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function Ai(e){const t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Pi(e,t,n){let r=ar(),s=ar();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Jn();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ye.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):N(_i,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{ks:r,qs:s}})}function ji(e,t){const n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Pe),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Li(e,t){const n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Ne.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new $s(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Ri(e,t,n){const r=R(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Ie(e))throw e;N(_i,`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Di(e,t,n){const r=R(e);let s=ye.min(),i=ar();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=R(e),s=r.xs.get(n);return void 0!==s?Ne.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Vn(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:ye.min(),n?i:ar())).next(e=>(Oi(r,Gn(t),e),{documents:e,Qs:i})))}function Oi(e,t,n){let r=e.Os.get(t)||ye.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Mi{constructor(){this.activeTargetIds=cr()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Fi{constructor(){this.Mo=new Mi,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Mi,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vi{Oo(e){}shutdown(){}}const Ui="ConnectivityMonitor";class zi{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){N(Ui,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){N(Ui,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Bi=null;function $i(){return null===Bi?Bi=268435456+Math.round(2147483648*Math.random()):Bi++,"0x"+Bi.toString(16)}const Hi="RestConnection",qi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Wi{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${n}/databases/${r}`,this.Wo=this.databaseId.database===Pt?`project_id=${n}`:`project_id=${n}&database_id=${r}`}Go(e,t,n,r,s){const i=$i(),o=this.zo(e,t.toUriEncodedString());N(Hi,`Sending RPC '${e}' ${i}:`,o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,s);const{host:c}=new URL(o),u=(0,l.zJ)(c);return this.Jo(e,o,a,n,u).then(t=>(N(Hi,`Received RPC '${e}' ${i}: `,t),t),t=>{throw I(Hi,`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+E,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=qi[e];return`${this.Uo}/v1/${t}:${n}`}terminate(){}}class Gi{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Ki="WebChannelConnection";class Qi extends Wi{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=$i();return new Promise((s,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(f.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:const t=a.getResponseJson();N(Ki,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case p.TIMEOUT:N(Ki,`RPC '${e}' ${i} timed out`),o(new O(D.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=a.getStatus();if(N(Ki,`RPC '${e}' ${i} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=e?.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(t)>=0?t:D.UNKNOWN}(t.status);o(new O(e,t.message))}else o(new O(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new O(D.UNAVAILABLE,"Connection failed."));break;default:P(9055,{l_:e,streamId:i,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{N(Ki,`RPC '${e}' ${i} completed.`)}});const l=JSON.stringify(r);N(Ki,`RPC '${e}' ${i} sending request:`,r),a.send(t,"POST",l,n,15)})}T_(e,t,n){const r=$i(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=v(),o=y(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=s.join("");N(Ki,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=i.createWebChannel(c,a);this.I_(u);let d=!1,f=!1;const p=new Gi({Yo:t=>{f?N(Ki,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(N(Ki,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),N(Ki,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},Zo:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,h.EventType.OPEN,()=>{f||(N(Ki,`RPC '${e}' stream ${r} transport opened.`),p.o_())}),b(u,h.EventType.CLOSE,()=>{f||(f=!0,N(Ki,`RPC '${e}' stream ${r} transport closed`),p.a_(),this.E_(u))}),b(u,h.EventType.ERROR,t=>{f||(f=!0,I(Ki,`RPC '${e}' stream ${r} transport errored. Name:`,t.name,"Message:",t.message),p.a_(new O(D.UNAVAILABLE,"The operation could not be completed")))}),b(u,h.EventType.MESSAGE,t=>{if(!f){const n=t.data[0];L(!!n,16349);const s=n,i=s?.error||s[0]?.error;if(i){N(Ki,`RPC '${e}' stream ${r} received error:`,i);const t=i.status;let n=function(e){const t=qr[e];if(void 0!==t)return Kr(t)}(t),s=i.message;void 0===n&&(n=D.INTERNAL,s="Unknown error status: "+t+" with message "+i.message),f=!0,p.a_(new O(n,s)),u.close()}else N(Ki,`RPC '${e}' stream ${r} received:`,n),p.u_(n)}}),b(o,g.STAT_EVENT,t=>{t.stat===m.PROXY?N(Ki,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===m.NOPROXY&&N(Ki,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{p.__()},0),p}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Yi(){return"undefined"!=typeof document?document:null}function Xi(e){return new ps(e,!0)}class Ji{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&N("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Zi="PersistentStream";class eo{constructor(e,t,n,r,s,i,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ji(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===D.RESOURCE_EXHAUSTED?(T(t.toString()),T("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===D.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new O(D.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return N(Zi,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(N(Zi,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class to extends eo{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(L(void 0===t||"string"==typeof t,58123),vt.fromBase64String(t||"")):(L(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),vt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?D.UNKNOWN:Kr(e.code);return new O(t,e.message||"")}(o);n=new os(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Es(e,r.document.name),i=bs(r.document.updateTime),o=r.document.createTime?bs(r.document.createTime):ye.min(),a=new nn({mapValue:{fields:r.document.fields}}),l=sn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ss(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Es(e,r.document),i=r.readTime?bs(r.readTime):ye.min(),o=sn.newNoDocument(s,i),a=r.removedTargetIds||[];n=new ss([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Es(e,r.document),i=r.removedTargetIds||[];n=new ss([],i,s,null)}else{if(!("filter"in t))return P(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Hr(r,s),o=e.targetId;n=new is(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ye.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ye.min():t.readTime?bs(t.readTime):ye.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ns(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=jn(r)?{documents:Ps(e,r)}:{query:js(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ys(e,t.resumeToken);const r=ms(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ye.min())>0){n.readTime=gs(e,t.snapshotVersion.toTimestamp());const r=ms(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ns(this.serializer),t.removeTarget=e,this.q_(t)}}class no extends eo{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return L(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,L(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){L(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(L(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?bs(e.updateTime):bs(t);return n.isEqual(ye.min())&&(n=bs(t)),new _r(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=bs(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ns(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>As(this.serializer,e))};this.q_(t)}}class ro{}class so extends ro{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new O(D.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.Go(e,xs(t,n),r,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(D.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Ho(e,xs(t,n),r,o,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(D.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class io{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(T(t),this.aa=!1):N("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const oo="RemoteStore";class ao{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{yo(this)&&(N(oo,"Restarting streams for network reachability change."),await async function(e){const t=R(e);t.Ea.add(4),await co(t),t.Ra.set("Unknown"),t.Ea.delete(4),await lo(t)}(this))})}),this.Ra=new io(n,r)}}async function lo(e){if(yo(e))for(const t of e.da)await t(!0)}async function co(e){for(const t of e.da)await t(!1)}function uo(e,t){const n=R(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),go(n)?mo(n):Oo(n).O_()&&fo(n,t))}function ho(e,t){const n=R(e),r=Oo(n);n.Ia.delete(t),r.O_()&&po(n,t),0===n.Ia.size&&(r.O_()?r.L_():yo(n)&&n.Ra.set("Unknown"))}function fo(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ye.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Oo(e).Y_(t)}function po(e,t){e.Va.Ue(t),Oo(e).Z_(t)}function mo(e){e.Va=new ls({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Oo(e).start(),e.Ra.ua()}function go(e){return yo(e)&&!Oo(e).x_()&&e.Ia.size>0}function yo(e){return 0===R(e).Ea.size}function vo(e){e.Va=void 0}async function bo(e){e.Ra.set("Online")}async function wo(e){e.Ia.forEach((t,n)=>{fo(e,t)})}async function xo(e,t){vo(e),go(e)?(e.Ra.ha(t),mo(e)):e.Ra.set("Unknown")}async function ko(e,t,n){if(e.Ra.set("Online"),t instanceof os&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){N(oo,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await So(e,n)}else if(t instanceof ss?e.Va.Ze(t):t instanceof is?e.Va.st(t):e.Va.tt(t),!n.isEqual(ye.min()))try{const t=await Ai(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(vt.EMPTY_BYTE_STRING,r.snapshotVersion)),po(e,t);const s=new $s(r.target,t,n,r.sequenceNumber);fo(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){N(oo,"Failed to raise snapshot:",t),await So(e,t)}}async function So(e,t,n){if(!Ie(t))throw t;e.Ea.add(1),await co(e),e.Ra.set("Offline"),n||(n=()=>Ai(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{N(oo,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await lo(e)})}function Eo(e,t){return t().catch(n=>So(e,n,t))}async function _o(e){const t=R(e),n=Mo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Pe;for(;Co(t);)try{const e=await ji(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,No(t,e)}catch(e){await So(t,e)}To(t)&&Io(t)}function Co(e){return yo(e)&&e.Ta.length<10}function No(e,t){e.Ta.push(t);const n=Mo(e);n.O_()&&n.X_&&n.ea(t.mutations)}function To(e){return yo(e)&&!Mo(e).x_()&&e.Ta.length>0}function Io(e){Mo(e).start()}async function Ao(e){Mo(e).ra()}async function Po(e){const t=Mo(e);for(const n of e.Ta)t.ea(n.mutations)}async function jo(e,t,n){const r=e.Ta.shift(),s=Br.from(r,t,n);await Eo(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await _o(e)}async function Lo(e,t){t&&Mo(e).X_&&await async function(e,t){if(function(e){return Gr(e)&&e!==D.ABORTED}(t.code)){const n=e.Ta.shift();Mo(e).B_(),await Eo(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await _o(e)}}(e,t),To(e)&&Io(e)}async function Ro(e,t){const n=R(e);n.asyncQueue.verifyOperationInProgress(),N(oo,"RemoteStore received new credentials");const r=yo(n);n.Ea.add(3),await co(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await lo(n)}async function Do(e,t){const n=R(e);t?(n.Ea.delete(2),await lo(n)):t||(n.Ea.add(2),await co(n),n.Ra.set("Unknown"))}function Oo(e){return e.ma||(e.ma=function(e,t,n){const r=R(e);return r.sa(),new to(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:bo.bind(null,e),t_:wo.bind(null,e),r_:xo.bind(null,e),H_:ko.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),go(e)?mo(e):e.Ra.set("Unknown")):(await e.ma.stop(),vo(e))})),e.ma}function Mo(e){return e.fa||(e.fa=function(e,t,n){const r=R(e);return r.sa(),new no(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Ao.bind(null,e),r_:Lo.bind(null,e),ta:Po.bind(null,e),na:jo.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await _o(e)):(await e.fa.stop(),e.Ta.length>0&&(N(oo,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class Fo{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Fo(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vo(e,t){if(T("AsyncQueue",`${t}: ${e}`),Ie(e))return new O(D.UNAVAILABLE,`${t}: ${e}`);throw e}class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ie.comparator(t.key,n.key):(e,t)=>ie.comparator(e.key,t.key),this.keyedMap=er(),this.sortedSet=new dt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Uo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class zo{constructor(){this.ga=new dt(ie.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):P(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Bo{constructor(e,t,n,r,s,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Bo(e,t,Uo.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$n(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class $o{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Ho{constructor(){this.queries=qo(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=qo(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new O(D.ABORTED,"Firestore shutting down"))}}function qo(){return new Yn(e=>Hn(e),$n)}async function Wo(e,t){const n=R(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new $o,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Vo(e,`Initialization of query '${qn(t.query)}' failed`);return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Yo(n)}async function Go(e,t){const n=R(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ko(e,t){const n=R(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Yo(n)}function Qo(e,t,n){const r=R(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Yo(e){e.Ca.forEach(e=>{e.next()})}var Xo,Jo;(Jo=Xo||(Xo={})).Ma="default",Jo.Cache="cache";class Zo{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Bo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Bo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Xo.Cache}}class ea{constructor(e){this.key=e}}class ta{constructor(e){this.key=e}}class na{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ar(),this.mutatedKeys=ar(),this.eu=Kn(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new zo,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Wn(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||l&&this.eu(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=r??!1;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,l=a!==this.Za;return this.Za=a,0!==i.length||l?{snapshot:new Bo(this.query,e.tu,s,i,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zo,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ar(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ta(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ea(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ar();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Bo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ra="SyncEngine";class sa{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class ia{constructor(e){this.key=e,this.hu=!1}}class oa{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Yn(e=>Hn(e),$n),this.Iu=new Map,this.Eu=new Set,this.du=new dt(ie.comparator),this.Au=new Map,this.Ru=new hi,this.Vu={},this.mu=new Map,this.fu=Js.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function aa(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ta(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ca(r,t,n,!0),s}async function la(e,t){const n=Ta(e);await ca(n,t,!0,!1)}async function ca(e,t,n,r){const s=await Li(e.localStore,Vn(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await ua(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&uo(e.remoteStore,s),a}async function ua(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Di(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return ka(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const i=await Di(e.localStore,t,!0),o=new na(t,i.Qs),a=o.ru(i.documents),l=rs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=o.applyChanges(a,e.isPrimaryClient,l);ka(e,n,c.au);const u=new sa(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function da(e,t,n){const r=R(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!$n(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ri(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ho(r.remoteStore,s.targetId),wa(r,s.targetId)}).catch(Ce)):(wa(r,s.targetId),await Ri(r.localStore,s.targetId,!0))}async function ha(e,t){const n=R(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ho(n.remoteStore,r.targetId))}async function fa(e,t){const n=R(e);try{const e=await function(e,t){const n=R(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];t.targetChanges.forEach((i,a)=>{const l=s.get(a);if(!l)return;o.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(vt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ci||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&o.push(n.Pi.updateTargetData(e,c))});let a=Jn(),l=ar();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Pi(e,i,t.documentUpdates).next(e=>{a=e.ks,l=e.qs})),!r.isEqual(ye.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ne.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(L(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?L(r.hu,14607):e.removedDocuments.size>0&&(L(r.hu,42227),r.hu=!1))}),await _a(n,e,t)}catch(e){await Ce(e)}}function pa(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Yo(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ma(e,t,n){const r=R(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new dt(ie.comparator);e=e.insert(i,sn.newNoDocument(i,ye.min()));const n=ar().add(i),s=new ns(ye.min(),new Map,new dt(K),e,n);await fa(r,s),r.du=r.du.remove(i),r.Au.delete(t),Ea(r)}else await Ri(r.localStore,t,!1).then(()=>wa(r,t,n)).catch(Ce)}async function ga(e,t){const n=R(e),r=t.batch.batchId;try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Ne.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);L(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ar();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);ba(n,r,null),va(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _a(n,e)}catch(e){await Ce(e)}}async function ya(e,t,n){const r=R(e);try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(L(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);ba(r,t,n),va(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _a(r,e)}catch(n){await Ce(n)}}function va(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function ba(e,t,n){const r=R(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function wa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||xa(e,t)})}function xa(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ho(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ea(e))}function ka(e,t,n){for(const r of n)r instanceof ea?(e.Ru.addReference(r.key,t),Sa(e,r)):r instanceof ta?(N(ra,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||xa(e,r.key)):P(19791,{wu:r})}function Sa(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(N(ra,"New document in limbo: "+n),e.Eu.add(r),Ea(e))}function Ea(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ie(ne.fromString(t)),r=e.fu.next();e.Au.set(r,new ia(n)),e.du=e.du.insert(n,r),uo(e.remoteStore,new $s(Vn(Dn(n.path)),r,"TargetPurposeLimboResolution",Ae.ce))}}async function _a(e,t,n){const r=R(e),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){const t=e?!e.fromCache:n?.targetChanges.get(a.targetId)?.current;r.sharedClientState.updateQueryState(a.targetId,t?"current":"not-current")}if(e){s.push(e);const t=ki.As(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ne.forEach(t,t=>Ne.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ne.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ie(e))throw e;N(_i,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Ca(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){N(ra,"User change. New user:",t.toKey());const e=await Ii(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new O(D.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await _a(n,e.Ls)}}function Na(e,t){const n=R(e),r=n.Au.get(t);if(r&&r.hu)return ar().add(r.key);{let e=ar();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Ta(e){const t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fa.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Na.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ma.bind(null,t),t.Pu.H_=Ko.bind(null,t.eventManager),t.Pu.yu=Qo.bind(null,t.eventManager),t}function Ia(e){const t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ga.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ya.bind(null,t),t}class Aa{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xi(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ti(this.persistence,new Ei,e.initialUser,this.serializer)}Cu(e){return new vi(wi.mi,this.serializer)}Du(e){return new Fi}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Aa.provider={build:()=>new Aa};class Pa extends Aa{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){L(this.persistence.referenceDelegate instanceof xi,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ri(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Xs.withCacheSize(this.cacheSizeBytes):Xs.DEFAULT;return new vi(e=>xi.mi(e,t),this.serializer)}}class ja{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pa(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ca.bind(null,this.syncEngine),await Do(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ho}createDatastore(e){const t=Xi(e.databaseInfo.databaseId),n=function(e){return new Qi(e)}(e.databaseInfo);return function(e,t,n,r){return new so(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new ao(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>pa(this.syncEngine,e,0),zi.v()?new zi:new Vi)}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new oa(e,t,n,r,s,i);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await async function(e){const t=R(e);N(oo,"RemoteStore shutting down."),t.Ea.add(5),await co(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ja.provider={build:()=>new ja};class La{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):T("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Ra="FirestoreClient";class Da{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=S.UNAUTHENTICATED,this.clientId=G.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{N(Ra,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(N(Ra,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Oa(e,t){e.asyncQueue.verifyOperationInProgress(),N(Ra,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Ii(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ma(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Fa(e);N(Ra,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ro(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ro(t.remoteStore,n)),e._onlineComponents=t}async function Fa(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){N(Ra,"Using user provided OfflineComponentProvider");try{await Oa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===D.FAILED_PRECONDITION||e.code===D.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;I("Error using user provided cache. Falling back to memory cache: "+n),await Oa(e,new Aa)}}else N(Ra,"Using default OfflineComponentProvider"),await Oa(e,new Pa(void 0));return e._offlineComponents}async function Va(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(N(Ra,"Using user provided OnlineComponentProvider"),await Ma(e,e._uninitializedComponentsProvider._online)):(N(Ra,"Using default OnlineComponentProvider"),await Ma(e,new ja))),e._onlineComponents}function Ua(e){return Va(e).then(e=>e.syncEngine)}async function za(e){const t=await Va(e),n=t.eventManager;return n.onListen=aa.bind(null,t.syncEngine),n.onUnlisten=da.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=la.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ha.bind(null,t.syncEngine),n}function Ba(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new La({next:a=>{i.Nu(),t.enqueueAndForget(()=>Go(e,o));const l=a.docs.has(n);!l&&a.fromCache?s.reject(new O(D.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&r&&"server"===r.source?s.reject(new O(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new Zo(Dn(n.path),i,{includeMetadataChanges:!0,qa:!0});return Wo(e,o)}(await za(e),e.asyncQueue,t,n,r)),r.promise}function $a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new M;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new La({next:n=>{i.Nu(),t.enqueueAndForget(()=>Go(e,o)),n.fromCache&&"server"===r.source?s.reject(new O(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new Zo(n,i,{includeMetadataChanges:!0,qa:!0});return Wo(e,o)}(await za(e),e.asyncQueue,t,n,r)),r.promise}function Ha(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const qa=new Map,Wa="firestore.googleapis.com",Ga=!0;class Ka{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new O(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wa,this.ssl=Ga}else this.host=e.host,this.ssl=e.ssl??Ga;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Ys;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ei)throw new O(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new O(D.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ha(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new O(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new O(D.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Qa{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ka({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ka(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new $(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qa.get(e);t&&(N("ComponentProvider","Removing Datastore"),qa.delete(e),t.terminate())}(this),Promise.resolve()}}class Ya{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Ya(this.firestore,e,this._query)}}class Xa{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ja(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xa(this.firestore,e,this._key)}toJSON(){return{type:Xa._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(fe(t,Xa._jsonSchema))return new Xa(e,n||null,new ie(ne.fromString(t.referencePath)))}}Xa._jsonSchemaVersion="firestore/documentReference/1.0",Xa._jsonSchema={type:he("string",Xa._jsonSchemaVersion),referencePath:he("string")};class Ja extends Ya{constructor(e,t,n){super(e,t,Dn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xa(this.firestore,null,new ie(e))}withConverter(e){return new Ja(this.firestore,e,this._path)}}function Za(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),oe("collection","path",t),e instanceof Qa){const n=ne.fromString(t,...r);return le(n),new Ja(e,null,n)}{if(!(e instanceof Xa||e instanceof Ja))throw new O(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return le(n),new Ja(e.firestore,null,n)}}function el(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=G.newId()),oe("doc","path",t),e instanceof Qa){const n=ne.fromString(t,...r);return ae(n),new Xa(e,null,new ie(n))}{if(!(e instanceof Xa||e instanceof Ja))throw new O(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ne.fromString(t,...r));return ae(n),new Xa(e.firestore,e instanceof Ja?e.converter:null,new ie(n))}}const tl="AsyncQueue";class nl{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ji(this,"async_queue_retry"),this._c=()=>{const e=Yi();e&&N(tl,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Yi();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new M;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ie(e))throw e;N(tl,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,T("INTERNAL UNHANDLED ERROR: ",rl(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Fo.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&P(47125,{Pc:rl(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function rl(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class sl extends Qa{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new nl,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nl(e),this._firestoreClient=void 0,await e}}}function il(e,t){const n="object"==typeof e?e:(0,i.Sx)(),r="string"==typeof e?e:t||Pt,s=(0,i.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=de(e,Qa);const s=(0,l.zJ)(t),i=e._getSettings(),o={...i,emulatorOptions:e._getEmulatorOptions()},a=`${t}:${n}`;s&&((0,l.gE)(`https://${a}`),(0,l.P1)("Firestore",!0)),i.host!==Wa&&i.host!==a&&I("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:a,ssl:s,emulatorOptions:r};if(!(0,l.bD)(c,o)&&(e._setSettings(c),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=S.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,e._app?.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new O(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new S(s)}e._authCredentials=new U(new F(t,n))}}(s,...e)}return s}function ol(e){if(e._terminated)throw new O(D.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||al(e),e._firestoreClient}function al(e){const t=e._freezeSettings(),n=function(e,t,n,r){return new At(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ha(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new Da(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&function(e){const t=e?._online.build();return{_offline:e?._offline.build(t),_online:t}}(e._componentsProvider))}class ll{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ll(vt.fromBase64String(e))}catch(e){throw new O(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new ll(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ll._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fe(e,ll._jsonSchema))return ll.fromBase64String(e.bytes)}}ll._jsonSchemaVersion="firestore/bytes/1.0",ll._jsonSchema={type:he("string",ll._jsonSchemaVersion),bytes:he("string")};class cl{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new O(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new se(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ul{constructor(e){this._methodName=e}}class dl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return K(this._lat,e._lat)||K(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:dl._jsonSchemaVersion}}static fromJSON(e){if(fe(e,dl._jsonSchema))return new dl(e.latitude,e.longitude)}}dl._jsonSchemaVersion="firestore/geoPoint/1.0",dl._jsonSchema={type:he("string",dl._jsonSchemaVersion),latitude:he("number"),longitude:he("number")};class hl{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:hl._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fe(e,hl._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new hl(e.vectorValues);throw new O(D.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}hl._jsonSchemaVersion="firestore/vectorValue/1.0",hl._jsonSchema={type:he("string",hl._jsonSchemaVersion),vectorValues:he("object")};const fl=/^__.*__$/;class pl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rr(e,this.data,t,this.fieldTransforms)}}class ml{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Dr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function gl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P(40011,{Ac:e})}}class yl{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new yl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.gc(e),n}yc(e){const t=this.path?.child(e),n=this.Vc({path:t,fc:!1});return n.Rc(),n}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return jl(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(gl(this.Ac)&&fl.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Xi(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new yl({Ac:e,methodName:t,Dc:n,path:se.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bl(e){const t=e._freezeSettings(),n=Xi(e._databaseId);return new vl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wl(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Tl("Data must be an object, but it was:",o,r);const a=Cl(r,o);let l,c;if(i.merge)l=new gt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Il(t,r,n);if(!o.contains(s))throw new O(D.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Ll(e,s)||e.push(s)}l=new gt(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new pl(new nn(a),l,c)}class xl extends ul{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xl}}function kl(e,t,n,r){const s=e.Cc(1,t,n);Tl("Data must be an object, but it was:",s,r);const i=[],o=nn.empty();ct(r,(e,r)=>{const a=Pl(t,e,n);r=(0,l.Ku)(r);const c=s.yc(a);if(r instanceof xl)i.push(a);else{const e=_l(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new gt(i);return new ml(o,a,s.fieldTransforms)}function Sl(e,t,n,r,s,i){const o=e.Cc(1,t,n),a=[Il(t,r,n)],c=[s];if(i.length%2!=0)throw new O(D.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let l=0;l<i.length;l+=2)a.push(Il(t,i[l])),c.push(i[l+1]);const u=[],d=nn.empty();for(let f=a.length-1;f>=0;--f)if(!Ll(u,a[f])){const e=a[f];let t=c[f];t=(0,l.Ku)(t);const n=o.yc(e);if(t instanceof xl)u.push(e);else{const r=_l(t,n);null!=r&&(u.push(e),d.set(e,r))}}const h=new gt(u);return new ml(d,h,o.fieldTransforms)}function El(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return _l(n,e.Cc(r?4:3,t))}function _l(e,t){if(Nl(e=(0,l.Ku)(e)))return Tl("Unsupported field value:",t,e),Cl(e,t);if(e instanceof ul)return function(e,t){if(!gl(t.Ac))throw t.Sc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Sc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=_l(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return hr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ge.fromDate(e);return{timestampValue:gs(t.serializer,n)}}if(e instanceof ge){const n=new ge(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gs(t.serializer,n)}}if(e instanceof dl)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof ll)return{bytesValue:ys(t.serializer,e._byteString)};if(e instanceof Xa){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:ws(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof hl)return function(e,t){return{mapValue:{fields:{[Lt]:{stringValue:Ot},[Mt]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ur(t.serializer,e)})}}}}}}(e,t);throw t.Sc(`Unsupported field value: ${ue(e)}`)}(e,t)}function Cl(e,t){const n={};return ut(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ct(e,(e,r)=>{const s=_l(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Nl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ge||e instanceof dl||e instanceof ll||e instanceof Xa||e instanceof ul||e instanceof hl)}function Tl(e,t,n){if(!Nl(n)||!ce(n)){const r=ue(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Il(e,t,n){if((t=(0,l.Ku)(t))instanceof cl)return t._internalPath;if("string"==typeof t)return Pl(e,t);throw jl("Field path arguments must be of type string or ",e,!1,void 0,n)}const Al=new RegExp("[~\\*/\\[\\]]");function Pl(e,t,n){if(t.search(Al)>=0)throw jl(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new cl(...t.split("."))._internalPath}catch(r){throw jl(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function jl(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new O(D.INVALID_ARGUMENT,a+e+l)}function Ll(e,t){return e.some(e=>e.isEqual(t))}class Rl{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xa(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Dl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ol("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Dl extends Rl{data(){return super.data()}}function Ol(e,t){return"string"==typeof t?Pl(e,t):t instanceof cl?t._internalPath:t._delegate._internalPath}function Ml(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new O(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Fl{}class Vl extends Fl{}function Ul(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Fl&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Bl).length,n=e.filter(e=>e instanceof zl).length;if(t>1||t>0&&n>0)throw new O(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class zl extends Vl{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new zl(e,t,n)}_apply(e){const t=this._parse(e);return Gl(e._query,t),new Ya(e.firestore,e.converter,zn(e._query,t))}_parse(e){const t=bl(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new O(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Wl(o,i);const t=[];for(const n of o)t.push(ql(r,e,n));a={arrayValue:{values:t}}}else a=ql(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Wl(o,i),a=El(n,t,o,"in"===i||"not-in"===i);return hn.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Bl extends Fl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Bl(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:fn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Gl(n,s),n=zn(n,s)}(e._query,t),new Ya(e.firestore,e.converter,zn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $l extends Vl{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $l(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new O(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new O(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cn(t,n)}(e._query,this._field,this._direction);return new Ya(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ln(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Hl(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Ol("orderBy",e);return $l._create(n,t)}function ql(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new O(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mn(t)&&-1!==n.indexOf("/"))throw new O(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ne.fromString(n));if(!ie.isDocumentKey(r))throw new O(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Gt(e,new ie(r))}if(n instanceof Xa)return Gt(e,n._key);throw new O(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ue(n)}.`)}function Wl(e,t){if(!Array.isArray(e)||0===e.length)throw new O(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Gl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new O(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new O(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Kl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ft(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(kt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ct(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){const t=e.fields?.[Mt].arrayValue?.values?.map(e=>xt(e.doubleValue));return new hl(t)}convertGeoPoint(e){return new dl(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Tt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(It(e));default:return null}}convertTimestamp(e){const t=wt(e);return new ge(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ne.fromString(e);L(Bs(n),9688,{name:e});const r=new jt(n.get(1),n.get(3)),s=new ie(n.popFirst(5));return r.isEqual(t)||T(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function Ql(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Yl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xl extends Rl{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ol("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(D.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Xl._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Xl._jsonSchemaVersion="firestore/documentSnapshot/1.0",Xl._jsonSchema={type:he("string",Xl._jsonSchemaVersion),bundleSource:he("string","DocumentSnapshot"),bundleName:he("string"),bundle:he("string")};class Jl extends Xl{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Zl{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Yl(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Jl(this._firestore,this._userDataWriter,n.key,n,new Yl(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Jl(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Yl(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Jl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Yl(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:ec(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(D.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=G.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ec(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P(61501,{type:e})}}function tc(e){e=de(e,Xa);const t=de(e.firestore,sl);return Ba(ol(t),e._key).then(n=>ac(t,e,n))}Zl._jsonSchemaVersion="firestore/querySnapshot/1.0",Zl._jsonSchema={type:he("string",Zl._jsonSchemaVersion),bundleSource:he("string","QuerySnapshot"),bundleName:he("string"),bundle:he("string")};class nc extends Kl{constructor(e){super(),this.firestore=e}convertBytes(e){return new ll(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xa(this.firestore,null,t)}}function rc(e){e=de(e,Ya);const t=de(e.firestore,sl),n=ol(t),r=new nc(t);return Ml(e._query),$a(n,e._query).then(n=>new Zl(t,r,e,n))}function sc(e,t,n){e=de(e,Xa);const r=de(e.firestore,sl),s=Ql(e.converter,t,n);return oc(r,[wl(bl(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Cr.none())])}function ic(e,t,n){e=de(e,Xa);const r=de(e.firestore,sl),s=bl(r);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof cl?Sl(s,"updateDoc",e._key,t,n,a):kl(s,"updateDoc",e._key,t),oc(r,[i.toMutation(e._key,Cr.exists(!0))])}function oc(e,t){return function(e,t){const n=new M;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Ia(e);try{const e=await function(e,t){const n=R(e),r=ge.now(),s=t.reduce((e,t)=>e.add(t.key),ar());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Jn(),l=ar();return n.Ns.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=jr(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Dr(e.key,t,rn(t.value.mapValue),Cr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:tr(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new dt(K)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await _a(r,e.changes),await _o(r.remoteStore)}catch(e){const t=Vo(e,"Failed to persist write");n.reject(t)}}(await Ua(e),t,n)),n.promise}(ol(e),t)}function ac(e,t,n){const r=n.docs.get(t._key),s=new nc(e);return new Xl(e,s,t._key,r,new Yl(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){E=e}(i.MF),(0,i.om)(new o.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),o=new sl(new z(e.getProvider("auth-internal")),new q(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(e.options.projectId,t)}(i,r),i);return s={useFetchStreams:t,...s},o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),(0,i.KO)(x,k,e),(0,i.KO)(x,k,"esm2020")}()},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},a=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:a,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=o.p;try{if(l.T=null,o.p=2,e)return e()}finally{l.T=t,o.p=n,o.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,o.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&o.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?o.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&o.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);o.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&o.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);o.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);o.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else o.d.m(e)},t.requestFormReset=function(e){o.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},719:(e,t,n)=>{n.d(t,{Yk:()=>u,as:()=>o,bZ:()=>a,logout:()=>c,nS:()=>l});var r=n(823),s=n(667),i=n(791);const o=async(e,t)=>{try{console.log("\ud83d\udd10 Trying to login teacher...");const n=(await(0,r.x9)(i.j,e,t)).user,o=await(0,s.x7)((0,s.H9)(i.db,"teachers",n.uid));if(o.exists())return console.log("\u2705 Teacher login successful!"),{success:!0,user:{uid:n.uid,email:n.email,role:"teacher",...o.data()}};{console.log("\ud83d\udcdd Creating teacher profile automatically...");const e={email:n.email,displayName:"Teacher Alex",role:"teacher",createdAt:new Date};return await(0,s.BN)((0,s.H9)(i.db,"teachers",n.uid),e),console.log("\u2705 Teacher profile created and login successful!"),{success:!0,user:{uid:n.uid,email:n.email,role:"teacher",...e}}}}catch(n){return console.log("\u274c Teacher login failed:",n.message),{success:!1,error:n.message}}},a=async(e,t)=>{try{console.log("\ud83c\udf93 Trying to login student...");const n=`${e}@teacher-alex.com`,o=(await(0,r.x9)(i.j,n,t)).user,a=await(0,s.x7)((0,s.H9)(i.db,"students",e));if(a.exists())return console.log("\u2705 Student login successful!"),{success:!0,user:{uid:o.uid,username:e,role:"student",...a.data()}};throw new Error("Student account not found.")}catch(n){return console.log("\u274c Student login failed:",n.message),{success:!1,error:n.message}}},l=async e=>{try{const{username:t,password:n,name:o,series:a}=e;console.log("\ud83d\udc68\u200d\ud83c\udf93 Creating student account for:",o);const l=`${t}@teacher-alex.com`,c=(await(0,r.eJ)(i.j,l,n)).user;return await(0,s.BN)((0,s.H9)(i.db,"students",t),{name:o,username:t,email:l,uid:c.uid,series:a,createdAt:new Date,progress:{},lastActive:new Date}),await(0,r.CI)(i.j),console.log("\u2705 Student account created successfully!"),{success:!0,message:`Student ${o} created successfully!`}}catch(t){return console.log("\u274c Failed to create student:",t.message),{success:!1,error:t.message}}},c=async()=>{try{return await(0,r.CI)(i.j),console.log("\ud83d\udc4b User logged out successfully"),{success:!0}}catch(e){return console.log("\u274c Logout failed:",e.message),{success:!1,error:e.message}}},u=e=>(0,r.hg)(i.j,e)},776:(e,t,n)=>{n.d(t,{cY:()=>p,FA:()=>L,g:()=>j,u:()=>a,Uj:()=>o,Fy:()=>y,tD:()=>z,bD:()=>O,hp:()=>U,T9:()=>h,Tj:()=>u,yU:()=>d,XA:()=>f,mS:()=>l,Ku:()=>H,ZQ:()=>x,sr:()=>_,zJ:()=>m,c1:()=>E,Im:()=>D,lT:()=>N,zW:()=>A,jZ:()=>k,lV:()=>C,nr:()=>T,Ov:()=>I,gE:()=>g,Am:()=>F,I9:()=>V,P1:()=>w,eX:()=>P});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],o=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const l=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==o||null==a||null==l)throw new i;const c=t<<2|o>>4;if(r.push(c),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==l){const e=a<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class i extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},a=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const c=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/teacher-alex-academy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&a(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},u=e=>c()?.emulatorHosts?.[e],d=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},h=()=>c()?.config,f=e=>c()?.[`_${e}`];class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function m(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function g(e){return(await fetch(e,{credentials:"include"})).ok}function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i={iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...e};return[o(JSON.stringify({alg:"none",type:"JWT"})),o(JSON.stringify(i)),""].join(".")}const v={};let b=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!m(window.location.host)||v[e]===t||v[e]||b)return;function n(e){return`__firebase__banner__${e}`}v[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(v))v[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}s?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function x(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function k(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(x())}function S(){const e=c()?.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}function E(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function _(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function N(){const e=x();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function I(){return!S()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function A(){try{return"object"===typeof indexedDB}catch(e){return!1}}function P(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}class j extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,L.prototype.create)}}class L{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(R,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new j(n,i,t)}}const R=/\{\$([^}]+)}/g;function D(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function O(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(M(n)&&M(i)){if(!O(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function M(e){return null!==e&&"object"===typeof e}function F(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function V(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function U(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function z(e,t){const n=new B(e,t);return n.subscribe.bind(n)}class B{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=$),void 0===r.error&&(r.error=$),void 0===r.complete&&(r.complete=$);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function $(){}function H(e){return e&&e._delegate?e._delegate:e}},791:(e,t,n)=>{n.d(t,{j:()=>a,db:()=>l});var r=n(232);(0,r.KO)("firebase","12.0.0","app");var s=n(823),i=n(667);const o=(0,r.Wp)({apiKey:"AIzaSyA27IBxS3B0HC2jECzyQPt-CvflxRzfIW0",authDomain:"teacher-alex-v3.firebaseapp.com",projectId:"teacher-alex-v3",storageBucket:"teacher-alex-v3.firebasestorage.app",messagingSenderId:"38393935707",appId:"1:38393935707:web:6b9a5f1f5a2e282d09cc7e"}),a=(0,s.xI)(o),l=(0,i.aU)(o)},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},823:(e,t,n)=>{n.d(t,{eJ:()=>at,xI:()=>Ln,hg:()=>ct,x9:()=>lt,CI:()=>ut});var r=n(232),s=n(776),i=n(965),o=n(606);function a(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const l=a,c=new s.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),u=new i.Vy("@firebase/auth");function d(e){if(u.logLevel<=i.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];u.error(`Auth (${r.MF}): ${e}`,...n)}}function h(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw g(e,...n)}function f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return g(e,...n)}function p(e,t,n){const r={...l(),[t]:n};return new s.FA("auth","Firebase",r).create(t,{appName:e.name})}function m(e){return p(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return c.create(e,...n)}function y(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw g(t,...r)}}function v(e){const t="INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function b(e,t){e||v(t)}function w(){return"undefined"!==typeof self&&self.location?.href||""}function x(){return"http:"===k()||"https:"===k()}function k(){return"undefined"!==typeof self&&self.location?.protocol||null}class S{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,s.jZ)()||(0,s.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(x()||(0,s.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function E(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class _{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void v("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void v("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void v("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const C={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},N=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],T=new S(3e4,6e4);function I(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function A(e,t,n,r){return P(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=(0,s.Am)({key:e.config.apiKey,...o}).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c={method:t,headers:l,...i};return(0,s.c1)()||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),_.fetch()(await L(e,e.config.apiHost,n,a),c)})}async function P(e,t,n){e._canInitEmulator=!1;const r={...C,...t};try{const t=new D(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw O(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw O(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw O(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw O(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw p(e,a,o);h(e,a)}}catch(i){if(i instanceof s.g)throw i;h(e,"network-request-failed",{message:String(i)})}}async function j(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await A(e,t,n,r,s);return"mfaPendingCredential"in i&&h(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function L(e,t,n,r){const s=`${t}${n}?${r}`,i=e,o=i.config.emulator?E(e.config,s):`${e.config.apiScheme}://${s}`;if(N.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(o).toString()}return o}function R(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class D{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(f(this.auth,"network-request-failed")),T.get())})}}function O(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=f(e,t,r);return s.customData._tokenResponse=n,s}function M(e){return void 0!==e&&void 0!==e.enterprise}class F{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return R(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V(e,t){return A(e,"GET","/v2/recaptchaConfig",I(e,t))}async function U(e,t){return A(e,"POST","/v1/accounts:lookup",t)}function z(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function B(e){return 1e3*Number(e)}function $(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return d("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,s.u)(n);return e?JSON.parse(e):(d("Failed to decode base64 JWT payload"),null)}catch(i){return d("Caught error parsing JWT payload as JSON",i?.toString()),null}}function H(e){const t=$(e);return y(t,"internal-error"),y("undefined"!==typeof t.exp,"internal-error"),y("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function q(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof s.g&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class W{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e?.code&&this.schedule(!0))}this.schedule()}}class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=z(this.lastLoginAt),this.creationTime=z(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function K(e){const t=e.auth,n=await e.getIdToken(),r=await q(e,U(t,{idToken:n}));y(r?.users.length,t,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const i=s.providerUserInfo?.length?Q(s.providerUserInfo):[],o=(a=e.providerData,l=i,[...a.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var a,l;const c=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!o?.length,d=!!c&&u,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new G(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,h)}function Q(e){return e.map(e=>{let{providerId:t,...n}=e;return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Y{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){y(e.idToken,"internal-error"),y("undefined"!==typeof e.idToken,"internal-error"),y("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):H(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){y(0!==e.length,"internal-error");const t=H(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await P(e,{},async()=>{const n=(0,s.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=await L(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:n};return e.emulatorConfig&&(0,s.zJ)(e.emulatorConfig.host)&&(l.credentials="include"),_.fetch()(o,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new Y;return n&&(y("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(y("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(y("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Y,this.toJSON())}_performRefresh(){return v("not implemented")}}function X(e,t){y("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class J{constructor(e){let{uid:t,auth:n,stsTokenManager:r,...s}=e;this.providerId="firebase",this.proactiveRefresh=new W(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new G(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await q(this,this.stsTokenManager.getToken(this.auth,e));return y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,s.Ku)(e),r=await n.getIdToken(t),i=$(r);y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:z(B(i.auth_time)),issuedAtTime:z(B(i.iat)),expirationTime:z(B(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}}(this,e)}reload(){return async function(e){const t=(0,s.Ku)(e);await K(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>({...e})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new J({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await K(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(m(this.auth));const e=await this.getIdToken();return await q(this,async function(e,t){return A(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const n=t.displayName??void 0,r=t.email??void 0,s=t.phoneNumber??void 0,i=t.photoURL??void 0,o=t.tenantId??void 0,a=t._redirectEventId??void 0,l=t.createdAt??void 0,c=t.lastLoginAt??void 0,{uid:u,emailVerified:d,isAnonymous:h,providerData:f,stsTokenManager:p}=t;y(u&&p,e,"internal-error");const m=Y.fromJSON(this.name,p);y("string"===typeof u,e,"internal-error"),X(n,e.name),X(r,e.name),y("boolean"===typeof d,e,"internal-error"),y("boolean"===typeof h,e,"internal-error"),X(s,e.name),X(i,e.name),X(o,e.name),X(a,e.name),X(l,e.name),X(c,e.name);const g=new J({uid:u,auth:e,email:r,emailVerified:d,displayName:n,isAnonymous:h,photoURL:i,phoneNumber:s,tenantId:o,stsTokenManager:m,createdAt:l,lastLoginAt:c});return f&&Array.isArray(f)&&(g.providerData=f.map(e=>({...e}))),a&&(g._redirectEventId=a),g}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Y;r.updateFromServerResponse(t);const s=new J({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await K(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];y(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?Q(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!s?.length,o=new Y;o.updateFromIdToken(n);const a=new J({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new G(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(a,l),a}}const Z=new Map;function ee(e){b(e instanceof Function,"Expected a class definition");let t=Z.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Z.set(e,t),t)}class te{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}te.type="NONE";const ne=te;function re(e,t,n){return`firebase:${e}:${t}:${n}`}class se{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=re(this.userKey,r.apiKey,s),this.fullPersistenceKey=re("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await U(this.auth,{idToken:e}).catch(()=>{});return t?J._fromGetAccountInfoResponse(this.auth,t,e):null}return J._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new se(ee(ne),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||ee(ne);const i=re(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(i);if(t){let n;if("string"===typeof t){const r=await U(e,{idToken:t}).catch(()=>{});if(!r)break;n=await J._fromGetAccountInfoResponse(e,r,t)}else n=J._fromJSON(e,t);l!==s&&(o=n),s=l;break}}catch{}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch{}})),new se(s,e,n)):new se(s,e,n)}}function ie(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ce(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(oe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(de(t))return"Blackberry";if(he(t))return"Webos";if(ae(t))return"Safari";if((t.includes("chrome/")||le(t))&&!t.includes("edge/"))return"Chrome";if(ue(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===n?.length)return n[1]}return"Other"}function oe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/firefox\//i.test(e)}function ae(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function le(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/crios\//i.test(e)}function ce(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iemobile/i.test(e)}function ue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/android/i.test(e)}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/blackberry/i.test(e)}function he(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/webos/i.test(e)}function fe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)();return fe(e)||ue(e)||he(e)||de(e)||/windows phone/i.test(e)||ce(e)}function me(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ie((0,s.ZQ)());break;case"Worker":t=`${ie((0,s.ZQ)())}-${e}`;break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${r.MF}/${i}`}class ge{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n?.message})}}}class ye{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??6,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),void 0!==t.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),void 0!==t.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),void 0!==t.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),void 0!==t.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class ve{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new we(this),this.idTokenSubscription=new we(this),this.beforeStateQueue=new ge(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=c,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ee(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await se.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(n){}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await U(this,{idToken:e}),n=await J._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const t=this.redirectUser?._redirectEventId,r=n?._redirectEventId,i=await this.tryRedirectSignIn(e);t&&t!==r||!i?.user||(n=i.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(i){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await K(e)}catch(t){if("auth/network-request-failed"!==t?.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(m(this));const t=e?(0,s.Ku)(e):null;return t&&y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(m(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(m(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ee(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return A(e,"GET","/v2/passwordPolicy",I(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ye(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new s.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return A(e,"POST","/v2/accounts:revokeToken",I(e,t))}(this,t)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ee(e)||this._popupRedirectResolver;y(t,this,"argument-error"),this.redirectPersistenceManager=await se.create(this,[ee(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(y(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await(this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await(this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken());return e?.error&&function(e){if(u.logLevel<=i.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];u.warn(`Auth (${r.MF}): ${e}`,...n)}}(`Error while retrieving App Check token: ${e.error}`),e?.token}}function be(e){return(0,s.Ku)(e)}class we{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,s.tD)(e=>this.observer=e)}get next(){return y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let xe={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ke(e){return xe.loadJS(e)}function Se(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ee{constructor(){this.enterprise=new _e}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _e{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Ce="NO_RECAPTCHA";class Ne{constructor(e){this.type="recaptcha-enterprise",this.auth=be(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;M(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Ce)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Ee).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{V(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new F(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&M(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=xe.recaptchaEnterpriseScript;0!==t.length&&(t+=s),ke(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Te(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Ne(e);let o;if(s)o=Ce;else try{o=await i.verify(n)}catch(l){o=await i.verify(n,!0)}const a={...t};if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ie(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){if(e._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Te(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if("auth/missing-recaptcha-token"===s.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const s=await Te(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){if(e._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const s=await Te(e,t,n);return r(e,s).catch(async s=>{if("AUDIT"===e._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")&&("auth/missing-recaptcha-token"===s.code||"auth/invalid-app-credential"===s.code)){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const s=await Te(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Te(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Ae(e){const t=be(e),n=await V(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new F(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Ne(t).verify()}}function Pe(e,t,n){const r=be(e);y(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!n?.disableWarnings,o=je(t),{host:a,port:l}=function(e){const t=je(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Le(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Le(t)}}}(t),c=null===l?"":`:${l}`,u={url:`${o}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator)return y(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void y((0,s.bD)(u,r.config.emulator)&&(0,s.bD)(d,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,(0,s.zJ)(a)?((0,s.gE)(`${o}//${a}${c}`),(0,s.P1)("Auth",!0)):i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function je(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Le(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Re{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return v("not implemented")}_getIdTokenResponse(e){return v("not implemented")}_linkToIdToken(e,t){return v("not implemented")}_getReauthenticationResolver(e){return v("not implemented")}}async function De(e,t){return A(e,"POST","/v1/accounts:signUp",t)}async function Oe(e,t){return j(e,"POST","/v1/accounts:signInWithPassword",I(e,t))}class Me extends Re{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Me(e,t,"password")}static _fromEmailAndCode(e,t){return new Me(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(t?.email&&t?.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ie(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oe,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{email:this._email,oobCode:this._password});default:h(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ie(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",De,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return j(e,"POST","/v1/accounts:signInWithEmailLink",I(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:h(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Fe(e,t){return j(e,"POST","/v1/accounts:signInWithIdp",I(e,t))}class Ve extends Re{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ve(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):h("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,...s}=t;if(!n||!r)return null;const i=new Ve(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Fe(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Fe(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Fe(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,s.Am)(t)}return e}}async function Ue(e,t){return A(e,"POST","/v1/accounts:sendVerificationCode",I(e,t))}const ze={USER_NOT_FOUND:"user-not-found"};class Be extends Re{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Be({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Be({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await j(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,t));if(n.temporaryProof)throw O(e,"account-exists-with-different-credential",n);return n}(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return async function(e,t){return j(e,"POST","/v1/accounts:signInWithPhoneNumber",I(e,{...t,operation:"REAUTH"}),ze)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Be({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class $e{constructor(e){const t=(0,s.I9)((0,s.hp)(e)),n=t.apiKey??null,r=t.oobCode??null,i=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(t.mode??null);y(n&&r&&i,"argument-error"),this.apiKey=n,this.operation=i,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=function(e){const t=(0,s.I9)((0,s.hp)(e)).link,n=t?(0,s.I9)((0,s.hp)(t)).deep_link_id:null,r=(0,s.I9)((0,s.hp)(e)).deep_link_id;return(r?(0,s.I9)((0,s.hp)(r)).link:null)||r||n||t||e}(e);try{return new $e(t)}catch{return null}}}class He{constructor(){this.providerId=He.PROVIDER_ID}static credential(e,t){return Me._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=$e.parseLink(t);return y(n,"argument-error"),Me._fromEmailAndCode(e,n.code,n.tenantId)}}He.PROVIDER_ID="password",He.EMAIL_PASSWORD_SIGN_IN_METHOD="password",He.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class qe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class We extends qe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ge extends We{constructor(){super("facebook.com")}static credential(e){return Ve._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ge.credential(t.oauthAccessToken)}catch{return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";class Ke extends We{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ve._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ke.credential(n,r)}catch{return null}}}Ke.GOOGLE_SIGN_IN_METHOD="google.com",Ke.PROVIDER_ID="google.com";class Qe extends We{constructor(){super("github.com")}static credential(e){return Ve._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qe.credential(t.oauthAccessToken)}catch{return null}}}Qe.GITHUB_SIGN_IN_METHOD="github.com",Qe.PROVIDER_ID="github.com";class Ye extends We{constructor(){super("twitter.com")}static credential(e,t){return Ve._fromParams({providerId:Ye.PROVIDER_ID,signInMethod:Ye.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ye.credentialFromTaggedObject(e)}static credentialFromError(e){return Ye.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ye.credential(n,r)}catch{return null}}}async function Xe(e,t){return j(e,"POST","/v1/accounts:signUp",I(e,t))}Ye.TWITTER_SIGN_IN_METHOD="twitter.com",Ye.PROVIDER_ID="twitter.com";class Je{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await J._fromIdTokenResponse(e,n,r),i=Ze(n);return new Je({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Ze(n);return new Je({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Ze(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class et extends s.g{constructor(e,t,n,r){super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw et._fromErrorAndOperation(e,n,t,r);throw n})}async function nt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await q(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Je._forOperation(e,"link",r)}async function rt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(m(s));const i="reauthenticate";try{const r=await q(e,tt(s,i,t,e),n);y(r.idToken,s,"internal-error");const o=$(r.idToken);y(o,s,"internal-error");const{sub:a}=o;return y(e.uid===a,s,"user-mismatch"),Je._forOperation(e,i,r)}catch(o){throw"auth/user-not-found"===o?.code&&h(s,"user-mismatch"),o}}async function st(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(m(e));const s="signIn",i=await tt(e,s,t),o=await Je._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(o.user),o}async function it(e,t){return st(be(e),t)}async function ot(e){const t=be(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function at(e,t,n){if((0,r.xZ)(e.app))return Promise.reject(m(e));const s=be(e),i=Ie(s,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Xe,"EMAIL_PASSWORD_PROVIDER"),o=await i.catch(t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ot(e),t}),a=await Je._fromIdTokenResponse(s,"signIn",o);return await s._updateCurrentUser(a.user),a}function lt(e,t,n){return(0,r.xZ)(e.app)?Promise.reject(m(e)):it((0,s.Ku)(e),He.credential(t,n)).catch(async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&ot(e),t})}function ct(e,t,n,r){return(0,s.Ku)(e).onAuthStateChanged(t,n,r)}function ut(e){return(0,s.Ku)(e).signOut()}function dt(e,t){return A(e,"POST","/v2/accounts/mfaEnrollment:start",I(e,t))}new WeakMap;const ht="__sak";class ft{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class pt extends ft{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pe(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,s.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pt.type="LOCAL";const mt=pt;function gt(e){const t=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),n=RegExp(`${t}=([^;]+)`);return document.cookie.match(n)?.[1]??null}function yt(e){return`${"http:"===window.location.protocol?"__dev_":"__HOST-"}FIREBASE_${e.split(":")[3]}`}class vt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL(`${window.location.origin}/__cookies__`);return t.searchParams.set("finalTarget",e),t}async _isAvailable(){return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(navigator.cookieEnabled??!0))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=yt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return e?.value}return gt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=yt(e);document.cookie=`${t}=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High`,await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=yt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=gt(n);const s=setInterval(()=>{const e=gt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}vt.type="COOKIE";class bt extends ft{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}bt.type="SESSION";const wt=bt;class xt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new xt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!i?.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}xt.receivers=[];class St{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=kt("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Et(){return window}function _t(){return"undefined"!==typeof Et().WorkerGlobalScope&&"function"===typeof Et().importScripts}const Ct="firebaseLocalStorageDb",Nt="firebaseLocalStorage",Tt="fbase_key";class It{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function At(e,t){return e.transaction([Nt],t?"readwrite":"readonly").objectStore(Nt)}function Pt(){const e=indexedDB.open(Ct,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Nt,{keyPath:Tt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Nt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ct);return new It(e).toPromise()}(),t(await Pt()))})})}async function jt(e,t,n){const r=At(e,!0).put({[Tt]:t,value:n});return new It(r).toPromise()}function Lt(e,t){const n=At(e,!0).delete(t);return new It(n).toPromise()}class Rt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Pt()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _t()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xt._getInstance(_t()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await async function(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}(),!this.activeServiceWorker)return;this.sender=new St(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&(navigator?.serviceWorker?.controller||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Pt();return await jt(e,ht,"1"),await Lt(e,ht),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>jt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=At(e,!1).get(t),r=await new It(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Lt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=At(e,!1).getAll();return new It(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Rt.type="LOCAL";const Dt=Rt;function Ot(e,t){return A(e,"POST","/v2/accounts/mfaSignIn:start",I(e,t))}Se("rcb"),new S(3e4,6e4);const Mt="recaptcha";async function Ft(e,t,n){if(!e._getRecaptchaConfig())try{await Ae(e)}catch(r){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){y("enroll"===t.type,e,"internal-error");const s={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Ie(e,s,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Ce){y(n?.type===Mt,e,"argument-error");return dt(e,await Vt(e,t,n))}return dt(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{y("signin"===t.type,e,"internal-error");const s=r.multiFactorHint?.uid||r.multiFactorUid;y(s,e,"missing-multi-factor-info");const i={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Ie(e,i,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Ce){y(n?.type===Mt,e,"argument-error");return Ot(e,await Vt(e,t,n))}return Ot(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},s=Ie(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Ce){y(n?.type===Mt,e,"argument-error");return Ue(e,await Vt(e,t,n))}return Ue(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).sessionInfo}}finally{n?._reset()}}async function Vt(e,t,n){y(n.type===Mt,e,"argument-error");const r=await n.verify();y("string"===typeof r,e,"argument-error");const s={...t};if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Ut{constructor(e){this.providerId=Ut.PROVIDER_ID,this.auth=be(e)}verifyPhoneNumber(e,t){return Ft(this.auth,e,(0,s.Ku)(t))}static credential(e,t){return Be._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ut.credentialFromTaggedObject(t)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Be._fromTokenResponse(n,r):null}}function zt(e,t){return t?ee(t):(y(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ut.PROVIDER_ID="phone",Ut.PHONE_SIGN_IN_METHOD="phone";class Bt extends Re{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fe(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fe(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fe(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function $t(e){return st(e.auth,new Bt(e),e.bypassAuthState)}function Ht(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),rt(n,new Bt(e),e.bypassAuthState)}async function qt(e){const{auth:t,user:n}=e;return y(n,t,"internal-error"),nt(n,new Bt(e),e.bypassAuthState)}class Wt{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $t;case"linkViaPopup":case"linkViaRedirect":return qt;case"reauthViaPopup":case"reauthViaRedirect":return Ht;default:h(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gt=new S(2e3,1e4);class Kt extends Wt{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Kt.currentPopupAction&&Kt.currentPopupAction.cancel(),Kt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return y(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=kt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(f(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(f(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kt.currentPopupAction=null}pollUserCancellation(){const e=()=>{this.authWindow?.window?.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(f(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Gt.get())};e()}}Kt.currentPopupAction=null;const Qt=new Map;class Yt extends Wt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Qt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Zt(t),r=Jt(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Qt.set(this.auth._key(),e)}return this.bypassAuthState||Qt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Xt(e,t){Qt.set(e._key(),t)}function Jt(e){return ee(e._redirectPersistence)}function Zt(e){return re("pendingRedirect",e.config.apiKey,e.name)}async function en(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(m(e));const s=be(e),i=zt(s,t),o=new Yt(s,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,t)),a}class tn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return rn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!rn(e)){const n=e.error.code?.split("auth/")[1]||"internal-error";t.onError(f(this.auth,n))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(nn(e))}saveEventToCache(e){this.cachedEventUids.add(nn(e)),this.lastProcessedEventTime=Date.now()}}function nn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function rn(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===n?.code}const sn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,on=/^https?/;async function an(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return A(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const n of t)try{if(ln(n))return}catch{}h(e,"unauthorized-domain")}function ln(e){const t=w(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!on.test(n))return!1;if(sn.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const cn=new S(3e4,6e4);function un(){const e=Et().___jsl;if(e?.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function dn(e){return new Promise((t,n)=>{function r(){un(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{un(),n(f(e,"network-request-failed"))},timeout:cn.get()})}if(Et().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else{if(!Et().gapi?.load){const t=Se("iframefcb");return Et()[t]=()=>{gapi.load?r():n(f(e,"network-request-failed"))},ke(`${xe.gapiScript}?onload=${t}`).catch(e=>n(e))}r()}}).catch(e=>{throw hn=null,e})}let hn=null;const fn=new S(5e3,15e3),pn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gn(e){const t=e.config;y(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?E(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:r.MF},o=mn.get(e.config.apiHost);o&&(i.eid=o);const a=e._getFrameworks();return a.length&&(i.fw=a.join(",")),`${n}?${(0,s.Am)(i).slice(1)}`}async function yn(e){const t=await function(e){return hn=hn||dn(e),hn}(e),n=Et().gapi;return y(n,e,"internal-error"),t.open({where:document.body,url:gn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=f(e,"network-request-failed"),i=Et().setTimeout(()=>{r(s)},fn.get());function o(){Et().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}const vn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...vn,width:r.toString(),height:i.toString(),top:o,left:a},u=(0,s.ZQ)().toLowerCase();n&&(l=le(u)?"_blank":n),oe(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){return fe(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.ZQ)())&&!!window.navigator?.standalone}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new bn(null);const h=window.open(t||"",l,d);y(h,e,"popup-blocked");try{h.focus()}catch(f){}return new bn(h)}const xn="__/auth/handler",kn="emulator/auth/handler",Sn=encodeURIComponent("fac");async function En(e,t,n,i,o,a){y(e.config.authDomain,e,"auth-domain-config-required"),y(e.config.apiKey,e,"invalid-api-key");const l={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:r.MF,eventId:o};if(t instanceof qe){t.setDefaultLanguage(e.languageCode),l.providerId=t.providerId||"",(0,s.Im)(t.getCustomParameters())||(l.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))l[e]=t}if(t instanceof We){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(l.scopes=e.join(","))}e.tenantId&&(l.tid=e.tenantId);const c=l;for(const r of Object.keys(c))void 0===c[r]&&delete c[r];const u=await e._getAppCheckToken(),d=u?`#${Sn}=${encodeURIComponent(u)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${xn}`;return E(t,kn)}(e)}?${(0,s.Am)(c).slice(1)}${d}`}const _n="webStorageSupport";const Cn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wt,this._completeRedirectFn=en,this._overrideRedirectResult=Xt}async _openPopup(e,t,n,r){b(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");return wn(e,await En(e,t,n,w(),r),kt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Et().location.href=e}(await En(e,t,n,w(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await yn(e),n=new tn(e);return t.register("authEvent",t=>{y(t?.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_n,{type:_n},n=>{const r=n?.[0]?.[_n];void 0!==r&&t(!!r),h(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=an(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pe()||ae()||fe()}};var Nn="@firebase/auth",Tn="1.11.0";class In{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const An=(0,s.XA)("authIdTokenMaxAge")||300;let Pn=null;const jn=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>An)return;const s=n?.token;Pn!==s&&(Pn=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ln(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,s.bD)(r,t??{}))return e;h(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Cn,persistence:[Dt,mt,wt]}),i=(0,s.XA)("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=jn(e.toString());!function(e,t,n){(0,s.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,s.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}const o=(0,s.Tj)("auth");return o&&Pe(n,`http://${o}`),n}var Rn;xe={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=f("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(document.getElementsByTagName("head")?.[0]??document).appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Rn="Browser",(0,r.om)(new o.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Rn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:me(Rn)},c=new ve(r,s,i,l);return function(e,t){const n=t?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ee);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t?.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new o.uA("auth-internal",e=>(e=>new In(e))(be(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Nn,Tn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Rn)),(0,r.KO)(Nn,Tn,"esm2020")},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function k(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,E||(E=!0,S());else{var t=r(u);null!==t&&j(k,t.startTime-e)}}var S,E=!1,_=-1,C=5,N=-1;function T(){return!!y||!(t.unstable_now()-N<C)}function I(){if(y=!1,E){var e=t.unstable_now();N=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(_),_=-1),p=!0;var i=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&T());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof a){h.callback=a,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&j(k,l.startTime-e),n=!1}}break e}finally{h=null,f=i,p=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=I,S=function(){P.postMessage(null)}}else S=function(){v(I,0)};function j(e,n){_=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(_),_=-1):g=!0,j(k,i-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},965:(e,t,n)=>{n.d(t,{$b:()=>s,Vy:()=>c});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...i)};class c{constructor(e){this.name=e,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{289:"07aeaaca",387:"7071ea57",429:"9a6e9735",483:"273f645b",558:"2bed2593",568:"3abe878e",767:"7ac3feff",852:"3f8cded0"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="teacher-alex-academy:";n.l=(r,s,i,o)=>{if(e[r])e[r].push(s);else{var a,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+i),a.src=r),e[r]=[s];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.p="/teacher-alex-academy/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var o=n.p+n.u(t),a=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",a.name="ChunkLoadError",a.type=i,a.request=o,s[1](a)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,o=r[0],a=r[1],l=r[2],c=0;if(o.some(t=>0!==e[t])){for(s in a)n.o(a,s)&&(n.m[s]=a[s]);if(l)l(n)}for(t&&t(r);c<o.length;c++)i=o[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkteacher_alex_academy=self.webpackChunkteacher_alex_academy||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),s=n(391),i=n(719),o=n(579);const a=e=>{let{onLoginSuccess:t}=e;const[n,s]=(0,r.useState)("student"),[a,l]=(0,r.useState)({username:"",email:"",password:""}),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(""),f=e=>{l({...a,[e.target.name]:e.target.value}),d&&h("")},p=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6L23 9l-11-6z"})}),m=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L12 2L3 7V9C3 14.55 6.84 19.74 12 21C17.16 19.74 21 14.55 21 9Z"})});return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center px-4",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:(0,o.jsxs)("div",{className:"w-full max-w-md",children:[(0,o.jsxs)("div",{className:"text-center mb-12",children:[(0,o.jsx)("h1",{className:"text-4xl font-light mb-2",style:{color:"#1e293b",letterSpacing:"-0.02em"},children:"Teacher Alex's English Academy"}),(0,o.jsx)("p",{className:"text-lg",style:{color:"rgba(30, 41, 59, 0.7)"},children:"Professional English for Brazilians"})]}),(0,o.jsxs)("div",{className:"bg-white rounded-3xl p-8 shadow-lg",style:{border:"1px solid rgba(0, 0, 0, 0.05)"},children:[(0,o.jsxs)("div",{className:"flex gap-2 mb-8",children:[(0,o.jsxs)("button",{type:"button",onClick:()=>s("student"),className:"flex-1 py-4 px-6 rounded-2xl font-medium transition-all flex items-center justify-center gap-2 "+("student"===n?"text-white shadow-lg":"text-gray-600 bg-gray-50 hover:bg-gray-100"),style:"student"===n?{background:"#0082FF",boxShadow:"0 4px 16px rgba(0, 130, 255, 0.3)"}:{},children:[(0,o.jsx)(p,{}),"Student"]}),(0,o.jsxs)("button",{type:"button",onClick:()=>s("teacher"),className:"flex-1 py-4 px-6 rounded-2xl font-medium transition-all flex items-center justify-center gap-2 "+("teacher"===n?"text-white shadow-lg":"text-gray-600 bg-gray-50 hover:bg-gray-100"),style:"teacher"===n?{background:"#FF3434",boxShadow:"0 4px 16px rgba(255, 52, 52, 0.3)"}:{},children:[(0,o.jsx)(m,{}),"Teacher"]})]}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0),h("");try{let e;e="student"===n?await(0,i.bZ)(a.username,a.password):await(0,i.as)(a.email,a.password),e.success?t(e.user):h(e.error)}catch(r){h("Something went wrong. Please try again.")}u(!1)},className:"space-y-6",children:[(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"student"===n?"text":"email",name:"student"===n?"username":"email",value:"student"===n?a.username:a.email,onChange:f,className:"w-full px-5 py-4 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none transition-all",style:{fontSize:"16px"},onFocus:e=>{e.target.style.borderColor="student"===n?"#0082FF":"#FF3434",e.target.style.boxShadow="0 0 0 3px "+("student"===n?"rgba(0, 130, 255, 0.1)":"rgba(255, 52, 52, 0.1)")},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"},placeholder:"student"===n?"Username":"Email",required:!0})}),(0,o.jsx)("div",{children:(0,o.jsx)("input",{type:"password",name:"password",value:a.password,onChange:f,className:"w-full px-5 py-4 bg-gray-50 border border-gray-200 rounded-xl text-gray-900 placeholder-gray-500 focus:outline-none transition-all",style:{fontSize:"16px"},onFocus:e=>{e.target.style.borderColor="student"===n?"#0082FF":"#FF3434",e.target.style.boxShadow="0 0 0 3px "+("student"===n?"rgba(0, 130, 255, 0.1)":"rgba(255, 52, 52, 0.1)")},onBlur:e=>{e.target.style.borderColor="#e5e7eb",e.target.style.boxShadow="none"},placeholder:"Password",required:!0})}),d&&(0,o.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700 text-sm",children:["\u274c ",d]}),(0,o.jsx)("button",{type:"submit",disabled:c,className:"w-full py-4 px-6 rounded-xl font-semibold text-white transition-all transform hover:scale-105 disabled:opacity-60 disabled:cursor-not-allowed disabled:transform-none",style:{background:"student"===n?"#0082FF":"#FF3434",boxShadow:"0 4px 16px "+("student"===n?"rgba(0, 130, 255, 0.3)":"rgba(255, 52, 52, 0.3)")},children:c?(0,o.jsxs)("div",{className:"flex items-center justify-center gap-3",children:[(0,o.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Signing in..."]}):"Sign in as "+("student"===n?"Student":"Teacher")})]})]}),(0,o.jsx)("div",{className:"text-center mt-8",children:(0,o.jsx)("p",{className:"text-gray-500 text-sm",children:"Made by Teacher Alex"})})]})})};var l=n(667),c=n(791);const u=async()=>{try{console.log("\ud83d\udcda Getting all students...");const e=(0,l.P)((0,l.rJ)(c.db,"students"),(0,l.My)("name")),t=await(0,l.GG)(e),n=[];return t.forEach(e=>{n.push({id:e.id,...e.data()})}),console.log(`\u2705 Found ${n.length} students`),{success:!0,students:n}}catch(e){return console.log("\u274c Failed to get students:",e.message),{success:!1,error:e.message}}},d=async e=>{try{console.log("\ud83c\udf93 Getting student data for:",e);const t=await(0,l.x7)((0,l.H9)(c.db,"students",e));if(t.exists()){const e=t.data();return console.log("\u2705 Student data loaded"),{success:!0,student:{id:t.id,...e}}}throw new Error("Student not found")}catch(t){return console.log("\u274c Failed to get student data:",t.message),{success:!1,error:t.message}}},h=async(e,t,n)=>{try{console.log(`\ud83d\udcdd Updating progress for ${e}: lesson ${t}`),console.log("\ud83d\udcdd Progress data:",n);const r=`progress.${t}`;return await(0,l.mZ)((0,l.H9)(c.db,"students",e),{[r]:n,lastActive:new Date}),console.log("\u2705 Progress updated successfully"),{success:!0}}catch(r){return console.log("\u274c Failed to update progress:",r.message),{success:!1,error:r.message}}},f=async()=>{try{console.log("\ud83d\udcca Getting teacher stats...");const e=await u();if(!e.success)throw new Error(e.error);const t=e.students,n=t.length,r=new Date(Date.now()-6048e5),s=t.filter(e=>{var t;const n=null===(t=e.lastActive)||void 0===t?void 0:t.toDate();return n&&n>r}).length;let i=0;t.forEach(e=>{e.progress&&(i+=Object.keys(e.progress).length)});const o={totalStudents:n,activeStudents:s,totalCompletedLessons:i,totalSeries:8,totalLessons:80};return console.log("\u2705 Teacher stats calculated:",o),{success:!0,stats:o}}catch(e){return console.log("\u274c Failed to get teacher stats:",e.message),{success:!1,error:e.message}}},p=e=>{let{user:t,onLogout:n}=e;const[s,a]=(0,r.useState)("overview"),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)({}),[p,m]=(0,r.useState)(!0),[g,y]=(0,r.useState)(!1),[v,b]=(0,r.useState)({name:"",username:"",password:"",series:"basic-english"}),[w,x]=(0,r.useState)(!1),[k,S]=(0,r.useState)({type:"",text:""});(0,r.useEffect)(()=>{E()},[]);const E=async()=>{m(!0);try{const[e,t]=await Promise.all([u(),f()]);e.success&&c(e.students),t.success&&h(t.stats)}catch(e){console.error("Error loading dashboard data:",e),S({type:"error",text:"Failed to load dashboard data"})}m(!1)},_=e=>{b({...v,[e.target.name]:e.target.value})};return p?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#ecf0f1"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderBottomColor:"#196de3"}}),(0,o.jsx)("p",{style:{color:"#7f8c8d"},children:"Loading your dashboard..."})]})}):(0,o.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"#ecf0f1"},children:[(0,o.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,o.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,o.jsx)("h1",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:"\ud83c\udf93 Teacher Alex's English Academy"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("span",{className:"text-sm",style:{color:"#7f8c8d"},children:["Welcome, ",t.displayName,"!"]}),(0,o.jsx)("button",{onClick:n,className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Logout"})]})]})})}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsxs)("nav",{className:"flex space-x-8",children:[(0,o.jsx)("button",{onClick:()=>a("overview"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderBottomColor:"overview"===s?"#196de3":"transparent",color:"overview"===s?"#196de3":"#7f8c8d"},onMouseEnter:e=>{"overview"!==s&&(e.target.style.color="#2c3e50")},onMouseLeave:e=>{"overview"!==s&&(e.target.style.color="#7f8c8d")},children:"\ud83d\udcca Overview"}),(0,o.jsxs)("button",{onClick:()=>a("students"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderBottomColor:"students"===s?"#196de3":"transparent",color:"students"===s?"#196de3":"#7f8c8d"},onMouseEnter:e=>{"students"!==s&&(e.target.style.color="#2c3e50")},onMouseLeave:e=>{"students"!==s&&(e.target.style.color="#7f8c8d")},children:["\ud83d\udc65 Students (",l.length,")"]}),(0,o.jsx)("button",{onClick:()=>a("create"),className:"py-2 px-1 border-b-2 font-medium text-sm transition-colors",style:{borderBottomColor:"create"===s?"#196de3":"transparent",color:"create"===s?"#196de3":"#7f8c8d"},onMouseEnter:e=>{"create"!==s&&(e.target.style.color="#2c3e50")},onMouseLeave:e=>{"create"!==s&&(e.target.style.color="#7f8c8d")},children:"\u2795 Add Student"})]})}),k.text&&(0,o.jsxs)("div",{className:"mb-6 p-4 rounded-lg border",style:{backgroundColor:"success"===k.type?"#d4edda":"#f8d7da",borderColor:"success"===k.type?"#c3e6cb":"#f5c6cb",color:"success"===k.type?"#155724":"#721c24"},children:["success"===k.type?"\u2705":"\u274c"," ",k.text]}),"overview"===s&&(0,o.jsx)("div",{className:"space-y-6",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold mb-4",style:{color:"#2c3e50"},children:"\ud83d\udcca Academy Overview"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(25, 109, 227, 0.1)",borderColor:"rgba(25, 109, 227, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#196de3"},children:d.totalStudents||0}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#2c3e50"},children:"Total Students"})]}),(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(191, 61, 48, 0.1)",borderColor:"rgba(191, 61, 48, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#bf3d30"},children:d.activeStudents||0}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#2c3e50"},children:"Active This Week"})]}),(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(127, 140, 141, 0.1)",borderColor:"rgba(127, 140, 141, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#7f8c8d"},children:d.totalCompletedLessons||0}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#2c3e50"},children:"Lessons Completed"})]}),(0,o.jsxs)("div",{className:"border rounded-lg p-4",style:{backgroundColor:"rgba(44, 62, 80, 0.1)",borderColor:"rgba(44, 62, 80, 0.3)"},children:[(0,o.jsx)("div",{className:"text-2xl font-bold",style:{color:"#2c3e50"},children:d.totalSeries||8}),(0,o.jsx)("div",{className:"text-sm",style:{color:"#7f8c8d"},children:"Lesson Series"})]})]}),(0,o.jsxs)("div",{className:"border-t pt-4",children:[(0,o.jsx)("h3",{className:"font-semibold mb-2",style:{color:"#2c3e50"},children:"\ud83d\ude80 Quick Actions"}),(0,o.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,o.jsx)("button",{onClick:()=>a("create"),className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#196de3"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\u2795 Add New Student"}),(0,o.jsx)("button",{onClick:()=>a("students"),className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\ud83d\udc65 View All Students"})]})]})]})}),"students"===s&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,o.jsx)("div",{className:"px-6 py-4 border-b",children:(0,o.jsx)("h2",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:"\ud83d\udc65 Your Students"})}),0===l.length?(0,o.jsxs)("div",{className:"p-8 text-center",children:[(0,o.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udf93"}),(0,o.jsx)("h3",{className:"text-lg font-medium mb-2",style:{color:"#2c3e50"},children:"No students yet"}),(0,o.jsx)("p",{className:"mb-4",style:{color:"#7f8c8d"},children:"Start by creating your first student account!"}),(0,o.jsx)("button",{onClick:()=>a("create"),className:"text-white px-6 py-2 rounded-lg transition-colors",style:{backgroundColor:"#196de3"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"\u2795 Create First Student"})]}):(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,o.jsx)("thead",{className:"bg-gray-50",children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Student"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Series"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Progress"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium uppercase tracking-wider",style:{color:"#7f8c8d"},children:"Last Active"})]})}),(0,o.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>(0,o.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"text-sm font-medium",style:{color:"#2c3e50"},children:e.name}),(0,o.jsxs)("div",{className:"text-sm ml-2",style:{color:"#7f8c8d"},children:["(@",e.username,")"]})]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",style:{backgroundColor:"rgba(25, 109, 227, 0.1)",color:"#196de3"},children:e.series})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsxs)("div",{className:"text-sm",style:{color:"#2c3e50"},children:[e.progress?Object.keys(e.progress).length:0," lessons completed"]})}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",style:{color:"#7f8c8d"},children:e.lastActive?new Date(1e3*e.lastActive.seconds).toLocaleDateString():"Never"})]},e.id))})]})})]}),"create"===s&&(0,o.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-6",style:{color:"#2c3e50"},children:"\u2795 Create New Student Account"}),(0,o.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),x(!0),S({type:"",text:""});try{const e=await(0,i.nS)(v);e.success?(S({type:"success",text:e.message}),b({name:"",username:"",password:"",series:"basic-english"}),y(!1),E()):S({type:"error",text:e.error})}catch(t){S({type:"error",text:"Failed to create student account"})}x(!1)},className:"space-y-4 max-w-md",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Student Name"}),(0,o.jsx)("input",{type:"text",name:"name",value:v.name,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",style:{"--tw-ring-color":"#196de3"},placeholder:"e.g., Jo\xe3o Silva",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Username (for login)"}),(0,o.jsx)("input",{type:"text",name:"username",value:v.username,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",placeholder:"e.g., joao",required:!0}),(0,o.jsx)("p",{className:"text-xs mt-1",style:{color:"#7f8c8d"},children:"This will be used for student login (letters and numbers only)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Password"}),(0,o.jsx)("input",{type:"password",name:"password",value:v.password,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",placeholder:"Create a secure password",required:!0})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium mb-2",style:{color:"#2c3e50"},children:"Lesson Series"}),(0,o.jsx)("select",{name:"series",value:v.series,onChange:_,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:border-transparent",children:[{value:"basic-english",label:"\ud83d\udfe6 Basic English"},{value:"intermediate-english",label:"\ud83d\udfe6 Intermediate English"},{value:"business-english",label:"\ud83d\udfe6 Business English"},{value:"conversation-english",label:"\ud83d\udfe6 Conversation English"},{value:"travel-english",label:"\ud83d\udfe6 Travel English"},{value:"academic-english",label:"\ud83d\udfe6 Academic English"},{value:"pronunciation-english",label:"\ud83d\udfe6 Pronunciation English"},{value:"grammar-english",label:"\ud83d\udfe6 Grammar English"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("p",{className:"text-xs mt-1",style:{color:"#7f8c8d"},children:"Choose which lesson series this student will follow"})]}),(0,o.jsx)("button",{type:"submit",disabled:w,className:"w-full text-white py-3 px-4 rounded-lg transition-colors "+(w?"opacity-50 cursor-not-allowed":""),style:{backgroundColor:"#196de3"},onMouseEnter:e=>{w||(e.target.style.filter="brightness(0.9)")},onMouseLeave:e=>{w||(e.target.style.filter="brightness(1)")},children:w?(0,o.jsxs)("div",{className:"flex items-center justify-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Creating Account..."]}):"\u2728 Create Student Account"})]})]})]})]})},m=e=>{let{studentData:t,onNavigate:n}=e;const r=(()=>{if(!t||!t.progress)return{totalXP:0,currentLevel:1,currentStreak:3,completedLessons:0,xpToNextLevel:100,progressPercent:0};const e=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return!t.startsWith("story-")&&n.completed}).length,n=Object.entries(t.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("story-")&&n.completed}).length,r=50*(e+n),s=[0,100,250,450,700,1e3,1400,1850,2350,2900];let i=1,o=100,a=0;for(let t=0;t<s.length-1;t++)if(r>=s[t]&&r<s[t+1]){i=t+1;o=s[t+1]-r,a=(r-s[t])/(s[t+1]-s[t])*100;break}return r>=s[s.length-1]&&(i=s.length,o=0,a=100),{totalXP:r,currentLevel:i,currentStreak:3,completedLessons:e,completedStories:n,xpToNextLevel:o,progressPercent:a}})(),s=()=>(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"})}),i=()=>(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),a=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M13.5.67s.74 2.65.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l.03-.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29.28 2.67-.2 3.73-.73 1.65-2.01 2.72-3.01 3.8-.2.21-.4.42-.6.63C11.56 18.55 11.71 19 11.71 19z"})}),l=()=>(0,o.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:(0,o.jsx)("path",{d:"M12 3L1 9l4 2.18v6L12 21l7-3.82v-6L23 9l-11-6z"})});return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"min-h-screen pb-8",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,o.jsxs)("div",{className:"bg-white rounded-3xl p-8 shadow-lg mb-8",style:{border:"1px solid rgba(0, 0, 0, 0.05)"},children:[(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("h2",{className:"text-xl font-medium mb-1",style:{color:"#1e293b"},children:"Your Progress"}),(0,o.jsx)("p",{className:"text-sm",style:{color:"rgba(30, 41, 59, 0.6)"},children:"Keep up the great work!"})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-2xl font-light mb-1",style:{color:"#1e293b"},children:["Level ",r.currentLevel]}),(0,o.jsx)("p",{className:"text-xs",style:{color:"rgba(30, 41, 59, 0.6)"},children:"Current level"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-2xl font-medium mb-1",style:{color:"#0082FF"},children:r.totalXP}),(0,o.jsx)("p",{className:"text-xs",style:{color:"rgba(30, 41, 59, 0.6)"},children:"Total XP"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-2xl font-medium mb-1",style:{color:"#0082FF"},children:r.xpToNextLevel}),(0,o.jsx)("p",{className:"text-xs",style:{color:"rgba(30, 41, 59, 0.6)"},children:"XP to next level"})]})]}),(0,o.jsxs)("div",{className:"relative mb-6",children:[(0,o.jsx)("div",{className:"w-full rounded-full h-3 overflow-hidden",style:{backgroundColor:"rgba(0, 130, 255, 0.1)"},children:(0,o.jsx)("div",{className:"h-3 rounded-full transition-all duration-700 ease-out",style:{width:`${r.progressPercent}%`,background:"linear-gradient(90deg, #0082FF, #0066CC)"}})}),(0,o.jsxs)("div",{className:"text-center text-sm mt-2",style:{color:"rgba(30, 41, 59, 0.6)"},children:[Math.round(r.progressPercent),"% to Level ",r.currentLevel+1]})]}),(0,o.jsxs)("div",{className:"flex justify-center gap-8",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,o.jsx)(a,{}),(0,o.jsx)("span",{className:"text-lg font-medium ml-2",style:{color:"#D32F2F"},children:r.currentStreak})]}),(0,o.jsx)("p",{className:"text-xs",style:{color:"rgba(30, 41, 59, 0.6)"},children:"day streak"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center mb-1",children:[(0,o.jsx)(l,{}),(0,o.jsx)("span",{className:"text-lg font-medium ml-2",style:{color:"#0082FF"},children:r.completedLessons})]}),(0,o.jsx)("p",{className:"text-xs",style:{color:"rgba(30, 41, 59, 0.6)"},children:"lessons complete"})]})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,o.jsx)("div",{className:"bg-white rounded-3xl p-8 shadow-lg cursor-pointer transition-all hover:scale-105",style:{border:"1px solid rgba(0, 0, 0, 0.05)"},onClick:()=>n("lessons"),children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center transition-all",style:{background:"linear-gradient(135deg, #0082FF, #0066CC)",boxShadow:"0 4px 16px rgba(0, 130, 255, 0.3)"},children:(0,o.jsx)(s,{})}),(0,o.jsx)("h3",{className:"text-xl font-medium mb-2",style:{color:"#1e293b"},children:"Lessons"}),(0,o.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,o.jsx)("p",{className:"text-sm",style:{color:"rgba(30, 41, 59, 0.6)"},children:"8 series available"}),(0,o.jsxs)("p",{className:"text-sm font-medium",style:{color:"#0082FF"},children:[r.completedLessons," of 80 complete"]})]}),(0,o.jsx)("button",{className:"w-full py-3 rounded-xl font-medium text-white transition-all hover:scale-105",style:{background:"linear-gradient(135deg, #0082FF, #0066CC)",boxShadow:"0 4px 16px rgba(0, 130, 255, 0.3)"},children:"Continue Learning"})]})}),(0,o.jsx)("div",{className:"bg-white rounded-3xl p-8 shadow-lg cursor-pointer transition-all hover:scale-105",style:{border:"1px solid rgba(0, 0, 0, 0.05)"},onClick:()=>n("story-completion"),children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center transition-all",style:{background:"linear-gradient(135deg, #D32F2F, #B71C1C)",boxShadow:"0 4px 16px rgba(211, 47, 47, 0.3)"},children:(0,o.jsx)(i,{})}),(0,o.jsx)("h3",{className:"text-xl font-medium mb-2",style:{color:"#1e293b"},children:"Story Games"}),(0,o.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,o.jsx)("p",{className:"text-sm",style:{color:"rgba(30, 41, 59, 0.6)"},children:"Interactive story completion"}),(0,o.jsx)("p",{className:"text-sm font-medium",style:{color:"#D32F2F"},children:10===r.completedStories?"All stories complete! \ud83c\udf89":`${r.completedStories} of 10 complete`})]}),(0,o.jsx)("button",{className:"w-full py-3 rounded-xl font-medium text-white transition-all hover:scale-105",style:{background:"linear-gradient(135deg, #D32F2F, #B71C1C)",boxShadow:"0 4px 16px rgba(211, 47, 47, 0.3)"},children:10===r.completedStories?"Review Stories":"Start Playing"})]})}),(0,o.jsx)("div",{className:"bg-white rounded-3xl p-8 shadow-lg cursor-pointer transition-all hover:scale-105",style:{border:"1px solid rgba(0, 0, 0, 0.05)"},onClick:()=>n("word-match"),children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center transition-all",style:{background:"linear-gradient(135deg, #F59E0B, #D97706)",boxShadow:"0 4px 16px rgba(245, 158, 11, 0.3)"},children:(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"text-white",children:(0,o.jsx)("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,o.jsx)("h3",{className:"text-xl font-medium mb-2",style:{color:"#1e293b"},children:"Word Match"}),(0,o.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,o.jsx)("p",{className:"text-sm",style:{color:"rgba(30, 41, 59, 0.6)"},children:"Match English with Portuguese"}),(0,o.jsx)("p",{className:"text-sm font-medium",style:{color:"#F59E0B"},children:"5 rounds available"})]}),(0,o.jsx)("button",{className:"w-full py-3 rounded-xl font-medium text-white transition-all hover:scale-105",style:{background:"linear-gradient(135deg, #F59E0B, #D97706)",boxShadow:"0 4px 16px rgba(245, 158, 11, 0.3)"},children:"\ud83c\udfaf Start Matching"})]})}),(0,o.jsx)("div",{className:"bg-white rounded-3xl p-8 shadow-lg opacity-75 cursor-not-allowed",style:{border:"1px solid rgba(0, 0, 0, 0.05)"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center",style:{background:"linear-gradient(135deg, #9CA3AF, #6B7280)",boxShadow:"0 4px 16px rgba(156, 163, 175, 0.3)"},children:(0,o.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",className:"text-white",children:(0,o.jsx)("path",{d:"M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"})})}),(0,o.jsx)("h3",{className:"text-xl font-medium mb-2",style:{color:"#6B7280"},children:"Voice Practice"}),(0,o.jsxs)("div",{className:"space-y-1 mb-4",children:[(0,o.jsx)("p",{className:"text-sm",style:{color:"#9CA3AF"},children:"AI-powered speaking challenges"}),(0,o.jsx)("p",{className:"text-sm font-medium",style:{color:"#F59E0B"},children:"Coming Soon!"})]}),(0,o.jsx)("button",{disabled:!0,className:"w-full py-3 rounded-xl font-medium text-white cursor-not-allowed opacity-60",style:{background:"linear-gradient(135deg, #9CA3AF, #6B7280)"},children:"\ud83c\udf99\ufe0f Practice Speaking"}),(0,o.jsx)("div",{className:"mt-4 text-xs",style:{color:"#9CA3AF"},children:"Record your voice \u2022 Get pronunciation feedback \u2022 Build confidence"})]})})]})]})})})},g=e=>{let{user:t,onBack:n,onSeriesSelect:s}=e;const[i,a]=(0,r.useState)({}),[l,c]=(0,r.useState)(!0),u=[{id:"foundation",title:"Foundation",description:"Domine os fundamentos do ingl\xeas",color:"#196de3",totalLessons:10,icon:"foundation"},{id:"sports",title:"Sports",description:"Futebol, Olimp\xedadas e paix\xe3o brasileira",color:"#27ae60",totalLessons:10,icon:"sports"},{id:"culture",title:"Culture",description:"Tradi\xe7\xf5es brasileiras e cultura global",color:"#9b59b6",totalLessons:10,icon:"culture"},{id:"travel",title:"Travel",description:"Explore o mundo com ingl\xeas",color:"#3498db",totalLessons:10,icon:"travel"},{id:"food",title:"Food",description:"Do a\xe7a\xed \xe0 culin\xe1ria internacional",color:"#e67e22",totalLessons:10,icon:"food"},{id:"movies",title:"Movies",description:"Cinema, entretenimento e narrativas",color:"#bf3d30",totalLessons:10,icon:"movies"},{id:"gaming",title:"Gaming",description:"Videogames e entretenimento digital",color:"#34495e",totalLessons:10,icon:"gaming"},{id:"business",title:"Business",description:"Ingl\xeas profissional e corporativo",color:"#2c5282",totalLessons:10,icon:"business"},{id:"portal",title:"Portal",description:"T\xf3picos avan\xe7ados e conte\xfado especial",color:"#f39c12",totalLessons:10,icon:"portal",comingSoon:!0}],h=e=>{let{type:t,className:n="w-8 h-8"}=e;const r={className:`${n} text-white`,fill:"currentColor",viewBox:"0 0 24 24"};switch(t){case"foundation":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4z"})});case"sports":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M7 4V2C7 1.45 7.45 1 8 1s1 .45 1 1v2h6V2c0-.55.45-1 1-1s1 .45 1 1v2h1c1.1 0 2 .9 2 2v14c0 1.1-.9 2-2 2H6c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2h1zm11 6H6v10h12V10zm-9 7l-1.41-1.41L6 17.17l3.59 3.59L16 14.35 14.59 13 9.5 17z"})});case"culture":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})});case"travel":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"})});case"food":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M8.1 13.34l2.83-2.83L3.91 3.5c-1.56 1.56-1.56 4.09 0 5.66l4.19 4.18zm6.78-1.81c1.53.71 3.68.21 5.27-1.38 1.91-1.91 2.28-4.65.81-6.12-1.46-1.46-4.20-1.10-6.12.81-1.59 1.59-2.09 3.74-1.38 5.27L3.7 19.87l1.41 1.41L12 14.41l6.88 6.88 1.41-1.41-6.88-6.88 1.27-1.27z"})});case"movies":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z"})});case"gaming":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z"})});case"business":return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10z"})});default:return(0,o.jsx)("svg",{...r,children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}};(0,r.useEffect)(()=>{(async()=>{try{const e=await d(t.username);if(e.success&&e.student&&e.student.progress){const t={};for(const n of u){if(n.comingSoon){t[n.id]={completedLessons:0,totalXP:0};continue}const r=Object.entries(e.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(n.id)}).reduce((e,t)=>{let[n,r]=t;return r.completed&&(e.completedLessons+=1,e.totalXP+=r.xpEarned||0),e},{completedLessons:0,totalXP:0});t[n.id]=r}a(t)}else{const e={};u.forEach(t=>{e[t.id]={completedLessons:0,totalXP:0}}),a(e)}}catch(e){console.error("Error loading series progress:",e);const t={};u.forEach(e=>{t[e.id]={completedLessons:0,totalXP:0}}),a(t)}finally{c(!1)}})()},[t.username]);if(l)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-t-transparent border-blue-500 mx-auto mb-4"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Carregando s\xe9ries..."})]})});const f={totalCompleted:Object.values(i).reduce((e,t)=>e+t.completedLessons,0),totalXP:Object.values(i).reduce((e,t)=>e+t.totalXP,0),seriesStarted:Object.values(i).filter(e=>e.completedLessons>0).length},p=u.filter(e=>!e.comingSoon);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:"\n        .glass-card {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(10px);\n          border: 1px solid rgba(255, 255, 255, 0.5);\n        }\n        \n        .elegant-header-stats {\n          background: rgba(248, 250, 252, 0.8);\n          border: 1px solid rgba(226, 232, 240, 0.6);\n          backdrop-filter: blur(8px);\n        }\n      "}),(0,o.jsxs)("div",{className:"min-h-screen pb-20 bg-gray-50",children:[(0,o.jsx)("div",{className:"bg-white shadow-lg",style:{boxShadow:"0 8px 32px rgba(0, 0, 0, 0.12)",borderRadius:"24px",margin:"24px",marginBottom:"32px"},children:(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,o.jsxs)("button",{onClick:n,className:"flex items-center transition-opacity",style:{color:"#64748b"},onMouseEnter:e=>e.target.style.color="#1e293b",onMouseLeave:e=>e.target.style.color="#64748b",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar ao Hub"]})}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-2xl font-semibold mb-2",style:{color:"#1e293b"},children:"Escolha sua S\xe9rie"}),(0,o.jsxs)("p",{className:"mb-4",style:{color:"#64748b"},children:[p.length," s\xe9ries de li\xe7\xf5es dispon\xedveis"]}),(0,o.jsxs)("div",{className:"elegant-header-stats grid grid-cols-3 gap-4 rounded-xl p-4",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-lg font-bold",style:{color:"#1e293b"},children:f.totalCompleted}),(0,o.jsx)("div",{className:"text-xs",style:{color:"#64748b"},children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-lg font-bold",style:{color:"#1e293b"},children:f.totalXP}),(0,o.jsx)("div",{className:"text-xs",style:{color:"#64748b"},children:"XP Total"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-lg font-bold",style:{color:"#1e293b"},children:[f.seriesStarted,"/",p.length]}),(0,o.jsx)("div",{className:"text-xs",style:{color:"#64748b"},children:"S\xe9ries Iniciadas"})]})]})]})]})}),(0,o.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:(0,o.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:u.map(e=>{const t=((e,t)=>{const n=i[e];return n?Math.round(n.completedLessons/t*100):0})(e.id,e.totalLessons),n=i[e.id]||{completedLessons:0,totalXP:0};return(0,o.jsxs)("div",{onClick:()=>(e=>{e.comingSoon||s(e.id,e.title)})(e),className:"glass-card group transform transition-all duration-300 hover:scale-105 hover:shadow-2xl rounded-2xl p-8 "+(e.comingSoon?"opacity-60 cursor-not-allowed":"cursor-pointer"),style:{boxShadow:`0 8px 32px ${e.color}22`},children:[(0,o.jsxs)("div",{className:"flex items-center mb-6",children:[(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mr-4 transition-all duration-300 "+(e.comingSoon?"":"group-hover:scale-110"),style:{background:e.comingSoon?"linear-gradient(135deg, #d1d5db, #9ca3af)":`linear-gradient(135deg, ${e.color}, ${e.color}dd)`,boxShadow:e.comingSoon?"0 4px 16px rgba(156, 163, 175, 0.3)":`0 4px 16px ${e.color}33`},children:e.comingSoon?(0,o.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M6 2v6h.01L6 8.01 10 12l-4 4 .01.01H6V22h12v-5.99h-.01L18 16l-4-4 4-3.99-.01-.01H18V2H6zm10 14.5V20H8v-3.5l4-4 4 4zm-4-5l-4-4V4h8v3.5l-4 4z"})}):(0,o.jsx)(h,{type:e.icon})}),(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsxs)("h3",{className:"text-xl font-semibold mb-1",style:{color:e.comingSoon?"#6b7280":"#2c3e50",letterSpacing:"0.02em"},children:[e.title,e.comingSoon&&(0,o.jsx)("span",{className:"ml-2 text-sm font-normal text-amber-600",children:"Em Breve"})]}),(0,o.jsx)("p",{className:"text-sm",style:{color:e.comingSoon?"#9ca3af":"#7f8c8d"},children:e.description})]})]}),!e.comingSoon&&(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)("div",{className:"w-full rounded-full h-2 overflow-hidden",style:{backgroundColor:`${e.color}20`},children:(0,o.jsx)("div",{className:"h-2 rounded-full transition-all duration-700 ease-out",style:{width:`${t}%`,background:t>0?"linear-gradient(90deg, #3498db, #2980b9)":`linear-gradient(90deg, ${e.color}, ${e.color}dd)`}})})}),(0,o.jsxs)("div",{className:"flex justify-between items-center",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-lg font-semibold",style:{color:e.color},children:[n.completedLessons,"/",e.totalLessons]}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"li\xe7\xf5es"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-lg font-semibold",style:{color:"#2c3e50"},children:[t,"%"]}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"completo"})]}),n.totalXP>0&&(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-lg font-semibold",style:{color:"#3498db"},children:n.totalXP}),(0,o.jsx)("div",{className:"text-xs text-gray-500",children:"XP total"})]})]})]}),e.comingSoon&&(0,o.jsxs)("div",{className:"text-center py-4",children:[(0,o.jsx)("div",{className:"text-amber-600 font-medium mb-2",children:"\ud83d\ude80 Conte\xfado Avan\xe7ado em Desenvolvimento"}),(0,o.jsx)("div",{className:"text-sm text-gray-500",children:"Aguarde novidades incr\xedveis!"})]}),(0,o.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,o.jsx)("span",{className:"text-sm font-medium",style:{color:e.comingSoon?"#9ca3af":e.color},children:e.comingSoon?"Aguarde o lan\xe7amento":0===t?"Come\xe7ar agora":100===t?"Revisar s\xe9rie":"Continuar"}),(0,o.jsx)("svg",{className:"w-5 h-5 transition-all duration-300 "+(e.comingSoon?"":"group-hover:translate-x-1"),style:{color:e.comingSoon?"#9ca3af":"#7f8c8d"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]},e.id)})})})]})]})},y=e=>{let{user:t,seriesId:s,seriesTitle:i,onBack:a,onLessonSelect:l}=e;const[c,u]=(0,r.useState)([]),[h,f]=(0,r.useState)({}),[p,m]=(0,r.useState)(!0),g={foundation:{color:"#196de3",gradient:"from-blue-500 to-blue-600"},sports:{color:"#27ae60",gradient:"from-green-500 to-green-600"},culture:{color:"#9b59b6",gradient:"from-purple-500 to-purple-600"},travel:{color:"#3498db",gradient:"from-sky-500 to-sky-600"},food:{color:"#e67e22",gradient:"from-orange-500 to-orange-600"},movies:{color:"#bf3d30",gradient:"from-red-500 to-red-600"},gaming:{color:"#34495e",gradient:"from-slate-600 to-slate-700"},business:{color:"#2c5282",gradient:"from-blue-800 to-blue-900"},portal:{color:"#f39c12",gradient:"from-amber-500 to-amber-600"}},y=g[s]||g.foundation;(0,r.useEffect)(()=>{(async()=>{try{let r=[];try{switch(s){case"foundation":const{FOUNDATION_LESSONS:e}=await n.e(568).then(n.bind(n,568));r=e;break;case"gaming":try{const{GAMING_LESSONS:e}=await n.e(852).then(n.bind(n,852));r=e}catch{console.log("Gaming lessons file not found, using placeholder"),r=v(s)}break;case"food":try{const{FOOD_LESSONS:e}=await n.e(483).then(n.bind(n,483));r=e}catch{console.log("Food lessons file not found, using placeholder"),r=v(s)}break;case"movies":try{const{MOVIE_LESSONS:e}=await n.e(429).then(n.bind(n,429));r=e}catch{console.log("Movie lessons file not found, using placeholder"),r=v(s)}break;case"travel":try{const{TRAVEL_LESSONS:e}=await n.e(767).then(n.bind(n,767));r=e}catch{console.log("Travel lessons file not found, using placeholder"),r=v(s)}break;case"sports":try{const{SPORTS_LESSONS:e}=await n.e(558).then(n.bind(n,558));r=e}catch{console.log("Sports lessons file not found, using placeholder"),r=v(s)}break;case"business":const{BUSINESS_LESSONS:t}=await n.e(289).then(n.bind(n,289));r=t;break;case"culture":try{const{CULTURE_LESSONS:e}=await n.e(387).then(n.bind(n,387));r=e}catch{console.log("Culture lessons file not found, using placeholder"),r=v(s)}break;case"portal":try{const{PORTAL_LESSONS:e}=await Promise.resolve().then(function(){var e=new Error("Cannot find module '../data/portalLessons.js'");throw e.code="MODULE_NOT_FOUND",e});r=e}catch{console.log("Portal lessons file not found, using placeholder"),r=v(s)}break;default:r=v(s)}}catch(e){console.error("Error loading lesson data:",e),r=v(s)}u(r);const i=await d(t.username);if(i.success&&i.student&&i.student.progress){const e=Object.entries(i.student.progress||{}).filter(e=>{let[t]=e;return t.startsWith(s)}).reduce((e,t)=>{let[n,r]=t;return e[n]=r,e},{});f(e)}else f({})}catch(e){console.error("Error loading lesson data:",e),u([]),f({})}finally{m(!1)}})()},[s,t.username]);const v=e=>{const t={foundation:[{title:"Basic Greetings",desc:"Hello, how are you?",file:"audio-01-greetings.mp3"},{title:"Family Members",desc:"Mother, father, sister",file:"audio-02-family.mp3"},{title:"Daily Routine",desc:"Morning to evening activities",file:"audio-03-routine.mp3"},{title:"Food & Drinks",desc:"Pizza, coffee, restaurant",file:"audio-04-food.mp3"},{title:"Weather & Clothes",desc:"Sunny, rainy, jacket",file:"audio-05-weather.mp3"},{title:"Shopping",desc:"Supermarket, prices, payment",file:"audio-06-shopping.mp3"},{title:"Hobbies",desc:"Reading, guitar, photography",file:"audio-07-hobbies.mp3"},{title:"Transportation",desc:"Bus, car, walking",file:"audio-08-transportation.mp3"},{title:"Health & Body",desc:"Exercise, doctor, healthy",file:"audio-09-health.mp3"},{title:"Future Plans",desc:"Travel, new job, dreams",file:"audio-10-future.mp3"}],sports:[{title:"World Cup Fever",desc:"Brazil's football passion",file:"audio-01-world-cup.mp3"},{title:"Playing Football",desc:"Weekend amateur sports",file:"audio-02-playing-football.mp3"},{title:"Flamengo Fan",desc:"Club football fan culture",file:"audio-03-flamengo-fan.mp3"},{title:"Learning to Surf",desc:"Water sports and beaches",file:"audio-04-learning-surf.mp3"},{title:"First Marathon",desc:"Endurance and training",file:"audio-05-first-marathon.mp3"},{title:"Tennis Tournament",desc:"Professional tournaments",file:"audio-06-tennis-tournament.mp3"},{title:"Gym Fitness",desc:"Health and exercise",file:"audio-07-gym-fitness.mp3"},{title:"Beach Volleyball",desc:"Copacabana beach sports",file:"audio-08-beach-volleyball.mp3"},{title:"Basketball Pickup",desc:"American sports in Brazil",file:"audio-09-basketball-pickup.mp3"},{title:"Coaching Kids",desc:"Community involvement",file:"audio-10-coaching-kids.mp3"}],gaming:[{title:"My Gaming PC Setup",desc:"Hardware and equipment",file:"audio-01-gaming-pc.mp3"},{title:"Online Gaming with Friends",desc:"Multiplayer and teamwork",file:"audio-02-online-gaming.mp3"},{title:"My Favorite Game Genres",desc:"RPG, strategy, and more",file:"audio-03-game-genres.mp3"},{title:"Esports Tournament",desc:"Competitive gaming",file:"audio-04-esports-tournament.mp3"},{title:"Twitch Streaming",desc:"Content creation",file:"audio-05-twitch-streaming.mp3"},{title:"Game Reviews",desc:"YouTube and criticism",file:"audio-06-game-reviews.mp3"},{title:"Mobile Gaming",desc:"Smartphone gaming",file:"audio-07-mobile-gaming.mp3"},{title:"Gaming Nostalgia",desc:"Retro consoles",file:"audio-08-gaming-nostalgia.mp3"},{title:"Gaming Setup",desc:"Dream gaming room",file:"audio-09-gaming-setup.mp3"},{title:"Virtual Reality",desc:"VR technology",file:"audio-10-virtual-reality.mp3"}],food:[{title:"Cooking Pasta",desc:"Kitchen basics and recipes",file:"audio-01-cooking-pasta.mp3"},{title:"Brazilian BBQ",desc:"Churrasco and family",file:"audio-02-brazilian-bbq.mp3"},{title:"Pizza Delivery",desc:"Food delivery problems",file:"audio-03-pizza-delivery.mp3"},{title:"Fancy Restaurant",desc:"Fine dining experience",file:"audio-04-fancy-restaurant.mp3"},{title:"Baking Bread",desc:"Pandemic baking trend",file:"audio-05-baking-bread.mp3"},{title:"Street Food",desc:"S\xe3o Paulo food culture",file:"audio-06-street-food.mp3"},{title:"Healthy Eating",desc:"Nutrition and wellness",file:"audio-07-healthy-eating.mp3"},{title:"Family Recipe",desc:"Traditional brigadeiro",file:"audio-08-family-recipe.mp3"},{title:"Food Festival",desc:"Global cuisine diversity",file:"audio-09-food-festival.mp3"},{title:"Own Restaurant",desc:"Entrepreneurship dreams",file:"audio-10-own-restaurant.mp3"}],movies:[{title:"Cinema Date",desc:"Movie theater experience",file:"audio-01-cinema-date.mp3"},{title:"Netflix Night",desc:"Streaming and comfort",file:"audio-02-netflix-night.mp3"},{title:"Movie Genres",desc:"Film preferences",file:"audio-03-movie-genres.mp3"},{title:"Binge Watching",desc:"Modern viewing habits",file:"audio-04-binge-watching.mp3"},{title:"Movie Reviews",desc:"Film criticism writing",file:"audio-05-movie-reviews.mp3"},{title:"Streaming Services",desc:"Digital entertainment",file:"audio-06-streaming-services.mp3"},{title:"Cinema First Date",desc:"Dating and romance",file:"audio-07-cinema-first-date.mp3"},{title:"Classic vs Modern",desc:"Film history evolution",file:"audio-08-classic-vs-modern.mp3"},{title:"Theater Experience",desc:"IMAX and technology",file:"audio-09-theater-experience.mp3"},{title:"Awards Night",desc:"Oscar party culture",file:"audio-10-awards-night.mp3"}],travel:[{title:"First International",desc:"Airports and flight anxiety",file:"audio-01-first-international.mp3"},{title:"Thailand Beach",desc:"Tropical resort experience",file:"audio-02-thailand-beach.mp3"},{title:"Europe Backpacking",desc:"Budget travel and hostels",file:"audio-03-europe-backpacking.mp3"},{title:"Business New York",desc:"Corporate travel",file:"audio-04-business-new-york.mp3"},{title:"Disney World",desc:"Theme park experiences",file:"audio-05-disney-world.mp3"},{title:"Solo Japan",desc:"Independent cultural travel",file:"audio-06-solo-japan.mp3"},{title:"Argentina Roadtrip",desc:"South American adventure",file:"audio-07-argentina-roadtrip.mp3"},{title:"Amazon Expedition",desc:"Brazilian eco-tourism",file:"audio-08-amazon-expedition.mp3"},{title:"Studying Canada",desc:"Educational travel",file:"audio-09-studying-canada.mp3"},{title:"Maldives Honeymoon",desc:"Luxury romantic getaway",file:"audio-10-maldives-honeymoon.mp3"}],business:[{title:"Job Interview Success",desc:"Professional interview skills",file:"audio-01-job-interview.mp3"},{title:"First Day at Office",desc:"Workplace orientation",file:"audio-02-first-day.mp3"},{title:"Business Meeting",desc:"Professional meetings",file:"audio-03-business-meeting.mp3"},{title:"Professional Emails",desc:"Business communication",file:"audio-04-professional-emails.mp3"},{title:"Business Trip",desc:"Corporate travel",file:"audio-05-business-trip.mp3"},{title:"Asking Promotion",desc:"Career advancement",file:"audio-06-asking-promotion.mp3"},{title:"Team Leadership",desc:"Management skills",file:"audio-07-team-leadership.mp3"},{title:"Networking Event",desc:"Professional relationships",file:"audio-08-networking-event.mp3"},{title:"Professional Development",desc:"Skill enhancement",file:"audio-09-professional-development.mp3"},{title:"Starting Business",desc:"Entrepreneurship journey",file:"audio-10-starting-business.mp3"}],culture:[{title:"Carnival Experience",desc:"The magic of Brazilian Carnival",file:"audio-01-carnival-experience.mp3"},{title:"Festa Junina",desc:"Traditional Brazilian celebration",file:"audio-02-festa-junina.mp3"},{title:"Samba Dancing",desc:"Brazilian dance culture",file:"audio-03-samba-dancing.mp3"},{title:"Regional Food",desc:"Brazilian culinary diversity",file:"audio-04-regional-food.mp3"},{title:"Family Sundays",desc:"Brazilian family traditions",file:"audio-05-family-sundays.mp3"},{title:"Hospitality",desc:"Brazilian warmth and welcome",file:"audio-06-hospitality.mp3"},{title:"Beach Culture",desc:"Life by the ocean",file:"audio-07-beach-culture.mp3"},{title:"Football Religion",desc:"Soccer as Brazilian identity",file:"audio-08-football-religion.mp3"},{title:"Music Diversity",desc:"From samba to funk",file:"audio-09-music-diversity.mp3"},{title:"Proudly Brazilian",desc:"National pride and identity",file:"audio-10-proudly-brazilian.mp3"}],portal:[{title:"Advanced Grammar",desc:"Complex structures and nuances",file:"audio-01-advanced-grammar.mp3"},{title:"Idioms & Expressions",desc:"Native speaker expressions",file:"audio-02-idioms-expressions.mp3"},{title:"Academic English",desc:"University-level English",file:"audio-03-academic-english.mp3"},{title:"Technical Vocabulary",desc:"Specialized terminology",file:"audio-04-technical-vocabulary.mp3"},{title:"Debate Skills",desc:"Argumentation and persuasion",file:"audio-05-debate-skills.mp3"},{title:"Presentation Mastery",desc:"Advanced presentation skills",file:"audio-06-presentation-mastery.mp3"},{title:"Media Interviews",desc:"Professional interview skills",file:"audio-07-media-interviews.mp3"},{title:"Cultural Nuances",desc:"Subtle communication patterns",file:"audio-08-cultural-nuances.mp3"},{title:"Executive Communication",desc:"Leadership language",file:"audio-09-executive-communication.mp3"},{title:"Global Business",desc:"International communication",file:"audio-10-global-business.mp3"}]};return(t[e]||t.foundation).map((t,n)=>({id:`${e}-${String(n+1).padStart(2,"0")}`,title:t.title,description:t.desc,duration:30+5*n+"s",audioFile:`audio/a1-${e}/${t.file}`,questions:[{question:`What is the main topic of "${t.title}"?`,options:[t.desc,"Something else","Not sure","Different topic"],correct:0}]}))},b=e=>{var t,n;if(0===e)return!0;const r=null===(t=c[e-1])||void 0===t?void 0:t.id;return(null===(n=h[r])||void 0===n?void 0:n.completed)||!1};if(p)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f8fafc"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-t-transparent mx-auto mb-4",style:{borderColor:"#3498db"}}),(0,o.jsx)("p",{className:"text-slate-600 font-medium",children:"Carregando li\xe7\xf5es..."})]})});const w=(()=>{const e=c.filter(e=>{var t;return null===(t=h[e.id])||void 0===t?void 0:t.completed}).length,t=Object.values(h).reduce((e,t)=>e+(t.xpEarned||0),0),n=c.length>0?Object.values(h).reduce((e,t)=>e+(t.score||0),0)/c.length:0;return{completedCount:e,totalXP:t,averageScore:Math.round(n)}})();return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:"\n        .premium-glass {\n          background: rgba(255, 255, 255, 0.85);\n          backdrop-filter: blur(16px);\n          border: 1px solid rgba(255, 255, 255, 0.4);\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\n        }\n        \n        .premium-glass-header {\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n        }\n        \n        .lesson-card {\n          background: rgba(255, 255, 255, 0.92);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n        \n        .lesson-card:hover {\n          background: rgba(255, 255, 255, 0.95);\n          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);\n          transform: translateY(-4px) scale(1.01);\n        }\n        \n        .lesson-number {\n          background: linear-gradient(135deg, #f1f5f9, #e2e8f0);\n          border: 2px solid rgba(148, 163, 184, 0.3);\n          transition: all 0.3s ease;\n        }\n        \n        .lesson-number.completed {\n          background: linear-gradient(135deg, #3b82f6, #1d4ed8);\n          border: 2px solid rgba(59, 130, 246, 0.5);\n          box-shadow: 0 4px 16px rgba(59, 130, 246, 0.3);\n        }\n        \n        .lesson-number.unlocked {\n          background: linear-gradient(135deg, #f8fafc, #f1f5f9);\n          border: 2px solid rgba(100, 116, 139, 0.4);\n        }\n        \n        .progress-bar-bg {\n          background: rgba(59, 130, 246, 0.12);\n        }\n        \n        .progress-bar-fill {\n          background: linear-gradient(90deg, #3b82f6, #1e40af);\n          box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3);\n        }\n        \n        .stats-badge {\n          background: rgba(59, 130, 246, 0.1);\n          border: 1px solid rgba(59, 130, 246, 0.2);\n          color: #1e40af;\n        }\n        \n        .xp-badge {\n          background: rgba(251, 191, 36, 0.15);\n          border: 1px solid rgba(251, 191, 36, 0.3);\n          color: #92400e;\n        }\n        \n        .lock-badge {\n          background: rgba(148, 163, 184, 0.15);\n          border: 1px solid rgba(148, 163, 184, 0.3);\n          color: #475569;\n        }\n        \n        .elegant-text-primary { color: #1e293b; }\n        .elegant-text-secondary { color: #64748b; }\n        .elegant-text-muted { color: #94a3b8; }\n      "}),(0,o.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"#f8fafc"},children:[(0,o.jsxs)("div",{className:"text-white relative overflow-hidden",style:{background:`linear-gradient(135deg, ${y.color}dd 0%, ${y.color} 50%, #1e293b 100%)`,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.15)"},children:[(0,o.jsx)("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:"radial-gradient(circle at 25% 25%, white 2px, transparent 2px)",backgroundSize:"32px 32px"}}),(0,o.jsxs)("div",{className:"relative max-w-5xl mx-auto px-6 py-8",children:[(0,o.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,o.jsxs)("button",{onClick:a,className:"flex items-center text-white/90 hover:text-white transition-all duration-300 hover:scale-105",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),(0,o.jsx)("span",{className:"font-medium",children:"Voltar \xe0s S\xe9ries"})]})}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,o.jsx)("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center mr-4 premium-glass-header",children:(0,o.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{className:"text-3xl font-light tracking-wide mb-2",children:i}),(0,o.jsxs)("p",{className:"text-white/80 text-lg",children:[c.length," li\xe7\xf5es dispon\xedveis"]})]})]}),(0,o.jsxs)("div",{className:"premium-glass-header grid grid-cols-3 gap-6 rounded-2xl p-6 max-w-md mx-auto",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-2xl font-light",children:[w.completedCount,"/",c.length]}),(0,o.jsx)("div",{className:"text-xs text-white/70 uppercase tracking-wider",children:"Conclu\xeddas"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"text-2xl font-light",children:w.totalXP}),(0,o.jsx)("div",{className:"text-xs text-white/70 uppercase tracking-wider",children:"XP Ganho"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-2xl font-light",children:[w.averageScore,"%"]}),(0,o.jsx)("div",{className:"text-xs text-white/70 uppercase tracking-wider",children:"M\xe9dia"})]})]})]})]})]}),(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-6 py-12",children:[(0,o.jsx)("div",{className:"space-y-6",children:c.map((e,t)=>{const n=b(t),r=(e=>{const t=h[e.id];return t?{status:t.completed?"completed":"in-progress",score:t.score||0,xp:t.xpEarned||0}:{status:"not-started",score:0,xp:0}})(e);return(0,o.jsx)("div",{onClick:()=>((e,t)=>{b(t)&&l(e,s)})(e,t),className:"lesson-card group rounded-3xl p-4 sm:p-8 "+(n?"cursor-pointer":"opacity-60 cursor-not-allowed"),children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-shrink-0 mr-4 sm:mr-8",children:(0,o.jsx)("div",{className:"lesson-number w-16 h-16 sm:w-20 sm:h-20 rounded-2xl flex items-center justify-center "+("completed"===r.status?"completed":n?"unlocked":""),children:"completed"===r.status?(0,o.jsx)("svg",{className:"w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"})}):(0,o.jsx)("span",{className:"text-2xl font-light elegant-text-primary",children:t+1})})}),(0,o.jsx)("div",{className:"flex-1 min-w-0",children:(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"text-lg sm:text-2xl font-light elegant-text-primary mb-3 tracking-wide",children:e.title}),(0,o.jsx)("p",{className:"elegant-text-secondary text-base sm:text-lg mb-4 leading-relaxed",children:e.description}),(0,o.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-6",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2 elegant-text-muted",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,o.jsx)("span",{className:"text-sm elegant-text-secondary font-medium",children:e.duration})]}),"completed"===r.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"stats-badge px-3 py-1 rounded-full flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})}),(0,o.jsxs)("span",{className:"text-sm font-medium",children:[r.score,"%"]})]}),(0,o.jsxs)("div",{className:"xp-badge px-3 py-1 rounded-full flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),(0,o.jsxs)("span",{className:"text-sm font-medium",children:["+",r.xp," XP"]})]})]}),!n&&t>0&&(0,o.jsxs)("div",{className:"lock-badge px-3 py-1 rounded-full flex items-center",children:[(0,o.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),(0,o.jsx)("span",{className:"text-sm font-medium",children:"Bloqueada"})]})]})]}),(0,o.jsx)("div",{className:"ml-3 sm:ml-6",children:(0,o.jsx)("svg",{className:"w-6 h-6 elegant-text-muted transition-all duration-300 "+(n?"group-hover:translate-x-2 group-hover:scale-110":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5l7 7-7 7"})})})]})})]})},e.id)})}),(0,o.jsx)("div",{className:"mt-16 premium-glass rounded-3xl p-8",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h3",{className:"text-2xl font-light elegant-text-primary mb-6 tracking-wide",children:"Progresso da S\xe9rie"}),(0,o.jsx)("div",{className:"max-w-md mx-auto mb-6",children:(0,o.jsx)("div",{className:"progress-bar-bg rounded-full h-3 overflow-hidden",children:(0,o.jsx)("div",{className:"progress-bar-fill h-full transition-all duration-1000 ease-out rounded-full",style:{width:w.completedCount/c.length*100+"%"}})})}),(0,o.jsx)("p",{className:"elegant-text-secondary text-lg",children:w.completedCount===c.length?"\ud83c\udf89 S\xe9rie completada com excel\xeancia!":`${c.length-w.completedCount} li\xe7\xf5es restantes para dominar ${i}`})]})})]})]})]})},v=50,b=10,w=50,x=25,k=30,S=20,E=200,_=100,C=[0,50,100,150,200,300,450,650,900,1200,1600,2100,2700,3400,4200,5100,6100,7200,8400,9700,11200,13e3,15100,17500,20200,23200,26500,30100,34e3,38200,43e3,48500,54700,61600,69200,77500,86500,96200,106600,117700,129500,142e3,155200,169100,183700,199e3,215e3,231700,249100,267200],N=e=>{for(let t=C.length-1;t>=0;t--)if(e>=C[t])return t+1;return 1},T=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{console.log(`\ud83c\udf1f Awarding XP: ${t} for ${e}`,n);let r=0;switch(t){case"LESSON_COMPLETE":r=v+n.correctAnswers*b,(n.perfectScore||n.correctAnswers===n.totalQuestions)&&(r+=w);break;case"DRAG_DROP_COMPLETE":r=x*(n.difficulty||1);break;case"SPEAKING_EXERCISE":r=k,n.accuracy>=90&&(r+=20);break;case"DAILY_STREAK":r=S*(n.streakDay||1);break;case"WEEKLY_PERFECT":r=E;break;case"ACHIEVEMENT_UNLOCK":r=_;break;default:return console.warn(`Unknown activity type: ${t}`),0}const s=(0,l.H9)(c.db,"students",e),i=await(0,l.x7)(s);if(!i.exists())throw new Error("Student not found");const o=i.data(),a=o.totalXP||0,u=a+r,d=N(a),h=N(u),f=h>d,p={type:t,xpEarned:r,timestamp:new Date,data:n},m={totalXP:u,level:h,lastActive:new Date},g=o.xpHistory||[];return g.push(p),g.length>100&&g.splice(0,g.length-100),m.xpHistory=g,m.monsterStage=I(h),await(0,l.mZ)(s,m),console.log("\u2705 XP awarded successfully!",{username:e,activityType:t,xpEarned:r,oldLevel:d,newLevel:h,leveledUp:f,totalXP:u}),{xpEarned:r,totalXP:u,level:h,leveledUp:f,monsterStage:m.monsterStage}}catch(r){throw console.error("\u274c Failed to award XP:",r),r}},I=e=>e>=40?"legend":e>=30?"master":e>=20?"adult":e>=10?"teen":e>=5?"child":"baby",A=e=>{let{user:t,lesson:n,seriesId:s,onBack:i,onComplete:a}=e;(0,r.useEffect)(()=>{console.log("\ud83d\udd0d LessonPlayer DEBUG:"),console.log("- lesson prop:",n),console.log("- lesson.id:",null===n||void 0===n?void 0:n.id),console.log("- seriesId prop:",s),console.log("- lesson.audioFile:",null===n||void 0===n?void 0:n.audioFile)},[null===n||void 0===n?void 0:n.id]);const l=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(0),[f,p]=(0,r.useState)(0),[m,g]=(0,r.useState)(1),[y,v]=(0,r.useState)(0),[b,w]=(0,r.useState)(!1),[x,k]=(0,r.useState)(null),[S,E]=(0,r.useState)({}),[_,C]=(0,r.useState)(!1),[N,I]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=l.current;e&&null!==n&&void 0!==n&&n.audioFile&&(console.log("\ud83c\udfb5 Setting audio source:",n.audioFile),e.src=n.audioFile,e.load())},[null===n||void 0===n?void 0:n.audioFile]),(0,r.useEffect)(()=>()=>{const e=l.current;e&&(console.log("\ud83e\uddf9 Cleaning up audio..."),e.pause(),e.currentTime=0,e.src="",e.onloadstart=null,e.onloadedmetadata=null,e.ontimeupdate=null,e.onended=null,e.onerror=null,e.onabort=null)},[]),(0,r.useEffect)(()=>{const e=l.current;if(!e)return;const t=()=>{console.log("\ud83c\udfb5 Audio loading started..."),w(!1),k(null)},r=()=>{console.log("\ud83c\udfb5 Audio metadata loaded!"),p(e.duration),w(!0),k(null)},s=()=>{e.duration>0&&(h(e.currentTime),v(e.currentTime/e.duration*100))},i=()=>{console.log("\ud83c\udfb5 Audio finished!"),u(!1)},o=t=>{console.error("\u274c Audio loading error:",t),console.error("\u274c Audio error details:",{error:e.error,networkState:e.networkState,readyState:e.readyState,src:e.src}),w(!1),k(`Audio failed to load: ${null===n||void 0===n?void 0:n.audioFile}`)},a=e=>{console.log("\u23f9\ufe0f Audio loading aborted (normal during navigation)"),u(!1)},c=()=>{console.log("\ud83c\udfb5 Audio can play through!"),w(!0),k(null)};return e.addEventListener("loadstart",t),e.addEventListener("loadedmetadata",r),e.addEventListener("canplaythrough",c),e.addEventListener("timeupdate",s),e.addEventListener("ended",i),e.addEventListener("error",o),e.addEventListener("abort",a),()=>{e&&(e.removeEventListener("loadstart",t),e.removeEventListener("loadedmetadata",r),e.removeEventListener("canplaythrough",c),e.removeEventListener("timeupdate",s),e.removeEventListener("ended",i),e.removeEventListener("error",o),e.removeEventListener("abort",a),e.pause(),e.currentTime=0)}},[null===n||void 0===n?void 0:n.audioFile]);const A=e=>{const t=l.current;if(!t||!b)return;const n=Math.max(0,Math.min(f,t.currentTime+e));t.currentTime=n},P=()=>{E({}),C(!1),I(null)},j=async()=>{try{console.log("\u2705 Lesson completed - lesson ID:",n.id);const e=await T(t.username,"LESSON_COMPLETE",{correctAnswers:N.correctCount,totalQuestions:N.totalQuestions,perfectScore:100===N.score});console.log("\ud83c\udf1f XP awarded:",e),I(t=>({...t,totalXP:e.xpEarned,leveledUp:e.leveledUp,newLevel:e.level})),a({lessonId:n.id,score:N.score,answers:S,correctAnswers:N.correctCount,totalQuestions:N.totalQuestions,xpEarned:e.xpEarned})}catch(e){console.error("\u274c Error completing lesson:",e),a({lessonId:n.id,score:N.score,answers:S,correctAnswers:N.correctCount,totalQuestions:N.totalQuestions})}},L=e=>`${Math.floor(e/60)}:${Math.floor(e%60).toString().padStart(2,"0")}`,R=n.questions.every((e,t)=>void 0!==S[t]),D=Object.keys(S).length;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:"\n        .clean-card {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(16px);\n          border-radius: 24px;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\n        }\n\n        .answer-option {\n          background: rgba(248, 250, 252, 0.8);\n          border: 1px solid #e2e8f0;\n          border-radius: 12px;\n          padding: 16px 20px;\n          margin: 8px 0;\n          transition: all 0.2s ease;\n          cursor: pointer;\n          font-size: 16px;\n          color: #334155;\n        }\n        \n        .answer-option:hover {\n          background: rgba(241, 245, 249, 0.9);\n          transform: translateY(-1px);\n          border-color: #cbd5e1;\n        }\n        \n        .answer-option.selected {\n          background: rgba(25, 109, 227, 0.1);\n          border: 2px solid #196de3;\n          color: #1d4ed8;\n        }\n        \n        .progress-header {\n          background: rgba(25, 109, 227, 0.1);\n          border-radius: 16px;\n          padding: 16px;\n          margin-bottom: 24px;\n        }\n        \n        .verify-button {\n          background: linear-gradient(135deg, #27ae60, #219a52);\n          color: white;\n          border: none;\n          border-radius: 16px;\n          padding: 16px 32px;\n          font-size: 18px;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.3s ease;\n        }\n        \n        .verify-button:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 24px rgba(39, 174, 96, 0.3);\n        }\n        \n        .verify-button:disabled {\n          background: #d1d5db;\n          color: #9ca3af;\n          cursor: not-allowed;\n          transform: none;\n          box-shadow: none;\n        }\n\n        /* Gamification Animations */\n        @keyframes perfectPop { 0% { transform: scale(0) rotate(-12deg); opacity: 0; } 20% { transform: scale(1.4) rotate(-12deg); opacity: 1; } 40% { transform: scale(1) rotate(-12deg); opacity: 1; } 70% { transform: scale(1) rotate(-12deg); opacity: 1; } 100% { transform: scale(1) rotate(-12deg); opacity: 0; } }\n        @keyframes levelUpPop { 0% { transform: scale(0) translateY(-50px); opacity: 0; } 25% { transform: scale(1.2) translateY(0); opacity: 1; } 50% { transform: scale(1) translateY(0); opacity: 1; } 80% { transform: scale(1) translateY(0); opacity: 1; } 100% { transform: scale(1) translateY(0); opacity: 0; } }\n        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n        @keyframes scaleIn { from { transform: scale(0.9) translateY(20px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }\n      "}),(0,o.jsxs)("div",{className:"min-h-screen pb-20",style:{background:"linear-gradient(135deg, #ecf0f1 0%, #f8f9fa 100%)"},children:[(0,o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,o.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("button",{onClick:i,className:"flex items-center transition-colors",style:{color:"#7f8c8d"},onMouseEnter:e=>e.target.style.color="#2c3e50",onMouseLeave:e=>e.target.style.color="#7f8c8d",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Lessons"]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:n.title}),(0,o.jsx)("p",{style:{color:"#7f8c8d"},className:"text-sm",children:n.description})]}),(0,o.jsx)("div",{className:"w-24"})]})})}),(0,o.jsx)("div",{className:"max-w-2xl mx-auto px-4 py-8",children:(0,o.jsxs)("div",{className:"clean-card p-8 sm:p-12",children:[(0,o.jsxs)("div",{className:"text-center mb-10",children:[(0,o.jsx)("div",{className:"text-6xl mb-6",children:"\ud83c\udfa7"}),(0,o.jsx)("h2",{className:"text-2xl sm:text-3xl font-semibold mb-4",style:{color:"#2c3e50"},children:"Listen & Learn"}),(0,o.jsx)("p",{className:"text-lg",style:{color:"#7f8c8d"},children:"Play the audio as many times as you want, then answer the questions below!"})]}),(0,o.jsxs)("audio",{ref:l,preload:"metadata",children:[(0,o.jsx)("source",{src:n.audioFile,type:"audio/mpeg"}),"Your browser does not support the audio element."]},n.id),x&&(0,o.jsxs)("div",{className:"mb-6 p-4 border rounded-lg",style:{backgroundColor:"#fdf2f2",borderColor:"#fca5a5",color:"#bf3d30"},children:[(0,o.jsxs)("p",{className:"text-sm",children:["\u274c ",x]}),(0,o.jsxs)("p",{className:"text-xs mt-2",children:["Expected file: ",n.audioFile]}),(0,o.jsx)("button",{onClick:()=>{const e=l.current;e&&(e.load(),k(null))},className:"mt-2 text-white px-3 py-1 rounded text-sm transition-colors",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Retry Loading"})]}),(0,o.jsxs)("div",{className:"mb-10",children:[(0,o.jsxs)("div",{className:"flex justify-between text-base mb-4",style:{color:"#7f8c8d"},children:[(0,o.jsx)("span",{className:"font-medium",children:L(d)}),(0,o.jsx)("span",{className:"font-semibold text-lg",style:{color:"#2c3e50"},children:n.title}),(0,o.jsx)("span",{className:"font-medium",children:L(f)})]}),(0,o.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 cursor-pointer",onClick:e=>{const t=l.current;if(!t||!b)return;const n=e.currentTarget.getBoundingClientRect(),r=(e.clientX-n.left)/n.width;t.currentTime=r*f},children:(0,o.jsx)("div",{className:"h-3 rounded-full transition-all duration-100",style:{width:`${y}%`,backgroundColor:"#196de3"}})}),(0,o.jsxs)("div",{className:"text-center text-base mt-3 font-medium",style:{color:"#7f8c8d"},children:[Math.round(y),"% completed"]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-6 mb-10",children:[(0,o.jsxs)("button",{onClick:()=>A(-10),disabled:!b,className:"bg-gray-100 hover:bg-gray-200 disabled:opacity-50 p-4 rounded-xl transition-colors flex items-center text-lg font-medium",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0019 16V8a1 1 0 00-1.6-.8l-5.334 4zM4.066 11.2a1 1 0 000 1.6l5.334 4A1 1 0 0011 16V8a1 1 0 00-1.6-.8l-5.334 4z"})}),"-10s"]}),(0,o.jsx)("button",{onClick:async()=>{const e=l.current;if(e&&b)try{c?(e.pause(),u(!1)):(console.log("\u25b6\ufe0f Attempting to play audio..."),await e.play(),u(!0),console.log("\u2705 Audio playing!"))}catch(t){console.error("\u274c Audio play error:",t),u(!1),k("Failed to play audio. Please try again.")}else console.log("\u26a0\ufe0f Audio not ready:",{audio:!!e,audioLoaded:b})},disabled:!b,className:"p-6 rounded-full transition-colors shadow-xl "+(b?"text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"),style:b?{backgroundColor:"#196de3"}:{},onMouseEnter:e=>{b&&(e.target.style.filter="brightness(0.9)")},onMouseLeave:e=>{b&&(e.target.style.filter="brightness(1)")},children:b?c?(0,o.jsx)("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z"})}):(0,o.jsx)("svg",{className:"w-8 h-8 ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{d:"M8 5v14l11-7z"})}):(0,o.jsx)("svg",{className:"w-8 h-8 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,o.jsxs)("button",{onClick:()=>A(10),disabled:!b,className:"bg-gray-100 hover:bg-gray-200 disabled:opacity-50 p-4 rounded-xl transition-colors flex items-center text-lg font-medium",children:["+10s",(0,o.jsx)("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.933 12.8a1 1 0 000-1.6L6.6 7.2A1 1 0 005 8v8a1 1 0 001.6.8l5.333-4zM19.933 12.8a1 1 0 000-1.6l-5.333-4A1 1 0 0013 8v8a1 1 0 001.6.8l5.333-4z"})})]})]}),(0,o.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-10",children:[(0,o.jsx)("span",{className:"text-sm mr-4 font-medium",style:{color:"#7f8c8d"},children:"Speed:"}),[.5,.75,1,1.25,1.5].map(e=>(0,o.jsxs)("button",{onClick:()=>(e=>{const t=l.current;t&&b&&(t.playbackRate=e,g(e))})(e),disabled:!b,className:"px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 min-w-[50px] "+(m===e?"text-white":"bg-gray-100 hover:bg-gray-200"),style:m===e?{backgroundColor:"#196de3"}:{color:"#2c3e50"},children:[e,"x"]},e))]}),(0,o.jsxs)("div",{className:"text-center mt-6 text-sm",style:{color:"#7f8c8d"},children:["Status: ",b?"\u2705 Ready":"\u23f3 Loading"," | File: ",n.audioFile]}),(0,o.jsxs)("div",{className:"mt-12 pt-12 border-t border-gray-200/80",children:[(0,o.jsx)("div",{className:"progress-header",children:(0,o.jsx)("div",{className:"flex items-center justify-between",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("span",{className:"font-semibold text-lg",style:{color:"#196de3"},children:["Progress: ",D,"/",n.questions.length," answered"]}),(0,o.jsx)("div",{className:"ml-6 w-40 rounded-full h-3",style:{backgroundColor:"rgba(25, 109, 227, 0.3)"},children:(0,o.jsx)("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:D/n.questions.length*100+"%",backgroundColor:"#196de3"}})})]})})}),(0,o.jsx)("div",{className:"space-y-10",children:n.questions.map((e,t)=>(0,o.jsxs)("div",{className:"pt-8 border-t border-gray-200/80 first:border-t-0 first:pt-0",children:[(0,o.jsxs)("h3",{className:"text-xl sm:text-2xl font-semibold mb-6",style:{color:"#2c3e50"},children:[t+1,". ",e.question]}),(0,o.jsx)("div",{className:"space-y-4",children:e.options.map((e,n)=>{const r=S[t]===n,s=String.fromCharCode(97+n);return(0,o.jsxs)("button",{onClick:()=>((e,t)=>{E({...S,[e]:t})})(t,n),className:"answer-option w-full text-left "+(r?"selected":""),children:[(0,o.jsxs)("span",{className:"font-medium flex-1 text-lg",style:{color:r?"#2c3e50":"#374151"},children:[s,") ",e]}),r&&(0,o.jsx)("span",{style:{color:"#196de3"},className:"text-2xl ml-3 float-right",children:"\u2713"})]},n)})})]},t))}),(0,o.jsx)("div",{className:"text-center mt-16",children:(0,o.jsx)("button",{onClick:()=>{let e=0;const t={};n.questions.forEach((n,r)=>{const s=S[r],i=s===n.correct;i&&e++,t[r]={question:n.question,userAnswer:void 0!==s?n.options[s]:"No answer",correctAnswer:n.options[n.correct],isCorrect:i}});const r=Math.round(e/n.questions.length*100);I({score:r,correctCount:e,totalQuestions:n.questions.length,totalXP:0,results:t}),C(!0)},disabled:!R,className:"verify-button",children:R?"\ud83c\udfaf Check My Answers!":`Answer ${n.questions.length-D} more questions`})})]})]})}),_&&100===(null===N||void 0===N?void 0:N.score)&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] pointer-events-none",children:(0,o.jsx)("div",{className:"text-8xl font-black text-yellow-400 drop-shadow-2xl transform -rotate-12",style:{animation:"perfectPop 3s ease-out forwards"},children:"\u2605 PERFECT! \u2605"})}),_&&(null===N||void 0===N?void 0:N.leveledUp)&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[65] pointer-events-none",children:(0,o.jsxs)("div",{className:"text-6xl font-black text-purple-400 drop-shadow-2xl",style:{animation:"levelUpPop 2.5s ease-out forwards"},children:["\ud83c\udf89 LEVEL ",N.newLevel,"! \ud83c\udf89"]})}),_&&N&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4 opacity-0",style:{backgroundColor:"rgba(0, 0, 0, 0.5)",animation:"fadeIn 0.3s ease-out forwards"},onClick:()=>C(!1),children:(0,o.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full transform relative overflow-hidden",onClick:e=>e.stopPropagation(),style:{animation:"scaleIn 0.4s ease-out forwards"},children:[100===N.score&&(0,o.jsxs)("div",{className:"absolute inset-0 pointer-events-none",children:[(0,o.jsx)("div",{className:"absolute top-2 left-4 text-yellow-400 animate-bounce delay-1000",children:"\u2728"}),(0,o.jsx)("div",{className:"absolute top-4 right-6 text-pink-400 animate-bounce delay-1200",children:"\ud83c\udf89"}),(0,o.jsx)("div",{className:"absolute top-8 left-8 text-blue-400 animate-bounce delay-1400",children:"\u2b50"}),(0,o.jsx)("div",{className:"absolute top-6 right-12 text-green-400 animate-bounce delay-1600",children:"\ud83d\udcab"}),(0,o.jsx)("div",{className:"absolute top-12 left-16 text-purple-400 animate-bounce delay-1100",children:"\u2728"}),(0,o.jsx)("div",{className:"absolute top-10 right-4 text-yellow-400 animate-bounce delay-1500",children:"\ud83c\udf1f"})]}),(0,o.jsx)("div",{className:"p-6 text-center relative z-10",children:(()=>{const e=(t=N.score)>=90?{emoji:"\ud83c\udfc6",title:"Outstanding!",message:"You mastered this lesson!"}:t>=80?{emoji:"\ud83c\udf89",title:"Excellent!",message:"Great job understanding the content!"}:t>=70?{emoji:"\ud83d\udc4d",title:"Good Work!",message:"You did well, keep practicing!"}:t>=60?{emoji:"\ud83d\udcaa",title:"Keep Trying!",message:"You're getting better, don't give up!"}:{emoji:"\ud83e\udd17",title:"Practice More!",message:"Every mistake is a step toward success!"};var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("div",{className:"text-5xl mb-3 animate-pulse",children:e.emoji}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-3",style:{color:"#2c3e50"},children:e.title}),(0,o.jsx)("p",{className:"text-sm mb-4",style:{color:"#7f8c8d"},children:e.message}),(0,o.jsxs)("div",{className:"text-white rounded-lg p-4 mb-4 transform hover:scale-105 transition-transform",style:{background:"linear-gradient(135deg, #196de3, #27ae60)"},children:[(0,o.jsxs)("div",{className:"text-4xl font-bold",children:[N.score,"%"]}),(0,o.jsxs)("div",{className:"text-sm",children:[N.correctCount,"/",N.totalQuestions," correct answers"]}),(0,o.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:["+",N.totalXP," XP earned!"]}),N.leveledUp&&(0,o.jsxs)("div",{className:"text-sm font-bold mt-2 animate-pulse",children:["\ud83c\udf89 LEVEL UP! You're now Level ",N.newLevel,"! \ud83c\udf89"]})]})]}),(0,o.jsxs)("div",{className:"text-left mb-4",children:[(0,o.jsx)("h3",{className:"font-semibold mb-3 text-center text-sm",style:{color:"#2c3e50"},children:"Your Results"}),(0,o.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:Object.entries(N.results).map(e=>{let[t,n]=e;return(0,o.jsx)("div",{className:"p-3 rounded-lg transform transition-all duration-300 border-l-4",style:{backgroundColor:n.isCorrect?"#f0f9f4":"#fef2f2",borderLeftColor:n.isCorrect?"#27ae60":"#bf3d30"},children:(0,o.jsxs)("div",{className:"flex items-start",children:[(0,o.jsx)("span",{className:"mr-2 text-sm font-medium",style:{color:n.isCorrect?"#27ae60":"#bf3d30"},children:n.isCorrect?"\u2713":"\u2717"}),(0,o.jsxs)("div",{className:"flex-1 text-xs",children:[(0,o.jsxs)("div",{className:"font-medium mb-1",style:{color:"#2c3e50"},children:["Question ",parseInt(t)+1]}),n.isCorrect?(0,o.jsx)("div",{style:{color:"#27ae60"},children:"Correct!"}):(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{color:"#bf3d30"},className:"mb-1",children:["Your answer: ",n.userAnswer]}),(0,o.jsxs)("div",{style:{color:"#27ae60"},children:["Correct: ",n.correctAnswer]})]})]})]})},t)})})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[N.score<100&&(0,o.jsx)("button",{onClick:P,className:"w-full text-white py-3 rounded-lg transition-all duration-300 font-medium transform hover:scale-105 active:scale-95",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Try Again for Perfect Score"}),(0,o.jsx)("button",{onClick:j,className:"w-full text-white py-3 rounded-lg transition-all duration-300 font-medium transform hover:scale-105 active:scale-95",style:{backgroundColor:"#196de3"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Continue Learning"})]})]})})()})]})})]})]})},P=e=>{let{user:t,onBack:n}=e;const[s,i]=(0,r.useState)(0),[a,l]=(0,r.useState)({}),[c,u]=(0,r.useState)(!1),[f,p]=(0,r.useState)(null),[m,g]=(0,r.useState)(new Set),[y,v]=(0,r.useState)(!0);(0,r.useEffect)(()=>{b()},[t.username]);const b=async()=>{try{console.log("\ud83d\udcd6 Loading story progress for:",t.username);const e=await d(t.username);if(e.success&&e.student&&e.student.progress){const t=Object.entries(e.student.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("story-")&&n.completed}).map(e=>{let[t]=e;return t.replace("story-","")});console.log("\u2705 Found completed stories:",t),g(new Set(t))}}catch(e){console.error("\u274c Error loading story progress:",e)}finally{v(!1)}},w=[{id:"morning-routine",title:"Morning Routine",category:"Daily Life",difficulty:"short",icon:"\u2600\ufe0f",story:[{type:"text",content:"Every morning, Jo\xe3o wakes up at"},{type:"blank",id:0,options:["7 AM","11 PM","3 PM","midnight"],correct:0},{type:"text",content:". He goes to the"},{type:"blank",id:1,options:["garage","bathroom","garden","roof"],correct:1},{type:"text",content:"to brush his teeth. Then he drinks"},{type:"blank",id:2,options:["wine","beer","coffee","soda"],correct:2},{type:"text",content:"and eats breakfast before going to"},{type:"blank",id:3,options:["bed","work","party","cinema"],correct:1},{type:"text",content:"."}]},{id:"weekend-football",title:"Weekend Football",category:"Sports",difficulty:"short",icon:"\u26bd",story:[{type:"text",content:"On Sunday, Maria goes to the"},{type:"blank",id:0,options:["library","stadium","hospital","bank"],correct:1},{type:"text",content:"to watch her favorite"},{type:"blank",id:1,options:["book","movie","team","song"],correct:2},{type:"text",content:"play football. She wears her"},{type:"blank",id:2,options:["jersey","pajamas","suit","apron"],correct:0},{type:"text",content:"and cheers very"},{type:"blank",id:3,options:["quietly","sadly","loudly","slowly"],correct:2},{type:"text",content:"!"}]},{id:"grocery-shopping",title:"Grocery Shopping",category:"Daily Life",difficulty:"short",icon:"\ud83d\uded2",story:[{type:"text",content:"Ana needs to buy food at the"},{type:"blank",id:0,options:["gym","supermarket","beach","office"],correct:1},{type:"text",content:". She puts"},{type:"blank",id:1,options:["cars","books","fruits","chairs"],correct:2},{type:"text",content:"and vegetables in her"},{type:"blank",id:2,options:["cart","pocket","hair","shoe"],correct:0},{type:"text",content:". At the cashier, she pays with her"},{type:"blank",id:3,options:["sandwich","hat","card","plant"],correct:2},{type:"text",content:"."}]},{id:"beach-day",title:"Beach Day",category:"Culture",difficulty:"short",icon:"\ud83c\udfd6\ufe0f",story:[{type:"text",content:"Carlos loves going to the"},{type:"blank",id:0,options:["mountain","desert","beach","forest"],correct:2},{type:"text",content:"in Rio. He puts on"},{type:"blank",id:1,options:["makeup","sunscreen","perfume","shampoo"],correct:1},{type:"text",content:"to protect his skin. Then he"},{type:"blank",id:2,options:["sleeps","studies","swims","cooks"],correct:2},{type:"text",content:"in the ocean and feels very"},{type:"blank",id:3,options:["angry","happy","tired","sick"],correct:1},{type:"text",content:"."}]},{id:"restaurant-dinner",title:"Restaurant Dinner",category:"Food",difficulty:"short",icon:"\ud83c\udf7d\ufe0f",story:[{type:"text",content:"Tonight, Paulo and Sofia go to a nice"},{type:"blank",id:0,options:["library","restaurant","hospital","school"],correct:1},{type:"text",content:". The"},{type:"blank",id:1,options:["doctor","waiter","teacher","pilot"],correct:1},{type:"text",content:"brings them the menu. Paulo orders"},{type:"blank",id:2,options:["books","steak","clothes","toys"],correct:1},{type:"text",content:"and Sofia chooses"},{type:"blank",id:3,options:["computer","fish","bicycle","phone"],correct:1},{type:"text",content:"."}]},{id:"first-airplane",title:"First Airplane Trip",category:"Travel",difficulty:"medium",icon:"\u2708\ufe0f",story:[{type:"text",content:"Isabella is very"},{type:"blank",id:0,options:["bored","excited","angry","sleepy"],correct:1},{type:"text",content:"because today is her first"},{type:"blank",id:1,options:["birthday","flight","job","school"],correct:1},{type:"text",content:"to the United States. At the"},{type:"blank",id:2,options:["beach","park","airport","mall"],correct:2},{type:"text",content:", she shows her"},{type:"blank",id:3,options:["sandwich","passport","magazine","umbrella"],correct:1},{type:"text",content:"to the security officer. She"},{type:"blank",id:4,options:["sleeps","boards","cooks","dances"],correct:1},{type:"text",content:"the airplane and finds her"},{type:"blank",id:5,options:["kitchen","seat","bathroom","garden"],correct:1},{type:"text",content:". During the flight, she"},{type:"blank",id:6,options:["drives","swims","watches","runs"],correct:2},{type:"text",content:"a movie and feels"},{type:"blank",id:7,options:["hungry","amazed","cold","lost"],correct:1},{type:"text",content:"by the clouds outside."}]},{id:"carnival-preparation",title:"Carnival Preparation",category:"Culture",difficulty:"medium",icon:"\ud83c\udfad",story:[{type:"text",content:"Carnival is coming to Rio and Lucia is"},{type:"blank",id:0,options:["sleeping","preparing","studying","working"],correct:1},{type:"text",content:"her beautiful"},{type:"blank",id:1,options:["homework","costume","dinner","car"],correct:1},{type:"text",content:". She chooses bright"},{type:"blank",id:2,options:["books","colors","animals","numbers"],correct:1},{type:"text",content:"like yellow and green. Her"},{type:"blank",id:3,options:["enemies","friends","strangers","doctors"],correct:1},{type:"text",content:"help her with the feathers and"},{type:"blank",id:4,options:["vegetables","sequins","medicines","tools"],correct:1},{type:"text",content:". They practice"},{type:"blank",id:5,options:["sleeping","crying","dancing","reading"],correct:2},{type:"text",content:"samba every day. When Carnival arrives, they"},{type:"blank",id:6,options:["hide","parade","work","study"],correct:1},{type:"text",content:"through the streets with"},{type:"blank",id:7,options:["silence","music","sadness","fear"],correct:1},{type:"text",content:"and celebration!"}]},{id:"job-interview",title:"Job Interview",category:"Business",difficulty:"medium",icon:"\ud83d\udcbc",story:[{type:"text",content:"Roberto has an important"},{type:"blank",id:0,options:["vacation","interview","party","game"],correct:1},{type:"text",content:"today at a big"},{type:"blank",id:1,options:["beach","company","park","restaurant"],correct:1},{type:"text",content:". He wears his best"},{type:"blank",id:2,options:["pajamas","suit","swimsuit","costume"],correct:1},{type:"text",content:"and arrives"},{type:"blank",id:3,options:["late","early","never","yesterday"],correct:1},{type:"text",content:"to make a good impression. The"},{type:"blank",id:4,options:["waiter","manager","driver","student"],correct:1},{type:"text",content:"asks him about his"},{type:"blank",id:5,options:["lunch","experience","pets","hobbies"],correct:1},{type:"text",content:"and skills. Roberto"},{type:"blank",id:6,options:["sleeps","answers","runs","sings"],correct:1},{type:"text",content:"confidently and gets the"},{type:"blank",id:7,options:["cold","job","ticket","book"],correct:1},{type:"text",content:"!"}]},{id:"cooking-class",title:"Cooking Class",category:"Food",difficulty:"medium",icon:"\ud83d\udc68\u200d\ud83c\udf73",story:[{type:"text",content:"Fernanda decides to learn how to"},{type:"blank",id:0,options:["fly","cook","swim","dance"],correct:1},{type:"text",content:"traditional Brazilian food. She joins a"},{type:"blank",id:1,options:["gym","class","library","hospital"],correct:1},{type:"text",content:"at the local cooking school. The"},{type:"blank",id:2,options:["doctor","chef","teacher","pilot"],correct:1},{type:"text",content:"shows her how to make"},{type:"blank",id:3,options:["computers","feijoada","cars","shoes"],correct:1},{type:"text",content:", a famous Brazilian dish. First, she"},{type:"blank",id:4,options:["breaks","washes","hides","sells"],correct:1},{type:"text",content:"the black beans carefully. Then she"},{type:"blank",id:5,options:["throws","cuts","loses","finds"],correct:1},{type:"text",content:"the meat into small pieces. After cooking for hours, she"},{type:"blank",id:6,options:["sees","tastes","hears","feels"],correct:1},{type:"text",content:"her delicious creation and feels very"},{type:"blank",id:7,options:["sad","proud","angry","tired"],correct:1},{type:"text",content:"!"}]},{id:"university-life",title:"University Life",category:"Education",difficulty:"medium",icon:"\ud83c\udf93",story:[{type:"text",content:"Pedro is a"},{type:"blank",id:0,options:["chef","student","pilot","singer"],correct:1},{type:"text",content:"at the University of S\xe3o Paulo. Every morning, he"},{type:"blank",id:1,options:["flies","walks","swims","sleeps"],correct:1},{type:"text",content:"to campus with his heavy"},{type:"blank",id:2,options:["elephant","backpack","refrigerator","piano"],correct:1},{type:"text",content:"full of books. His favorite"},{type:"blank",id:3,options:["animal","subject","color","sport"],correct:1},{type:"text",content:"is engineering because he loves to"},{type:"blank",id:4,options:["eat","build","sleep","dance"],correct:1},{type:"text",content:"things. During lunch break, he meets his"},{type:"blank",id:5,options:["enemies","classmates","dinosaurs","robots"],correct:1},{type:"text",content:"at the cafeteria. They"},{type:"blank",id:6,options:["ignore","discuss","fight","hide"],correct:1},{type:"text",content:"their projects and help each other"},{type:"blank",id:7,options:["cry","study","run","sing"],correct:1},{type:"text",content:"for exams."}]}],x=w[s],k=x.story.filter(e=>"blank"===e.type).length,S=Object.keys(a).length,E=S===k,_=()=>{s<w.length-1&&(i(s+1),l({}),u(!1),p(null))},C=()=>{l({}),u(!1),p(null)};return y?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-t-transparent mx-auto mb-4",style:{borderColor:"#D32F2F"}}),(0,o.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading your stories..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:'\n        .story-container {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(16px);\n          border-radius: 24px;\n          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\n        }\n        \n        .story-text {\n          font-size: 20px;\n          line-height: 2;\n          color: #2c3e50;\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n        }\n        \n        .blank-button {\n          display: inline-block;\n          margin: 0 8px;\n          padding: 8px 16px;\n          background: rgba(248, 250, 252, 0.9);\n          border: 2px solid #e2e8f0;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: 18px;\n          font-weight: 500;\n          min-width: 100px;\n          text-align: center;\n        }\n        \n        .blank-button:hover {\n          background: rgba(241, 245, 249, 0.9);\n          transform: translateY(-1px);\n        }\n        \n        .blank-button.filled {\n          background: rgba(25, 109, 227, 0.1);\n          border-color: #196de3;\n          color: #1d4ed8;\n        }\n        \n        .options-container {\n          display: flex;\n          flex-wrap: wrap;\n          gap: 12px;\n          justify-content: center;\n          margin: 20px 0;\n        }\n        \n        .option-button {\n          padding: 12px 20px;\n          background: #f8fafc;\n          border: 2px solid #e2e8f0;\n          border-radius: 12px;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-size: 16px;\n          font-weight: 500;\n          color: #374151;\n        }\n        \n        .option-button:hover {\n          background: #f1f5f9;\n          transform: translateY(-1px);\n        }\n        \n        .option-button.selected {\n          background: #196de3;\n          border-color: #196de3;\n          color: white;\n        }\n        \n        .progress-indicator {\n          background: rgba(25, 109, 227, 0.1);\n          border-radius: 16px;\n          padding: 16px;\n          margin-bottom: 24px;\n        }\n        \n        @keyframes slideIn {\n          from { opacity: 0; transform: translateY(20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        \n        .story-item {\n          animation: slideIn 0.3s ease-out;\n        }\n\n        /* PERFECT SCORE ANIMATION - Students love this! */\n        @keyframes perfectPop { \n          0% { transform: scale(0) rotate(-12deg); opacity: 0; } \n          20% { transform: scale(1.4) rotate(-12deg); opacity: 1; } \n          40% { transform: scale(1) rotate(-12deg); opacity: 1; } \n          70% { transform: scale(1) rotate(-12deg); opacity: 1; } \n          100% { transform: scale(1) rotate(-12deg); opacity: 0; } \n        }\n        \n        @keyframes levelUpPop { \n          0% { transform: scale(0) translateY(-50px); opacity: 0; } \n          25% { transform: scale(1.2) translateY(0); opacity: 1; } \n          50% { transform: scale(1) translateY(0); opacity: 1; } \n          80% { transform: scale(1) translateY(0); opacity: 1; } \n          100% { transform: scale(1) translateY(0); opacity: 0; } \n        }\n      '}),(0,o.jsxs)("div",{className:"min-h-screen pb-20",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:[(0,o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,o.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("button",{onClick:n,className:"flex items-center transition-colors",style:{color:"#7f8c8d"},onMouseEnter:e=>e.target.style.color="#2c3e50",onMouseLeave:e=>e.target.style.color="#7f8c8d",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Hub"]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:"Story Completion"}),(0,o.jsxs)("p",{style:{color:"#7f8c8d"},className:"text-sm",children:["Complete the stories to practice your English! (",m.size,"/",w.length," completed)"]})]}),(0,o.jsx)("div",{className:"w-24"})]})})}),(0,o.jsxs)("div",{className:"max-w-3xl mx-auto px-4 py-8",children:[(0,o.jsx)("div",{className:"bg-white rounded-2xl p-6 mb-8 shadow-lg",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold mb-4",style:{color:"#2c3e50"},children:"\ud83d\udcd6 Story Progress"}),(0,o.jsxs)("div",{className:"flex justify-center gap-8",children:[(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-2xl font-bold",style:{color:"#D32F2F"},children:[m.size,"/",w.length]}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"Stories Complete"})]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsxs)("div",{className:"text-2xl font-bold",style:{color:"#0082FF"},children:[Math.round(m.size/w.length*100),"%"]}),(0,o.jsx)("div",{className:"text-sm text-gray-600",children:"Progress"})]})]}),(0,o.jsx)("div",{className:"mt-4 w-full bg-gray-200 rounded-full h-3",children:(0,o.jsx)("div",{className:"h-3 rounded-full transition-all duration-500",style:{width:m.size/w.length*100+"%",background:"linear-gradient(90deg, #D32F2F, #B71C1C)"}})}),m.size===w.length&&(0,o.jsxs)("div",{className:"mt-4 p-4 bg-gradient-to-r from-green-100 to-blue-100 rounded-xl",children:[(0,o.jsx)("div",{className:"text-2xl mb-2",children:"\ud83c\udf89"}),(0,o.jsx)("div",{className:"font-bold text-green-800",children:"Congratulations! You've completed all stories!"}),(0,o.jsx)("div",{className:"text-sm text-green-600 mt-1",children:"You're a master storyteller! \ud83d\udcd6\u2728"})]})]})}),(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:w.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>{i(t),l({}),u(!1),p(null)},className:"px-4 py-3 rounded-xl font-medium transition-all flex items-center "+(t===s?"bg-blue-500 text-white shadow-lg":m.has(e.id)?"bg-green-100 text-green-800 border-2 border-green-300":"bg-white text-gray-600 hover:bg-gray-50"),children:[(0,o.jsx)("span",{className:"text-lg mr-2",children:e.icon}),(0,o.jsxs)("div",{className:"text-left",children:[(0,o.jsx)("div",{className:"text-sm font-semibold",children:e.title}),(0,o.jsxs)("div",{className:"text-xs opacity-80",children:[e.difficulty," \u2022 ",e.category]})]}),m.has(e.id)&&(0,o.jsx)("span",{className:"ml-2 text-green-600 text-lg",children:"\u2705"})]},e.id))})}),(0,o.jsxs)("div",{className:"story-container p-8 sm:p-12",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("div",{className:"text-4xl mb-4",children:x.icon}),(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:{color:"#2c3e50"},children:x.title}),(0,o.jsxs)("p",{className:"text-lg",style:{color:"#7f8c8d"},children:[x.category," \u2022 ",x.difficulty," story"]})]}),(0,o.jsx)("div",{className:"progress-indicator",children:(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsxs)("span",{className:"font-semibold",style:{color:"#196de3"},children:["Progress: ",S,"/",k," completed"]}),(0,o.jsx)("div",{className:"w-32 rounded-full h-3",style:{backgroundColor:"rgba(25, 109, 227, 0.3)"},children:(0,o.jsx)("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:S/k*100+"%",backgroundColor:"#196de3"}})})]})}),(0,o.jsx)("div",{className:"story-text text-center leading-relaxed mb-8",children:x.story.map((e,t)=>{if("text"===e.type)return(0,o.jsx)("span",{children:e.content},t);{const n=void 0!==a[e.id]?e.options[a[e.id]]:"____";return(0,o.jsx)("span",{className:"blank-button "+(void 0!==a[e.id]?"filled":""),onClick:()=>{document.getElementById(`options-${e.id}`).scrollIntoView({behavior:"smooth"})},children:n},t)}})}),(0,o.jsx)("div",{className:"space-y-8",children:x.story.filter(e=>"blank"===e.type).map(e=>(0,o.jsxs)("div",{id:`options-${e.id}`,className:"story-item",children:[(0,o.jsxs)("h3",{className:"text-lg font-semibold mb-4 text-center",style:{color:"#2c3e50"},children:["Choose the best word for blank #",e.id+1,":"]}),(0,o.jsx)("div",{className:"options-container",children:e.options.map((t,n)=>(0,o.jsx)("button",{onClick:()=>((e,t)=>{l({...a,[e]:t})})(e.id,n),className:"option-button "+(a[e.id]===n?"selected":""),children:t},n))})]},e.id))}),(0,o.jsx)("div",{className:"text-center mt-12",children:(0,o.jsx)("button",{onClick:async()=>{console.log("\ud83c\udfaf Starting story completion check...");let e=0;const n=x.story.filter(e=>"blank"===e.type);console.log("\ud83d\udcdd User answers:",a),console.log("\u2705 Correct answers:"),n.forEach(t=>{const n=a[t.id],r=t.correct,s=n===r;console.log(`   Blank ${t.id}: user=${n}, correct=${r}, isCorrect=${s}`),console.log(`   Options: [${t.options.join(", ")}]`),console.log(`   User chose: "${t.options[n]}", Correct: "${t.options[r]}"`),s&&e++});const r=Math.round(e/k*100);console.log(`\ud83d\udcca Final score: ${e}/${k} = ${r}%`);try{console.log("\ud83c\udf1f Awarding XP for story completion...");const n=await T(t.username,"LESSON_COMPLETE",{correctAnswers:e,totalQuestions:k,perfectScore:100===r});console.log("\u2705 XP result:",n);const s={completed:!0,score:r,xpEarned:n.xpEarned,correctAnswers:e,totalQuestions:k,completedAt:new Date,storyId:x.id,storyTitle:x.title,storyCategory:x.category,difficulty:x.difficulty,userAnswers:a};console.log("\ud83d\udcbe Saving story progress to Firebase with data:",s);const i=`story-${x.id}`;console.log("\ud83c\udff7\ufe0f Saving with lesson ID:",i);const o=await h(t.username,i,s);o&&o.success?(console.log("\u2705 Story progress saved successfully to Firebase!"),g(e=>{const t=new Set([...e,x.id]);return console.log("\ud83d\udcda Updated completed stories:",Array.from(t)),t})):console.error("\u274c Failed to save story progress:",o),p({score:r,correctCount:e,totalBlanks:k,xpEarned:n.xpEarned,leveledUp:n.leveledUp,newLevel:n.level})}catch(s){console.error("\u274c Error in story completion:",s),p({score:r,correctCount:e,totalBlanks:k,xpEarned:0})}u(!0)},disabled:!E,className:"px-8 py-4 rounded-xl font-semibold text-lg transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",style:{backgroundColor:E?"#27ae60":"#d1d5db",color:"white"},children:E?"\ud83d\udcd6 Complete Story!":`Fill ${k-S} more blanks`})})]})]}),c&&100===(null===f||void 0===f?void 0:f.score)&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] pointer-events-none",children:(0,o.jsx)("div",{className:"text-8xl font-black text-yellow-400 drop-shadow-2xl transform -rotate-12",style:{animation:"perfectPop 3s ease-out forwards"},children:"\u2605 PERFECT STORY! \u2605"})}),c&&(null===f||void 0===f?void 0:f.leveledUp)&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[65] pointer-events-none",children:(0,o.jsxs)("div",{className:"text-6xl font-black text-purple-400 drop-shadow-2xl",style:{animation:"levelUpPop 2.5s ease-out forwards"},children:["\ud83c\udf89 LEVEL ",f.newLevel,"! \ud83c\udf89"]})}),c&&f&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:(0,o.jsx)("div",{className:"p-6 text-center",children:(()=>{const e=(t=f.score)>=90?{emoji:"\ud83c\udfc6",title:"Perfect!",message:"You mastered this story!"}:t>=80?{emoji:"\ud83c\udf89",title:"Excellent!",message:"Great storytelling!"}:t>=70?{emoji:"\ud83d\udc4d",title:"Good Work!",message:"Nice job with the context!"}:t>=60?{emoji:"\ud83d\udcaa",title:"Keep Going!",message:"You're improving!"}:{emoji:"\ud83e\udd17",title:"Try Again!",message:"Practice makes perfect!"};var t;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"text-5xl mb-4",children:e.emoji}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"#2c3e50"},children:e.title}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:e.message}),(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 text-white rounded-lg p-4 mb-6",children:[(0,o.jsxs)("div",{className:"text-3xl font-bold",children:[f.score,"%"]}),(0,o.jsxs)("div",{className:"text-sm",children:[f.correctCount,"/",f.totalBlanks," correct"]}),(0,o.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:["+",f.xpEarned," XP earned!"]}),f.leveledUp&&(0,o.jsxs)("div",{className:"text-sm font-bold mt-2",children:["\ud83c\udf89 Level Up! You're now Level ",f.newLevel,"!"]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[f.score<100&&(0,o.jsx)("button",{onClick:C,className:"w-full py-3 rounded-lg font-medium text-white",style:{backgroundColor:"#e74c3c"},children:"Try Again"}),s<w.length-1&&(0,o.jsx)("button",{onClick:_,className:"w-full py-3 rounded-lg font-medium text-white",style:{backgroundColor:"#196de3"},children:"Next Story"}),(0,o.jsx)("button",{onClick:()=>u(!1),className:"w-full py-3 rounded-lg font-medium border border-gray-300 text-gray-600",children:"Continue This Story"})]})]})})()})})})]})]})},j=e=>{let{user:t,onBack:n}=e;const[s,i]=(0,r.useState)(0),[a,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(null),[f,p]=(0,r.useState)([]),[m,g]=(0,r.useState)([]),[y,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(0),[x,k]=(0,r.useState)(!1),[S,E]=(0,r.useState)(null),[_,C]=(0,r.useState)(new Set),[N,I]=(0,r.useState)(!0);(0,r.useEffect)(()=>{A()},[t.username]);const A=async()=>{try{console.log("\ud83c\udfaf Loading word match progress for:",t.username);const e=await d(t.username);if(e.success&&e.student&&e.student.progress){const t=Object.entries(e.student.progress||{}).filter(e=>{let[t,n]=e;return t.startsWith("wordmatch-")&&n.completed}).map(e=>{let[t]=e;return t.replace("wordmatch-","")});console.log("\u2705 Found completed word match rounds:",t),C(new Set(t))}}catch(e){console.error("\u274c Error loading word match progress:",e)}finally{I(!1)}},P=[{id:"basic-1",title:"Basic Words 1",difficulty:"easy",icon:"\ud83c\udf1f",pairs:[{english:"Hello",portuguese:"Ol\xe1"},{english:"Goodbye",portuguese:"Tchau"},{english:"Thank you",portuguese:"Obrigado"},{english:"Please",portuguese:"Por favor"},{english:"Water",portuguese:"\xc1gua"}]},{id:"basic-2",title:"Basic Words 2",difficulty:"easy",icon:"\u2b50",pairs:[{english:"House",portuguese:"Casa"},{english:"Family",portuguese:"Fam\xedlia"},{english:"Friend",portuguese:"Amigo"},{english:"Food",portuguese:"Comida"},{english:"Money",portuguese:"Dinheiro"}]},{id:"colors",title:"Colors",difficulty:"easy",icon:"\ud83c\udfa8",pairs:[{english:"Red",portuguese:"Vermelho"},{english:"Blue",portuguese:"Azul"},{english:"Green",portuguese:"Verde"},{english:"Yellow",portuguese:"Amarelo"},{english:"Black",portuguese:"Preto"}]},{id:"emotions",title:"Emotions",difficulty:"medium",icon:"\ud83d\ude0a",pairs:[{english:"Happy",portuguese:"Feliz"},{english:"Sad",portuguese:"Triste"},{english:"Angry",portuguese:"Bravo"},{english:"Excited",portuguese:"Animado"},{english:"Tired",portuguese:"Cansado"}]},{id:"business",title:"Business",difficulty:"hard",icon:"\ud83d\udcbc",pairs:[{english:"Meeting",portuguese:"Reuni\xe3o"},{english:"Project",portuguese:"Projeto"},{english:"Manager",portuguese:"Gerente"},{english:"Success",portuguese:"Sucesso"},{english:"Challenge",portuguese:"Desafio"}]}],j=P[s],L=[...j.pairs].sort(()=>Math.random()-.5),R=[...j.pairs].sort(()=>Math.random()-.5),D=(e,t)=>{if(j.pairs.find(n=>n.english===e&&n.portuguese===t)){const n=[...f,{english:e,portuguese:t}];p(n),w(b+10),n.length===j.pairs.length&&setTimeout(()=>{O(n.length)},500)}else g([...m,`${e}-eng`,`${t}-por`]),setTimeout(()=>{g([])},1e3);l(null),u(null)},O=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.length;const n=Math.round(e/j.pairs.length*100);v(!0);try{console.log("\ud83c\udfaf Awarding XP for word match completion...");const e=await T(t.username,"LESSON_COMPLETE",{correctAnswers:f.length,totalQuestions:j.pairs.length,perfectScore:100===n}),r={completed:!0,score:n,xpEarned:e.xpEarned,correctMatches:f.length,totalPairs:j.pairs.length,completedAt:new Date,roundId:j.id,roundTitle:j.title,difficulty:j.difficulty};console.log("\ud83d\udcbe Saving word match progress to Firebase:",r);const s=await h(t.username,`wordmatch-${j.id}`,r);s&&s.success&&(console.log("\u2705 Word match progress saved successfully!"),C(e=>new Set([...e,j.id]))),E({score:n,correctMatches:f.length,totalPairs:j.pairs.length,xpEarned:e.xpEarned,leveledUp:e.leveledUp,newLevel:e.level})}catch(r){console.error("\u274c Error completing word match:",r),E({score:n,correctMatches:f.length,totalPairs:j.pairs.length,xpEarned:0})}k(!0)},M=()=>{l(null),u(null),p([]),g([]),v(!1),w(0),k(!1),E(null)},F=()=>{s<P.length-1&&(i(s+1),M())};return N?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-t-transparent mx-auto mb-4",style:{borderColor:"#0082FF"}}),(0,o.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading word match..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:"\n        .word-card {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(16px);\n          border-radius: 16px;\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n          transition: all 0.3s ease;\n          cursor: pointer;\n          border: 2px solid transparent;\n        }\n        \n        .word-card:hover {\n          transform: translateY(-2px);\n          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n        }\n        \n        .word-card.selected {\n          border-color: #0082FF;\n          background: rgba(0, 130, 255, 0.1);\n          transform: translateY(-2px) scale(1.05);\n        }\n        \n        .word-card.matched {\n          border-color: #27ae60;\n          background: rgba(39, 174, 96, 0.1);\n          cursor: default;\n          opacity: 0.7;\n        }\n        \n        .word-card.wrong {\n          border-color: #e74c3c;\n          background: rgba(231, 76, 60, 0.1);\n          animation: shake 0.5s ease-in-out;\n        }\n        \n        @keyframes shake {\n          0%, 100% { transform: translateX(0); }\n          25% { transform: translateX(-5px); }\n          75% { transform: translateX(5px); }\n        }\n        \n        @keyframes perfectPop { \n          0% { transform: scale(0) rotate(-12deg); opacity: 0; } \n          20% { transform: scale(1.4) rotate(-12deg); opacity: 1; } \n          40% { transform: scale(1) rotate(-12deg); opacity: 1; } \n          70% { transform: scale(1) rotate(-12deg); opacity: 1; } \n          100% { transform: scale(1) rotate(-12deg); opacity: 0; } \n        }\n        \n        @keyframes levelUpPop { \n          0% { transform: scale(0) translateY(-50px); opacity: 0; } \n          25% { transform: scale(1.2) translateY(0); opacity: 1; } \n          50% { transform: scale(1) translateY(0); opacity: 1; } \n          80% { transform: scale(1) translateY(0); opacity: 1; } \n          100% { transform: scale(1) translateY(0); opacity: 0; } \n        }\n      "}),(0,o.jsxs)("div",{className:"min-h-screen pb-20",style:{background:"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)"},children:[(0,o.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,o.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-4",children:(0,o.jsxs)("div",{className:"flex items-center justify-between",children:[(0,o.jsxs)("button",{onClick:n,className:"flex items-center transition-colors",style:{color:"#7f8c8d"},onMouseEnter:e=>e.target.style.color="#2c3e50",onMouseLeave:e=>e.target.style.color="#7f8c8d",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Hub"]}),(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h1",{className:"text-xl font-bold",style:{color:"#2c3e50"},children:"Word Match"}),(0,o.jsxs)("p",{style:{color:"#7f8c8d"},className:"text-sm",children:["Match English words with Portuguese! (",_.size,"/",P.length," rounds complete)"]})]}),(0,o.jsx)("div",{className:"w-24"})]})})}),(0,o.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,o.jsx)("div",{className:"mb-8",children:(0,o.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:P.map((e,t)=>(0,o.jsxs)("button",{onClick:()=>{i(t),M()},className:"px-4 py-3 rounded-xl font-medium transition-all flex items-center "+(t===s?"bg-blue-500 text-white shadow-lg":_.has(e.id)?"bg-green-100 text-green-800 border-2 border-green-300":"bg-white text-gray-600 hover:bg-gray-50"),children:[(0,o.jsx)("span",{className:"text-lg mr-2",children:e.icon}),(0,o.jsxs)("div",{className:"text-left",children:[(0,o.jsx)("div",{className:"text-sm font-semibold",children:e.title}),(0,o.jsxs)("div",{className:"text-xs opacity-80",children:[e.difficulty," \u2022 ",e.pairs.length," words"]})]}),_.has(e.id)&&(0,o.jsx)("span",{className:"ml-2 text-green-600 text-lg",children:"\u2705"})]},e.id))})}),(0,o.jsxs)("div",{className:"bg-white rounded-3xl p-8 shadow-lg",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("div",{className:"text-4xl mb-4",children:j.icon}),(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-2",style:{color:"#2c3e50"},children:j.title}),(0,o.jsxs)("p",{className:"text-lg",style:{color:"#7f8c8d"},children:[j.difficulty," \u2022 Match ",j.pairs.length," word pairs"]})]}),(0,o.jsx)("div",{className:"text-center mb-8",children:(0,o.jsx)("div",{className:"inline-block bg-blue-100 rounded-2xl px-6 py-3",children:(0,o.jsxs)("span",{className:"text-2xl font-bold text-blue-600",children:[f.length,"/",j.pairs.length," matched"]})})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4 text-center",style:{color:"#0082FF"},children:"\ud83c\uddfa\ud83c\uddf8 English"}),(0,o.jsx)("div",{className:"space-y-3",children:L.map((e,t)=>{const n=f.find(t=>t.english===e.english),r=(null===a||void 0===a?void 0:a.word)===e.english,s=m.includes(`${e.english}-eng`);return(0,o.jsx)("div",{onClick:()=>((e,t)=>{f.find(t=>t.english===e)||m.includes(`${e}-eng`)||(l({word:e,index:t}),c&&D(e,c.word))})(e.english,t),className:"word-card p-4 "+(n?"matched":r?"selected":s?"wrong":""),children:(0,o.jsx)("div",{className:"text-center text-lg font-medium",style:{color:"#2c3e50"},children:e.english})},`eng-${t}`)})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-semibold mb-4 text-center",style:{color:"#27ae60"},children:"\ud83c\udde7\ud83c\uddf7 Portugu\xeas"}),(0,o.jsx)("div",{className:"space-y-3",children:R.map((e,t)=>{const n=f.find(t=>t.portuguese===e.portuguese),r=(null===c||void 0===c?void 0:c.word)===e.portuguese,s=m.includes(`${e.portuguese}-por`);return(0,o.jsx)("div",{onClick:()=>((e,t)=>{f.find(t=>t.portuguese===e)||m.includes(`${e}-por`)||(u({word:e,index:t}),a&&D(a.word,e))})(e.portuguese,t),className:"word-card p-4 "+(n?"matched":r?"selected":s?"wrong":""),children:(0,o.jsx)("div",{className:"text-center text-lg font-medium",style:{color:"#2c3e50"},children:e.portuguese})},`por-${t}`)})})]})]}),(0,o.jsx)("div",{className:"text-center mt-8 text-sm",style:{color:"#7f8c8d"},children:"Click one English word and one Portuguese word to match them!"})]})]}),x&&100===(null===S||void 0===S?void 0:S.score)&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[60] pointer-events-none",children:(0,o.jsx)("div",{className:"text-8xl font-black text-yellow-400 drop-shadow-2xl transform -rotate-12",style:{animation:"perfectPop 3s ease-out forwards"},children:"\u2605 PERFECT MATCH! \u2605"})}),x&&(null===S||void 0===S?void 0:S.leveledUp)&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-[65] pointer-events-none",children:(0,o.jsxs)("div",{className:"text-6xl font-black text-purple-400 drop-shadow-2xl",style:{animation:"levelUpPop 2.5s ease-out forwards"},children:["\ud83c\udf89 LEVEL ",S.newLevel,"! \ud83c\udf89"]})}),x&&S&&(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:(0,o.jsx)("div",{className:"p-6 text-center",children:(()=>{const e=(e=>e>=90?{emoji:"\ud83c\udfc6",title:"Perfect!",message:"You know these words!"}:e>=80?{emoji:"\ud83c\udf89",title:"Excellent!",message:"Great vocabulary!"}:e>=70?{emoji:"\ud83d\udc4d",title:"Good Work!",message:"Keep practicing!"}:{emoji:"\ud83d\udcaa",title:"Try Again!",message:"Practice makes perfect!"})(S.score);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"text-5xl mb-4",children:e.emoji}),(0,o.jsx)("h2",{className:"text-2xl font-bold mb-2",style:{color:"#2c3e50"},children:e.title}),(0,o.jsx)("p",{className:"text-gray-600 mb-4",children:e.message}),(0,o.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-green-500 text-white rounded-lg p-4 mb-6",children:[(0,o.jsxs)("div",{className:"text-3xl font-bold",children:[S.score,"%"]}),(0,o.jsxs)("div",{className:"text-sm",children:[S.correctMatches,"/",S.totalPairs," words matched"]}),(0,o.jsxs)("div",{className:"text-xs opacity-90 mt-1",children:["+",S.xpEarned," XP earned!"]}),S.leveledUp&&(0,o.jsxs)("div",{className:"text-sm font-bold mt-2",children:["\ud83c\udf89 Level Up! You're now Level ",S.newLevel,"!"]})]}),(0,o.jsxs)("div",{className:"space-y-3",children:[S.score<100&&(0,o.jsx)("button",{onClick:M,className:"w-full py-3 rounded-lg font-medium text-white",style:{backgroundColor:"#e74c3c"},children:"Try Again"}),s<P.length-1&&(0,o.jsx)("button",{onClick:F,className:"w-full py-3 rounded-lg font-medium text-white",style:{backgroundColor:"#0082FF"},children:"Next Round"}),(0,o.jsx)("button",{onClick:()=>k(!1),className:"w-full py-3 rounded-lg font-medium border border-gray-300 text-gray-600",children:"Continue This Round"})]})]})})()})})})]})]})},L=e=>{let{user:t,onLogout:n}=e;const[s,i]=(0,r.useState)("hub"),[a,l]=(0,r.useState)({}),[c,u]=(0,r.useState)(null),[f,p]=(0,r.useState)(!0);(0,r.useEffect)(()=>{v();const e=e=>{e.state&&e.state.view?(i(e.state.view),l(e.state.params||{}),"hub"===e.state.view&&v()):(i("hub"),l({}),v())};return window.addEventListener("popstate",e),window.history.replaceState({view:"hub",params:{}},"",""),()=>{window.removeEventListener("popstate",e)}},[]);const v=async()=>{try{const e=await d(t.username);e.success?u(e.student):console.error("Failed to load student data:",e.error)}catch(e){console.error("Error loading student data:",e)}p(!1)},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(e),l(t),"hub"===e&&v(),window.history.pushState({view:e,params:t},"","")};return f?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f8fafc"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-2 border-t-transparent mx-auto mb-4",style:{borderColor:"#3b82f6"}}),(0,o.jsx)("p",{className:"text-slate-600 font-medium",children:"Loading your portal..."})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{children:'\n        .premium-header {\n          background: linear-gradient(135deg, #196de3 0%, #1e40af 100%);\n          box-shadow: 0 8px 32px rgba(25, 109, 227, 0.25);\n        }\n        \n        .header-pattern {\n          background-image: radial-gradient(circle at 25% 25%, rgba(255, 255, 255, 0.08) 2px, transparent 2px);\n          background-size: 48px 48px;\n        }\n        \n        .academy-badge {\n          background: #D32F2F;\n          border: 1px solid rgba(255, 255, 255, 0.2);\n          box-shadow: 0 4px 16px rgba(211, 47, 47, 0.4);\n        }\n\n        .academy-title-red {\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          font-weight: 400;\n          font-size: 2rem;\n          letter-spacing: 0.015em;\n          color: rgba(255, 255, 255, 0.95);\n        }\n        \n        .academy-title {\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          font-weight: 300;\n          font-size: 2.5rem;\n          letter-spacing: 0.02em;\n          color: white;\n          text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n        }\n        \n        .student-glass {\n          background: rgba(255, 255, 255, 0.15);\n          backdrop-filter: blur(20px);\n          border: 1px solid rgba(255, 255, 255, 0.25);\n          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);\n        }\n        \n        .protected-name {\n          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;\n          font-weight: 400;\n          letter-spacing: 0.015em;\n          color: rgba(255, 255, 255, 0.95);\n        }\n        \n        .back-button {\n          transition: all 0.3s ease;\n          color: rgba(255, 255, 255, 0.9);\n          font-weight: 300;\n        }\n        \n        .back-button:hover {\n          color: white;\n          transform: translateX(-4px);\n        }\n        \n        .bottom-logout {\n          background: rgba(255, 255, 255, 0.95);\n          backdrop-filter: blur(16px);\n          border: 1px solid rgba(255, 255, 255, 0.5);\n          transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n        }\n        \n        .bottom-logout:hover {\n          background: rgba(255, 255, 255, 1);\n          transform: translateY(-2px);\n          box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);\n        }\n        \n        @media (max-width: 768px) {\n          .academy-title {\n            font-size: 2rem;\n          }\n        }\n      '}),(0,o.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:"#f8fafc"},children:[(0,o.jsxs)("div",{className:"premium-header text-white relative overflow-hidden",children:[(0,o.jsx)("div",{className:"header-pattern absolute inset-0 opacity-40"}),(0,o.jsxs)("div",{className:"relative max-w-7xl mx-auto px-6 py-8",children:["hub"!==s&&(0,o.jsx)("div",{className:"mb-6",children:(0,o.jsxs)("button",{onClick:()=>b("hub"),className:"back-button flex items-center text-lg",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 19l-7-7 7-7"})}),"Back to Hub"]})}),(0,o.jsxs)("div",{className:"text-center mb-6",children:[(0,o.jsx)("div",{className:"inline-block mb-4",children:(0,o.jsx)("div",{className:"academy-badge px-8 py-4 rounded-2xl",children:(0,o.jsx)("h1",{className:"academy-title-red",children:"Teacher Alex's English Academy"})})}),(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"student-glass px-6 py-3 rounded-2xl inline-block",children:(0,o.jsxs)("h2",{className:"protected-name text-lg",children:["Welcome back, ",(null===c||void 0===c?void 0:c.name)||t.username]})})})]})]})]}),(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:["hub"===s&&(0,o.jsx)(m,{studentData:c,onNavigate:b}),"story-completion"===s&&(0,o.jsx)(P,{user:t,onBack:()=>b("hub")}),"word-match"===s&&(0,o.jsx)(j,{user:t,onBack:()=>b("hub")}),"lessons"===s&&(0,o.jsx)(g,{user:t,onBack:()=>b("hub"),onSeriesSelect:(e,t)=>{b("lessons-list",{seriesId:e,seriesTitle:t})}}),"lessons-list"===s&&(0,o.jsx)(y,{user:t,seriesId:a.seriesId,seriesTitle:a.seriesTitle,onBack:()=>b("lessons"),onLessonSelect:(e,t)=>{b("lesson-player",{lesson:e,seriesId:t,seriesTitle:a.seriesTitle})}}),"lesson-player"===s&&(0,o.jsx)(A,{user:t,lesson:a.lesson,seriesId:a.seriesId,onBack:()=>b("lessons-list",{seriesId:a.seriesId,seriesTitle:a.seriesTitle}),onComplete:async e=>{try{console.log("\ud83d\udd0d DEBUG - All data:"),console.log("- results:",e),console.log("- viewParams:",a),console.log("- viewParams.seriesId:",a.seriesId),console.log("- results.lessonId:",e.lessonId),console.log("- user.username:",t.username);const n=50+10*e.correctAnswers,r={completed:!0,score:e.score,xpEarned:n,correctAnswers:e.correctAnswers,totalQuestions:e.totalQuestions,completedAt:new Date,seriesName:a.seriesId};if(console.log("\ud83d\udcdd Progress data to save:",r),!e.lessonId)return void console.error("\u274c Lesson ID is undefined!");if(!a.seriesId)return void console.error("\u274c Series ID is undefined!");const s=await h(t.username,e.lessonId,r);s&&s.success?(console.log("\u2705 Progress saved successfully!"),await v()):console.error("\u274c Failed to save progress:",s)}catch(n){console.error("\u274c Error saving lesson progress:",n)}b("lessons-list",{seriesId:a.seriesId,seriesTitle:a.seriesTitle})}})]}),(0,o.jsx)("div",{className:"max-w-7xl mx-auto px-6 pb-8",children:(0,o.jsx)("div",{className:"text-center",children:(0,o.jsx)("button",{onClick:n,className:"bottom-logout px-8 py-4 rounded-2xl font-medium text-slate-700 hover:text-slate-900",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})})})]})]})};const R=function(){const[e,t]=(0,r.useState)(null),[s,l]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=(0,i.Yk)(e=>{e?console.log("\u2705 User is logged in:",e):(console.log("\ud83d\udc4b User is logged out"),t(null)),l(!1)});return()=>e()},[]);const c=e=>{console.log("\ud83c\udf89 Login successful in App:",e),t(e)},u=async()=>{const{logout:e}=await Promise.resolve().then(n.bind(n,719));await e(),t(null)};return s?(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#ecf0f1"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderBottomColor:"#196de3"}}),(0,o.jsx)("p",{style:{color:"#7f8c8d"},children:"Loading Teacher Alex's Academy..."})]})}):e?"teacher"===e.role?(0,o.jsx)(p,{user:e,onLogout:u}):"student"===e.role?(0,o.jsx)(L,{user:e,onLogout:u}):(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#ecf0f1"},children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h2",{className:"text-xl font-bold mb-4",style:{color:"#2c3e50"},children:"Unknown user role"}),(0,o.jsx)("button",{onClick:u,className:"text-white px-4 py-2 rounded-lg transition-colors",style:{backgroundColor:"#bf3d30"},onMouseEnter:e=>e.target.style.filter="brightness(0.9)",onMouseLeave:e=>e.target.style.filter="brightness(1)",children:"Logout"})]})}):(0,o.jsx)(a,{onLoginSuccess:c})};s.createRoot(document.getElementById("root")).render((0,o.jsx)(r.StrictMode,{children:(0,o.jsx)(R,{})}))})();
//# sourceMappingURL=main.1ea9557c.js.map